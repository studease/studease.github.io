playease=function(){if(playease.API)return playease.API.get.apply(this,arguments)},playease.VERSION="2.1.79",playease.DEBUG=!1,function(a){var i={extendz:function(){var e=Array.prototype.slice.call(arguments,0),r=e[0];switch(i.typeOf(r)){case"null":case"number":case"string":throw{name:"TypeError",message:"Could not extend to type "+i.typeOf(r)+"."}}for(var t=1;t<e.length;t++){var n=e[t];switch(i.typeOf(n)){case"null":case"number":case"string":a.DEBUG&&i.warn("Could not extend from type "+i.typeOf(n)+".");break;case"array":i.forEach(n,function(e,t){switch(i.typeOf(t)){case"object":r.push(i.extendz({},t));break;case"array":r.push(i.extendz([],t));break;default:"array"===i.typeOf(r)?r.push(t):r[e]=t}});break;default:i.forEach(n,function(e,t){switch(i.typeOf(t)){case"object":switch(i.typeOf(r[e])){case"null":case"number":case"string":r[e]={}}r[e]=i.extendz(r[e],t);break;case"array":r[e]=i.extendz([],t);break;default:r[e]=t}})}}return r},forEach:function(e,t){for(var r in e)(!e.hasOwnProperty||"function"!==i.typeOf(e.hasOwnProperty)||e.hasOwnProperty(r))&&t(r,e[r])},getCookie:function(e){e=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(e=document.cookie.match(e))?unescape(e[2]):null},padStart:function(e,t,r){for(e+="";e.length<t;)e=r+e;return e},padEnd:function(e,t,r){for(e+="";e.length<t;)e+=r;return e},hex:function(e){return"0x"+i.padStart(e.toString(16),2,"0")},time2string:function(e){var t="",r=e/3600|0,n=e%3600/60|0,e=e%60|0;return r&&(t+=i.padStart(r,2,"0")+":"),t+=i.padStart(n,2,"0")+":"+i.padStart(e,2,"0")},formatBytes:function(e){for(var t=["B","KB","MB","GB","TB"],r=0;r<t.length;r++){if(e<1024||r===t.length-1)return e.toFixed(3)+" "+t[r];e/=1024}return e.toFixed(3)+" B"},typeOf:function(e){if(null==e)return"null";var t=typeof e;if("object"==t)try{var r=Object.prototype.toString.call(e).match(/^\[object ([a-z]+)\]$/i);if(r&&1<r.length&&r[1])return r[1].toLowerCase()}catch(e){}return t},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},indexOf:function(e,t){if("array"===i.typeOf(e))for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}};void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.MAX_SAFE_INTEGER&&(Number.MAX_SAFE_INTEGER=Math.pow(2,53)-1),void 0===Number.MIN_SAFE_INTEGER&&(Number.MIN_SAFE_INTEGER=-1*Number.MAX_SAFE_INTEGER),i.equal=function(e,t){return Math.abs(e-t)<Number.EPSILON},i.createElement=function(e,t){e=document.createElement(e);return t&&(e.className=t),e},i.addClass=function(e,t){var r="string"===i.typeOf(e.className)?e.className.split(" "):[],t="array"===i.typeOf(t)?t:t.split(" ");i.forEach(t,function(e,t){-1===i.indexOf(r,t)&&r.push(t)}),e.className=i.trim(r.join(" "))},i.hasClass=function(e,t){for(var r=e.className||"",n="array"===i.typeOf(t)?t:t.split(" "),a=0;a<n.length;a++){var o=new RegExp("\\b"+n[a]+"\\b","i");if(-1===r.search(o))return!1}return!0},i.removeClass=function(e,t){var r="string"===i.typeOf(e.className)?e.className.split(" "):[],t="array"===i.typeOf(t)?t:t.split(" ");i.foreach(t,function(e,t){t=i.indexOf(r,t);0<=t&&r.splice(t,1)}),e.className=i.trim(r.join(" "))},i.emptyElement=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)};var t=window.console||{log:function(){},warn:function(){},error:function(){}};i.debug=function(){var e;a.DEBUG&&(e=Array.prototype.slice.call(arguments,0),i.log.apply(i,e))},i.log=function(){var e=Array.prototype.slice.call(arguments,0);"object"==typeof t?t.log.apply(t,e):t.log(e)},i.warn=function(){var e=Array.prototype.slice.call(arguments,0);"object"==typeof t?t.warn.apply(t,e):t.warn(e)},i.error=function(){var e=Array.prototype.slice.call(arguments,0);"object"==typeof t?t.error.apply(t,e):t.error(e)},a.utils=i}(playease),function(){var i=playease.utils,c={DOUBLE:0,BOOLEAN:1,STRING:2,OBJECT:3,MOVIE_CLIP:4,NULL:5,UNDEFINED:6,REFERENCE:7,ECMA_ARRAY:8,END_OF_OBJECT:9,STRICT_ARRAY:10,DATE:11,LONG_STRING:12,UNSUPPORTED:13,RECORD_SET:14,XML:15,TYPED_OBJECT:16,AMF3_DATA:17};function l(e){var o=this;o.set=function(e,t,r){switch(o.type){case c.DOUBLE:if("number"!==i.typeOf(t))throw{name:"TypeError",message:"Value should be number."};break;case c.BOOLEAN:if("boolean"!==i.typeOf(t))throw{name:"TypeError",message:"Value should be boolean."};case c.STRING:case c.LONG_STRING:if("string"!==i.typeOf(t))throw{name:"TypeError",message:"Value should be string."};break;case c.OBJECT:case c.ECMA_ARRAY:if("array"!==i.typeOf(t))throw{name:"TypeError",message:"Value should be array."};for(var n=0;n<t.length;n++){var a=t[n];o.table[a.key]=a}break;case c.STRICT_ARRAY:if("array"!==i.typeOf(t))throw{name:"TypeError",message:"Value should be array."};break;case c.DATE:if("number"!==i.typeOf(t))throw{name:"TypeError",message:"Value should be number."};if("number"!==i.typeOf(r))throw{name:"TypeError",message:"Offset not presented."};o.offset=r;break;case c.NULL:case c.UNDEFINED:if("null"!==i.typeOf(t))throw{name:"TypeError",message:"Value should be null."};break;default:throw{name:"TypeError",message:"Unrecognized amf type "+o.type+"."}}return o.key=e,o.value=t,o},o.get=function(){return o.type!==c.DATE?o.value:new Date(o.value+60*o.offset*1e3)},o.type=e,o.key="",o.value=null,o.table={},o.offset=0,o.ended=!1}function n(e,t){for(var r=0,n=0;n<t.value.length;n++){var a=t.value[n];a.key&&(a=crypt.stringToByteArray(a.key),e.WriteUint16(a.length,!1),e.Write(a),r+=2+a.length),r+=c.encode(e,t)}return r}c.decode=function(e,t,r){if(t.byteLength<1)throw{name:"DataError",message:"Data not enough while decoding amf Value."};var n=0,a=new DataView(t,r);e.type=a.getUint8(0),++n;a={0:c.decodeDouble,1:c.decodeBoolean,2:c.decodeString,3:c.decodeObject,5:c.decodeNull,6:c.decodeUndefined,8:c.decodeECMAArray,9:c.decodeEndOfObject,10:c.decodeStrictArray,11:c.decodeDate,12:c.decodeLongString}[e.type];if(!a)throw{name:"TypeError",message:"Unrecognized amf type "+e.type+"."};return n+=a(e,t,r+1)},c.decodeDouble=function(e,t,r){if(t.byteLength<8)throw{name:"DataError",message:"Data not enough while decoding amf double."};r=new DataView(t,r);return e.value=r.getFloat64(0),8},c.decodeBoolean=function(e,t,r){if(t.byteLength<1)throw{name:"DataError",message:"Data not enough while decoding amf boolean."};r=new DataView(t,r);return e.value=!!r.getUint8(0),1},c.decodeString=function(e,t,r){if(t.byteLength<2)throw{name:"DataError",message:"Data not enough while decoding amf string."};var n=0,a=new DataView(t,r).getUint16(n);return n+=2,0<a?(e.value=String.fromCharCode.apply(String,new Uint8Array(t,r+n,a)),n+=a):e.value="",n},c.decodeObject=function(e,t,r){if(t.byteLength<3)throw{name:"DataError",message:"Data not enough while decoding amf object."};var n=0,a=t.byteLength-r;for(e.value=[];n<a;){var o=new l;if(n+=c.decodeString(o,t,r+n),o.key=o.get(),n+=c.decode(o,t,r+n),o.type===c.END_OF_OBJECT)break;e.value.push(o),e.table[o.key]=o}return n},c.decodeNull=function(e,t,r){return e.value=null,0},c.decodeUndefined=function(e,t,r){return e.value=void 0,0},c.decodeECMAArray=function(e,t,r){if(t.byteLength<4)throw{name:"DataError",message:"Data not enough while decoding amf ecma array."};var n=4;return n+=c.decodeObject(e,t,r+4)},c.decodeEndOfObject=function(e,t,r){return e.ended=!0,0},c.decodeStrictArray=function(e,t,r){if(t.byteLength<4)throw{name:"DataError",message:"Data not enough while decoding amf strict array."};var n=0,a=new DataView(t,r),o=a.getUint32(n);n+=4;var i=t.byteLength-r;e.value=[];for(var s=0;s<o&&n<i;s++){var d=new l;n+=c.decode(d,t,r+n),e.value.push(d)}return n+3<=i&&0===a.getUint8(n)&&0===a.getUint8(n+1)&&a.getUint8(n+2)===c.END_OF_OBJECT&&(e.ended=!0,n+=3),n},c.decodeDate=function(e,t,r){if(t.byteLength<10)throw{name:"DataError",message:"Data not enough while decoding amf date."};r=new DataView(t,r);return e.Timestamp=r.getFloat64(0),e.Timeoffset=r.getInt16(8),10},c.decodeLongString=function(e,t,r){if(t.byteLength<4)throw{name:"DataError",message:"Data not enough while decoding amf long string."};var n=0,a=new DataView(t,r).getUint32(n);return n+=4,0<a&&(e.value=String.fromCharCode.apply(String,new Uint8Array(t,r+n,a)),n+=a),n},c.appendBytes=function(e,t){e.Write(t)},c.appendInt8=function(e,t){e.writeInt8(t)},c.appendInt16=function(e,t,r){e.WriteInt16(t,r)},c.appendInt32=function(e,t,r){e.WriteInt32(t,r)},c.appendUint8=function(e,t){e.writeUint8(t)},c.appendUint16=function(e,t,r){e.WriteUint16(t,r)},c.appendUint32=function(e,t,r){e.WriteUint32(t,r)},c.encode=function(e,t){var r={0:c.encodeDouble,1:c.encodeBoolean,2:c.encodeString,3:c.encodeObject,5:c.encodeNull,6:c.encodeUndefined,8:c.encodeECMAArray,10:c.encodeStrictArray,11:c.encodeDate,12:c.encodeLongString}[t.type];if(!r)throw{name:"TypeError",message:"Unrecognized amf type "+t.type+"."};return r(e,t)},c.encodeNumber=function(e,t){return e.WriteUint8(c.DOUBLE),e.WriteFloat64(t.value,!1),9},c.encodeBoolean=function(e,t){return e.WriteUint8(c.BOOLEAN),e.WriteUint8(t.value?1:0),2},c.encodeString=function(e,t){if(!t.value)return 0;if(65535<=t.value.length)return c.encodeLongString(e,t);t=crypt.stringToByteArray(t.value);return e.WriteUint8(c.STRING),e.WriteUint16(t.length,!1),e.Write(t),3+t.length},c.encodeObject=function(e,t){var r=1;return e.WriteUint8(c.OBJECT),r+=n(t),t.ended&&(e.WriteUint16(0),e.WriteUint8(c.END_OF_OBJECT),r+=3),r},c.encodeNull=function(e,t){return e.WriteUint8(c.NULL),1},c.encodeUndefined=function(e,t){return e.WriteUint8(c.UNDEFINED),1},c.encodeECMAArray=function(e,t){var r=3;return e.WriteUint8(c.ECMA_ARRAY),e.WriteUint32(t.value.length,!1),r+=n(e,t)},c.encodeStrictArray=function(e,t){var r=3;return e.WriteUint8(c.STRICT_ARRAY),e.WriteUint32(t.value.length,!1),r+=n(e,t)},c.encodeDate=function(e,t){return e.WriteUint8(c.DATE),e.WriteFloat64(t.value,!1),e.WriteUint16(t.offset,!1),11},c.encodeLongString=function(e,t){if(!t.value)return 0;t=crypt.stringToByteArray(t.value);return e.WriteUint8(c.LONG_STRING),e.WriteUint32(t.length,!1),e.Write(t),5+t.length},c.Value=l,i.AMF=c}(),function(){var e=playease.utils;e.MIN_UINT32=0,e.MAX_UINT32=-1>>>0,e.MAX_INT32=-1>>>1,e.MIN_INT32=1<<31,e.MIN_CACHE_BITS=25,e.BitStream=function(e){var n,a,o,r=this;r.ShowBits=function(e){if(0===e)return 0;var t=o>>>3,r=0;return o<a&&(r=n.getUint8(t)<<24),o+8<a&&(r|=n.getUint8(1+t)<<16),o+16<a&&(r|=n.getUint8(2+t)<<8),o+24<a&&(r|=n.getUint8(3+t)),r<<(7&o)>>>32-e},r.ShowBitsLong=function(e){return e<=25?r.ShowBits(e):r.ShowBits(16)<<e-16|r.ShowBits(e-16)},r.ReadBits=function(e){var t=r.ShowBits(e);return o+=e,t},r.ReadBitsLong=function(e){var t=r.ShowBitsLong(e);return o+=e,t},r.SkipBits=function(e){o+=e},r.Left=function(){return a-o},n=new DataView(e.buffer,e.byteOffset,e.byteLength),a=8*e.byteLength,o=0}}(),function(e){var t=new function(){var t,e,n=this;function r(){return t.match(/(Chrome|CriOS)\/((\d+)\.(\d+)(?:\.\d+)*)/)}function a(){return void 0!==window.orientation?90===window.orientation||-90===window.orientation:window.innerWidth>window.innerHeight}t=navigator.userAgent,n.OS={name:"",version:"",major:NaN,minor:NaN},n.Kernel={name:"",version:"",major:NaN,minor:NaN},n.Browser={name:"",version:"",major:NaN,minor:NaN},function(){var e=function(){var e=t.match(/(Windows)\sNT\s((\d+)\.(\d+))/);if(e)switch(e[2]){case"6.3":e=["Windows 8.1","Windows","8.1","8","1"];break;case"6.2":e=["Windows 8.0","Windows","8.0","8","0"];break;case"6.1":e=["Windows 7.0","Windows","7.0","7","0"]}return e}()||t.match(/(Mac)\sOS\sX\s((\d+)[\._](\d+)(?:[\._]\d+)*)/)||t.match(/(Android)(?:\s((\d+)(?:\.(\d+))?(?:\.(\d+))*))?/)||t.match(/(iP(?:hone|ad|od)).*\s((\d+)_(\d+)(?:_\d+)*)/)||t.match(/(Windows\sPhone)(?:\sOS)?\s((\d+)\.(\d+)(?:\.\d+)*)/);e&&(n.OS.name=e[1]||"",n.OS.version=(e[2]||"").replace(/_/g,"."),n.OS.major=parseInt(e[3]),n.OS.minor=parseInt(e[4]));n.OS.isWindows="Windows"===n.OS.name,n.OS.isMac="Mac"===n.OS.name,n.OS.isAndroid="Android"===n.OS.name,n.OS.isIOS="iPhone"===n.OS.name||"iPad"===n.OS.name||"iPod"===n.OS.name,n.OS.isWindowsPhone="Windows Phone"===n.OS.name,n.OS.isMobile=n.OS.isAndroid||n.OS.isIOS||n.OS.isWindowsPhone,n.OS.isHorizontal=a}(),(e=n.OS.isAndroid&&t.match(/;\s(([-a-z\d\s]+)(?:\sBuild\/([-a-z\d\.\s]+))?)(?:;\swv|\))/i))&&(n.OS.model=e[1],n.OS.brand=e[2],n.OS.build=e[3]),function(){var e=!n.OS.isIOS&&r()||t.match(/(AppleWebKit)\/((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/(Gecko)\/((\d+)(?:\.(\d+))?(?:\d+)*)/)||t.match(/(Presto)\/((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/(Trident)\/((\d+)\.(\d+)(?:\.\d+)*)/);e&&(n.Kernel.name=e[1]||"",n.Kernel.version=e[2]||"",n.Kernel.major=parseInt(e[3]),n.Kernel.minor=parseInt(e[4]));n.Kernel.isChrome="Chrome"===n.Kernel.name,n.Kernel.isAppleWebKit="AppleWebKit"===n.Kernel.name,n.Kernel.isGecko="Gecko"===n.Kernel.name,n.Kernel.isPresto="Presto"===n.Kernel.name,n.Kernel.isTrident="Trident"===n.Kernel.name}(),function(){var e=t.match(/(MSIE)\s((\d+)\.(\d+))/)||t.match(/(Trident)\/.+rv:((11)\.(\d+))/i)||t.match(/(Firefox)\/((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/(OPR|OPiOS|Opera\sMini)\/((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/(UCBrowser)\/((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/(MicroMessenger)\/((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/(QQ)\/((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/([M]?QQBrowser)\/((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/(MetaSr|SogouMobileBrowser)[\s\/]((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/(QihooBrowser|360browser)(?:\/((\d+)\.(\d+)(?:\.\d+)*))?/)||t.match(/(Electron)(?:\/((\d+)\.(\d+)(?:\.\d+)*))?/)||t.match(/(Edg|Edge|EdgA)\/((\d+)\.(\d+)(?:\.\d+)*)/)||r()||function(){if(n.OS.isAndroid||r()||!t.match(/Safari/))return null;var e=t.match(/Version\/((\d+)\.(\d+)(?:\.\d+)*)/);if(e)return["Safari/"+e[1],"Safari"].concat(e.slice(1));return null}()||t.match(/\s([a-z\d]+Browser)\/((\d+)\.(\d+)(?:\.\d+)*)/i)||t.match(/\s([a-z\d]+)\/((\d+)\.(\d+)(?:\.\d+)*)$/i);e&&(n.Browser.name=e[1]||"",n.Browser.version=e[2]||"",n.Browser.major=parseInt(e[3]),n.Browser.minor=parseInt(e[4]));n.Browser.isMSIE="MSIE"===n.Browser.name,n.Browser.isIE8="MSIE"===n.Browser.name&&8===n.Browser.major,n.Browser.isIE9="MSIE"===n.Browser.name&&9===n.Browser.major,n.Browser.isIE10="MSIE"===n.Browser.name&&10===n.Browser.major,n.Browser.isIE11="Trident"===n.Browser.name,n.Browser.isIE=n.Browser.isMSIE||n.Browser.isIE11,n.Browser.isFirefox="Firefox"===n.Browser.name,n.Browser.isOpera="OPR"===n.Browser.name||"OPiOS"===n.Browser.name||"Opera Mini"===n.Browser.name,n.Browser.isUCBrowser="UCBrowser"===n.Browser.name,n.Browser.isWeChat="MicroMessenger"===n.Browser.name,n.Browser.isQQ="QQ"===n.Browser.name,n.Browser.isQQBrowser="QQBrowser"===n.Browser.name||"MQQBrowser"===n.Browser.name,n.Browser.isSogou="MetaSr"===n.Browser.name||"SogouMobileBrowser"===n.Browser.name,n.Browser.is360="QihooBrowser"===n.Browser.name,n.Browser.isElectron="Electron"===n.Browser.name,n.Browser.isEdg="Edg"===n.Browser.name,n.Browser.isEdge="Edge"===n.Browser.name,n.Browser.isEdgA="EdgA"===n.Browser.name,n.Browser.isChrome="Chrome"===n.Browser.name,n.Browser.isCriOS="CriOS"===n.Browser.name,n.Browser.isSafari="Safari"===n.Browser.name,n.Browser.flash=function(){if(!n.isWindows)return 0;var e=navigator.plugins;if(e)if((r=e["Shockwave Flash"])&&r.description){var t=r.description.replace(/\D+(\d+\.?\d*).*/,"$1");return parseFloat(t)}if(void 0!==window.ActiveXObject)try{var r;if(r=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")){t=r.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,".");return parseFloat(t)}}catch(e){}return 0}()}()};e.OS=t.OS,e.Kernel=t.Kernel,e.Browser=t.Browser}(playease),function(){var t=playease.utils,e={stringToByteArray:function(e){for(var t=[],r=0,n=0;n<e.length;n++){for(var a=e.charCodeAt(n);255<a;)t[r++]=255&a,a>>=8;t[r++]=a}return t},byteArrayToString:function(e){if(e.length<=8192)return String.fromCharCode.apply(null,e);for(var t="",r=0;r<e.length;r+=8192){var n=Array.slice(e,r,r+8192);t+=String.fromCharCode.apply(null,n)}return t},byteArrayToHex:function(e){return Array.map(e,function(e){return t.padStart(e.toString(16),2,0)}).join("")},hexToByteArray:function(e){if(e.length%2!=0)throw{name:"DataError",message:"Key string length must be multiple of 2."};for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substring(r,r+2),16));return t},stringToUTF8ByteArray:function(e){for(var t=[],r=0,n=0;n<e.length;n++){var a=e.charCodeAt(n);a<128?t[r++]=a:(a<2048?t[r++]=a>>6|192:(55296==(64512&a)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++n)),t[r++]=a>>18|240,t[r++]=a>>12&63|128):t[r++]=a>>12|224,t[r++]=a>>6&63|128),t[r++]=63&a|128)}return t},UTF8ByteArrayToString:function(e){for(var t=[],r=0,n=0;r<e.length;){var a,o,i,s=e[r++];s<128?t[n++]=String.fromCharCode(s):191<s&&s<224?(o=e[r++],t[n++]=String.fromCharCode((31&s)<<6|63&o)):239<s&&s<365?(a=((7&s)<<18|(63&(o=e[r++]))<<12|(63&(i=e[r++]))<<6|63&e[r++])-65536,t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))):(o=e[r++],i=e[r++],t[n++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&i))}return t.join("")},XORByteArray:function(e,t){if(e.length!==t.length)throw{name:"DataError",message:"XOR array lengths must match."};for(var r=[],n=0;n<e.length;n++)r.push(e[n]^t[n]);return r}};t.crypt=e}(),function(){var a,i=playease.utils;function e(t,e){var r;a||((r=document.createElement("style")).type="text/css",document.getElementsByTagName("head")[0].appendChild(r),a=r.sheet||r.styleSheet);var n="";i.foreach(e,function(e,t){n+=e+": "+t+"; "});try{a.insertRule?a.insertRule(t+" { "+n+"}",a.cssRules.length):a.addRule(t,n,a.rules.length)}catch(e){throw{name:"AbortError",message:"Failed to insert css rule "+t+": "+e}}}e.style=function(e,t,r){if(null!=e){void 0===e.length&&(e=[e]);for(var n=i.extendz({},t),a=0;a<e.length;a++){var o=e[a];null!=o&&i.forEach(n,function(e,t){e=function(e){e=e.split("-");for(var t=1;t<e.length;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);return e.join("")}(e);o.style[e]!==t&&(o.style[e]=t)})}}},i.css=e}(),function(){var e=playease.utils;e.LITTLE_ENDIAN=function(){var e,t;try{e=new ArrayBuffer(2),new DataView(e).setInt16(0,256,!0),t=new Int16Array(e)}catch(e){}return t&&256===t[0]}(),e.getUint32=function(e,t,r){return void 0===t&&(t=0),r?e[t+0]|e[t+1]>>>8|e[t+2]>>>16|e[t+3]>>>24:e[t+0]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}}(),function(e){var i=e.utils,s=e.OS,d={filename:"sample.mp4",type:"video/mpeg"};function t(e){var t,r,n,a,o=this;o.append=function(e){t.push(e)},o.save=function(e){0!==t.length&&(a=new Blob(t,{type:o.config.type}),r=URL.createObjectURL(a),(n=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),(a=document.createElementNS("http://www.w3.org/1999/xhtml","a")).href=r,a.download=e||o.config.filename,a.dispatchEvent(n),t=[],setTimeout(function(){URL.revokeObjectURL(r)},s.isIOS?1e3:0))},o.config=i.extendz({},d,e),t=[]}t.prototype.CONF=d,i.FileSaver=t}(playease),function(){var e=playease.utils,t=e.BitStream;function r(e){t.call(this,e);var r=this;r.ReadUE=function(){for(var e=-1,t=0;0===t&&0<r.Left();e++)t=r.ReadBits(1);return(1<<e>>>0)-1+r.ReadBitsLong(e)},r.ReadSE=function(){var e=r.ReadUE();return 0==(1&e)?-(e>>>1):e+1>>>1}}(r.prototype=Object.create(t.prototype)).constructor=r,e.ebsp2rbsp=function(e){var t=2,r=e.byteLength,n=new Uint8Array(r);n[0]=e[0],n[1]=e[1];for(var a=2;a<r;a++)3===e[a]&&0===e[a-1]&&0===e[a-2]||(n[t]=e[a],t++);return n.subarray(0,t)},e.Golomb=r}(),function(d){var c=d.utils,l=d.OS,u=d.Kernel,p=d.Browser,f=c.FileSaver,m={DEBUG:0,LOG:16,WARN:32,ERROR:64},g={0:"[DEBUG]",16:"[L O G]",32:"[WARN ]",64:"[ERROR]"},E={CONSOLE:0,FILE:1,FEEDBACK:2},v={level:"log",mode:"console",maxLines:60};function e(e,t){var r,a,o,n,i=this;function s(e,t){if(i.config.mode>=E.FILE){t=(e=e,t=t,r=function(){var e=new Date;return c.padStart(e.getHours(),2,"0")+":"+c.padStart(e.getMinutes(),2,"0")+":"+c.padStart(e.getSeconds(),2,"0")+"."+c.padStart(e.getMilliseconds(),3,"0")}()+" "+g[e],c.forEach(t,function(e,t){"object"===c.typeOf(t)?r+=" "+JSON.stringify(t):r+=" "+t}),r+="\n");switch(i.config.mode){case E.FILE:case E.FEEDBACK:a.length>=i.config.maxLines&&a.splice(0,i.config.maxLines/4),a.push(t)}}var r}i.debug=function(){var e;i.config.level<=m.DEBUG&&(e=Array.prototype.slice.call(arguments,0),c.debug.apply(c,[r].concat(e)),s(m.DEBUG,e))},i.log=function(){var e;i.config.level<=m.LOG&&(e=Array.prototype.slice.call(arguments,0),c.log.apply(c,[r].concat(e)),s(m.LOG,e))},i.warn=function(){var e;i.config.level<=m.WARN&&(e=Array.prototype.slice.call(arguments,0),c.warn.apply(c,[r].concat(e)),s(m.WARN,e))},i.error=function(){var e;i.config.level<=m.ERROR&&(e=Array.prototype.slice.call(arguments,0),c.error.apply(c,[r].concat(e)),s(m.ERROR,e))},i.flush=function(){var n=d(i.id);switch(c.forEach(["info","stats"],function(e,t){var r=n.getProperty(t)||{};i.log(t+":",r)}),i.config.mode){case E.FILE:var e=new Date,e=e.getFullYear()+c.padStart(e.getMonth()+1,2,"0")+c.padStart(e.getDate(),2,"0")+"-"+c.padStart(e.getHours(),2,"0")+c.padStart(e.getMinutes(),2,"0")+c.padStart(e.getSeconds(),2,"0")+"."+c.padStart(e.getMilliseconds(),3,"0");c.forEach(a,function(e,t){o.append(t)}),o.save("playease-"+e+".log");break;case E.FEEDBACK:}a=[]},i.id=e,i.config=c.extendz({id:i.id},v,t),i.config.level=(n=i.config.level,{debug:m.DEBUG,log:m.LOG,warn:m.WARN,error:m.ERROR}[n]),i.config.mode=(n=i.config.mode,{console:E.CONSOLE,file:E.FILE,feedback:E.FEEDBACK}[n]),r="[ID:"+c.padStart(i.id,2,"0")+"]",d.DEBUG=i.config.level===m.DEBUG,i.config.mode>=E.FILE&&(a=[],o=new f({filename:"playease.log",type:"text/plain"})),s(m.LOG,["Version: playease/"+d.VERSION]),s(m.LOG,["OS:      "+l.name+"/"+l.version+(l.model?"; "+l.model:"")]),s(m.LOG,["Kernel:  "+u.name+"/"+u.version]),s(m.LOG,["Browser: "+p.name+"/"+p.version])}e.prototype.CONF=v,e.Level=m,e.Prefix=g,e.Mode=E,c.Logger=e}(playease),function(){var e=playease.utils,n=/^(([a-z]+\:)\/\/(([-a-z\d\.]+)(?:\:(\d+))?))((?:\/[-_a-z\d\s\.]*)*)([?#][-_+=:/@#%&?a-z\d\s\.]+)?$/i;e.URL=function(e){var r=this;r.parse=function(e){r.href=e,!1===/^([a-z]+)\:\/\//i.test(e)&&(r.href=window.location.origin+("/"===e.substr(0,1)?"":"/")+e);var t=r.href.match(n);if(null===t)throw{name:"SyntaxError",message:"The URL did not match the expected pattern, url="+e+"."};r.origin=t[1],r.protocol=t[2],r.host=t[3],r.hostname=t[4],r.port=t[5]||"",r.pathname=t[6]||"";e=r.pathname.match(/\/(.+?)(?:\.([a-z\d]+))?$/i);e&&(r.filename=e[1],r.filetype=e[2]),t[7]&&("?"===t[7].substr(0,1)?r.search=t[7]:r.hash=t[7])},r.href="",r.origin="",r.protocol="",r.host="",r.hostname="",r.port="",r.pathname="",r.filename="",r.filetype="",r.search="",r.hash="",e&&r.parse(e)}}(),function(){var m=playease.utils,g=1,E=3,v=4,h=8,y=9,r={ignoreRoot:!0,trimWhitespaces:!1,attributePrefix:"@",matchers:[]};function e(e,t){var p=this,n=t;function f(e){return e.localName||e.baseName||e.nodeName}p.parse=function(e){var t;if(window.DOMParser){var r=new DOMParser;try{t=r.parseFromString(e,"text/xml")}catch(e){return n.error("Failed to parse XML structure."),null}}else 0===e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return function e(t,r){var n={};if(t.nodeType===y){for(var a=0;a<t.childNodes.length;a++){var o=t.childNodes[a],i=f(o);o.nodeType===g&&((s=e(o)).parent=n,p.config.ignoreRoot?(delete s.parent,n=s):n[i]=s)}return n}if(t.nodeType===g){for(var a=0;a<t.childNodes.length;a++){var s,o=t.childNodes[a],i=f(o);o.nodeType!==h&&(((s=e(o,r+"."+i)).parent=n).hasOwnProperty(i)?("array"!=m.typeOf(n[i])&&(n[i]=[n[i]]),n[i].push(s)):"#text"==i&&!/[^\s]/.test(s)||(n[i]=s))}var i=f(t);null!=t.prefix&&""!=t.prefix&&(i=t.prefix+":"+i);for(var a=0;a<t.attributes.length;a++)for(var d=t.attributes[a],c=d.value,l=0;l<p.config.matchers.length;l++){var u=p.config.matchers[l];u.test(d,i)&&(c=u.exec(d.value)),n[p.config.attributePrefix+d.name]=c}return null!=n["#text"]&&p.config.trimWhitespaces&&(n["#text"]=n["#text"].trim()),n["#cdata-section"],n.toString=function(){return(null==n["#text"]?"":n["#text"])+(null==n["#cdata-section"]?"":n["#cdata-section"])},n}if(t.nodeType===E||t.nodeType===v)return t.nodeValue}(t)},p.config=m.extendz({},r,e)}e.prototype.CONF=r,m.XML2JSON=e}(),function(){var m=playease.utils;m.MPD=function(e){var t,p,r,f;this.update=function(e){r=t,e.Location&&e.Location["#text"]&&(r=e.Location["#text"]),f=e.BaseURL||r.substring(0,r.lastIndexOf("/")+1),"dynamic"===e["@type"]&&function(e,t){var r=0,n=NaN;"array"!=m.typeOf(e.Period)&&(e.Period=[e.Period]);for(var a=0;a<e.Period.length;a++){var o=e.Period[a];o.hasOwnProperty("@start")?r=o["@start"]:isNaN(n)?0===a&&("dynamic"===e["@type"]||(r=0)):r+=n,o.hasOwnProperty("@duration")&&(n=o["@duration"]),o["@start"]=r,o["@duration"]=n;var i=function(e,t){if(!e)return;for(var r=0;r<e.Period.length;r++){var n=e.Period[r];if(n.hasOwnProperty("@id")){if(n["@id"]===t["@id"])return n}else{if(!n.hasOwnProperty("@start"))return n;if(n["@start"]===t["@start"])return n}}return}(t,o);!function(e,t){"array"!=m.typeOf(e.AdaptationSet)&&(e.AdaptationSet=[e.AdaptationSet]);for(var r=0;r<e.AdaptationSet.length;r++){var n=e.AdaptationSet[r],a=function(e,t){if(!e)return;for(var r=0;r<e.AdaptationSet.length;r++){var n=e.AdaptationSet[r];if(n.hasOwnProperty("@id")){if(n["@id"]===t["@id"])return n}else if(n.hasOwnProperty("@contentType")){if(n["@contentType"]===t["@contentType"])return n}else if(n.hasOwnProperty("@mimeType")){if(n["@mimeType"]===t["@mimeType"])return n}else{if(!n.hasOwnProperty("@codecs"))break;if(n["@codecs"]===t["@codecs"])return n}}return}(t,n);!function(e,t){var r=0,n=0,a=[];if(!1===e.SegmentTemplate.hasOwnProperty("SegmentTimeline"))return;if(t){var o=t.SegmentTemplate.SegmentTimeline;"array"!=m.typeOf(o.S)&&(o.S=[o.S]);for(var i=0;i<o.S.length;i++){var s=o.S[i];0===i&&s.hasOwnProperty("@t")&&(r=s["@t"]),r+=s["@d"],s["@r"]&&(r+=s["@d"]*s["@r"]),a.push(m.extendz({},s))}}var d=e.SegmentTemplate.SegmentTimeline;"array"!=m.typeOf(d.S)&&(d.S=d.S?[d.S]:[]);for(i=0;i<d.S.length;i++){s=d.S[i];0===i&&s.hasOwnProperty("@t")&&(n=s["@t"]),r<=n&&a.push(s),n+=s["@d"],s["@r"]&&(n+=s["@d"]*s["@r"])}}(n,a)}}(o,i)}}(e,p),p=e},this.getSegmentInfo=function(e,t,r,n,a,o){var i=function(e){for(var t=p.Period[0],r=0;r<p.Period.length;r++){var n=p.Period[r];if(!n.hasOwnProperty("@start"))break;n["@start"]>t["@start"]&&n["@start"]<=e&&(t=n)}return t}(e),s=function(e,t){for(var r=0;r<e.AdaptationSet.length;r++){var n=e.AdaptationSet[r];if(n.hasOwnProperty("@contentType")){if(n["@contentType"]===t)return n}else if(n.hasOwnProperty("@mimeType")){var a=n["@mimeType"].match(/^([a-z]+)\/[a-z0-9]+/i);if(a&&1<a.length&&a[1]===t)return n}}return}(i,t);if(s){var d=function(e,t){"array"!=m.typeOf(e.Representation)&&(e.Representation=[e.Representation]);for(var r=e.Representation[0],n=0;n<e.Representation.length;n++){var a=e.Representation[n];a["@bandwidth"]>r["@bandwidth"]&&(!t||a["@bandwidth"]<=t)&&(r=a)}return r}(s,o);if(d){var c=s.SegmentTemplate,l=c[r?"@initialization":"@media"],e=c["@timescale"]||1,t=c["@duration"]||0,l=l.replace(/\$RepresentationID\$/,d["@id"]);if(c["@media"].search(/\$Time\$/)){var u,o=c.SegmentTimeline;if(r)0<n||0===n&&!1===p.hasOwnProperty("@suggestedPresentationDelay")?o.S.length&&(n=o.S[0]["@t"]):(u=function(e,t){for(var r=e.S.length-1;0<=r;r--){var n=e.S[r];if((t-=n["@d"]*(n["@r"]||1))<=0){for(var a=e.S[0]["@t"],o=0;o<r;o++)a+=e.S[o]["@d"],n["@r"]&&(a+=n["@d"]*n["@r"]);return n["@t"]=a,n}}return e.S[0]}(o,(Math.abs(void 0)||p["@suggestedPresentationDelay"])*e))&&(n=u["@t"],t=u["@d"]);else{if(void 0===(u=function(e,t){for(var r=NaN;e.S.length;){var n=e.S.shift();if(isNaN(r)&&(r=n["@t"]||0),r+n["@d"]*(n["@r"]||0)>=t)return n["@t"]=r,e.S.length&&(e.S[0]["@t"]=n["@t"]+n["@d"]),n;r+=n["@d"],n["@r"]&&(r+=n["@d"]*n["@r"])}return}(o,n)))return;n=u["@t"],t=u["@d"],l=l.replace(/\$Time\$/,n)}}c["@media"].search(/\$Number\$/)&&(r?a=c["@startNumber"]:l=l.replace(/\$Number\$/,a));i=d.baseURL||s.baseURL||i.baseURL;return l=(i?i["#text"]:f)+l,{mimeType:d["@mimeType"]||s["@mimeType"],codecs:d["@codecs"]||s["@codecs"],index:a,start:n,duration:t,timescale:e,url:l}}}},this.getLocation=function(){return r},t=e||""}}(),playease.utils.MPD.matchers={},function(){var e=playease.utils.MPD.matchers,n=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;e.datetime=function(){this.test=function(e){return n.test(e.value)},this.exec=function(e){var t=n.exec(e),r=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&1e3*parseFloat(t[7])||0);return t[9]&&t[10]&&(e=60*parseInt(t[9],10)+parseInt(t[10],10),r+=("+"===t[8]?-1:1)*e*60*1e3),new Date(r)}}}(),function(){var e=playease.utils.MPD.matchers,n=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,a=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"];e.duration=function(){this.test=function(e){for(var t,r=0;r<a.length;r++)if(((t=e).localName||t.baseName||t.nodeName)===a[r])return n.test(e.value);return!1},this.exec=function(e){var t=n.exec(e),e=31536e3*parseFloat(t[2]||0)+2592e3*parseFloat(t[4]||0)+86400*parseFloat(t[6]||0)+3600*parseFloat(t[8]||0)+60*parseFloat(t[10]||0)+parseFloat(t[12]||0);return void 0!==t[1]&&(e*=-1),e}}}(),function(){var e=playease.utils.MPD.matchers,t=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/;e.numeric=function(){this.test=function(e){return t.test(e.value)},this.exec=function(e){return parseFloat(e)}}}(),function(){var e=playease.utils.MPD.matchers,r={MPD:["id","profiles"],Period:["id"],BaseURL:["serviceLocation","byteRange"],SegmentBase:["indexRange"],Initialization:["range"],RepresentationIndex:["range"],SegmentList:["indexRange"],BitstreamSwitching:["range"],SegmentURL:["mediaRange","indexRange"],SegmentTemplate:["indexRange","media","index","initialization","bitstreamSwitching"],AssetIdentifier:["value","id"],EventStream:["value"],AdaptationSet:["profiles","mimeType","segmentProfiles","codecs","contentType"],FramePacking:["value","id"],AudioChannelConfiguration:["value","id"],ContentProtection:["value","id"],EssentialProperty:["value","id"],SupplementalProperty:["value","id"],InbandEventStream:["value","id"],Accessibility:["value","id"],Role:["value","id"],Rating:["value","id"],Viewpoint:["value","id"],ContentComponent:["contentType"],Representation:["id","dependencyId","mediaStreamStructureId"],Subset:["id"],Metrics:["metrics"],Reporting:["value","id"]};e.string=function(){this.test=function(e,t){if(r.hasOwnProperty(t)){t=r[t];return void 0!==t&&0<=t.indexOf(e.name)}return!1},this.exec=function(e){return String(e)}}}(),function(e){var t={};t.Event={BIND:"bind",READY:"ready",PLAY:"play",WAITING:"waiting",DURATIONCHANGE:"durationchange",LOADEDMETADATA:"loadedmetadata",LOADEDDATA:"loadeddata",CANPLAY:"canplay",PLAYING:"playing",CANPLAYTHROUGH:"canplaythrough",PAUSE:"pause",SEEKING:"seeking",SEEKED:"seeked",SWITCHING:"switching",SWITCHED:"switched",RATECHANGE:"ratechange",TIMEUPDATE:"timeupdate",VOLUMECHANGE:"volumechange",ENDED:"ended",ERROR:"error"},t.IOEvent={LOADSTART:"loadstart",PROGRESS:"progress",SUSPEND:"suspend",STALLED:"stalled",ABORT:"abort",TIMEOUT:"timeout",LOAD:"load",LOADEND:"loadend"},t.MediaEvent={PACKET:"packet",INFOCHANGE:"infochange",STATSUPDATE:"statsupdate",AAC_SPECIFIC_CONFIG:"aac-specific-config",AAC_SAMPLE:"aac-sample",AVC_CONFIG_RECORD:"avc-config-record",AVC_SAMPLE:"avc-sample",SEI:"sei",END_OF_STREAM:"end-of-stream",SCREENSHOT:"screenshot"},t.MediaStreamTrackEvent={ADDTRACK:"addtrack",REMOVETRACK:"removetrack"},t.SaverEvent={RIGISTER:"register",UNRIGISTER:"unregister",WRITERSTART:"writerstart",WRITEREND:"writerend"},t.UIEvent={SHOOTING:"shooting",FULLPAGE:"fullpage",FULLSCREEN:"fullscreen",RESIZE:"resize"},t.GlobalEvent={CHANGE:"change",VISIBILITYCHANGE:"visibilitychange"},t.MouseEvent={CLICK:"click",DOUBLE_CLICK:"doubleclick",MOUSE_MOVE:"mousemove"},t.KeyboardEvent={KEY_DOWN:"keydown",KEY_UP:"keyup"},t.TimerEvent={TIMER:"timer",COMPLETE:"complete"},e.events=t}(playease),function(l){var u=l.utils;l.events.EventDispatcher=function(e,t){var n,r,a=this,o=e,i=t,s=t.logger||u,d=Array.prototype.slice.call(arguments,2);function c(e,t){if(e)for(var r=e.slice(0),n=0;n<r.length;n++){var a=r[n];if(a){isNaN(a.count)||0!=--a.count||e.splice(n,1);try{if(a.listener(t),t.stopPropagation)break}catch(e){s.error(o+" failed to dispatch event:",t,e.toString())}}}}a.bind=function(){var e=Array.prototype.slice.call(arguments,0);u.forEach(e,function(e,t){u.forEach(t,function(e,t){t="on"+t.replace(/-/g,"");a[t]=void 0})})},a.addEventListener=function(t,e,r){try{n[t]||(n[t]=[]),"string"===u.typeOf(e)&&(e=new Function("return "+e)()),n[t].push({listener:e,count:r||NaN})}catch(e){s.error(o+" failed to addEventListener("+t+"):",e)}},a.removeEventListener=function(t,e){if(n[t])try{if(void 0===e)return void delete n[t];for(var r=0;r<n[t].length;r++)if(n[t][r].listener.toString()===e.toString()){n[t].splice(r,1);break}}catch(e){s.error(o+" failed to removeEventListener("+t+"):",e)}},a.hasEventListener=function(e){return n.hasOwnProperty(e)&&0<n[e].length},a.addGlobalListener=function(e,t){try{"string"===u.typeOf(e)&&(e=new Function("return "+e)()),r.push({listener:e,count:t||NaN})}catch(e){s.error(o+" failed to addGlobalListener():",e)}},a.removeGlobalListener=function(e){if(e)try{for(var t=0;t<r.length;t++)if(r[t].listener.toString()===e.toString()){r.splice(t,1);break}}catch(e){s.error(o+" failed to removeGlobalListener():",e)}},a.dispatchEvent=function(e,t){a.forward({type:e,data:t||{},srcElement:a,version:l.VERSION})},a.forward=function(e){e.target=a,e.stopPropagation=!1,e.api=!i||"string"!=typeof i.id&&"number"!=typeof i.id?void 0:i.id,l.DEBUG&&s.debug(o,e);var t="on"+e.type.replace(/-/g,"");"function"===u.typeOf(a[t])?a[t](e):(c(n[e.type],e),c(r,e))},n={},r=[],a.bind.apply(a,d)}}(playease),function(l){var u=l.utils,e=l.events,p=e.EventDispatcher,f=e.Event,m=e.SaverEvent,i={INIT:"init",START:"start",END:"end"},g={script:"js/sw.js",scope:"js/",enable:!1};function E(e,t,r){p.call(this,"StreamWriter",{logger:r},[m.WRITERSTART,m.WRITEREND]);var n,a=this,o=r;a.start=function(){a.readyState===i.INIT&&(a.readyState=i.START,a.dispatchEvent(m.WRITERSTART))},a.write=function(e){a.readyState===i.START&&n.write(e).catch(function(e){o.error("StreamWriter failed to write: "+e)})},a.close=function(){switch(a.readyState){case i.INIT:case i.START:a.readyState=i.END,n.close(),a.dispatchEvent(m.WRITEREND)}},a.filename=e,a.readyState=i.INIT,(n=t).closed.then(function(){o.log("StreamWriter.closed: "+a.filename),a.close()})}function v(e,t){p.call(this,"StreamSaver",{logger:t},[f.ERROR],m);var n,r,a,o=this,i=t;function s(e){u.forEach(n,function(e,t){t.close()})}function d(e){switch(i.log("ServiceWorker: event="+e.data.event+", filename="+e.data.filename),e.data.event){case"recordstart":if(!1===v.prototype.isSupported(e.data.version)){i.warn("ServiceWorker upgrading..."),o.unregister(),o.register(e.data.filename);break}var t=document.createElement("iframe");t.hidden=!0,t.src=o.config.scope+e.data.filename,document.body.appendChild(t);break;case"loadstart":break;case"error":i.warn(e.data.name+": "+e.data.message),o.unregister(!0),o.dispatchEvent(f.ERROR,{name:e.data.name,message:e.data.message,filename:e.data.filename,version:e.data.version})}}function c(e){var t=e.target;t.removeEventListener(m.WRITERSTART,o.forward),t.removeEventListener(m.WRITEREND,c),delete n[t.filename],a.postMessage({operation:"recordend",filename:t.filename,version:l.VERSION}),o.forward(e)}o.register=function(){return navigator.serviceWorker?navigator.serviceWorker.getRegistration(o.config.scope).then(function(e){return e||navigator.serviceWorker.register(o.config.script,{scope:o.config.scope})}).then(function(e){i.log("Registered ServiceWorkerRegistration: "+e.scope),(a=(r=e).installing||e.waiting||e.active).addEventListener("statechange",function(e){i.log("ServiceWorker.state: "+a.state)})}).catch(function(e){i.error("Failed to register ServiceWorkerRegistration: "+e)}):Promise.reject({name:"NotSupportedError",message:"The operation is not supported."})},o.record=function(e){if(!e)return o.dispatchEvent(f.ERROR,{name:"AbortError",message:"The operation was aborted."}),null;if(n.hasOwnProperty(e))return n[e];var t=new TransformStream,r=new MessageChannel;r.port1.onmessage=d,r.port1.postMessage({stream:t.readable},[t.readable]);t=new E(e,t.writable.getWriter(),i);return t.addEventListener(m.WRITERSTART,o.forward),t.addEventListener(m.WRITEREND,c),n[e]=t,a.postMessage({operation:"recordstart",filename:e,version:l.VERSION},[r.port2]),t},o.unregister=function(e){!e&&r&&(r.unregister(),o.dispatchEvent(m.UNRIGISTER)),u.forEach(n,function(e,t){t.close()}),a=r=void 0},o.config=u.extendz({},g,e),n={},window.addEventListener("beforeunload",s)}v.prototype.CONF=g,v.prototype.isSupported=function(e){for(var t=/^(\d+)\.(\d+)\.(\d+)$/,r="2.1.64".match(t),n=e.match(t),a=0;a<r.length;a++)if(r[a]>n[a])return!1;return!0},E.WriterState=i,u.StreamWriter=E,u.StreamSaver=v}(playease),function(e){var t=e.utils,e=e.events,d=e.EventDispatcher,c=e.TimerEvent;function r(e,t,r){d.call(this,"Timer",{logger:r},[c.TIMER,c.COMPLETE]);var n,a=this,o=0,i=!1;function s(){o++,a.dispatchEvent(c.TIMER),0<a.repeatCount&&o>=a.repeatCount&&(a.stop(),a.dispatchEvent(c.COMPLETE))}a.start=function(){!1===i&&(n=setInterval(s,a.delay),i=!0)},a.stop=function(){i&&(clearInterval(n),n=0,i=!1)},a.reset=function(){a.stop(),o=0},a.currentCount=function(){return o},a.running=function(){return i},a.delay=e||50,a.repeatCount=t||0}(r.prototype=Object.create(d.prototype)).constructor=r,t.Timer=r}(playease),function(e){e.utils;var r={},a=[];r.register=function(t,e){try{a.splice(e||a.length,0,t),r[t.prototype.kind]=t}catch(e){throw{name:e.name,message:"Failed to register loader "+t.prototype.kind+": "+e.message}}},r.get=function(e,t){for(var r=0;r<a.length;r++){var n=a[r];if(n.prototype.isSupported(e,t))return n}return null},r.Mode={CORS:"cors",NO_CORS:"no-cors",SAME_ORIGIN:"same-origin"},r.Credentials={OMIT:"omit",INCLUDE:"include",SAME_ORIGIN:"same-origin"},r.Cache={DEFAULT:"default",NO_STAORE:"no-store",RELOAD:"reload",NO_CACHE:"no-cache",FORCE_CACHE:"force-cache",ONLY_IF_CACHED:"only-if-cached"},r.Redirect={FOLLOW:"follow",MANUAL:"manual",ERROR:"error"},r.ResponseType={ARRAYBUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},r.ReadyState={UNINITIALIZED:0,OPEN:1,SENT:2,LOADING:3,DONE:4},e.io=r.get,e.IO=r}(playease),function(e){var c=e.utils,t=e.events,r=t.EventDispatcher,l=t.Event,u=t.IOEvent,n=e.IO,a=n.Mode,o=n.Credentials,t=n.Cache,e=n.Redirect,p=n.ReadyState,f={method:"GET",headers:{},mode:a.CORS,credentials:o.OMIT,cache:t.DEFAULT,redirect:e.FOLLOW};function i(e,t){r.call(this,"Fetch",{logger:t},[l.ERROR],u);var n,a,o,i=this,s=t;function d(e){switch(n=p.DONE,s.error("Loader "+e.name+": "+e.message),e.name){case"AbortError":i.dispatchEvent(u.ABORT,{name:e.name,message:e.message});break;case"TimeoutError":i.dispatchEvent(u.TIMEOUT,{name:e.name,message:e.message});break;default:i.dispatchEvent(l.ERROR,{name:e.name,message:e.message})}i.dispatchEvent(u.LOADEND)}i.load=function(e,t,r){if(n=p.UNINITIALIZED,!i.isSupported(e))return s.error("Loader NotSupportedError: Not supportped."),n=p.DONE,i.dispatchEvent(l.ERROR,{name:"NotSupportedError",message:"Not supportped."}),void i.dispatchEvent(u.LOADEND);s.log("Loader loadstart."),i.dispatchEvent(u.LOADSTART),n=p.OPEN,void 0!==t&&c.extendz(i.config.headers,{Range:"bytes="+t+"-"+(r||"")});r=c.extendz({},i.config,{headers:new Headers(i.config.headers),signal:o.signal});fetch(e.href,r).then(function(e){if(n===p.OPEN?n=p.SENT:s.warn("Loader state error, probably aborted already."),!e.ok||e.status<200||299<e.status)return Promise.reject(new Error(e.status+" "+e.statusText));var t,r=(r=e.headers.get("Content-Length"))&&parseInt(r);return 206===e.status&&(!(t=e.headers.get("Content-Range"))||(t=t.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(r=parseInt(t[3]))),a!==r&&(a=r||1/0,s.log("File size change: "+a)),function t(r){return r.read().then(function(e){if(e.done)return s.log("Loader load."),n=p.DONE,i.dispatchEvent(u.LOAD),i.dispatchEvent(u.LOADEND),Promise.resolve("load");switch(n){case p.SENT:n=p.LOADING;break;case p.DONE:return s.warn("Loader state error, probably aborted already."),r.cancel()}return s.debug("Loader progress: "+e.value.buffer.byteLength+"/"+a),i.dispatchEvent(u.PROGRESS,{buffer:e.value.buffer,loaded:e.value.buffer.byteLength,total:a}),t(r)}).catch(d)}(e.body.getReader())}).catch(d)},i.abort=function(){o.abort()},i.state=function(){return n},i.config=c.extendz({},f,e),a=NaN,o=new AbortController}((i.prototype=Object.create(r.prototype)).constructor=i).prototype.kind="Fetch",i.prototype.CONF=f,i.prototype.isSupported=function(e,t){return(!t||"live"===t)&&(!!fetch&&("http:"===e.protocol||"https:"===e.protocol))},n.register(i)}(playease),function(e){var f=e.utils,r=e.Browser,t=e.events,m=t.EventDispatcher,g=t.Event,E=t.IOEvent,n=e.IO,a=n.Mode,v=n.Credentials,t=n.Cache,e=n.Redirect,h=n.ReadyState,y={method:"GET",headers:{},mode:a.CORS,credentials:v.OMIT,cache:t.DEFAULT,redirect:e.FOLLOW};function o(e,t){m.call(this,"MozStream",{logger:t},[g.ERROR],E);var n,a,o,i=this,s=t;function r(e){switch(n=o.readyState){case h.OPEN:break;case h.SENT:if(o.status<200||299<o.status){s.error("Loader NetworkError: "+o.status+" "+o.statusText),i.dispatchEvent(g.ERROR,{name:"NetworkError",message:o.status+" "+o.statusText});break}var t,r=(r=o.getResponseHeader("Content-Length"))&&parseInt(r);206===o.status&&(!(t=o.getResponseHeader("Content-Range"))||(t=t.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(r=parseInt(t[3]))),a!==r&&(a=r||1/0,s.log("File size change: "+a));break;case h.LOADING:case h.DONE:}}function d(e){s.warn("Loader AbortError: The operation was aborted."),i.dispatchEvent(E.ABORT,{name:"AbortError",message:"The operation was aborted."})}function c(e){s.debug("Loader progress: "+o.response.byteLength+"/"+a),i.dispatchEvent(E.PROGRESS,{buffer:o.response,loaded:o.response.byteLength,total:a})}function l(e){s.log("Loader load."),i.dispatchEvent(E.LOAD)}function u(e){s.error("Loader "+e.name+": "+e.message),"TimeoutError"===e.name?i.dispatchEvent(E.TIMEOUT,{name:e.name,message:e.message}):i.dispatchEvent(g.ERROR,{name:e.name,message:e.message})}function p(e){i.dispatchEvent(E.LOADEND)}i.load=function(e,t,r){if(n=h.UNINITIALIZED,!i.isSupported(e))return s.error("Loader NotSupportedError: Not supportped."),n=h.DONE,i.dispatchEvent(g.ERROR,{name:"NotSupportedError",message:"Not supportped."}),void i.dispatchEvent(E.LOADEND);switch(s.log("Loader loadstart."),i.dispatchEvent(E.LOADSTART),o.open(i.config.method,e.href,!0),void 0!==t&&f.extendz(i.config.headers,{Range:"bytes="+t+"-"+(r||"")}),f.forEach(i.config.headers,function(e,t){o.setRequestHeader(e,t)}),i.config.credentials){case v.INCLUDE:o.withCredentials=!0;break;case v.SAME_ORIGIN:o.withCredentials=window.location.host===e.host;break;default:o.withCredentials=!1}o.send()},i.abort=function(){o.abort()},i.state=function(){return n},i.config=f.extendz({},y,e),a=NaN,(o=new XMLHttpRequest).onreadystatechange=r,o.onabort=d,o.onprogress=c,o.onload=l,o.onerror=u,o.onloadend=p,o.responseType="moz-chunked-arraybuffer"}((o.prototype=Object.create(m.prototype)).constructor=o).prototype.kind="MozStream",o.prototype.CONF=y,o.prototype.isSupported=function(e,t){return(!t||"live"===t)&&((!r.isFirefox||!(r.major<14||67<r.major))&&("http:"===e.protocol||"https:"===e.protocol))},n.register(o)}(playease),function(e){var m=e.utils,r=e.Browser,t=e.events,g=t.EventDispatcher,E=t.Event,v=t.IOEvent,n=e.IO,a=n.Mode,h=n.Credentials,t=n.Cache,e=n.Redirect,y=n.ReadyState,R={method:"GET",headers:{},mode:a.CORS,credentials:h.OMIT,cache:t.DEFAULT,redirect:e.FOLLOW};function o(e,t){g.call(this,"MSStream",{logger:t},[E.ERROR],v);var n,a,o,i,s=this,d=t;function r(e){switch(n=o.readyState){case y.OPEN:break;case y.SENT:if(o.status<200||299<o.status){d.error("Loader NetworkError: "+o.status+" "+o.statusText),s.dispatchEvent(E.ERROR,{name:"NetworkError",message:o.status+" "+o.statusText});break}var t,r=(r=o.getResponseHeader("Content-Length"))&&parseInt(r);206===o.status&&(!(t=o.getResponseHeader("Content-Range"))||(t=t.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(r=parseInt(t[3]))),a!==r&&(a=r||1/0,d.log("File size change: "+a));break;case y.LOADING:i.readAsArrayBuffer(o.response);break;case y.DONE:}}function c(e){d.warn("Loader AbortError: The operation was aborted."),s.dispatchEvent(v.ABORT,{name:"AbortError",message:"The operation was aborted."})}function l(e){var t=i.result.slice(i.position);null!=t?(d.debug("Loader progress: "+t.byteLength+"/"+a),s.dispatchEvent(v.PROGRESS,{buffer:t,loaded:t.byteLength,total:a}),i.position=i.result.byteLength):d.warn("What happend???")}function u(e){d.log("Loader load."),s.dispatchEvent(v.LOAD)}function p(e){d.error("Loader "+e.name+": "+e.message),"TimeoutError"===e.name?s.dispatchEvent(v.TIMEOUT,{name:e.name,message:e.message}):s.dispatchEvent(E.ERROR,{name:e.name,message:e.message})}function f(e){s.dispatchEvent(v.LOADEND)}s.load=function(e,t,r){if(n=y.UNINITIALIZED,i.position=0,!s.isSupported(e))return d.error("Loader NotSupportedError: Not supportped."),n=y.DONE,s.dispatchEvent(E.ERROR,{name:"NotSupportedError",message:"Not supportped."}),void s.dispatchEvent(v.LOADEND);switch(d.log("Loader loadstart."),s.dispatchEvent(v.LOADSTART),o.open(s.config.method,e.href,!0),void 0!==t&&m.extendz(s.config.headers,{Range:"bytes="+t+"-"+(r||"")}),m.forEach(s.config.headers,function(e,t){o.setRequestHeader(e,t)}),s.config.credentials){case h.INCLUDE:o.withCredentials=!0;break;case h.SAME_ORIGIN:o.withCredentials=window.location.host===e.host;break;default:o.withCredentials=!1}o.send()},s.abort=function(){o.abort()},s.state=function(){return n},s.config=m.extendz({},R,e),a=NaN,(o=new XMLHttpRequest).onreadystatechange=r,o.onabort=c,o.onerror=p,o.onloadend=f,o.responseType="ms-stream",(i=new MSStreamReader).onprogress=l,i.onload=u,i.onerror=p}((o.prototype=Object.create(g.prototype)).constructor=o).prototype.kind="MSStream",o.prototype.CONF=R,o.prototype.isSupported=function(e,t){return(!t||"live"===t)&&(!!(r.isIE10||r.isIE11||r.isEdge)&&("http:"===e.protocol||"https:"===e.protocol))},n.register(o)}(playease),function(e){var r=e.utils,t=e.events,n=t.EventDispatcher,p=t.Event,f=t.IOEvent,a=e.IO,o=a.Mode,i=a.Credentials,t=a.Cache,e=a.Redirect,m=a.ReadyState,g={method:"GET",headers:{},mode:o.CORS,credentials:i.OMIT,cache:t.DEFAULT,redirect:e.FOLLOW};function s(e,t){n.call(this,"Websocket",{logger:t},[p.ERROR],f);var a,o,i=this,s=t;function d(e){a=m.SENT,s.log("File size change: "+1/0)}function c(e){s.debug("Loader progress: "+e.data.byteLength+"/"+1/0),a===m.SENT&&(a=m.LOADING),i.dispatchEvent(f.PROGRESS,{buffer:e.data,loaded:e.data.byteLength,total:1/0})}function l(e){s.error("Loader NetworkError: A network error occurred."),i.dispatchEvent(p.ERROR,{name:"NetworkError",message:"A network error occurred."})}function u(e){s.log("Loader load."),a=m.DONE,i.dispatchEvent(f.LOAD),i.dispatchEvent(f.LOADEND)}i.load=function(e,t,r){if(a=m.UNINITIALIZED,!i.isSupported(e))return s.error("Loader NotSupportedError: Not supportped."),a=m.DONE,i.dispatchEvent(p.ERROR,{name:"NotSupportedError",message:"Not supportped."}),void i.dispatchEvent(f.LOADEND);s.log("Loader loadstart."),i.dispatchEvent(f.LOADSTART),a=m.OPEN;var n=window.WebSocket||window.MozWebSocket;(o=new n(e.href)).onopen=d,o.onmessage=c,o.onerror=l,o.onclose=u,o.binaryType="arraybuffer"},i.abort=function(){!o||o.readyState!=WebSocket.CONNECTING&&o.readyState!=WebSocket.OPEN||(o.close(),s.warn("Loader AbortError: The operation was aborted."),i.dispatchEvent(f.ABORT,{name:"AbortError",message:"The operation was aborted."}))},i.state=function(){return a},i.config=r.extendz({},g,e)}((s.prototype=Object.create(n.prototype)).constructor=s).prototype.kind="Websocket",s.prototype.CONF=g,s.prototype.isSupported=function(e,t){return(!t||"live"===t)&&!(!window.WebSocket&&!window.MozWebSocket||"ws:"!==e.protocol&&"wss:"!==e.protocol)},a.register(s)}(playease),function(e){var f=e.utils,t=e.events,m=t.EventDispatcher,g=t.Event,E=t.IOEvent,r=e.IO,n=r.Mode,v=r.Credentials,a=r.Cache,t=r.Redirect,e=r.ResponseType,h=r.ReadyState,y={method:"GET",headers:{},mode:n.CORS,credentials:v.OMIT,cache:a.DEFAULT,redirect:t.FOLLOW,responseType:e.ARRAYBUFFER};function o(e,t){m.call(this,"XHR",{logger:t},[g.ERROR],E);var n,a,o,i=this,s=t;function r(e){switch(n=o.readyState){case h.OPEN:break;case h.SENT:if(416!==o.status&&(o.status<200||299<o.status)){s.error("Loader NetworkError: "+o.status+" "+o.statusText),i.dispatchEvent(g.ERROR,{name:"NetworkError",message:o.status+" "+o.statusText});break}var t,r=(r=o.getResponseHeader("Content-Length"))&&parseInt(r);206===o.status&&(!(t=o.getResponseHeader("Content-Range"))||(t=t.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(r=parseInt(t[3]))),a!==r&&(a=r||1/0,s.log("File size change: "+a));break;case h.LOADING:case h.DONE:}}function d(e){s.warn("Loader AbortError: The operation was aborted."),i.dispatchEvent(E.ABORT,{name:"AbortError",message:"The operation was aborted."})}function c(e){s.debug("Loader progress: "+o.loaded+"/"+a)}function l(e){s.log("Loader load."),i.dispatchEvent(E.PROGRESS,{buffer:o.response,loaded:o.response.byteLength,total:a}),i.dispatchEvent(E.LOAD)}function u(e){s.error("Loader "+e.name+": "+e.message),"TimeoutError"===e.name?i.dispatchEvent(E.TIMEOUT,{name:e.name,message:e.message}):i.dispatchEvent(g.ERROR,{name:e.name,message:e.message})}function p(e){i.dispatchEvent(E.LOADEND)}i.load=function(e,t,r){if(n=h.UNINITIALIZED,!i.isSupported(e))return s.error("Loader NotSupportedError: Not supportped."),n=h.DONE,i.dispatchEvent(g.ERROR,{name:"NotSupportedError",message:"Not supportped."}),void i.dispatchEvent(E.LOADEND);switch(s.log("Loader loadstart."),i.dispatchEvent(E.LOADSTART),o.open(i.config.method,e.href,!0),void 0!==t&&f.extendz(i.config.headers,{Range:"bytes="+t+"-"+(r||"")}),f.forEach(i.config.headers,function(e,t){o.setRequestHeader(e,t)}),i.config.credentials){case v.INCLUDE:o.withCredentials=!0;break;case v.SAME_ORIGIN:o.withCredentials=window.location.host===e.host;break;default:o.withCredentials=!1}o.send()},i.abort=function(){o.abort()},i.state=function(){return n},i.config=f.extendz({},y,e),a=NaN,(o=new XMLHttpRequest).onreadystatechange=r,o.onabort=d,o.onprogress=c,o.onload=l,o.onerror=u,o.onloadend=p,o.responseType=i.config.responseType}((o.prototype=Object.create(m.prototype)).constructor=o).prototype.kind="XHR",o.prototype.CONF=y,o.prototype.isSupported=function(e,t){if(t&&"live"===t)for(var r=["flv","",void 0,"mp4","m4s","f4v","m4v","mov"],n=0;n<r.length;n++)if(e.filetype===r[n])return!1;return"http:"===e.protocol||"https:"===e.protocol},r.register(o)}(playease),function(e){var t={};function r(e,t){var r=this;r.Num=e||0,r.Den=t||1}function n(){var r,e=this;e.left=function(){return null==e.payload?0:e.payload.byteLength-e.position},e.set=function(e,t){r[e]=t},e.get=function(e){return r[e]},r={},e.kind="",e.codec="",e.length=0,e.timestamp=0,e.streamid=0,e.payload=null,e.position=0}n.KindAudio="audio",n.KindVideo="video",n.KindScript="script",t.Rational=r,t.Information=function(){var e=this;e.MimeType="",e.Codecs=[],e.Timescale=1e3,e.TimeBase=0,e.Timestamp=0,e.AudioTimestamp=0,e.VideoTimestamp=0,e.Duration=0,e.FileSize=0,e.Width=0,e.Height=0,e.CodecWidth=0,e.CodecHeight=0,e.AudioDataRate=0,e.VideoDataRate=0,e.BitRate=0,e.FrameRate=new r(30,1),e.SampleRate=0,e.SampleSize=0,e.Channels=0,e.Stereo=!1,e.Encoder=""},t.Packet=n,e.AV=t}(playease),function(e){e.utils;var e=e.AV,r={},n=[];r.COL_PRI_RESERVED0=0,r.COL_PRI_BT709=1,r.COL_PRI_UNSPECIFIED=2,r.COL_PRI_RESERVED=3,r.COL_PRI_BT470M=4,r.COL_PRI_BT470BG=5,r.COL_PRI_SMPTE170M=6,r.COL_PRI_SMPTE240M=7,r.COL_PRI_FILM=8,r.COL_PRI_BT2020=9,r.COL_PRI_SMPTEST428_1=10,r.COL_PRI_NB=11,r.COL_TRC_RESERVED0=0,r.COL_TRC_BT709=1,r.COL_TRC_UNSPECIFIED=2,r.COL_TRC_RESERVED=3,r.COL_TRC_GAMMA22=4,r.COL_TRC_GAMMA28=5,r.COL_TRC_SMPTE170M=6,r.COL_TRC_SMPTE240M=7,r.COL_TRC_LINEAR=8,r.COL_TRC_LOG=9,r.COL_TRC_LOG_SQRT=10,r.COL_TRC_IEC61966_2_4=11,r.COL_TRC_BT1361_ECG=12,r.COL_TRC_IEC61966_2_1=13,r.COL_TRC_BT2020_10=14,r.COL_TRC_BT2020_12=15,r.COL_TRC_SMPTEST2084=16,r.COL_TRC_SMPTEST428_1=17,r.COL_TRC_ARIB_STD_B67=18,r.COL_TRC_NB=19,r.COL_SPC_RGB=0,r.COL_SPC_BT709=1,r.COL_SPC_UNSPECIFIED=2,r.COL_SPC_RESERVED=3,r.COL_SPC_FCC=4,r.COL_SPC_BT470BG=5,r.COL_SPC_SMPTE170M=6,r.COL_SPC_SMPTE240M=7,r.COL_SPC_YCOCG=8,r.COL_SPC_YCGCO=8,r.COL_SPC_BT2020_NCL=9,r.COL_SPC_BT2020_CL=10,r.COL_SPC_NB=11,r.COL_RANGE_UNSPECIFIED=0,r.COL_RANGE_MPEG=1,r.COL_RANGE_JPEG=2,r.COL_RANGE_NB=2,r.CHROMA_LOC_UNSPECIFIED=0,r.CHROMA_LOC_LEFT=1,r.CHROMA_LOC_CENTER=2,r.CHROMA_LOC_TOPLEFT=3,r.CHROMA_LOC_TOP=4,r.CHROMA_LOC_BOTTOMLEFT=5,r.CHROMA_LOC_BOTTOM=6,r.CHROMA_LOC_NB=7,r.register=function(t,e){try{n.splice(e||n.length,0,t),r[t.prototype.kind]=t}catch(e){throw{name:e.name,message:"Failed to register codec "+t.prototype.kind+": "+e.message}}},r.get=function(e){for(var t=0;t<n.length;t++){var r=n[t];if(r.prototype.kind===e)return r}return null},e.codec=r.get,e.Codec=r}(playease),function(e){var n=e.utils.Golomb,t=e.events,a=t.EventDispatcher,d=t.Event,c=t.MediaEvent,l=e.AV,u=l.Packet,e=l.Codec,p={SPECIFIC_CONFIG:0,RAW_FRAME_DATA:1},f={NULL:0,AAC_MAIN:1,AAC_LC:2,AAC_SSR:3,AAC_LTP:4,SBR:5,AAC_SCALABLE:6,TWINVQ:7,CELP:8,HVXC:9,TTSI:12,MAINSYNTH:13,WAVESYNTH:14,MIDI:15,SAFX:16,ER_AAC_LC:17,ER_AAC_LTP:19,ER_AAC_SCALABLE:20,ER_TWINVQ:21,ER_BSAC:22,ER_AAC_LD:23,ER_CELP:24,ER_HVXC:25,ER_HILN:26,ER_PARAM:27,SSC:28,PS:29,SURROUND:30,ESCAPE:31,L1:32,L2:33,L3:34,DST:35,ALS:36,SLS:37,SLS_NON_CORE:38,ER_AAC_ELD:39,SMR_SIMPLE:40,SMR_MAIN:41,USAC_NOSBR:42,SAOC:43,LD_SURROUND:44,USAC:45},m=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],g=[0,1,2,3,4,5,6,8],E=[new Uint8Array([0,200,0,128,35,128]),new Uint8Array([33,0,73,144,2,25,0,35,128]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])],v=[new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]),new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]),new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])];function r(e,t){a.call(this,"AAC",{logger:t},c,[d.ERROR]);var r,o=this,i=e,s=t;o.parse=function(e){if(e.left()<1)o.dispatchEvent(d.ERROR,{name:"DataError",message:"Data not enough while parsing AAC packet."});else{i.Timestamp=Math.max(e.timestamp,i.VideoTimestamp);var t=new DataView(e.payload.buffer);switch(e.set("DataType",t.getUint8(e.position++)),e.set("CTS",0),e.get("DataType")){case p.SPECIFIC_CONFIG:i.MimeType||(i.MimeType=o.MimeType),function(e){if(e.left()<2)return o.dispatchEvent(d.ERROR,{name:"DataError",message:"Data not enough while parsing AAC specific config."});r=new n(e.payload.subarray(e.position)),o.AudioObjectType=r.ReadBits(5),o.AudioObjectType===f.ESCAPE&&(o.AudioObjectType=32+r.ReadBits(6));o.SamplingFrequencyIndex=r.ReadBits(4),15===o.SamplingFrequencyIndex?o.SamplingFrequency=r.ReadBits(24):o.SamplingFrequency=m[o.SamplingFrequencyIndex];i.SampleRate=o.SamplingFrequency,o.ChannelConfiguration=r.ReadBits(4),o.ChannelConfiguration<16&&(o.Channels=g[o.ChannelConfiguration],i.Channels=o.Channels);if(o.AudioObjectType===f.SBR||o.AudioObjectType===f.PS&&0==(3&r.ShowBits(3))&&0==(63&r.ShowBits(9)))switch(o.ExtensionSamplingFrequencyIndex=r.ReadBits(4),15===o.ExtensionSamplingFrequencyIndex?o.ExtensionSamplingFrequency=r.ReadBits(24):o.ExtensionSamplingFrequency=m[o.ExtensionSamplingFrequencyIndex],i.SampleRate=o.ExtensionSamplingFrequency,o.ExtensionAudioObjectType=r.ReadBits(5),o.ExtensionAudioObjectType){case f.ESCAPE:o.ExtensionAudioObjectType=32+r.ReadBits(6);break;case f.ER_BSAC:o.ExtensionChannelConfiguration=r.ReadBits(4),o.Channels=g[o.ExtensionChannelConfiguration],i.Channels=o.Channels}else o.ExtensionAudioObjectType=f.NULL,o.ExtensionSamplingFrequency=0;if(o.AudioObjectType===f.ALS){r.ShowBits(5),4279379!==r.ShowBitsLong(24)&&r.SkipBits(24);try{!function(){if(r.Left()<112)throw{name:"DataError",message:"Data not enough while parsing ALS config."};if(1095521024!==r.ReadBitsLong(32))throw{name:"TypeError",message:"Not ALS\\0"};o.SamplingFrequency=r.ReadBitsLong(32),i.SampleRate=o.SamplingFrequency,r.SkipBits(32),o.ChannelConfiguration=0,o.Channels=r.ReadBits(16)+1,i.Channels=o.Channels}()}catch(e){return s.error("Failed to parse AAC config ALS."),o.dispatchEvent(d.ERROR,{name:e.name,message:e.message})}}o.RefSampleDuration=Math.floor(1024*i.Timescale/o.SamplingFrequency),o.AudioObjectType=f.SBR,o.ExtensionSamplingFrequencyIndex=o.SamplingFrequencyIndex,6<=o.SamplingFrequencyIndex?o.ExtensionSamplingFrequencyIndex-=3:1===o.ChannelConfiguration&&(o.AudioObjectType=f.AAC_LC);o.AudioObjectType===f.SBR?o.Config=new Uint8Array([o.AudioObjectType<<3|o.SamplingFrequencyIndex>>1,o.SamplingFrequencyIndex<<7|o.ChannelConfiguration<<3|o.ExtensionSamplingFrequencyIndex>>1,o.ExtensionSamplingFrequencyIndex<<7|8,0]):o.Config=new Uint8Array([o.AudioObjectType<<3|o.SamplingFrequencyIndex>>1,o.SamplingFrequencyIndex<<7|o.ChannelConfiguration<<3]);o.Codec="mp4a.40."+o.AudioObjectType,i.Codecs.push(o.Codec),o.dispatchEvent(c.AAC_SPECIFIC_CONFIG,{packet:e})}(e);break;case p.RAW_FRAME_DATA:!function(e){i.AudioTimestamp=e.timestamp;for(var t=e.timestamp-i.AudioTimestamp,r=Math.ceil(t/o.RefSampleDuration),n=0;n<r-1;n++){var a=new l.Packet;if(a.kind=u.KindAudio,a.codec=e.codec,a.timestamp=i.AudioTimestamp+o.RefSampleDuration,a.streamid=e.streamid,a.payload=(o.AudioObjectType!==AAC_LC?v:E)[o.Channels],void 0===a.payload){s.warn("Failed to get silent frame: AudioObjectType="+o.AudioObjectType+", Channels="+o.Channels);break}a.length=a.payload.byteLength,a.set("DTS",i.TimeBase+a.timestamp),a.set("PTS",a.get("DTS")),a.set("Data",a.payload),s.warn("Generates silent frame: "+a.timestamp),i.AudioTimestamp=a.timestamp,o.dispatchEvent(c.AAC_SAMPLE,{packet:a})}e.set("DTS",i.TimeBase+e.timestamp),e.set("PTS",e.get("DTS")),e.set("Data",e.payload.subarray(e.position)),o.dispatchEvent(c.AAC_SAMPLE,{packet:e})}(e);break;default:o.dispatchEvent(d.ERROR,{name:"TypeError",message:"Unrecognized AAC packet type: "+o.DataType})}}},o.MimeType="audio/mp4",o.Codec="",o.RefSampleDuration=Math.floor(1024*i.Timescale/44100),o.AudioObjectType=0,o.SamplingFrequencyIndex=0,o.SamplingFrequency=0,o.ChannelConfiguration=0,o.Channels=0,o.ExtensionAudioObjectType=0,o.ExtensionSamplingFrequencyIndex=0,o.ExtensionSamplingFrequency=0,o.ExtensionChannelConfiguration=0,o.Config=null,o.Flags={IsLeading:0,SampleDependsOn:1,SampleIsDependedOn:0,SampleHasRedundancy:0,IsNonSync:0}}((r.prototype=Object.create(a.prototype)).constructor=r).prototype.kind="AAC",r.DataTypes=p,r.AOT=f,r.SamplingFrequencys=m,r.Channels=g,r.SilentFramesOfLC=E,r.SilentFramesOfSBR=v,e.register(r)}(playease),function(e){e.utils;var t=e.events,r=t.EventDispatcher,f=t.Event,m=t.MediaEvent,e=e.AV.Codec,n={SEQUENCE_HEADER:0,NALU:1,END_OF_SEQUENCE:2},s={SLICE:1,DPA:2,DPB:3,DPC:4,IDR_SLICE:5,SEI:6,SPS:7,PPS:8,AUD:9,END_SEQUENCE:10,END_STREAM:11,FILLER_DATA:12,SPS_EXT:13,AUXILIARY_SLICE:19,FF_IGNORE:267448321};function a(c,e){r.call(this,"AVC",{logger:e},m,[f.ERROR]);var l=this,u=c,p=e;l.parse=function(e){if(e.left()<4)l.dispatchEvent(f.ERROR,{name:"DataError",message:"Data not enough while parsing AVC packet."});else{u.Timestamp=Math.max(e.timestamp,u.AudioTimestamp);var t=new DataView(e.payload.buffer);switch(e.set("DataType",t.getUint8(e.position++)),e.set("CTS",t.getUint8(e.position++)<<16|t.getUint8(e.position++)<<8|t.getUint8(e.position++)),e.get("DataType")){case n.SEQUENCE_HEADER:u.MimeType=l.MimeType,function(e){if(e.left()<7)return l.dispatchEvent(f.ERROR,{name:"DataError",message:"Data not enough while parsing AVC decoder configuration record."});l.AVCC=e.payload.subarray(e.position);var t=0,r=new DataView(e.payload.buffer,e.position);if(l.ConfigurationVersion=r.getUint8(t++),l.ProfileIndication=r.getUint8(t++),l.ProfileCompatibility=r.getUint8(t++),l.LevelIndication=r.getUint8(t++),1!==l.ConfigurationVersion||0===l.ProfileIndication)return l.dispatchEvent(f.ERROR,{name:"DataError",message:"Invalid AVC configuration version or profile."});if(l.NalLengthSize=1+(3&r.getUint8(t++)),l.NalLengthSize<3)return l.dispatchEvent(f.ERROR,{name:"DataError",message:"Invalid NalLengthSize "+l.NalLengthSize});for(var n=31&r.getUint8(t++),a=0;a<n;a++){var o=r.getUint16(t);if(t+=2,0!==o){var i=l.AVCC.subarray(t,t+o);t+=o;try{l.SPS.parse(i),l.RefSampleDuration=Math.floor(u.Timescale*c.FrameRate.Den/c.FrameRate.Num)}catch(e){p.warn(e.name+": "+e.message);break}}}for(var s=r.getUint8(t++),a=0;a<s;a++){var d=r.getUint16(t);t+=2,0!==d&&(t+=d)}l.Codec=l.SPS.Codec,u.Codecs.push(l.Codec),l.dispatchEvent(m.AVC_CONFIG_RECORD,{packet:e})}(e);break;case n.NALU:!function(e){u.VideoTimestamp=e.timestamp;var t=0,r=new DataView(e.payload.buffer,e.position),n=e.payload.subarray(e.position),a=[];e.set("DTS",u.TimeBase+e.timestamp),e.set("PTS",e.get("CTS")+e.get("DTS")),e.set("Data",n),e.set("NALUs",a);for(;t<r.byteLength;){if(t+4>=r.byteLength)return l.dispatchEvent(f.ERROR,{name:"DataError",message:"Data not enough for next NALU."});var o=r.getUint32(t);if(3===l.NalLengthSize&&(o>>=8),o>r.byteLength-l.NalLengthSize)return l.dispatchEvent(f.ERROR,{name:"DataError",message:"Malformed Nalus near timestamp "+e.get("DTS")+"."});var i=r.getUint8(t+l.NalLengthSize);if(e.set("ForbiddenZeroBit",i>>7&1),e.set("NalRefIdc",i>>5&3),e.set("NalUnitType",31&i),e.get("NalUnitType")===s.IDR_SLICE&&e.set("Keyframe",!0),0!==e.get("ForbiddenZeroBit"))return p.warn("Invalid NAL unit "+e.get("NalUnitType")+", skipping.");i=n.subarray(t,t+l.NalLengthSize+o);a.push(i),e.get("NalUnitType")===s.SEI&&l.dispatchEvent(m.SEI,{packet:e,nalu:i}),t+=l.NalLengthSize+o}l.dispatchEvent(m.AVC_SAMPLE,{packet:e})}(e);break;case n.END_OF_SEQUENCE:p.debug("AVC sequence end."),l.dispatchEvent(m.END_OF_STREAM,{packet:e});break;default:l.dispatchEvent(f.ERROR,{name:"TypeError",message:"Unrecognized AVC packet type: "+e.get("DataType")})}}},l.MimeType="video/mp4",l.Codec="",l.RefSampleDuration=Math.floor(u.Timescale*c.FrameRate.Den/c.FrameRate.Num),l.AVCC=null,l.ConfigurationVersion=0,l.ProfileIndication=0,l.ProfileCompatibility=0,l.LevelIndication=0,l.NalLengthSize=0,l.SPS=new a.SPS(u,p),l.PPS=new a.PPS(l.SPS,p),l.Flags={IsLeading:0,SampleDependsOn:0,SampleIsDependedOn:0,SampleHasRedundancy:0,IsNonSync:0}}a.prototype=Object.create(r.prototype),(a.prototype.constructor=a).prototype.kind="AVC",a.DataTypes=n,a.NAL=s,e.register(a)}(playease),function(e){var E=e.utils,v=E.Golomb,e=e.AV,a=e.Rational,h=e.Codec,e=h.AVC,o=255,i=[new a(0,1),new a(1,1),new a(12,11),new a(10,11),new a(16,11),new a(40,33),new a(24,11),new a(20,11),new a(32,11),new a(80,33),new a(18,11),new a(15,11),new a(64,33),new a(160,99),new a(4,3),new a(3,2),new a(2,1)];function s(e){var r,n=this;n.parse=function(e){if(r=e,n.CpbCnt=r.ReadUE()+1,32<n.CpbCnt)throw{name:"DataError",message:"Invalid HRD.CpbCnt "+n.CpbCnt+"."};n.BitRateScale=r.ReadBits(4),n.CpbSizeScale=r.ReadBits(4);for(var t=0;t<n.CpbCnt;t++)n.BitRateValue[t]=r.ReadUE(),n.CpbSizeValue[t]=r.ReadUE(),n.CbrFlag|=r.ReadBits(1)<<t;n.InitialCpbRemovalDelayLength=_b.ReadBits(5)+1,n.CpbRemovalDelayLength=r.ReadBits(5)+1,n.DpbOutputDelayLength=r.ReadBits(5)+1,n.TimeOffsetLength=r.ReadBits(5)},n.CpbCnt=0,n.BitRateScale=0,n.CpbSizeScale=0,n.BitRateValue=new Array(32),n.CpbSizeValue=new Array(32),n.CbrFlag=0,n.InitialCpbRemovalDelayLength=0,n.CpbRemovalDelayLength=0,n.DpbOutputDelayLength=0,n.TimeOffsetLength=0}function t(e){var t,r=this,n=e;r.parse=function(e){if(t=e,r.AspectRatioInfoPresentFlag=t.ReadBits(1),0!==r.AspectRatioInfoPresentFlag)if(r.AspectRatioIdc=t.ReadBits(8),r.AspectRatioIdc===o)r.Sar.Num=t.ReadBits(16),r.Sar.Den=t.ReadBits(16);else{if(!(r.AspectRatioIdc<i.length))throw{name:"DataError",message:"Illegal aspect ratio."};r.Sar=i[r.AspectRatioIdc]}else r.Sar.Num=0,r.Sar.Den=0;if(r.OverscanInfoPresentFlag=t.ReadBits(1),0!==r.OverscanInfoPresentFlag&&(r.OverscanAppropriateFlag=t.ReadBits(1)),r.VideoSignalTypePresentFlag=t.ReadBits(1),0!==r.VideoSignalTypePresentFlag&&(r.VideoFormat=t.ReadBits(3),r.VideoFullRangeFlag=t.ReadBits(1),r.ColourDescriptionPresentFlag=t.ReadBits(1),0!==r.ColourDescriptionPresentFlag&&(r.ColourPrimaries=t.ReadBits(8),r.TransferCharacteristics=t.ReadBits(8),r.MatrixCoefficients=t.ReadBits(8),r.ColourPrimaries>=h.COL_PRI_NB&&(r.ColourPrimaries=h.COL_PRI_UNSPECIFIED),r.TransferCharacteristics>=h.COL_TRC_NB&&(r.TransferCharacteristics=h.COL_TRC_UNSPECIFIED),r.MatrixCoefficients>=h.COL_SPC_NB&&(r.MatrixCoefficients=h.COL_SPC_UNSPECIFIED))),r.ChromaLocInfoPresentFlag=t.ReadBits(1),0!==r.ChromaLocInfoPresentFlag&&(r.ChromaSampleLocTypeTopField=t.ReadUE(),r.ChromaSampleLocTypeBottomField=t.ReadUE()),0!==t.ReadBits(1)&&t.Left()<10)throw{name:"DataError",message:"Truncated VUI."};if(r.TimingInfoPresentFlag=t.ReadBits(1),0!==r.TimingInfoPresentFlag&&(r.NumUnitsInTick=t.ReadBitsLong(32),r.TimeScale=t.ReadBitsLong(32),0!==r.NumUnitsInTick&&0!==r.TimeScale||(n.debug("time_scale/num_units_in_tick invalid or unsupported "+r.TimeScale+"/"+r.NumUnitsInTick),r.TimingInfoPresentFlag=0),r.FixedFrameRateFlag=t.ReadBits(1)),r.NalHrdParametersPresentFlag=t.ReadBits(1),0!==r.NalHrdParametersPresentFlag&&r.NalHrd.parse(t),r.VclHrdParametersPresentFlag=t.ReadBits(1),0!==r.VclHrdParametersPresentFlag&&r.VclHrd.parse(t),0===r.NalHrdParametersPresentFlag&&0===r.VclHrdParametersPresentFlag||(r.LowDelayHrdFlag=t.ReadBits(1)),r.PicStructPresentFlag=t.ReadBits(1),0!==t.Left()&&(r.BitstreamRestrictionFlag=t.ReadBits(1),0!==r.BitstreamRestrictionFlag&&(r.MotionVectorsOverPicBoundariesFlag=t.ReadBits(1),r.MaxBytesPerPicDenom=t.ReadUE(),r.MaxBitsPerMbDenom=t.ReadUE(),r.Log2MaxMvLengthHorizontal=t.ReadUE(),r.Log2MaxMvLengthVertical=t.ReadUE(),r.MaxNumReorderFrames=t.ReadUE(),r.MaxDecFrameBuffering=t.ReadUE(),t.Left()<0&&(r.MaxNumReorderFrames=0,r.BitstreamRestrictionFlag=0),16<r.MaxNumReorderFrames)))throw r.MaxNumReorderFrames=16,{name:"DataError",message:"Clipping illegal MaxNumReorderFrames "+r.MaxNumReorderFrames+"."}},r.AspectRatioInfoPresentFlag=0,r.AspectRatioIdc=0,r.Sar=new a(1,1),r.OverscanInfoPresentFlag=0,r.OverscanAppropriateFlag=0,r.VideoSignalTypePresentFlag=0,r.VideoFormat=0,r.VideoFullRangeFlag=0,r.ColourDescriptionPresentFlag=0,r.ColourPrimaries=0,r.TransferCharacteristics=0,r.MatrixCoefficients=0,r.ChromaLocInfoPresentFlag=0,r.ChromaSampleLocTypeTopField=0,r.ChromaSampleLocTypeBottomField=0,r.TimingInfoPresentFlag=0,r.NumUnitsInTick=0,r.TimeScale=0,r.FixedFrameRateFlag=0,r.NalHrdParametersPresentFlag=0,r.NalHrd=new s,r.VclHrdParametersPresentFlag=0,r.VclHrd=new s,r.LowDelayHrdFlag=0,r.PicStructPresentFlag=0,r.BitstreamRestrictionFlag,r.MotionVectorsOverPicBoundariesFlag=0,r.MaxBytesPerPicDenom=0,r.MaxBitsPerMbDenom=0,r.Log2MaxMvLengthHorizontal=0,r.Log2MaxMvLengthVertical=0,r.MaxNumReorderFrames=0,r.MaxDecFrameBuffering=0}e.SPS=function(p,e){var f,m=this,g=e;m.parse=function(e){if(e.byteLength<4)throw{name:"DataError",message:"Data not enough while parsing SPS."};m.Codec="avc1.",E.forEach(e.subarray(1,4),function(e,t){t=E.padStart(t.toString(16),2,"0");m.Codec+=t});var t=E.ebsp2rbsp(e);if(f=new v(t),m.Data=t,f.ReadBits(8),m.ProfileIdc=f.ReadBits(8),m.ConstraintSetFlags=f.ReadBits(1)<<0,m.ConstraintSetFlags|=f.ReadBits(1)<<1,m.ConstraintSetFlags|=f.ReadBits(1)<<2,m.ConstraintSetFlags|=f.ReadBits(1)<<3,m.ConstraintSetFlags|=f.ReadBits(1)<<4,m.ConstraintSetFlags|=f.ReadBits(1)<<5,m.ReservedZero2Bits=f.ReadBits(2),m.LevelIdc=f.ReadBits(8),m.ID=f.ReadUE(),32<=m.ID)throw{name:"DataError",message:"SPS ID(0x"+m.ID.toString(16)+") out of range."};if(m.SeqScalingMatrixPresentFlag=0,m.Vui.VideoFullRangeFlag=1,m.Vui.MatrixCoefficients=h.COL_SPC_UNSPECIFIED,100===m.ProfileIdc||110===m.ProfileIdc||122===m.ProfileIdc||244===m.ProfileIdc||44===m.ProfileIdc||83===m.ProfileIdc||86===m.ProfileIdc||118===m.ProfileIdc||128===m.ProfileIdc||138===m.ProfileIdc||144===m.ProfileIdc){if(m.ChromaFormatIdc=f.ReadUE(),3<m.ChromaFormatIdc)throw{name:"DataError",message:"Bad ChromaFormatIdc "+m.ChromaFormatIdc+"."};if(3===m.ChromaFormatIdc&&(m.SeparateColourPlaneFlag=f.ReadBits(1),0!==m.SeparateColourPlaneFlag))throw{name:"DataError",message:"Separate color planes are not supported."};if(m.BitDepthLuma=f.ReadUE()+8,m.BitDepthChroma=f.ReadUE()+8,m.BitDepthChroma!==m.BitDepthLuma)throw{name:"DataError",message:"Different chroma and luma bit depth."};if(m.BitDepthLuma<8||14<m.BitDepthLuma||m.BitDepthChroma<8||14<m.BitDepthChroma)throw{name:"DataError",message:"Illegal bit depth value "+m.BitDepthLuma+", "+m.BitDepthChroma+"."};if(m.TransformBypass=f.ReadBits(1),m.SeqScalingMatrixPresentFlag=f.ReadBits(1),0!==m.SeqScalingMatrixPresentFlag){var r=8;3===m.ChromaFormatIdc&&(r+=4);for(var n=0;n<r;n++)if(0!=f.ReadBits(1)){var a=16;6<=n&&(a=64);for(var o=8,i=8,s=0;s<a;s++)0!=(i=(o+f.ReadSE()+256)%256)&&(o=i)}}}else m.ChromaFormatIdc=1,m.BitDepthLuma=8,m.BitDepthChroma=8;if(m.Log2MaxFrameNum=f.ReadUE()+4,m.Log2MaxFrameNum<4||16<m.Log2MaxFrameNum)throw{name:"DataError",message:"log2_max_frame_num_minus4("+(m.Log2MaxFrameNum-4)+") out of range, expect 0-12."};if(m.PocType=f.ReadUE(),0===m.PocType){if(m.Log2MaxPocLsb=f.ReadUE()+4,16<m.Log2MaxPocLsb)throw{name:"DataError",message:"log2_max_poc_lsb("+m.Log2MaxPocLsb+") is out of range."}}else if(1===m.PocType){m.DeltaPicOrderAlwaysZeroFlag=f.ReadBits(1),m.OffsetForNonRefPic=f.ReadUE(),m.OffsetForTopToBottomField=f.ReadUE(),m.NumRefFramesInPocCycle=f.ReadUE();r=m.OffsetForRefFrame.length;if(m.NumRefFramesInPocCycle>=r)throw{name:"DataError",message:"poc_cycle_length("+m.NumRefFramesInPocCycle+") overflow."};for(n=0;n<m.NumRefFramesInPocCycle;n++)m.OffsetForRefFrame[n]=f.ReadUE()}else if(2!==m.PocType)throw{name:"DataError",message:"Illegal POC type "+m.PocType+"."};if(m.MaxNumRefFrames=f.ReadUE(),34<m.MaxNumRefFrames||16<m.MaxNumRefFrames)throw{name:"DataError",message:"Too many reference frames, "+m.MaxNumRefFrames+"."};if(m.GapsInFrameNumValueAllowedFlag=f.ReadBits(1),m.PicWidth=f.ReadUE()+1,m.PicHeight=f.ReadUE()+1,m.PicWidth>=E.MAX_INT32/16||m.PicHeight>=E.MAX_INT32/16||!1==(d=16*m.PicWidth,c=16*m.PicHeight,0!==d&&0!==c&&(d+128)*(c+128)<E.MAX_INT32/8))throw{name:"DataError",message:"pic_width or pic_height overflow."};if(m.FrameMbsOnlyFlag=f.ReadBits(1),0===m.FrameMbsOnlyFlag?m.MbAdaptiveFrameFieldFlag=f.ReadBits(1):m.MbAdaptiveFrameFieldFlag=0,p.CodecWidth=16*m.PicWidth,p.CodecHeight=16*m.PicHeight*(2-m.FrameMbsOnlyFlag),m.Direct8x8InferenceFlag=f.ReadBits(1),m.FrameCroppingFlag=f.ReadBits(1),0!==m.FrameCroppingFlag){var e=f.ReadUE(),t=f.ReadUE(),d=f.ReadUE(),c=f.ReadUE();1===m.ChromaFormatIdc&&(u=1),1!==m.ChromaFormatIdc&&2!==m.ChromaFormatIdc||(l=1);var l=1<<l,u=2-m.FrameMbsOnlyFlag<<u;if(e>E.MAX_INT32/4/l||t>E.MAX_INT32/4/l||d>E.MAX_INT32/4/u||c>E.MAX_INT32/4/u||(e+t)*l>=p.CodecWidth||(d+c)*u>=p.CodecHeight)throw{name:"DataError",message:"Invalid crop values, l="+e+", r="+t+", t="+d+", b="+c+", w="+p.CodecWidth+", h="+p.CodecHeight+"."};m.FrameCropLeftOffset=e*l,m.FrameCropRightOffset=t*l,m.FrameCropTopOffset=d*u,m.FrameCropBottomOffset=c*u}else m.FrameCropLeftOffset=0,m.FrameCropRightOffset=0,m.FrameCropTopOffset=0,m.FrameCropBottomOffset=0;if(m.VuiParametersPresentFlag=f.ReadBits(1),0!==m.VuiParametersPresentFlag){try{m.Vui.parse(f)}catch(e){g.warn(e.name+": "+e.message)}0!==m.Vui.TimingInfoPresentFlag&&(p.FrameRate.Num=m.Vui.TimeScale,p.FrameRate.Den=2*m.Vui.NumUnitsInTick)}p.CodecWidth-=m.FrameCropLeftOffset+m.FrameCropRightOffset,p.CodecHeight-=m.FrameCropTopOffset+m.FrameCropBottomOffset,p.Width=p.CodecWidth,p.Height=p.CodecHeight,1<m.Vui.Sar.Den&&(p.Width*=m.Vui.Sar.Num/m.Vui.Sar.Den)},m.ProfileIdc=0,m.ConstraintSetFlags=0,m.ReservedZero2Bits=0,m.LevelIdc=0,m.ID=0,m.ChromaFormatIdc=0,m.SeparateColourPlaneFlag=0,m.BitDepthLuma=0,m.BitDepthChroma=0,m.TransformBypass=0,m.SeqScalingMatrixPresentFlag=0,m.Log2MaxFrameNum=0,m.PocType=0,m.Log2MaxPocLsb=0,m.DeltaPicOrderAlwaysZeroFlag=0,m.OffsetForNonRefPic=0,m.OffsetForTopToBottomField=0,m.NumRefFramesInPocCycle=0,m.OffsetForRefFrame=new Array(256),m.MaxNumRefFrames=0,m.GapsInFrameNumValueAllowedFlag=0,m.PicWidth=0,m.PicHeight=0,m.FrameMbsOnlyFlag=0,m.MbAdaptiveFrameFieldFlag=0,m.Direct8x8InferenceFlag=0,m.FrameCroppingFlag=0,m.FrameCropLeftOffset=0,m.FrameCropRightOffset=0,m.FrameCropTopOffset=0,m.FrameCropBottomOffset=0,m.VuiParametersPresentFlag=0,m.Vui=new t(g)}}(playease),function(e){var i=e.utils,s=i.Golomb,e=e.AV.Codec.AVC;e.PPS=function(e,t){var r,n=this,a=e,o=t;n.parse=function(e){e=i.ebsp2rbsp(e);if(r=new s(e),n.Data=e,n.ID=r.ReadUE(),256<=n.ID)throw{name:"DataError",message:"PPS ID(0x"+n.ID.toString(16)+") out of range."};if(n.SpsID=r.ReadUE(),32<=n.SpsID)throw{name:"DataError",message:"SPS ID(0x"+n.SpsID.toString(16)+") out of range."};if(14<a.BitDepthLuma)throw{name:"DataError",message:"Invalid BitDepthLuma "+a.BitDepthLuma+"."};if(11===a.BitDepthLuma||13===a.BitDepthLuma)throw{name:"DataError",message:"Unimplemented BitDepthLuma "+a.BitDepthLuma+"."};if(n.EntropyCodingModeFlag=r.ReadBits(1),n.PicOrderPresentFlag=r.ReadBits(1),n.NumSliceGroups=r.ReadUE()+1,1<n.NumSliceGroups&&(n.SliceGroupMapType=r.ReadUE(),o.debug("FMO not supported!"),n.SliceGroupMapType),n.NumRefIdx[0]=r.ReadUE()+1,n.NumRefIdx[1]=r.ReadUE()+1,31<n.NumRefIdx[0]-1||31<n.NumRefIdx[1]-1)throw{name:"DataError",message:"PPS reference overflow."};e=6*(a.BitDepthLuma-8);n.WeightedPredFlag=r.ReadBits(1),n.WeightedBipredIdc=r.ReadBits(2),n.PicInitQp=r.ReadSE()+26+e,n.PicInitQs=r.ReadSE()+26+e,n.ChromaQpIndexOffset[0]=r.ReadSE(),n.DeblockingFilterControlPresentFlag=r.ReadBits(1),n.ConstrainedIntraPredFlag=r.ReadBits(1),n.RedundantPicCntPresentFlag=r.ReadBits(1),(n.Transform8x8ModeFlag=0)<r.Left()&&(66!==a.ProfileIdc&&77!==a.ProfileIdc&&88!==a.ProfileIdc||0==(7&a.ConstraintSetFlags)||(o.debug("Current profile doesn't provide more RBSP data in PPS, skipping..."),0))?(n.Transform8x8ModeFlag=r.ReadBits(1),n.PicScalingMatrixPresentFlag=r.ReadBits(1),0!==n.PicScalingMatrixPresentFlag&&(e=2,3===a.ChromaFormatIdc&&(e=6),r.ReadBits(6+e*n.Transform8x8ModeFlag)),n.ChromaQpIndexOffset[1]=r.ReadSE()):n.ChromaQpIndexOffset[1]=n.ChromaQpIndexOffset[0],n.ChromaQpIndexOffset[0]!==n.ChromaQpIndexOffset[1]&&(n.ChromaQpDiff=1)},n.ID=0,n.SpsID=0,n.EntropyCodingModeFlag=0,n.PicOrderPresentFlag=0,n.NumSliceGroups=0,n.SliceGroupMapType=0,n.NumRefIdx=new Array(2),n.WeightedPredFlag=0,n.WeightedBipredIdc=0,n.PicInitQp=0,n.PicInitQs=0,n.ChromaQpIndexOffset=new Array(2),n.DeblockingFilterControlPresentFlag=0,n.ConstrainedIntraPredFlag=0,n.RedundantPicCntPresentFlag=0,n.Transform8x8ModeFlag=0,n.PicScalingMatrixPresentFlag=0,n.ChromaQpDiff=0}}(playease),function(e){var d=e.utils,t=e.events,c=t.EventDispatcher,l=t.Event,u=t.MediaStreamTrackEvent,e=e.AV,p=e.Information,r={},n=[];function f(e,t,r){c.call(this,"MediaStreamTrack",{logger:r});var n=this,a=r;n.stop=function(){n.source=null,n.sn=0,n.timestamp=0},n.clone=function(){return new f(n.kind,n.source,a)},n.id=0,n.kind=e,n.source=t,n.sn=0,n.timestamp=0}function a(e,t){var r=Array.prototype.slice.call(arguments,2);c.apply(this,[e,t].concat(r).concat([u,[l.ERROR]]));var n,a,o=this,i=t.logger;function s(){n=1,a=[],o.info=new p}o.addTrack=function(e){for(var t=0;t<a.length;t++)if(a[t]===e)return void i.warn("MediaStreamTrack already added.");e.id=n++,a.push(e),i.log("Added "+e.kind+" track("+e.id+") to "+o.kind+"."),o.dispatchEvent(u.ADDTRACK,{track:e})},o.removeTrack=function(e){for(var t=0;t<a.length;t++)if(a[t]===e){a.splice(t,1),i.log("Removed "+e.kind+" track("+e.id+") to "+o.kind+"."),o.dispatchEvent(u.REMOVETRACK,{track:e});break}},o.getTrackById=function(e){for(var t=0;t<a.length;t++)if(a[t].id===e)return a[t];return null},o.getTracks=function(){var r=[];return d.forEach(a,function(e,t){r.push(t)}),r},o.getAudioTracks=function(){var r=[];return d.forEach(a,function(e,t){t.kind===f.KindAudio&&r.push(t)}),r},o.getVideoTracks=function(){var r=[];return d.forEach(a,function(e,t){t.kind===f.KindVideo&&r.push(t)}),r},o.attached=function(e){for(var t=0;t<a.length;t++)if(a[t].source===e)return a[t];return null},o.close=function(){d.forEach(a,function(e,t){t.stop(),o.dispatchEvent(u.REMOVETRACK,{track:t})}),s()},s()}((f.prototype=Object.create(c.prototype)).constructor=f).prototype.kind="MediaStreamTrack",((a.prototype=Object.create(c.prototype)).constructor=a).prototype.kind="MediaStream",r.register=function(t,e){try{n.splice(e||n.length,0,t),r[t.prototype.kind]=t}catch(e){throw{name:e.name,message:"Failed to register format "+t.prototype.kind+": "+e.message}}},r.get=function(e){for(var t=0;t<n.length;t++){var r=n[t];if(r.prototype.kind===e)return r}return null},f.KindAudio="audio",f.KindVideo="video",r.MediaStreamTrack=f,r.MediaStream=a,e.format=r.get,e.Format=r}(playease),function(e){var d=e.utils,t=e.events,c=t.Event,l=t.MediaEvent,u=e.AV,p=u.Packet,e=u.Format,r=e.MediaStream,f={AUDIO:8,VIDEO:9,SCRIPT:18},m={KEYFRAME:1,INTER_FRAME:2,DISPOSABLE_INTER_FRAME:3,GENERATED_KEYFRAME:4,INFO_OR_COMMAND_FRAME:5},g=0,E=1,v=2,h=3,y=4,R=5,S=6,L=7,A=8,w=9,b=10,C=11,O=12,T=13,I=14,N=15,D=16,P=17,F=18,k=19,M=20,B=21,x=22,U=23,_=24;function n(e){r.call(this,"FLV",{logger:e},[l.PACKET],[c.ERROR]);var a,o,i=this,s=e;function t(){a=g,i.hasAudio=!1,i.hasVideo=!1}i.append=function(e){for(var t=new Uint8Array(e),r=0;r<t.byteLength;r++)switch(a){case g:if(70!==t[r])return void i.dispatchEvent(c.ERROR,{name:"DataError",message:'Not "F"'});a=E;break;case E:if(76!==t[r])return void i.dispatchEvent(c.ERROR,{name:"DataError",message:'Not "L"'});a=v;break;case v:if(86!==t[r])return void i.dispatchEvent(c.ERROR,{name:"DataError",message:'Not "V"'});a=h;break;case h:t[r],a=y;break;case y:i.hasAudio=!!(4&t[r]),i.hasVideo=!!(1&t[r]),s.log("Flags: hasAudio="+i.hasAudio+", hasVideo="+i.hasVideo),i.hasAudio||i.hasVideo,a=R;break;case R:a=S;break;case S:a=L;break;case L:a=A;break;case A:a=w;break;case w:t[r],a=b;break;case b:t[r],a=C;break;case C:t[r],a=O;break;case O:t[r],a=T;break;case T:switch(o=new u.Packet,t[r]){case f.AUDIO:o.kind=p.KindAudio;break;case f.VIDEO:o.kind=p.KindVideo;break;case f.SCRIPT:o.kind=p.KindScript;break;default:return void i.dispatchEvent(c.ERROR,{name:"TypeError",message:"Unrecognized flv tag "+d.hex(t[r])+"."})}a=I;break;case I:o.length=t[r]<<16,a=N;break;case N:o.length|=t[r]<<8,a=D;break;case D:o.length|=t[r],o.payload=new Uint8Array(o.length),o.position=0,a=P;break;case P:o.timestamp=t[r]<<16,a=F;break;case F:o.timestamp|=t[r]<<8,a=k;break;case k:o.timestamp|=t[r],a=M;break;case M:o.timestamp|=t[r]<<24,a=B;break;case B:o.streamid=t[r]<<16,a=x;break;case x:o.streamid|=t[r]<<8,a=U;break;case U:o.streamid|=t[r],a=_;break;case _:var n=Math.min(o.length-o.position,t.byteLength-r);if(o.payload.set(t.subarray(r,r+n),o.position),o.position+=n,r+=n-1,o.position===o.length){switch(o.kind){case p.KindAudio:o.set("Format",o.payload[0]>>4&15),o.set("SampleRate",o.payload[0]>>2&3),o.set("SampleSize",o.payload[0]>>1&1),o.set("SampleType",1&o.payload[0]),o.set("DataType",o.payload[1]),o.position=1;break;case p.KindVideo:o.set("FrameType",o.payload[0]>>4&15),o.set("Codec",15&o.payload[0]),o.set("DataType",o.payload[1]),o.set("Keyframe",o.get("FrameType")===m.KEYFRAME),o.position=1;break;case p.KindScript:o.position=0}i.dispatchEvent(l.PACKET,{packet:o}),a=w}break;default:return void i.dispatchEvent(c.ERROR,{name:"InvalidStateError",message:"Invalid state while parsing flv tag."})}},i.reset=function(){t(),i.close()},t()}((n.prototype=Object.create(r.prototype)).constructor=n).prototype.kind="FLV",n.Tags=f,n.Frames=m,n.Formats={LINEAR_PCM_PLATFORM_ENDIAN:0,ADPCM:1,MP3:2,LINEAR_PCM_LITTLE_ENDIAN:3,NELLYMOSER_16_kHz_MONO:4,NELLYMOSER_8_kHz_MONO:5,NELLYMOSER:6,G_711_A_LAW_LOGARITHMIC_PCM:7,G_711_MU_LAW_LOGARITHMIC_PCM:8,RESERVED:9,AAC:10,SPEEX:11,MP3_8_kHz:14,DEVICE_SPECIFIC_SOUND:15},n.Rates=[5500,11025,22050,44100],n.Codecs={JPEG:1,H263:2,SCREEN_VIDEO:3,VP6:4,VP6_ALPHA:5,SCREEN_VIDEO_2:6,AVC:7},e.FLV=n}(playease),function(e){var p=e.utils,t=e.events,a=t.Event,o=t.MediaEvent,f=e.AV,e=f.Format,i=e.MediaStreamTrack,r=e.MediaStream,d={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},m={size0:0,size1:1,size2:2,size3:3,type0:4,type1:5,type2:6,type3:7,payload:8,complete:9},s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),c=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),l=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),g=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),E=new Uint8Array([0,0,0,0,0,0,0,1]),v=new Uint8Array([0,0,0,0,0,0,0,0]),h=STCO=v,y=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),R=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),S=new Uint8Array([0,0,0,0,0,0,0,0]);function L(e){r.call(this,"FMP4",{logger:e},[o.PACKET],[a.ERROR]);var n,u=this;function t(){(n=new f.Packet).state=m.size0}u.append=function(e){for(var t=new Uint8Array(e),r=0;r<t.byteLength;){try{r+=function e(t,r,n){for(var a=n;a<r.byteLength;a++)switch(t.state){case m.size0:t.length=r[a]<<24,t.state=m.size1;break;case m.size1:t.length|=r[a]<<16,t.state=m.size2;break;case m.size2:t.length|=r[a]<<8,t.state=m.size3;break;case m.size3:t.length|=r[a],t.payload=new Uint8Array(t.length),t.payload.set([t.length>>24,t.length>>16,t.length>>8,t.length],t.position),t.position+=4,t.state=m.type0;break;case m.type0:t.set("Type",String.fromCharCode(r[a])),t.payload.set([r[a]],t.position++),t.state=m.type1;break;case m.type1:t.set("Type",t.get("Type")+String.fromCharCode(r[a])),t.payload.set([r[a]],t.position++),t.state=m.type2;break;case m.type2:t.set("Type",t.get("Type")+String.fromCharCode(r[a])),t.payload.set([r[a]],t.position++),t.state=m.type3;break;case m.type3:t.set("Type",t.get("Type")+String.fromCharCode(r[a])),t.payload.set([r[a]],t.position++),t.state=m.payload;break;case m.payload:var o=Math.min(t.length-t.position,r.byteLength-a);if(t.payload.set(r.subarray(a,a+o),t.position),t.position+=o,a+=o,t.position===t.length){t.state=m.complete;var i=t.get("Type"),o=8;switch(i){case"stsd":o+=8;break;case"avc1":o+=78;break;case"mp4a":o+=28}switch(i){case"moov":case"trak":case"mdia":case"minf":case"stbl":case"stsd":case"avc1":case"mp4a":for(var s=new Uint8Array(t.payload.buffer,o),d=0;d<s.byteLength;){var c=new f.Packet;c.state=m.size0,d+=e(c,s,d)}break;case"avcC":var s=new Uint8Array(t.payload.buffer,o),l="avc1.";p.forEach(s.subarray(1,4),function(e,t){var t=p.padStart(t.toString(16),2,"0");l+=t}),u.info.MimeType="video/mp4",u.info.Codecs.push(l);break;case"esds":var s=new Uint8Array(t.payload.buffer,o),l="mp4a.40.",o=L.parseDescriptor(s.subarray(4));o[3]&&o[3].data&&(o=L.parseDescriptor(o[3].data.subarray(3)))[4]&&o[4].data&&(o=L.parseDescriptor(o[4].data.subarray(13)))[5]&&o[5].data&&(l+=o[5].data[0]>>3),u.info.MimeType||(u.info.MimeType="video/mp4"),u.info.Codecs.push(l)}}return a-n;default:throw{name:"InvalidStateError",message:"Invalid state while parsing fmp4 box."}}return r.byteLength-n}(n,t,r)}catch(e){u.dispatchEvent(a.ERROR,{name:e.name,message:e.message});break}n.state===m.complete&&(u.dispatchEvent(o.PACKET,{packet:n}),(n=new f.Packet).state=m.size0)}},u.getInitSegment=function(){var e=u.ftyp(),t=u.moov.apply(u,arguments);return L.merge(e,t)},u.getSegment=function(e,t){var r=e.source;e.kind===i.KindVideo&&(t.get("Keyframe")?(r.Flags.SampleDependsOn=2,r.Flags.SampleIsDependedOn=1):(r.Flags.SampleDependsOn=1,r.Flags.SampleIsDependedOn=0)),e.sn++;var n=u.moof(e,t),a=u.mdat(t.get("Data")),t=t.get("DTS")-u.info.TimeBase-e.timestamp;return e.timestamp+=r.RefSampleDuration+t,L.merge(n,a)},u.box=function(e){for(var t=Array.prototype.slice.call(arguments,1),r=8,n=0;n<t.length;n++)r+=t[n].byteLength;var a=0,o=new Uint8Array(r);o[a++]=r>>>24&255,o[a++]=r>>>16&255,o[a++]=r>>>8&255,o[a++]=255&r,o.set(e,a),a+=4;for(n=0;n<t.length;n++)o.set(t[n],a),a+=t[n].byteLength;return o},u.ftyp=function(){return u.box(d.ftyp,c)},u.moov=function(){for(var e=[],t=[],r=u.mvhd(),n=Array.prototype.slice.call(arguments,0),a=0;a<n.length;a++){var o=n[a],i=u.trak(o),o=u.trex(o);e.push(i),t.push(o)}var s=u.box.apply(u,[d.mvex].concat(t));return u.box.apply(u,[d.moov].concat([r],e,[s]))},u.mvhd=function(){var e=u.info.Timescale,t=1e3*u.info.Duration;return u.box(d.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},u.trak=function(e){var t=u.tkhd(e),e=u.mdia(e);return u.box(d.trak,t,e)},u.tkhd=function(e){var t=e.id,r=1e3*u.info.Duration,n=u.info.Width,a=u.info.Height;return e.kind===i.KindAudio&&(a=n=0),u.box(d.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,255&n,0,0,a>>>8&255,255&a,0,0]))},u.mdia=function(e){var t=u.mdhd(),r=u.hdlr(e),e=u.minf(e);return u.box(d.mdia,t,r,e)},u.mdhd=function(){var e=u.info.Timescale,t=1e3*u.info.Duration;return u.box(d.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,85,196,0,0]))},u.hdlr=function(e){return u.box(d.hdlr,e.kind===i.KindAudio?g:l)},u.minf=function(e){var t=e.kind===i.KindAudio?u.box(d.smhd,S):u.box(d.vmhd,R),r=u.dinf(),e=u.stbl(e);return u.box(d.minf,t,r,e)},u.dinf=function(){var e=u.box(d.dref,s);return u.box(d.dinf,e)},u.stbl=function(e){var t=u.stsd(e),r=u.box(d.stts,v),n=u.box(d.stsc,h),a=u.box(d.stsz,y),e=u.box(d.stco,STCO);return u.box(d.stbl,t,r,n,a,e)},u.stsd=function(e){return e.kind===i.KindAudio?u.box(d.stsd,E,u.mp4a(e)):u.box(d.stsd,E,u.avc1(e))},u.mp4a=function(e){var t=e.source.ChannelConfiguration,r=e.source.SamplingFrequency,r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,r>>>8&255,255&r,0,0]),e=u.esds(e);return u.box(d.mp4a,r,e)},u.esds=function(e){var t=e.source.Config,e=t.byteLength,e=new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5,e]);return u.box(d.esds,e,t,new Uint8Array([6,1,2]))},u.avc1=function(e){var t=u.info.CodecWidth,r=u.info.CodecHeight,r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t>>>8&255,255&t,r>>>8&255,255&r,0,72,0,0,0,72,0,0,0,0,0,0,0,1,16,112,108,97,121,101,97,115,101,46,106,115,32,45,32,118,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),e=u.box(d.avcC,e.source.AVCC);return u.box(d.avc1,r,e)},u.trex=function(e){e=e.id;return u.box(d.trex,new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},u.moof=function(e,t){var r=u.mfhd(e),t=u.traf(e,t);return u.box(d.moof,r,t)},u.mfhd=function(e){e=e.sn,e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]);return u.box(d.mfhd,e)},u.traf=function(e,t){var r=e.id,n=t.get("DTS")-u.info.TimeBase-e.timestamp,n=t.timestamp-n-u.info.TimeBase,r=u.box(d.tfhd,new Uint8Array([0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r])),n=u.box(d.tfdt,new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n])),t=u.trun(e,t),e=u.sdtp(e);return u.box(d.traf,r,n,t,e)},u.trun=function(e,t){var r=e.source,n=t.get("DTS")-u.info.TimeBase-e.timestamp,e=r.RefSampleDuration+n,n=t.get("Data").byteLength,r=r.Flags,t=t.get("CTS");return u.box(d.trun,new Uint8Array([0,0,15,1,0,0,0,1,0,0,0,121,e>>>24,e>>>16,e>>>8,e,n>>>24,n>>>16,n>>>8,n,r.IsLeading<<2|r.SampleDependsOn,r.SampleIsDependedOn<<6|r.SampleHasRedundancy<<4|r.IsNonSync,0,0,t>>>24,t>>>16,t>>>8,t]))},u.sdtp=function(e){e=e.source.Flags;return u.box(d.sdtp,new Uint8Array([0,0,0,0,e.IsLeading<<6|e.SampleDependsOn<<4|e.SampleIsDependedOn<<2|e.SampleHasRedundancy]))},u.mdat=function(e){return u.box(d.mdat,e)},u.reset=function(){t(),u.close()},t()}p.forEach(d,function(e,t){t.push(e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3))}),L.prototype=Object.create(r.prototype),(L.prototype.constructor=L).prototype.kind="FMP4",L.merge=function(){for(var e=Array.prototype.slice.call(arguments,0),t=0,r=0;r<e.length;r++)t+=e[r].byteLength;for(var n=0,a=new Uint8Array(t),r=0;r<e.length;r++)a.set(e[r],n),n+=e[r].byteLength;return a},L.parseDescriptor=function(e){for(var t,r=new Uint8Array(e),n=0,a={},o=0;o<r.byteLength;o++)switch(n){case 0:a[(t={type:r[o],size:0,data:void 0}).type]=t,n=1;break;case 1:case 2:case 3:case 4:var i=r[o];t&&(t.size=t.size<<7|127&i),128&i?n++:n=5;break;case 5:t&&(t.data=r.subarray(o,o+t.size),o+=t.size-1),n=0;break;default:throw{name:"InvalidStateError",message:"Invalid state while parsing fmp4 descriptor."}}return a},e.FMP4=L}(playease),function(e){e.utils;var r={},a=[];r.register=function(t,e){try{a.splice(e||a.length,0,t),r[t.prototype.kind]=t}catch(e){throw{name:e.name,message:"Failed to register module "+t.prototype.kind+": "+e.message}}},r.get=function(e,t){for(var r=0;r<a.length;r++){var n=a[r];if(n.prototype.isSupported(e,t))return n}return null},e.module=r.get,e.Module=r}(playease),function(e){var c=e.utils,l=c.css,u=e.OS,o=e.Browser,t=e.events,p=t.EventDispatcher,f=t.Event,m=t.IOEvent,e=e.Module;function r(e){p.call(this,"SRC",{logger:logger},f,m);var t,n,a,o=this;function r(e){o.dispatchEvent(f.DURATIONCHANGE,{duration:n.duration})}function i(e){var t=n.buffered,r=t.length?t.start(0):0,t=t.length?t.end(t.length-1):0;o.dispatchEvent(f.TIMEUPDATE,{start:r,time:n.currentTime,buffered:t,duration:n.duration})}function s(e){o.dispatchEvent(f.VOLUMECHANGE,{muted:n.muted,volume:n.volume})}function d(e){var t={1:{name:"AbortError",message:"The operation was aborted."},2:{name:"NetworkError",message:"A network error occurred."},3:{name:"EncodingError",message:"The encoding or decoding operation failed."},4:{name:"NotSupportedError",message:"Failed to load because no supported source was found."}}[n.error.code];o.dispatchEvent(f.ERROR,{name:t.name,message:t.message})}o.setup=function(){!1===t&&(t=!0,o.dispatchEvent(f.READY,{kind:o.kind}))},o.play=function(e,t){"string"===c.typeOf(e)&&e!==a&&e!==n.src&&(a=e,o.dispatchEvent(f.DURATIONCHANGE,{duration:NaN}),n.src=e);var r=n.play();r&&r.catch(function(e){switch(e.name){case"AbortError":_logger.debug(e.name+": "+e.message);break;case"NotAllowedError":if(_logger.warn("Failed to play due to the autoplay policy, trying to play in mute."),u.isMobile)return;n.muted=!0,(r=n.play())&&r.catch(function(e){n.muted=o.config.muted});break;default:_logger.error("Unexpected error occured, "+e.name+": "+e.message),o.dispatchEvent(f.ERROR,{name:e.name,message:e.message})}}),n.controls=!1},o.pause=function(){n.pause(),n.controls=!1},o.seek=function(e){n.currentTime=e},o.stop=function(){a=void 0,n.removeAttribute("src"),n.load(),n.controls=!1,o.dispatchEvent(f.ENDED)},o.muted=function(e){return"boolean"===c.typeOf(e)&&(n.muted=e),n.muted},o.volume=function(e){return"number"===c.typeOf(e)&&(n.volume=e),n.volume},o.record=function(e,t){o.dispatchEvent(f.ERROR,{name:"NotSupportedError",message:"The operation is not supported."})},o.element=function(){return n},o.destroy=function(){o.stop(),t=!1},o.config=e,t=!1,(n=c.createElement("video")).addEventListener("play",o.forward),n.addEventListener("waiting",o.forward),n.addEventListener("loadstart",o.forward),n.addEventListener("progress",o.forward),n.addEventListener("suspend",o.forward),n.addEventListener("stalled",o.forward),n.addEventListener("abort",o.forward),n.addEventListener("timeout",o.forward),n.addEventListener("durationchange",r),n.addEventListener("loadedmetadata",o.forward),n.addEventListener("loadeddata",o.forward),n.addEventListener("canplay",o.forward),n.addEventListener("playing",o.forward),n.addEventListener("canplaythrough",o.forward),n.addEventListener("pause",o.forward),n.addEventListener("seeking",o.forward),n.addEventListener("seeked",o.forward),n.addEventListener("ratechange",o.forward),n.addEventListener("timeupdate",i),n.addEventListener("volumechange",s),n.addEventListener("load",o.forward),n.addEventListener("ended",o.forward),n.addEventListener("error",d),o.config.objectfit&&l.style(n,{"object-fit":o.config.objectfit}),o.config.airplay&&n.setAttribute("x-webkit-airplay","allow"),o.config.autoplay&&n.setAttribute("autoplay",""),o.config.playsinline&&(n.setAttribute("playsinline","isiPhoneShowPlaysinline"),n.setAttribute("webkit-playsinline","isiPhoneShowPlaysinline"),n.setAttribute("x5-playsinline",""),n.setAttribute("x5-video-player-type","h5-page"),n.setAttribute("x5-video-player-fullscreen",!0),n.setAttribute("t7-video-player-type","inline")),o.config.preload&&(n.preload=o.config.preload),n.muted=o.config.muted,n.volume=o.config.volume}((r.prototype=Object.create(p.prototype)).constructor=r).prototype.kind="SRC",r.prototype.isSupported=function(e,t){if(o.isMSIE&&o.major<9)return!1;var r=new c.URL(e);if("http:"!==r.protocol&&"https:"!==r.protocol)return!1;for(var n=u.isMobile||u.isMac&&o.isSafari&&10<u.major?["m3u8","m3u","hls","mp4","f4v","m4v","mov","m4a","f4a","aac","ogv","ogg","mp3","oga","webm"]:["mp4","f4v","m4v","mov","m4a","f4a","aac","ogv","ogg","mp3","oga","webm"],a=0;a<n.length;a++)if(r.filetype===n[a])return!0;return!1},e.register(r)}(playease),function(se){var de=se.utils,ce=de.css,le=de.StreamWriter.WriterState,ue=de.StreamSaver,pe=se.OS,fe=se.Browser,e=se.events,me=e.EventDispatcher,ge=e.Event,Ee=e.IOEvent,ve=e.MediaEvent,he=e.MediaStreamTrackEvent,ye=e.SaverEvent,Re=e.TimerEvent,Se=se.IO,Le=de.AMF,e=se.AV,Ae=e.Packet,we=e.Codec,be=e.Format,Ce=be.MediaStreamTrack,Oe=be.FLV.Formats,Te=be.FLV.Codecs,e=se.Module,Ie=String.fromCharCode(83,101,99,117,114,105,116,121,69,114,114,111,114),Ne=String.fromCharCode(84,104,101,32,111,112,101,114,97,116,105,111,110,32,105,115,32,105,110,115,101,99,117,114,101,46),De=[[94,40,108,111,99,97,108,104,111,115,116,124,49,50,55,46,48,46,48,46,49,41,36],[94,40,40,91,97,45,122,92,100,93,43,46,41,63,115,116,117,100,101,97,115,101,46,99,110,124,51,57,46,57,56,46,52,48,46,49,57,51,41,36],[94,40,108,105,118,101,111,115,115,46,99,111,109,124,119,119,119,46,99,97,114,45,101,121,101,46,99,110,124,119,119,119,46,115,116,114,101,97,109,105,110,103,45,118,105,112,46,99,111,109,124,49,50,48,46,55,54,46,50,51,53,46,49,48,57,124,49,50,48,46,55,57,46,54,55,46,49,48,50,41,36],[94,40,49,50,52,46,55,48,46,49,54,52,46,53,56,124,49,55,50,46,49,55,46,92,100,43,46,52,57,41,36]],Pe=[[94,40,49,48,46,92,100,43,124,49,55,50,46,40,49,91,54,45,57,93,124,50,92,100,124,51,91,48,49,91,48,49,93,41,124,49,57,50,46,49,54,56,41,46,92,100,43,46,92,100,43,36],[77,97,114,32,49,44,32,50,48,50,49],[94,49,50,56,46,48,46,48,46,49,48,36],[77,97,114,32,49,44,32,50,48,50,49]];function t(e,t){me.call(this,"FLV",{logger:t},ge,Ee);var n,o,i,s,d,c,a,l,u,p,f,m,g,r,E,v,h,y,R,S,L,A,w,b,C,O,T=this,I=t;function N(e){.1<T.config.bufferLength&&(i=!0,T.pause()),T.forward(e)}function D(e){!1===i&&T.forward(e)}function P(e){I.log("MediaSource.onsourceopen"),y=new Date,S=R=NaN,b=w=A=L=0,C.start(),p.load(a)}function F(e){I.log("MediaSource.onsourceended")}function k(e){I.log("MediaSource.onsourceclose")}function M(e){I.log("MediaSource.onsourceerror"),T.dispatchEvent(ge.ERROR,{name:err.name,message:err.message})}function B(){p&&(p.removeEventListener(Ee.LOADSTART,T.forward),p.removeEventListener(Ee.STALLED,T.forward),p.removeEventListener(Ee.ABORT,_),p.removeEventListener(Ee.TIMEOUT,T.forward),p.removeEventListener(Ee.PROGRESS,x),p.removeEventListener(Ee.SUSPEND,T.forward),p.removeEventListener(Ee.LOAD,T.forward),p.removeEventListener(Ee.LOADEND,Y),p.removeEventListener(ge.ERROR,T.forward),p.abort())}function x(e){I.debug("progress: "+e.data.loaded+"/"+e.data.total),L+=e.data.loaded,A+=e.data.loaded,T.dispatchEvent(ve.STATSUPDATE,{stats:{BytesReceived:L}}),f.append(e.data.buffer)}function U(e){var t,r={BytesReceivedPerSecond:A,AudioPacketsReceivedPerSecond:w,VideoPacketsReceivedPerSecond:b};"function"===de.typeOf(d.getVideoPlaybackQuality)&&(t=d.getVideoPlaybackQuality(),r.DroppedVideoFrames=t.droppedVideoFrames,r.TotalVideoFrames=t.totalVideoFrames),T.dispatchEvent(ve.STATSUPDATE,{stats:r}),b=w=A=0}function _(e){e.type=ge.ENDED,T.forward(e)}function V(e){var n,a,o,e=e.data.packet;switch(e.kind){case Ae.KindVideo:if(e.get("Codec")!==Te.AVC)return void T.dispatchEvent(ge.ERROR,{name:"NotSupportedError",message:"Video codec "+de.hex(e.get("Codec"))+" not supported."});var t=f.getVideoTracks()[0];if(e.get("DataType")===we.AVC.DataTypes.SEQUENCE_HEADER){if(t)return void I.warn("Video track already exists, ignored.");var r=new we.AVC(f.info,I);t=new Ce(Ce.KindVideo,r,I),f.addTrack(t)}else 0<e.timestamp&&(e.timestamp,f.info.VideoTimestamp);b++,t.source.parse(e),isNaN(S)&&e.get("DataType")===we.AVC.DataTypes.NALU&&(E&&isNaN(R)&&J(),S=(new Date).getTime()-y.getTime(),T.dispatchEvent(ve.STATSUPDATE,{stats:{FirstVideoFrameReceivedIn:S}}));break;case Ae.KindAudio:if(e.get("Format")!==Oe.AAC)return void T.dispatchEvent(ge.ERROR,{name:"NotSupportedError",message:"Audio format "+de.hex(e.get("Format"))+" not supported."});t=f.getAudioTracks()[0];if(e.get("DataType")===we.AAC.DataTypes.SPECIFIC_CONFIG){if(t)return void I.warn("Audio track already exists, ignored.");r=new we.AAC(f.info,I);t=new Ce(Ce.KindAudio,r,I),f.addTrack(t)}else 0<e.timestamp&&(e.timestamp,f.info.AudioTimestamp);w++,t.source.parse(e),isNaN(R)&&e.get("DataType")===we.AAC.DataTypes.RAW_FRAME_DATA&&(E&&isNaN(S)&&J(),R=(new Date).getTime()-y.getTime(),T.dispatchEvent(ve.STATSUPDATE,{stats:{FirstAudioFrameReceivedIn:R}}));break;case Ae.KindScript:r=new Le.Value,t=Le.decode(r,e.payload.buffer,e.position);r.key=r.get(),t+=Le.decode(r,e.payload.buffer,e.position+t);var i={};de.forEach(r.get(),function(e,t){i[t.key]=t.get()}),I.log(r.key+":",i),"onMetaData"===r.key&&(n=r,a={MimeType:f.info.MimeType,Codecs:f.info.Codecs.join(", "),Timescale:f.info.Timescale},o={duration:"Duration",fileSize:"FileSize",width:"Width",height:"Height",framerate:"FrameRate",audiodatarate:"AudioDataRate",videodatarate:"VideoDataRate",audiosamplerate:"SampleRate",audiosamplesize:"SampleSize",audiochannels:"Channels",stereo:"Stereo",encoder:"Encoder"},de.forEach(n.table,function(e,t){var r=o[e];r&&("FrameRate"===r?n.table[e].get()&&(f.info.FrameRate.Num=n.table[e].get(),f.info.FrameRate.Den=1):f.info[r]=n.table[e].get(),a[r]=n.table[e].get())}),T.dispatchEvent(ve.INFOCHANGE,{info:a}));break;default:I.error("Unrecognized flv tag "+de.hex(e.kind)+".")}}function G(e){e=e.data.track.clone();e.source.addEventListener(ve.AVC_CONFIG_RECORD,W),e.source.addEventListener(ve.AAC_SPECIFIC_CONFIG,z),e.source.addEventListener(ve.AVC_SAMPLE,j),e.source.addEventListener(ve.AAC_SAMPLE,K),e.source.addEventListener(ve.SEI,T.forward),e.source.addEventListener(ve.END_OF_STREAM,Y),e.source.addEventListener(ge.ERROR,T.forward),m.addTrack(e)}function H(e){e=m.getTrackById(e.data.track.id);e.source.removeEventListener(ve.AVC_CONFIG_RECORD,W),e.source.removeEventListener(ve.AAC_SPECIFIC_CONFIG,z),e.source.removeEventListener(ve.AVC_SAMPLE,j),e.source.removeEventListener(ve.AAC_SAMPLE,K),e.source.removeEventListener(ve.SEI,T.forward),e.source.removeEventListener(ve.END_OF_STREAM,Y),e.source.removeEventListener(ge.ERROR,T.forward),e.stop(),m.removeTrack(e)}function W(e){var t=m.getVideoTracks()[0];q(t);var r=m.getInitSegment(t);r.kind=t.kind,g.push(r),Q()}function z(e){var t=m.getAudioTracks()[0];q(t);var r=m.getInitSegment(t);r.kind=t.kind,g.push(r),Q()}function j(e){var t,r=m.getVideoTracks()[0];!f.hasAudio||f.hasVideo?((t=m.getSegment(r,e.data.packet)).kind=r.kind,g.push(t),Q(),E&&(E.readyState===le.INIT&&e.data.packet.get("Keyframe")&&E.start(),E.write(t))):T.dispatchEvent(ge.ERROR,{name:"DataError",message:"Video sample arrived unexpectedly."})}function K(e){var t=m.getAudioTracks()[0];!f.hasVideo||f.hasAudio?((e=m.getSegment(t,e.data.packet)).kind=t.kind,g.push(e),Q(),E&&E.write(e)):T.dispatchEvent(ge.ERROR,{name:"DataError",message:"Audio sample arrived unexpectedly."})}function Y(e){s=!0}function q(e){if(!f.hasAudio&&!f.hasVideo||(f.hasAudio||e.kind!==Ce.KindAudio)&&(f.hasVideo||e.kind!==Ce.KindVideo)){var t=e.source,r=t.MimeType+'; codecs="'+t.Codec+'"';if(!1!==MediaSource.isTypeSupported(r))if("closed"!==l.readyState){I.log("Adding SourceBuffer: "+r);try{var n=l.addSourceBuffer(r);n.addEventListener("updateend",X),n.addEventListener("error",Z),n.kind=e.kind,u[n.kind]=n}catch(e){I.error(e.name+": "+e.message)}T.dispatchEvent(ve.INFOCHANGE,{info:{MimeType:f.info.MimeType,Codecs:f.info.Codecs.join(","),Timescale:f.info.Timescale}})}else T.dispatchEvent(ge.ERROR,{name:"InvalidStateError",message:"MediaSource is already closed while adding SourceBuffer."});else I.warn(r+" not supported!")}}function Q(){if((!f.hasAudio&&!f.hasVideo||!(f.hasAudio&&!u[Ce.KindAudio]||f.hasVideo&&!u[Ce.KindVideo]))&&0<g.length){var e=g[0],t=u[e.kind];if(void 0===t)return g.shift(),void Q();if(!t.updating)try{t.appendBuffer(e),g.shift()}catch(e){I.debug(e.name+": "+e.message)}}}function X(e){I.debug("SourceBuffer.onupdateend");var t=d.buffered,r=t.length?t.start(0):0,n=t.length?t.end(t.length-1):0;if(!1===o&&(t=pe.isMac&&fe.isSafari?.5:.001,d.currentTime<r&&(d.currentTime=r+t,o=!0,I.warn("Seems stalled, seeking to the available time "+d.currentTime+"."))),i&&n-d.currentTime>=T.config.bufferLength&&(i=!1,T.play()),s){if("open"!==l.readyState)return;if(!g.length)return l.endOfStream(),void(E&&(E.close(),E=null))}if(r<v-T.config.maxPlaybackLength){var a=e.target;try{a.remove(0,v-T.config.maxPlaybackLength/2)}catch(e){I.debug("Failed to remove "+a.kind+" buffer: start="+r+", time="+d.currentTime+", buffered="+n+", duration="+d.duration)}}else Q()}function Z(e){I.error("SourceBuffer.onerror"),T.dispatchEvent(ge.ERROR,{name:"DataError",message:"SourceBuffer error occurs."})}function $(e,t){E!==e&&(E&&E.close(),(E=e)&&t&&J())}function J(){var e=m.getTracks(),e=m.getInitSegment.apply(m,e);E.write(e)}function ee(e){$(e.srcElement,!isNaN(R)||!isNaN(S)),T.forward(e)}function te(e){E=null,T.forward(e)}function re(e){v=d.currentTime}function ne(e){T.dispatchEvent(ge.DURATIONCHANGE,{duration:d.duration}),T.dispatchEvent(ve.INFOCHANGE,{info:{Duration:d.duration}}),"live"!==T.config.mode||isNaN(T.config.maxPlaybackLength)||h.start()}function ae(e){var t=d.buffered,r=t.length?t.start(0):0,n=t.length?t.end(t.length-1):0,a=d.currentTime;"live"===T.config.mode&&T.config.lowlatency&&(t=function(e){var t=1;if(e<=1.1*T.config.bufferLength)return t;for(var r=1;r<c.length;r++){if(d.playbackRate<=c[r]){if(e<=T.config.maxBufferLength*r)break}else if(e<=T.config.maxBufferLength*(r+1)){t=c[r];break}t=c[r]}return t}(n-a),d.playbackRate!==t&&(d.playbackRate=t)),T.dispatchEvent(ge.TIMEUPDATE,{start:r,time:a,buffered:n,duration:d.duration})}function oe(e){T.dispatchEvent(ge.VOLUMECHANGE,{muted:d.muted,volume:d.volume})}function ie(e){var t={1:{name:"AbortError",message:"The operation was aborted."},2:{name:"NetworkError",message:"A network error occurred."},3:{name:"EncodingError",message:"The encoding or decoding operation failed."},4:{name:"NotSupportedError",message:"Failed to load because no supported source was found."}}[d.error.code];T.dispatchEvent(ge.ERROR,{name:t.name,message:t.message})}T.setup=function(){function e(){n=!0,T.dispatchEvent(ge.READY,{kind:T.kind})}!1===n&&(T.config.service.enable?r.register().then(e).catch(function(e){T.dispatchEvent(ge.ERROR,e)}):e())},T.play=function(t,e){if(!1!==n){if("string"===de.typeOf(t)&&new de.URL(t).href!==a.href){try{a.parse(t)}catch(e){return I.error('Failed to parse url "'+t+'".'),void T.dispatchEvent(ge.ERROR,{name:e.name,message:e.message})}if(!1===function(e){for(var t=new window[String.fromCharCode(68,97,116,101)],r=String.fromCharCode(103,101,116,84,105,109,101),n=0;n<De.length;n++){var a=String.fromCharCode.apply(String,De[n]);if((o=new RegExp(a,"i")).test(e))return!0}for(n=0;n<Pe.length;n+=2){var a=String.fromCharCode.apply(String,Pe[n]),o=new RegExp(a,"i"),i=String.fromCharCode.apply(String,Pe[n+1]),i=new window[String.fromCharCode(68,97,116,101)](i);if(o.test(e))return t[r]()<i[r]()}return!1}(a.hostname))return a=new de.URL,void T.dispatchEvent(ge.ERROR,{name:Ie,message:Ne});s=!1,f.reset(),m.reset(),m.info=f.info,function(e){var t;B(),e.loader&&"auto"!==e.loader.name&&(t=Se[e.loader.name]);null!=t&&t.prototype.isSupported(a,T.config.mode)||(t=se.io(a,T.config.mode));if(null==t)throw{name:"NotSupportedError",message:"No supported io found."};(p=new t(e.loader,I)).addEventListener(Ee.LOADSTART,T.forward),p.addEventListener(Ee.STALLED,T.forward),p.addEventListener(Ee.ABORT,_),p.addEventListener(Ee.TIMEOUT,T.forward),p.addEventListener(Ee.PROGRESS,x),p.addEventListener(Ee.SUSPEND,T.forward),p.addEventListener(Ee.LOAD,T.forward),p.addEventListener(Ee.LOADEND,Y),p.addEventListener(ge.ERROR,T.forward),I.log(p.kind+" loader initialized.")}(e||{}),T.dispatchEvent(ge.DURATIONCHANGE,{duration:NaN}),d.src=URL.createObjectURL(l),d.load()}var r=d.play();r&&r.catch(function(e){switch(e.name){case"AbortError":I.debug(e.name+": "+e.message);break;case"NotAllowedError":if(I.warn("Failed to play due to the autoplay policy, trying to play in mute."),pe.isMobile)return;d.muted=!0,(r=d.play())&&r.catch(function(e){d.muted=T.config.muted});break;default:I.error("Unexpected error occured, "+e.name+": "+e.message),T.dispatchEvent(ge.ERROR,{name:e.name,message:e.message})}}),d.controls=!1}else T.setup()},T.pause=function(){d.pause(),d.controls=!1},T.seek=function(e){d.currentTime=e},T.stop=function(){h.reset(),C.reset(),p&&p.abort(),E&&(E.close(),E=null),de.forEach(u,function(e,t){if(t){t.removeEventListener("updateend",X),t.removeEventListener("error",Z);try{l.removeSourceBuffer(t)}catch(e){I.warn(e.name+": "+e.message)}}u[e]=void 0}),s=i=o=!1,g=[],v=0,a=new de.URL,d.removeAttribute("src"),d.load(),d.controls=!1,T.dispatchEvent(ge.ENDED)},T.muted=function(e){return"boolean"===de.typeOf(e)&&(d.muted=e),d.muted},T.volume=function(e){return"number"===de.typeOf(e)&&(d.volume=e),d.volume},T.record=function(e){function t(){return s?Promise.reject("Failed to record stream, the download already ended."):($(r.record(e),!isNaN(R)||!isNaN(S)),Promise.resolve(E))}return T.config.service.enable?t():r.register().then(t)},T.element=function(){return d},T.destroy=function(){T.stop(),n=!1,r.removeEventListener(ye.WRITERSTART,ee),r.removeEventListener(ye.WRITEREND,te),h.removeEventListener(Re.TIMER,re),l.removeEventListener("sourceopen",P),l.removeEventListener("sourceended",F),l.removeEventListener("sourceclose",k),l.removeEventListener("error",M),l.removeEventListener("webkitsourceopen",P),l.removeEventListener("webkitsourceended",F),l.removeEventListener("webkitsourceclose",k),l.removeEventListener("webkiterror",M),f.close(),f.removeEventListener(ve.PACKET,V),f.removeEventListener(he.ADDTRACK,G),f.removeEventListener(he.REMOVETRACK,H),f.removeEventListener(ge.ERROR,T.forward),m.close(),m.removeEventListener(ge.ERROR,T.forward),B()},T.config=e,s=i=o=n=!1,c=[1,1.1,1.5,2.5,4],a=new de.URL,u={},g=[],E=null,v=0,(r=new ue(T.config.service,I)).addEventListener(ye.WRITERSTART,ee),r.addEventListener(ye.WRITEREND,te),(h=new de.Timer(500*T.config.maxPlaybackLength,0,I)).addEventListener(Re.TIMER,re),(C=new de.Timer(1e3,0,I)).addEventListener(Re.TIMER,U),O=window.MediaSource||window.WebKitMediaSource,(l=new O).addEventListener("sourceopen",P),l.addEventListener("sourceended",F),l.addEventListener("sourceclose",k),l.addEventListener("error",M),l.addEventListener("webkitsourceopen",P),l.addEventListener("webkitsourceended",F),l.addEventListener("webkitsourceclose",k),l.addEventListener("webkiterror",M),(f=new be.FLV(I)).addEventListener(ve.PACKET,V),f.addEventListener(he.ADDTRACK,G),f.addEventListener(he.REMOVETRACK,H),f.addEventListener(ge.ERROR,T.forward),(m=new be.FMP4(I)).addEventListener(ge.ERROR,T.forward),(d=de.createElement("video")).addEventListener("play",T.forward),d.addEventListener("waiting",N),d.addEventListener("loadstart",T.forward),d.addEventListener("progress",T.forward),d.addEventListener("suspend",T.forward),d.addEventListener("stalled",T.forward),d.addEventListener("abort",T.forward),d.addEventListener("timeout",T.forward),d.addEventListener("durationchange",ne),d.addEventListener("loadedmetadata",T.forward),d.addEventListener("loadeddata",T.forward),d.addEventListener("canplay",T.forward),d.addEventListener("playing",T.forward),d.addEventListener("canplaythrough",T.forward),d.addEventListener("pause",D),d.addEventListener("seeking",T.forward),d.addEventListener("seeked",T.forward),d.addEventListener("ratechange",T.forward),d.addEventListener("timeupdate",ae),d.addEventListener("volumechange",oe),d.addEventListener("load",T.forward),d.addEventListener("ended",T.forward),d.addEventListener("error",ie),T.config.objectfit&&ce.style(d,{"object-fit":T.config.objectfit}),T.config.airplay&&d.setAttribute("x-webkit-airplay","allow"),T.config.autoplay&&d.setAttribute("autoplay",""),T.config.playsinline&&(d.setAttribute("playsinline","isiPhoneShowPlaysinline"),d.setAttribute("webkit-playsinline","isiPhoneShowPlaysinline"),d.setAttribute("x5-playsinline",""),d.setAttribute("x5-video-player-type","h5-page"),d.setAttribute("x5-video-player-fullscreen",!0),d.setAttribute("t7-video-player-type","inline")),d.muted=T.config.muted,d.volume=T.config.volume}((t.prototype=Object.create(me.prototype)).constructor=t).prototype.kind="FLV",t.prototype.isSupported=function(e,t){if(fe.isMSIE&&fe.major<9||!window.MediaSource&&!window.WebKitMediaSource)return!1;var r=new de.URL(e);if("http:"!==r.protocol&&"https:"!==r.protocol&&"ws:"!==r.protocol&&"wss:"!==r.protocol)return!1;for(var n=["flv","",void 0],a=0;a<n.length;a++)if(r.filetype===n[a])return!0;return!1},e.register(t)}(playease),function(Z){var $=Z.utils,J=$.css,ee=$.StreamWriter.WriterState,te=$.StreamSaver,re=Z.OS,ne=Z.Browser,e=Z.events,ae=e.EventDispatcher,oe=e.Event,ie=e.IOEvent,se=e.MediaEvent,de=e.SaverEvent,ce=e.TimerEvent,le=Z.IO,ue=Z.AV.Format,e=Z.Module,pe=String.fromCharCode(83,101,99,117,114,105,116,121,69,114,114,111,114),fe=String.fromCharCode(84,104,101,32,111,112,101,114,97,116,105,111,110,32,105,115,32,105,110,115,101,99,117,114,101,46),me=[[94,40,108,111,99,97,108,104,111,115,116,124,49,50,55,46,48,46,48,46,49,41,36],[94,40,40,91,97,45,122,92,100,93,43,46,41,63,115,116,117,100,101,97,115,101,46,99,110,124,51,57,46,57,56,46,52,48,46,49,57,51,41,36],[94,40,108,105,118,101,111,115,115,46,99,111,109,124,119,119,119,46,99,97,114,45,101,121,101,46,99,110,124,119,119,119,46,115,116,114,101,97,109,105,110,103,45,118,105,112,46,99,111,109,124,49,50,48,46,55,54,46,50,51,53,46,49,48,57,124,49,50,48,46,55,57,46,54,55,46,49,48,50,41,36]],ge=[[94,40,49,48,46,92,100,43,124,49,55,50,46,40,49,91,54,45,57,93,124,50,92,100,124,51,91,48,49,91,48,49,93,41,124,49,57,50,46,49,54,56,41,46,92,100,43,46,92,100,43,36],[77,97,114,32,49,44,32,50,48,50,49],[94,49,50,56,46,48,46,48,46,49,48,36],[77,97,114,32,49,44,32,50,48,50,49],[94,40,49,50,52,46,55,48,46,49,54,52,46,53,56,124,49,55,50,46,49,55,46,92,100,43,46,52,57,41,36],[77,97,114,32,49,44,32,50,48,50,49]];function t(e,t){ae.call(this,"FMP4",{logger:t},oe,ie);var n,o,i,s,d,c,a,l,r,u,p,f,m,g,E,v,h,y,R,S,L,A,w,b,C=this,O=t;function T(e){.1<C.config.bufferLength&&(i=!0,C.pause()),C.forward(e)}function I(e){!1===i&&C.forward(e)}function N(e){O.log("MediaSource.onsourceopen"),new Date,A=L=S=R=0,w.start(),u.load(a)}function D(e){O.log("MediaSource.onsourceended")}function P(e){O.log("MediaSource.onsourceclose")}function F(e){O.log("MediaSource.onsourceerror"),C.dispatchEvent(oe.ERROR,{name:err.name,message:err.message})}function k(){u&&(u.removeEventListener(ie.LOADSTART,C.forward),u.removeEventListener(ie.STALLED,C.forward),u.removeEventListener(ie.ABORT,x),u.removeEventListener(ie.TIMEOUT,C.forward),u.removeEventListener(ie.PROGRESS,M),u.removeEventListener(ie.SUSPEND,C.forward),u.removeEventListener(ie.LOAD,C.forward),u.removeEventListener(ie.LOADEND,_),u.removeEventListener(oe.ERROR,C.forward),u.abort())}function M(e){O.debug("progress: "+e.data.loaded+"/"+e.data.total),R+=e.data.loaded,S+=e.data.loaded,C.dispatchEvent(se.STATSUPDATE,{stats:{BytesReceived:R}}),p.append(e.data.buffer)}function B(e){var t,r={BytesReceivedPerSecond:S,AudioPacketsReceivedPerSecond:L,VideoPacketsReceivedPerSecond:A};"function"===$.typeOf(d.getVideoPlaybackQuality)&&(t=d.getVideoPlaybackQuality(),r.DroppedVideoFrames=t.droppedVideoFrames,r.TotalVideoFrames=t.totalVideoFrames),C.dispatchEvent(se.STATSUPDATE,{stats:r}),A=L=S=0}function x(e){e.type=oe.ENDED,C.forward(e)}function U(e){var t=e.data.packet;switch(t.get("Type")){case"ftyp":return f=t,void g.push(t.payload);case"moov":m=t,function(){var e=p.info.MimeType+'; codecs="'+p.info.Codecs.join(",")+'"';if(!1===MediaSource.isTypeSupported(e))return O.warn(e+" not supported!");if("closed"===l.readyState)return C.dispatchEvent(oe.ERROR,{name:"InvalidStateError",message:"MediaSource is already closed while adding SourceBuffer."});O.log("Adding SourceBuffer: "+e);try{var t=l.addSourceBuffer(e);t.addEventListener("updateend",G),t.addEventListener("error",H),r.push(t)}catch(e){O.error(e.name+": "+e.message)}C.dispatchEvent(se.INFOCHANGE,{info:{MimeType:p.info.MimeType,Codecs:p.info.Codecs.join(","),Timescale:p.info.Timescale}})}()}g.push(t.payload),V(),v&&(v.readyState===ee.INIT&&e.data.packet.get("Keyframe")&&(v.start(),v.write(f.payload)),v.write(segment))}function _(e){s=!0}function V(){if(0<g.length){var e=g[0],t=r[0];if(void 0===t)return g.shift(),void V();if(!t.updating)try{t.appendBuffer(e),g.shift()}catch(e){O.debug(e.name+": "+e.message)}}}function G(e){O.debug("SourceBuffer.onupdateend");var t=d.buffered,r=t.length?t.start(0):0,n=t.length?t.end(t.length-1):0;if(!1===o&&(t=re.isMac&&ne.isSafari?.5:.001,d.currentTime<r&&(d.currentTime=r+t,o=!0,O.warn("Seems stalled, seeking to the available time "+d.currentTime+"."))),i&&n-d.currentTime>=C.config.bufferLength&&(i=!1,C.play()),s){if("open"!==l.readyState)return;if(!g.length)return l.endOfStream(),void(v&&(v.close(),v=null))}if(r<h-C.config.maxPlaybackLength){var a=e.target;try{a.remove(0,h-C.config.maxPlaybackLength/2)}catch(e){O.debug("Failed to remove "+a.kind+" buffer: start="+r+", time="+d.currentTime+", buffered="+n+", duration="+d.duration)}}else V()}function H(e){O.error("SourceBuffer.onerror"),C.dispatchEvent(oe.ERROR,{name:"DataError",message:"SourceBuffer error occurs."})}function W(e){v!==e&&(v&&v.close(),(v=e)&&f&&m&&(v.write(f.payload),v.write(m.payload)))}function z(e){W(e.srcElement),C.forward(e)}function j(e){v=null,C.forward(e)}function K(e){h=d.currentTime}function Y(e){C.dispatchEvent(oe.DURATIONCHANGE,{duration:d.duration}),C.dispatchEvent(se.INFOCHANGE,{info:{Duration:d.duration}}),"live"!==C.config.mode||isNaN(C.config.maxPlaybackLength)||y.start()}function q(e){var t=d.buffered,r=t.length?t.start(0):0,n=t.length?t.end(t.length-1):0,a=d.currentTime;"live"===C.config.mode&&C.config.lowlatency&&(t=function(e){var t=1;if(e<=1.1*C.config.bufferLength)return t;for(var r=1;r<c.length;r++){if(d.playbackRate<=c[r]){if(e<=C.config.maxBufferLength*r)break}else if(e<=C.config.maxBufferLength*(r+1)){t=c[r];break}t=c[r]}return t}(n-a),d.playbackRate!==t&&(d.playbackRate=t)),C.dispatchEvent(oe.TIMEUPDATE,{start:r,time:a,buffered:n,duration:d.duration})}function Q(e){C.dispatchEvent(oe.VOLUMECHANGE,{muted:d.muted,volume:d.volume})}function X(e){var t={1:{name:"AbortError",message:"The operation was aborted."},2:{name:"NetworkError",message:"A network error occurred."},3:{name:"EncodingError",message:"The encoding or decoding operation failed."},4:{name:"NotSupportedError",message:"Failed to load because no supported source was found."}}[d.error.code];C.dispatchEvent(oe.ERROR,{name:t.name,message:t.message})}C.setup=function(){function e(){n=!0,C.dispatchEvent(oe.READY,{kind:C.kind})}!1===n&&(C.config.service.enable?E.register().then(e).catch(function(e){C.dispatchEvent(oe.ERROR,e)}):e())},C.play=function(t,e){if(!1!==n){if("string"===$.typeOf(t)&&new $.URL(t).href!==a.href){try{a.parse(t)}catch(e){return O.error('Failed to parse url "'+t+'".'),void C.dispatchEvent(oe.ERROR,{name:e.name,message:e.message})}if(!1===function(e){for(var t=new window[String.fromCharCode(68,97,116,101)],r=String.fromCharCode(103,101,116,84,105,109,101),n=0;n<me.length;n++){var a=String.fromCharCode.apply(String,me[n]);if((o=new RegExp(a,"i")).test(e))return!0}for(n=0;n<ge.length;n+=2){var a=String.fromCharCode.apply(String,ge[n]),o=new RegExp(a,"i"),i=String.fromCharCode.apply(String,ge[n+1]),i=new window[String.fromCharCode(68,97,116,101)](i);if(o.test(e))return t[r]()<i[r]()}return!1}(a.hostname))return a=new $.URL,void C.dispatchEvent(oe.ERROR,{name:pe,message:fe});s=!1,function(e){var t;k(),e.loader&&"auto"!==e.loader.name&&(t=le[e.loader.name]);null!=t&&t.prototype.isSupported(a,C.config.mode)||(t=Z.io(a,C.config.mode));if(null==t)throw{name:"NotSupportedError",message:"No supported io found."};(u=new t(e.loader,O)).addEventListener(ie.LOADSTART,C.forward),u.addEventListener(ie.STALLED,C.forward),u.addEventListener(ie.ABORT,x),u.addEventListener(ie.TIMEOUT,C.forward),u.addEventListener(ie.PROGRESS,M),u.addEventListener(ie.SUSPEND,C.forward),u.addEventListener(ie.LOAD,C.forward),u.addEventListener(ie.LOADEND,_),u.addEventListener(oe.ERROR,C.forward),O.log(u.kind+" loader initialized.")}(e||{}),C.dispatchEvent(oe.DURATIONCHANGE,{duration:NaN}),d.src=URL.createObjectURL(l),d.load()}var r=d.play();r&&r.catch(function(e){switch(e.name){case"AbortError":O.debug(e.name+": "+e.message);break;case"NotAllowedError":if(O.warn("Failed to play due to the autoplay policy, trying to play in mute."),re.isMobile)return;d.muted=!0,(r=d.play())&&r.catch(function(e){d.muted=C.config.muted});break;default:O.error("Unexpected error occured, "+e.name+": "+e.message),C.dispatchEvent(oe.ERROR,{name:e.name,message:e.message})}}),d.controls=!1}else C.setup()},C.pause=function(){d.pause(),d.controls=!1},C.seek=function(e){d.currentTime=e},C.stop=function(){y.reset(),w.reset(),u&&u.abort(),v&&(v.close(),v=null),$.forEach(r,function(e,t){if(t){t.removeEventListener("updateend",G),t.removeEventListener("error",H);try{l.removeSourceBuffer(t)}catch(e){O.warn(e.name+": "+e.message)}}}),s=i=o=!(r=[]),m=f=null,g=[],h=0,a=new $.URL,d.removeAttribute("src"),d.load(),d.controls=!1,C.dispatchEvent(oe.ENDED)},C.muted=function(e){return"boolean"===$.typeOf(e)&&(d.muted=e),d.muted},C.volume=function(e){return"number"===$.typeOf(e)&&(d.volume=e),d.volume},C.record=function(e){function t(){return s?Promise.reject("Failed to record stream, the download already ended."):(W(E.record(e)),Promise.resolve(v))}return C.config.service.enable?t():E.register().then(t)},C.element=function(){return d},C.destroy=function(){C.stop(),n=!1,E.removeEventListener(de.WRITERSTART,z),E.removeEventListener(de.WRITEREND,j),y.removeEventListener(ce.TIMER,K),l.removeEventListener("sourceopen",N),l.removeEventListener("sourceended",D),l.removeEventListener("sourceclose",P),l.removeEventListener("error",F),l.removeEventListener("webkitsourceopen",N),l.removeEventListener("webkitsourceended",D),l.removeEventListener("webkitsourceclose",P),l.removeEventListener("webkiterror",F),p.close(),p.removeEventListener(se.PACKET,U),p.removeEventListener(oe.ERROR,C.forward),k()},C.config=e,s=i=o=n=!1,c=[1,1.1,1.5,2.5,4],a=new $.URL,r=[],g=[],v=m=f=null,h=0,(E=new te(C.config.service,O)).addEventListener(de.WRITERSTART,z),E.addEventListener(de.WRITEREND,j),(y=new $.Timer(500*C.config.maxPlaybackLength,0,O)).addEventListener(ce.TIMER,K),(w=new $.Timer(1e3,0,O)).addEventListener(ce.TIMER,B),b=window.MediaSource||window.WebKitMediaSource,(l=new b).addEventListener("sourceopen",N),l.addEventListener("sourceended",D),l.addEventListener("sourceclose",P),l.addEventListener("error",F),l.addEventListener("webkitsourceopen",N),l.addEventListener("webkitsourceended",D),l.addEventListener("webkitsourceclose",P),l.addEventListener("webkiterror",F),(p=new ue.FMP4(O)).addEventListener(se.PACKET,U),p.addEventListener(oe.ERROR,C.forward),(d=$.createElement("video")).addEventListener("play",C.forward),d.addEventListener("waiting",T),d.addEventListener("loadstart",C.forward),d.addEventListener("progress",C.forward),d.addEventListener("suspend",C.forward),d.addEventListener("stalled",C.forward),d.addEventListener("abort",C.forward),d.addEventListener("timeout",C.forward),d.addEventListener("durationchange",Y),d.addEventListener("loadedmetadata",C.forward),d.addEventListener("loadeddata",C.forward),d.addEventListener("canplay",C.forward),d.addEventListener("playing",C.forward),d.addEventListener("canplaythrough",C.forward),d.addEventListener("pause",I),d.addEventListener("seeking",C.forward),d.addEventListener("seeked",C.forward),d.addEventListener("ratechange",C.forward),d.addEventListener("timeupdate",q),d.addEventListener("volumechange",Q),d.addEventListener("load",C.forward),d.addEventListener("ended",C.forward),d.addEventListener("error",X),C.config.objectfit&&J.style(d,{"object-fit":C.config.objectfit}),C.config.airplay&&d.setAttribute("x-webkit-airplay","allow"),C.config.autoplay&&d.setAttribute("autoplay",""),C.config.playsinline&&(d.setAttribute("playsinline","isiPhoneShowPlaysinline"),d.setAttribute("webkit-playsinline","isiPhoneShowPlaysinline"),d.setAttribute("x5-playsinline",""),d.setAttribute("x5-video-player-type","h5-page"),d.setAttribute("x5-video-player-fullscreen",!0),d.setAttribute("t7-video-player-type","inline")),d.muted=C.config.muted,d.volume=C.config.volume}((t.prototype=Object.create(ae.prototype)).constructor=t).prototype.kind="FMP4",t.prototype.isSupported=function(e,t){if(ne.isMSIE&&ne.major<9||!window.MediaSource&&!window.WebKitMediaSource)return!1;var r=new $.URL(e);if("http:"!==r.protocol&&"https:"!==r.protocol&&"ws:"!==r.protocol&&"wss:"!==r.protocol)return!1;for(var n=["mp4","m4s","m4v","",void 0],a=0;a<n.length;a++)if(r.filetype===n[a])return!0;return!1},e.register(t)}(playease),playease.core={},function(l){var u=l.utils;l.core.Model=function(r,e){var n,a,o,i,s,d=this,c=e;d.definition=function(e){return"number"===u.typeOf(e)&&e!==o&&e<d.config.sources.length&&(c.log("Model definition change: "+e),o=e),isNaN(o)?null:d.config.sources[o]},d.duration=function(e){return"number"===u.typeOf(e)&&(e===i||isNaN(i)&&isNaN(e)||(c.log("Model duration change: "+e),isNaN(i)&&e!==1/0?d.config.mode="vod":i!==1/0&&isNaN(e)?d.config.mode=n:d.config.mode="live",i=e)),i},d.state=function(e){return"string"===u.typeOf(e)&&e!==a&&(c.log("State change: "+e),a=e),a},d.setProperty=function(e,t){var r=s[e];void 0===r&&(s[e]=r={}),u.extendz(r,t)},d.getProperty=function(e){return s[e]},function(){d.config=r,n=d.config.mode,a="",i=NaN,s={},"array"!==u.typeOf(d.config.sources)&&(d.config.sources=[]),d.config.file&&(d.config.sources=[{file:d.config.file,module:d.config.module,loader:d.config.loader}]),o=d.config.sources.length?0:NaN;for(var e=0;e<d.config.sources.length;e++){var t=d.config.sources[e];t.loader=u.extendz({},d.config.loader,t.loader),null!=l.module(t.file,d.config.mode)?t.default&&(o=e):(c.warn("Ignored unsupported source url: "+t.file+"."),d.config.sources.splice(e--,1))}0===d.config.sources.length&&c.warn("No supported source url provided.")}()}}(playease),function(l){var u=l.utils,e=l.events,p=e.EventDispatcher,f=e.Event,m=e.IOEvent,g=e.MediaEvent,E=l.Module,e=l.core;function t(e,t,r){p.call(this,"View",{logger:r},f,m);var n,a,o,i,s,d=this,c=r;d.setup=function(t){d.destroy();try{o=new E[t](a.config,c),n.appendChild(o.element()),o.addGlobalListener(d.forward),o.muted(a.config.muted),o.volume(a.config.volume),o.setup()}catch(e){c.error("Failed to init module "+t+". "+e.name+": "+e.message)}},d.play=function(e,t){if(void 0===e){if(void 0===o)return void d.dispatchEvent(f.ERROR,{name:"NotFoundError",message:"Module not found while the source url doesn't provided."})}else if(void 0===o||!o.isSupported(e,a.config.mode)){var r=l.Module[a.config.module];return null!=r&&!1!==r.prototype.isSupported(e,a.config.mode)||null!=(r=l.module(e,a.config.mode))?void d.setup(r.prototype.kind):void d.dispatchEvent(f.ERROR,{name:"NotSupportedError",message:"No supported module found."})}o.play(e,t)},d.pause=function(){o&&o.pause()},d.seek=function(e){o&&(o.seek(e),"pause"!==a.state()&&o.play())},d.stop=function(){o&&o.stop()},d.muted=function(e){return"boolean"===u.typeOf(e)&&(o?a.config.muted=o.muted(e):a.config.muted!==e&&(a.config.muted=e,d.dispatchEvent(f.VOLUMECHANGE,{muted:a.config.muted,volume:a.config.volume}))),a.config.muted},d.volume=function(e){return"number"===u.typeOf(e)&&(o?a.config.volume=o.volume(e):a.config.volume!==e&&(a.config.volume=e,d.dispatchEvent(f.VOLUMECHANGE,{muted:a.config.muted,volume:a.config.volume}))),a.config.volume},d.definition=function(e){return"number"===u.typeOf(e)&&e!==a.definition()&&(e<a.config.sources.length?(a.definition(e),d.dispatchEvent(f.SWITCHING,{index:e})):d.dispatchEvent(f.ERROR,{name:"IndexSizeError",message:"The index is not in the allowed range."})),a.definition()},d.capture=function(e,t,r){if(void 0===o)return d.dispatchEvent(f.ERROR,{name:"InvalidStateError",message:"No module initialized yet."}),"";var n,a=o.element();i.width=e||a.videoWidth,i.height=t||a.videoHeight,s.drawImage(a,0,0,i.width,i.height);try{n=i.toDataURL(r||"image/png")}catch(e){return d.dispatchEvent(f.ERROR,{name:e.name,message:e.message}),""}return d.dispatchEvent(g.SCREENSHOT,{image:n}),n},d.record=function(e){return void 0===o?(d.dispatchEvent(f.ERROR,{name:"InvalidStateError",message:"No module initialized yet."}),null):o.record(e)},d.element=function(){return o?o.element():null},d.resize=function(e,t){},d.destroy=function(){o&&(o.destroy(),o.removeGlobalListener(d.forward),o=void 0,n.innerHTML="")},n=e,a=t,i=u.createElement("canvas"),s=i.getContext("2d")}(t.prototype=Object.create(p.prototype)).constructor=t,e.View=t}(playease),function(e){e.utils;var t=e.events,y=t.EventDispatcher,R=t.Event,S=t.IOEvent,L=t.MediaEvent,A=t.SaverEvent,e=e.core;function r(e,t,r){y.call(this,"Controller",{logger:r},R,S);var a,o,n,i,s,d,c=this,l=r;function u(e){l.log(e.data.kind+" module is ready."),h(e),c.play(n,i)}function p(e){a.duration(e.data.duration),c.forward(e)}function f(e){var t=a.definition();l.log("Switching definition "+e.data.index+": "+t.file);var r=0,n=o.element();n&&(r=n.currentTime),h(e),c.play(t.file,t),o.seek(r)}function m(e){var t=o.element();t&&l.log("Rate change: "+t.playbackRate),c.forward(e)}function g(e){a.setProperty("info",e.data.info),c.forward(e)}function E(e){a.setProperty("stats",e.data.stats),c.forward(e)}function v(e){l.error(e.data.name+": "+e.data.message),function(){if("SecurityError"===e.data.name)if(-1!==e.data.message.indexOf("toDataURL"))return 1}()?c.forward(e):s++<a.config.maxRetries||-1===a.config.maxRetries?(l.log("Retrying..."),d=!0,setTimeout(c.reload,a.config.retrying)):(o.stop(),h(e))}function h(e){var t=a.state();t===e.type||e.type===R.ENDED&&(t===R.ERROR||d)||(d=!1,a.state(e.type),e.type===R.ENDED&&o.stop(),c.forward(e))}c.play=function(e,t){if(void 0===e){if("pause"===a.state())return void o.play();var r=a.definition();if(null==r||!r.file)return void c.dispatchEvent(R.ERROR,{name:"NotFoundError",message:"No supported source url found."});e=r.file,t=r}n=e,i=t,o.play(n,i)},c.reload=function(){o.stop(),c.play(n,i)},a=e,s=0,d=!1,(o=t).addEventListener(R.READY,u),o.addEventListener(R.PLAY,h),o.addEventListener(R.WAITING,h),o.addEventListener(S.LOADSTART,c.forward),o.addEventListener(S.PROGRESS,c.forward),o.addEventListener(S.SUSPEND,c.forward),o.addEventListener(S.STALLED,c.forward),o.addEventListener(S.ABORT,c.forward),o.addEventListener(S.TIMEOUT,c.forward),o.addEventListener(R.DURATIONCHANGE,p),o.addEventListener(R.LOADEDMETADATA,c.forward),o.addEventListener(R.LOADEDDATA,c.forward),o.addEventListener(R.CANPLAY,c.forward),o.addEventListener(R.PLAYING,h),o.addEventListener(R.CANPLAYTHROUGH,c.forward),o.addEventListener(R.PAUSE,h),o.addEventListener(R.SEEKING,h),o.addEventListener(R.SEEKED,c.forward),o.addEventListener(R.SWITCHING,f),o.addEventListener(R.SWITCHED,c.forward),o.addEventListener(R.RATECHANGE,m),o.addEventListener(R.TIMEUPDATE,c.forward),o.addEventListener(R.VOLUMECHANGE,c.forward),o.addEventListener(S.LOAD,c.forward),o.addEventListener(L.INFOCHANGE,g),o.addEventListener(L.STATSUPDATE,E),o.addEventListener(L.SEI,c.forward),o.addEventListener(L.SCREENSHOT,c.forward),o.addEventListener(A.WRITERSTART,c.forward),o.addEventListener(A.WRITEREND,c.forward),o.addEventListener(R.ENDED,h),o.addEventListener(R.ERROR,v)}(r.prototype=Object.create(y.prototype)).constructor=r,e.Controller=r}(playease),function(e){var s=e.utils,t=e.OS,r=e.Kernel,n=e.Browser,a=e.events,d=a.EventDispatcher,c=a.Event,l=a.IOEvent,u=e.core,o=0,p={},f={airplay:"allow",autoplay:!1,dynamic:!1,bufferLength:.5,file:"",loop:!1,lowlatency:!0,maxBufferLength:1.5,maxPlaybackLength:10,maxRetries:0,mode:"live",module:"",muted:!1,objectfit:"contain",playsinline:!0,preload:"none",retrying:0,smoothing:!1,volume:.8,loader:{name:"auto",mode:"cors",credentials:"omit"},service:{script:"js/sw.js",scope:"js/",enable:!1},sources:[]};function i(e,t){var r,n,a,o=this,i=t instanceof s.Logger?t:new s.Logger(e,t);d.call(this,"API",{id:e,logger:i},c,l),o.setup=function(e,t){o.config=s.extendz({id:o.id},f,t),r=new u.Model(o.config,i),n=new u.View(e,r,i),(a=new u.Controller(r,n,i)).addGlobalListener(o.forward),o.play=a.play,o.pause=n.pause,o.seek=n.seek,o.stop=n.stop,o.reload=a.reload,o.muted=n.muted,o.volume=n.volume,o.definition=n.definition,o.capture=n.capture,o.record=n.record,o.element=n.element,o.getProperty=r.getProperty,o.duration=function(){return r.duration()},o.state=function(){return r.state()},o.dispatchEvent(c.BIND),o.config.autoplay&&a.play()},o.destroy=function(){n&&(n.destroy(),a.removeGlobalListener(o.forward)),delete p[o.id]},o.id=e,o.logger=i}s.log("Version: playease/"+e.VERSION),s.log("OS:      "+t.name+"/"+t.version+(t.model?"; "+t.model:"")),s.log("Kernel:  "+r.name+"/"+r.version),s.log("Browser: "+n.name+"/"+n.version),((i.prototype=Object.create(d.prototype)).constructor=i).prototype.CONF=f,i.get=function(e,t){null==e&&(e=0);var r=p[e];return null==r&&(r=new i(e,t),p[e]=r),r},i.create=function(e){return i.get(o++,e)},e.API=i,e.create=i.create}(playease),function(e){var I=e.utils,N=e.OS,D=I.css,t=e.events,P=t.EventDispatcher,F=t.Event,k=t.IOEvent,M=t.MediaEvent,B=t.SaverEvent,x=t.UIEvent,U=t.GlobalEvent,_=t.MouseEvent,V=t.TimerEvent,G=e.API,H="pe-wrapper",W="pe-content",r=0,z={},j={aspectratio:"",skin:"classic",plugins:[]};function K(e,t){var o,r,i,a,s,d,c=this,l=new I.Logger(e,t);function n(e){c.config=s.config,c.play=s.play,c.pause=s.pause,c.seek=s.seek,c.stop=s.stop,c.reload=s.reload,c.muted=s.muted,c.volume=s.volume,c.definition=s.definition,c.capture=s.capture,c.record=s.record,c.element=s.element,c.getProperty=s.getProperty,c.duration=s.duration,c.state=s.state,c.forward(e)}function u(e){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||c.fullscreen(!1)}function p(e){switch(e.type){case U.CHANGE:(a={timebar:function(){var e=s.duration();e&&s.seek(e*n.data.value/100)},volumebar:function(){s.volume(n.data.value/100)},definition:function(){s.definition(parseInt(n.data.value))}}[(n=e).data.name])?a():c.forward(n);break;case _.CLICK:t=e,(r={play:c.play,pause:c.pause,stop:c.stop,reload:c.reload,capture:c.capture,download:function(){c.record("fragmented.mp4")},mute:function(){c.muted(!0)},unmute:function(){c.muted(!1)},danmuoff:function(){c.danmu(!1)},danmuon:function(){c.danmu(!0)},fullpage:function(){c.fullpage(!0)},exitfullpage:function(){c.fullpage(!1)},fullscreen:function(){c.fullscreen(!0)},exitfullscreen:function(){c.fullscreen(!1)},info:function(){C(t.data.name)},stats:function(){C(t.data.name)}}[t.data.name])?r():c.forward(t);break;case _.DOUBLE_CLICK:(r={fullpage:function(){c.fullpage("true"!==i.getAttribute("fullpage"))},fullscreen:function(){c.fullscreen("true"!==i.getAttribute("fullscreen"))}}[(a=e).data.name])?r():c.forward(a);break;default:c.forward(e)}var t,r,n,a}function f(e){var t=o.Controlbar;t&&D.style(t.element(),{visibility:"visible"}),d.stop(),d.start()}function m(e){var t=o.Controlbar;t&&D.style(t.element(),{visibility:"hidden"})}function g(e){var t=o.ContextMenu;if(void 0===e.currentTarget)for(var r=e.srcElement;r;r=r.offsetParent)if(r===i){e.currentTarget=i;break}if(2===e.button&&e.currentTarget===i){for(var n=0,a=0,r=e.srcElement||e.target;r&&r!==i;r=r.offsetParent)n+=r.offsetLeft,a+=r.offsetTop;return D.style(t.element(),{left:e.offsetX+n+"px",top:e.offsetY+a+"px",display:"block"}),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1}}function E(e){var t=o.ContextMenu;D.style(t.element(),{display:"none"})}function v(e){T(e)}function h(e){i.setAttribute("mode",c.config.mode),c.forward(e)}function y(e){var t=o.Controlbar;!t||(t=t.components.definition)&&t.value(e.data.index),T(e)}function R(e){var t,r=o.Controlbar;r&&((t=r.components.timebar)&&(t.duration=e.data.duration,t.progress(isNaN(e.data.duration)?0:e.data.buffered/e.data.duration*100),t.position(isNaN(e.data.duration)?0:e.data.time/e.data.duration*100)),(t=r.components.time)&&(r=I.time2string(e.data.time),n=I.time2string(e.data.duration),t.text(r+"/"+n)));var n=o.Display;n&&n.update("stats",{TimeRange:I.time2string(e.data.start)+"/"+I.time2string(e.data.buffered),JitterBuffer:(e.data.buffered-e.data.time).toLocaleString()+" sec."}),c.forward(e)}function S(e){var t=100*e.data.volume|0;i.setAttribute("muted",e.data.muted||!t);var r=o.Controlbar;r&&(r.resize(a.clientWidth,a.clientHeight),(r=r.components.volumebar)&&(r.position(t),r.thumb(t))),c.forward(e)}function L(e){var t=o.Display;t&&t.update("info",e.data.info),c.forward(e)}function A(e){var r,t=o.Display;t&&(r=I.extendz({},e.data.stats),I.forEach(r,function(e,t){switch(e){case"BytesReceived":case"BytesReceivedPerSecond":r[e]=I.formatBytes(t);break;case"AudioPacketsReceivedPerSecond":case"VideoPacketsReceivedPerSecond":case"DroppedVideoFrames":case"TotalVideoFrames":r[e]=t.toLocaleString();break;case"FirstAudioFrameReceivedIn":case"FirstVideoFrameReceivedIn":r[e]=t.toLocaleString()+" ms."}}),t.update("stats",r)),c.forward(e)}function w(e){c.forward(e)}function b(e){c.forward(e)}function C(e){var t=o.Display;t&&t.show(e)}function O(e){var t;!function(){if("SecurityError"===e.data.name)if(-1!==e.data.message.indexOf("toDataURL"))return;return 1}()?c.forward(e):((t=o.Display)&&t.error(e.data),e.type=F.ERROR,T(e),c.stop())}function T(e){i.setAttribute("state",e.type);var t=o.Display;t&&t.state(e.type),c.resize(),c.forward(e)}P.call(this,"UI",{id:e,logger:l},I.extendz({},F,k,x)),c.setup=function(e,t){r=e,function(n){"array"!==I.typeOf(n.plugins)&&(n.plugins=[]);for(var e=[],t=0;t<j.plugins.length;t++){var r=j.plugins[t],a=r.prototype.CONF,r=function(e){for(var t=0;t<n.plugins.length;t++){var r=n.plugins[t];if(r.kind===e)return r}return null}(r.prototype.kind);e.push(I.extendz({},a,r))}c.config=I.extendz({id:c.id},G.prototype.CONF,j,n),c.config.plugins=e}(t),i=I.createElement("div",H+" pe-ui-"+c.config.skin),a=I.createElement("div",W),i.appendChild(a),r.appendChild(i),(s=G.get(c.id,l)).addEventListener(F.BIND,n),s.addEventListener(F.READY,v),s.addEventListener(F.PLAY,T),s.addEventListener(F.WAITING,T),s.addEventListener(k.LOADSTART,c.forward),s.addEventListener(k.PROGRESS,c.forward),s.addEventListener(k.SUSPEND,c.forward),s.addEventListener(k.STALLED,c.forward),s.addEventListener(k.ABORT,c.forward),s.addEventListener(k.TIMEOUT,c.forward),s.addEventListener(F.DURATIONCHANGE,h),s.addEventListener(F.LOADEDMETADATA,c.forward),s.addEventListener(F.LOADEDDATA,c.forward),s.addEventListener(F.CANPLAY,c.forward),s.addEventListener(F.PLAYING,T),s.addEventListener(F.CANPLAYTHROUGH,c.forward),s.addEventListener(F.PAUSE,T),s.addEventListener(F.SEEKING,T),s.addEventListener(F.SEEKED,c.forward),s.addEventListener(F.SWITCHING,y),s.addEventListener(F.SWITCHED,c.forward),s.addEventListener(F.RATECHANGE,c.forward),s.addEventListener(F.TIMEUPDATE,R),s.addEventListener(F.VOLUMECHANGE,S),s.addEventListener(k.LOAD,c.forward),s.addEventListener(M.INFOCHANGE,L),s.addEventListener(M.STATSUPDATE,A),s.addEventListener(M.SEI,c.forward),s.addEventListener(M.SCREENSHOT,c.forward),s.addEventListener(B.WRITERSTART,w),s.addEventListener(B.WRITEREND,b),s.addEventListener(F.ENDED,T),s.addEventListener(F.ERROR,O),s.setup(a,c.config),I.forEach(c.config.plugins,function(t,r){if("function"===I.typeOf(K[r.kind]))if(!1!==r.visibility){"Controlbar"!==r.kind||c.config.file||(r.sources=c.config.sources);try{var e=new K[r.kind](r,l);"function"===I.typeOf(e.addGlobalListener)&&e.addGlobalListener(p),i.appendChild(e.element()),o[r.kind]=e}catch(e){l.error("Failed to initialize plugin: index="+t+", kind="+r.kind+". Error="+e.message)}}else l.log("Component "+r.kind+" is disabled.");else l.error("Unrecognized plugin: index="+t+", kind="+r.kind+".")}),function(){i.setAttribute("mode",c.config.mode),i.setAttribute("state","");var e=o.Controlbar;e?(i.setAttribute("controls",e.config.autohide?"motion":"always"),e.config.autohide&&i.addEventListener("mousemove",f)):i.setAttribute("controls","never");e=o.Danmu;e&&i.setAttribute("danmu",e.config.enable?"on":"off");i.setAttribute("muted",c.config.muted),i.setAttribute("fullpage",!1),i.setAttribute("fullscreen",!1),o.ContextMenu&&(i.oncontextmenu=function(e){return(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1,!1},document.addEventListener("mouseup",g),i.addEventListener("mouseup",g),document.addEventListener("mousedown",E),i.addEventListener("mousedown",E));document.addEventListener("fullscreenchange",u),document.addEventListener("webkitfullscreenchange",u),document.addEventListener("mozfullscreenchange",u),document.addEventListener("MSFullscreenChange",u)}(),c.resize()},c.danmu=function(e){i.setAttribute("danmu",e?"on":"off");var t=o.Controlbar;t&&t.resize(a.clientWidth,a.clientHeight);t=o.Danmu;return!!t&&t.enable(e)},c.shoot=function(e,t){var r=o.Danmu;r&&(r.shoot(e,t),c.dispatchEvent(x.SHOOTING,{text:e,data:t}))},c.displayAD=function(e){var t=o.AD;t&&t.display(e)},c.removeAD=function(){var e=o.AD;e&&e.remove()},c.fullpage=function(e){if(void 0===e)return"true"===i.getAttribute("fullpage");(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)&&c.fullscreen(!1),i.setAttribute("fullpage",!!e),c.resize(),c.dispatchEvent(x.FULLPAGE,{status:e})},c.fullscreen=function(e){if(void 0===e)return"true"===i.getAttribute("fullscreen");var t=s.element();if(e){var r=i.requestFullscreen||i.webkitRequestFullScreen||i.mozRequestFullScreen||i.msRequestFullscreen;if(N.isMobile){if(t&&t.webkitEnterFullscreen&&(t.setAttribute("x5-video-orientation","landscape"),t.webkitEnterFullscreen()),N.isIOS)return}else{if(!r)return void c.fullpage(e);(n=r.call(i))&&n.catch(function(e){l.debug(e.name+": "+e.message)})}}else{r=document.exitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen;if(!r)return void c.fullpage(e);t&&t.setAttribute("x5-video-orientation","portraint"),(n=r.call(document))&&n.catch(function(e){l.debug(e.name+": "+e.message)})}var n=o.Controlbar;n&&(D.style(n.element(),{visibility:"visible"}),e?n.config.autohide||(i.setAttribute("controls","motion"),i.addEventListener("mousemove",f)):n.config.autohide||(i.setAttribute("controls","always"),i.removeEventListener("mousemove",f),d.stop())),i.setAttribute("fullscreen",!!e),c.resize(),c.dispatchEvent(x.FULLSCREEN,{status:e})},c.resize=function(){var e,t,r=a.clientWidth,n=a.clientHeight;""!==c.config.aspectratio&&(t=c.config.aspectratio.match(/(\d+)\:(\d+)/),"array"===I.typeOf(t)&&2<t.length&&(e=parseInt(t[1]),t=parseInt(t[2]),n=r*t/e,"always"===i.getAttribute("controls")&&(n-=40))),I.forEach(o,function(e,t){t.resize(r,n)}),c.dispatchEvent(x.RESIZE,{width:r,height:n})},c.destroy=function(){s&&(s.destroy(),s.removeEventListener(F.BIND,n),s.removeEventListener(F.READY,v),s.removeEventListener(F.PLAY,T),s.removeEventListener(F.WAITING,T),s.removeEventListener(k.LOADSTART,c.forward),s.removeEventListener(k.PROGRESS,c.forward),s.removeEventListener(k.SUSPEND,c.forward),s.removeEventListener(k.STALLED,c.forward),s.removeEventListener(k.ABORT,c.forward),s.removeEventListener(k.TIMEOUT,c.forward),s.removeEventListener(F.DURATIONCHANGE,h),s.removeEventListener(F.LOADEDMETADATA,c.forward),s.removeEventListener(F.LOADEDDATA,c.forward),s.removeEventListener(F.CANPLAY,c.forward),s.removeEventListener(F.PLAYING,T),s.removeEventListener(F.CANPLAYTHROUGH,c.forward),s.removeEventListener(F.PAUSE,T),s.removeEventListener(F.SEEKING,T),s.removeEventListener(F.SEEKED,c.forward),s.removeEventListener(F.SWITCHING,y),s.removeEventListener(F.SWITCHED,c.forward),s.removeEventListener(F.RATECHANGE,c.forward),s.removeEventListener(F.TIMEUPDATE,R),s.removeEventListener(F.VOLUMECHANGE,S),s.removeEventListener(k.LOAD,c.forward),s.removeEventListener(M.INFOCHANGE,L),s.removeEventListener(M.STATSUPDATE,A),s.removeEventListener(M.SCREENSHOT,c.forward),s.removeEventListener(F.ENDED,T),s.removeEventListener(F.ERROR,O),s=void 0,r.innerHTML=""),delete z[c.id]},c.id=e,c.logger=l,o={},(d=new I.Timer(3e3,1,l)).addEventListener(V.TIMER,m)}K.prototype=Object.create(P.prototype),(K.prototype.constructor=K).prototype.CONF=j,K.register=function(t,e){try{j.plugins.splice(e||j.plugins.length,0,t),K[t.prototype.kind]=t}catch(e){_logger.error("Failed to register plugin "+t.prototype.kind+", Error="+e.message)}},K.get=function(e,t){null==e&&(e=0);var r=z[e];return void 0===r&&(r=new K(e,t),z[e]=r),r},K.create=function(e){return K.get(r++,e)},e.ui=K.get,e.ui.create=K.create,e.UI=K,e.UI.VERSION="2.1.71"}(playease),playease.UI.components={},function(e){var s=e.utils,t=e.events,d=t.EventDispatcher,c=t.MouseEvent,e=e.UI.components;function r(e,t,r){d.call(this,"Button",{logger:r},[c.CLICK]);var n,a,o=this;function i(e){o.dispatchEvent(c.CLICK,{name:n})}o.element=function(){return a},o.resize=function(e,t){},n=e,(a=s.createElement("span","pe-button "+e)).addEventListener("click",i)}((r.prototype=Object.create(d.prototype)).constructor=r).prototype.kind="Button",e.Button=r}(playease),function(e){var o=e.utils,i=e.events.EventDispatcher,e=e.UI.components;function t(e,t,r){i.call(this,"Label",{logger:r});var n,a;this.text=function(e){return void 0!==e&&(a.innerHTML=e),n},this.element=function(){return a},this.resize=function(e,t){},n=t||"",(a=o.createElement("span","pe-label "+e)).innerHTML=n}((t.prototype=Object.create(i.prototype)).constructor=t).prototype.kind="Label",e.Label=t}(playease),function(e){var o=e.utils,t=e.events,i=t.EventDispatcher,s=t.MouseEvent,e=e.UI.components;function r(e,t,r){i.call(this,"Preview",{logger:r},[s.CLICK]);var n,a;this.append=function(e,t,r){var n=o.createElement("img");n.setAttribute("min",t),n.setAttribute("max",r||NaN),n.src=e,a.appendChild(n)},this.element=function(){return n},this.resize=function(e,t){},n=o.createElement("div","pe-tooltip preview"),a=o.createElement("div"),n.appendChild(a)}((r.prototype=Object.create(i.prototype)).constructor=r).prototype.kind="Preview",e.Preview=r}(playease),function(e){var u=e.utils,p=u.css,t=e.events,f=t.EventDispatcher,m=t.GlobalEvent,e=e.UI.components;function r(e,t,r){f.call(this,"Select",{logger:r},[m.CHANGE]);var n,a,o,i,s,d,c=this;function l(e){e=e.target.getAttribute("value");e!==a&&c.dispatchEvent(m.CHANGE,{name:n,value:e}),d.style.visibility="hidden"}c.append=function(e,t){var r=u.createElement("span","pe-select-menu-option");r.addEventListener("click",l),r.setAttribute("value",t||o.length),r.innerHTML=e,o.push(r),d.appendChild(r),1===o.length&&c.value(r.getAttribute("value"))},c.remove=function(e){for(var t=0;t<o.length;t++){var r=o[t];if(r.getAttribute("value")===e){r.removeEventListener("click",l),d.removeChild(r),o.splice(t,1),a===e&&(a=o.length||NaN,s.innerHTML=o.length?o[0].innerHTML:_placeholder);break}}},c.value=function(e){switch(typeof e){case"number":case"string":for(var t=0;t<o.length;t++){var r=o[t];if(r.getAttribute("value")==e){a=e,s.innerHTML=r.innerHTML,i.setAttribute("value",e),c.resize();break}}}return a},c.element=function(){return i},c.resize=function(e,t){p.style(d,{left:(i.clientWidth-d.clientWidth)/2+"px"})},n=e,a=NaN,o=[],i=u.createElement("div","pe-select "+n),s=u.createElement("span","pe-select-text"),(d=u.createElement("div","pe-select-menu")).style.visibility="hidden",i.appendChild(s),i.appendChild(d),s.addEventListener("click",function(e){d.style.visibility="hidden"===d.style.visibility?"visible":"hidden"})}((r.prototype=Object.create(f.prototype)).constructor=r).prototype.kind="Select",e.Select=r}(playease),function(e){var h=e.utils,y=e.Browser,R=h.css,t=e.events,S=t.EventDispatcher,L=t.GlobalEvent,A=t.MouseEvent,e=e.UI.components,w="pe-slider-rail",b="horizontal";function r(e,t,r){S.call(this,"Slider",{logger:r},[L.CHANGE,A.MOUSE_MOVE]);var n,o,a,i,s,d,c,l,u,p,f=this;function m(e){e.button===(y.isIE8?1:0)&&(e.target||(e.target=e.srcElement),s!==e.target&&s!==e.target.parentNode&&s!==e.target.parentNode.parentNode||((e=v(e.clientX,e.clientY))!==i.getAttribute("value")&&f.dispatchEvent(L.CHANGE,{name:n,value:e}),a=!0))}function g(e){var t=v(e.clientX,e.clientY);s!==e.target&&s!==e.target.parentNode&&s!==e.target.parentNode.parentNode||f.dispatchEvent(A.MOUSE_MOVE,{name:n,value:t}),a&&t!==i.getAttribute("value")&&f.dispatchEvent(L.CHANGE,{name:n,value:t})}function E(e){a&&((e=v(e.clientX,e.clientY))!==i.getAttribute("value")&&f.dispatchEvent(L.CHANGE,{name:n,value:e}),a=!1)}function v(e,t){for(var r=e,n=t,a=s;a;a=a.offsetParent)r-=a.offsetLeft,n-=a.offsetTop;return t=(o===b?r/s.clientWidth*100:n/s.clientHeight*100).toFixed(3),t=Math.max(0,Math.min(t,100))}f.value=function(e){return void 0!==e&&(d.innerHTML=e),d.innerHTML},f.progress=function(e){R.style(l,{width:e+"%"})},f.position=function(e){i.setAttribute("value",e),R.style(u,{width:e+"%"})},f.thumb=function(e){R.style(p,{left:e+"%"})},f.element=function(){return i},f.nonius=function(){return d},f.resize=function(e,t){},function(){switch(n=e,a=!(o=b),i=h.createElement("div","pe-slider "+n),s=h.createElement("div","pe-slider-content"),d=h.createElement("span","pe-tooltip value"),c=h.createElement("span",w+" background"),l=h.createElement("span",w+" progress"),u=h.createElement("span",w+" position"),(p=h.createElement("span","pe-slider-thumb")).innerHTML="<span></span>",s.appendChild(d),s.appendChild(c),s.appendChild(l),s.appendChild(u),s.appendChild(p),i.appendChild(s),e){case"timebar":f.value("--:--");break;case"volumebar":f.value(t),f.position(t),f.thumb(t)}try{document.addEventListener("mousedown",m),document.addEventListener("mousemove",g),document.addEventListener("mouseup",E)}catch(e){document.attachEvent("onmousedown",m),document.attachEvent("onmousemove",g),document.attachEvent("onmouseup",E)}}()}((r.prototype=Object.create(S.prototype)).constructor=r).prototype.kind="Slider",r.HORIZONTAL=b,r.VERTICAL="vertical",e.Slider=r}(playease),function(e){var d=e.utils,c=d.css,t=e.events,l=t.EventDispatcher,u=t.GlobalEvent,e=e.UI.components;function r(e,t,r){l.call(this,"Panel",{logger:r},[u.VISIBILITYCHANGE]);var n,a,o,i,s=this;s.update=function(e){i=d.extendz(i,e);var r="";d.forEach(i,function(e,t){r+=(r?"\n":"")+e+": "+t}),o.innerHTML=r},s.clear=function(){i={},o.innerHTML=""},s.show=function(){"inline-block"!==a.style.display?(c.style(a,{display:"inline-block"}),s.dispatchEvent(u.VISIBILITYCHANGE,{name:n,state:"visible"})):s.hide()},s.hide=function(){c.style(a,{display:"none"}),s.dispatchEvent(u.VISIBILITYCHANGE,{name:n,state:"hidden"})},s.element=function(){return a},s.resize=function(e,t){},n=e,i={},a=d.createElement("div","pe-panel "+n),o=d.createElement("div"),a.appendChild(o)}((r.prototype=Object.create(l.prototype)).constructor=r).prototype.kind="Panel",e.Panel=r}(playease),function(e){var d=e.utils,c=d.css,l=e.events.EventDispatcher,e=e.UI;function t(e,t){l.call(this,"Poster",{logger:t});var r,n,a=this,o=t;function i(e){r.appendChild(n)}function s(e){o.log('Failed to load poster "'+n.src+'".')}a.element=function(){return r},a.resize=function(e,t){},a.config=e,r=d.createElement("div","pe-poster"),(n=new Image).onload=i,n.onabort=s,n.onerror=s,a.config.objectfit&&c.style(n,{"object-fit":a.config.objectfit}),n.crossOrigin=a.config.cors,n.src=a.config.file}((t.prototype=Object.create(l.prototype)).constructor=t).prototype.kind="Poster",t.prototype.CONF={kind:"Poster",file:"image/poster.png",cors:"anonymous",objectfit:"fill",visibility:!0},e.register(t)}(playease),function(e){var s=e.utils,d=s.css,t=e.events,r=t.EventDispatcher,c=t.UIEvent,e=e.UI;function n(e,t){r.call(this,"Danmu",{logger:t},[c.SHOOTING]);var n,a,o=this;function i(e){a.removeChild(e.target)}o.enable=function(e){return"boolean"===s.typeOf(e)&&(o.config.enable=e),o.config.enable},o.shoot=function(e,t){var r;o.config.enable&&((r=s.createElement("div","pe-danmu-item")).addEventListener("transitionend",i),r.innerHTML=e,a.appendChild(r),e=n.clientWidth+r.clientWidth,d.style(r,s.extendz({},t,{top:(r.clientWidth,r=Math.floor(n.clientHeight/o.config.lineHeight),Math.floor(Math.random()*r)*o.config.lineHeight+"px"),left:n.clientWidth+"px",transform:"translateX(-"+e+"px)",transition:"transform "+e/o.config.speed+"s linear 0s"})))},o.element=function(){return n},o.resize=function(e,t){},o.config=e,n=s.createElement("div","pe-danmu"),a=s.createElement("div"),n.appendChild(a)}((n.prototype=Object.create(r.prototype)).constructor=n).prototype.kind="Danmu",n.prototype.CONF={kind:"Danmu",speed:100,lineHeight:32,enable:!0,visibility:!0},e.register(n)}(playease),function(e){var l=e.utils,u=l.css,t=e.events,p=t.EventDispatcher,f=t.Event,m=t.MouseEvent,g=t.TimerEvent,e=e.UI,E=e.components,v=/\[([a-z]+)\:([a-z]+)=([^\]]+)?\]/gi;function r(e,t){p.call(this,"Display",{logger:t},[m.CLICK]);var r,n,a,o,i=this,s=t;function d(e){var t=30*a.currentCount()%360,r=i.components.waiting;r&&u.style(r.element(),{filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation="+t*Math.PI/180+")",transform:"rotate("+t+"deg)","-o-transform":"rotate("+t+"deg)","-ms-transform":"rotate("+t+"deg)","-moz-transform":"rotate("+t+"deg)","-webkit-transform":"rotate("+t+"deg)"})}function c(e){var t=(new Date).getTime();if(t<=o+700)return o=0,void i.dispatchEvent(m.DOUBLE_CLICK,{name:i.config.ondoubleclick});o=t}i.state=function(e){e===f.WAITING?a.start():a.stop(),e!==f.ERROR&&i.error()},i.error=function(e){var t=i.components.error;t&&(e?(e.name=e.name||"UnknownError",e.message=e.message||"An unknown error occurred.",t.text(e.name+": "+e.message)):t.text(""))},i.update=function(e,t){e=i.components[e];e&&e.update(t)},i.clear=function(e){e=i.components[e];e&&e.clear()},i.show=function(r){l.forEach(i.components,function(e,t){"Panel"===t.kind&&e!==r&&t.hide()});var e=i.components[r];e&&e.show()},i.hide=function(e){e=i.components[e];e&&e.hide()},i.element=function(){return r},i.resize=function(e,t){},i.config=e,i.components={},r=l.createElement("div","pe-display"),(n=l.createElement("div")).addEventListener("click",c),r.appendChild(n),function(){var e;for(;null!==(e=v.exec(i.config.layout));)!function(e,t,r,n){var a,o;try{a=new E[t](r,n,s),"function"===l.typeOf(a.addGlobalListener)&&a.addGlobalListener(i.forward),o=a.element(),e.appendChild(o),i.components[r]=a}catch(e){return s.error("Failed to initialize component: type="+t+", name="+r+", Error="+e.message)}}(n,e[1],e[2],e[3])}(),(a=new l.Timer(80,0,s)).addEventListener(g.TIMER,d),o=0}((r.prototype=Object.create(p.prototype)).constructor=r).prototype.kind="Display",r.prototype.CONF={kind:"Display",layout:"[Button:play=][Button:waiting=][Label:error=][Panel:info=][Panel:stats=]",ondoubleclick:"fullscreen",visibility:!0},e.register(r)}(playease),function(e){var a=e.utils,o=e.events.EventDispatcher,e=e.UI;function t(e,t){o.call(this,"AD",{logger:t});var r,n=this;n.display=function(e){r.innerHTML="",r.appendChild(e)},n.remove=function(){r.innerHTML=""},n.element=function(){return r},n.resize=function(e,t){},n.config=e,r=a.createElement("div","pe-ad")}((t.prototype=Object.create(o.prototype)).constructor=t).prototype.kind="AD",t.prototype.CONF={kind:"AD",visibility:!0},e.register(t)}(playease),function(e){var a=e.utils,o=e.events.EventDispatcher,e=e.UI;function t(e,t){o.call(this,"Share",{logger:t});var r,n=this;n.display=function(e){r.innerHTML="",r.appendChild(e)},n.element=function(){return r},n.resize=function(e,t){},n.config=e,r=a.createElement("div","pe-share")}((t.prototype=Object.create(o.prototype)).constructor=t).prototype.kind="Share",t.prototype.CONF={kind:"Share",visibility:!0},e.register(t)}(playease),function(e){var c=e.utils,l=c.css,u=e.events.EventDispatcher,e=e.UI;function t(e,t){u.call(this,"Logo",{logger:t});var r,n,a,o=this,i=t;function s(e){l.style(r,{width:a.width+"px",height:a.height+"px"}),l.style(n,{background:"url("+o.config.file+")"}),n.href=o.config.link,n.target=o.config.target,r.appendChild(n)}function d(e){i.log('Failed to load logo "'+a.src+'".')}o.element=function(){return r},o.resize=function(e,t){},o.config=e,(r=c.createElement("div","pe-logo")).style=o.config.style,n=c.createElement("a"),(a=new Image).onload=s,a.onabort=d,a.onerror=d,a.crossOrigin=o.config.cors,a.src=o.config.file}((t.prototype=Object.create(u.prototype)).constructor=t).prototype.kind="Logo",t.prototype.CONF={kind:"Logo",file:"http://studease.cn/images/content/playease-logo.png",link:"https://github.com/studease/playease",cors:"anonymous",target:"_blank",style:"margin: 3% 5%; width: 36px; height: 36px; top: 0px; right: 0px;",visibility:!0},e.register(t)}(playease),function(e){var l=e.utils,u=l.css,p=e.OS,f=e.Browser,t=e.events,a=t.EventDispatcher,o=t.GlobalEvent,m=t.MouseEvent,e=e.UI,g=e.components,E=/\[([a-z]+)\:([a-z]+)=([^\]]+)?\]/gi;function r(e,t){a.call(this,"Controlbar",{logger:t},[o.CHANGE,m.CLICK,m.MOUSE_MOVE]);var r,i,n,s=this,d=t;function c(e){var t,r=e.target.element(),n=e.target.nonius(),a=r.clientWidth*e.data.value/100-n.clientWidth/2;switch(e.data.name){case"timebar":e.target.thumb(e.data.value),e.target.duration?(t=e.target.duration*e.data.value/100,e.target.value(l.time2string(t))):e.target.value("--:--");break;case"volumebar":e.target.value(0|e.data.value)}e=a+r.offsetLeft;e<1&&r.offsetParent===i?u.style(n,{left:1-r.offsetLeft+"px",right:"auto"}):r.offsetParent.offsetLeft+e+n.clientWidth>i.clientWidth-1?u.style(n,{left:"auto",right:r.offsetParent.offsetLeft+r.offsetLeft+r.clientWidth+1-i.clientWidth+"px"}):u.style(n,{left:a+"px",right:"auto"})}s.element=function(){return r},s.resize=function(a,o){l.forEach(s.components,function(e,t){switch(t.resize(a,o),e){case"timebar":break;default:if(void 0===t.tooltip)break;var r=t.element(),n=t.tooltip,e=(r.clientWidth-n.clientWidth)/2,t=e+r.offsetLeft;if(t<1&&r.offsetParent===i){u.style(n,{left:1-r.offsetLeft+"px",right:"auto"});break}if(null===r.offsetParent)break;r.offsetParent.offsetLeft+t+n.clientWidth>i.clientWidth-1?u.style(n,{left:"auto",right:r.offsetParent.offsetLeft+r.offsetLeft+r.clientWidth+1-i.clientWidth+"px"}):u.style(n,{left:e+"px",right:"auto"})}})},s.config=e,s.components={},r=l.createElement("div","pe-controlbar"),i=l.createElement("div"),r.appendChild(i),function(){var n=s.config.layout.split("|");if(4!==n.length)throw{name:"DataError",message:"Controlbar should have exactly 4 sections."};var e=l.createElement("div","pe-left"),t=l.createElement("div","pe-center"),r=l.createElement("div","pe-right");l.forEach([i,e,t,r],function(e,t){for(var r;null!==(r=E.exec(n[e]));)!function(e,t,r,n){var a,o,i;switch(r){case"capture":if(p.isIOS&&!f.isSafari)return;break;case"mute":case"unmute":case"volumebar":if(p.isMobile)return;break;case"definition":if(!s.config.sources||s.config.sources.length<2)return;break;case"download":if(!TransformStream)return}try{a=new g[t](r,n,d),"function"===l.typeOf(a.addGlobalListener)&&(a.addGlobalListener(s.forward),"Slider"===t&&a.addEventListener(m.MOUSE_MOVE,c)),o=a.element(),e.appendChild(o),s.components[r]=a}catch(e){return d.error("Failed to initialize component: type="+t+", name="+r+", Error="+e.message)}switch(r){case"quote":case"time":case"volumebar":break;default:void 0!==n&&("function"===l.typeOf(g[n])?(i=new g[n](r,n,d),o.insertAdjacentElement("afterbegin",i.element())):((i=l.createElement("span","pe-tooltip")).innerHTML=n,o.insertAdjacentElement("afterbegin",i)),a.tooltip=i)}}(t,r[1],r[2],r[3])}),i.appendChild(e),i.appendChild(t),i.appendChild(r)}(),(n=s.components.definition)&&l.forEach(s.config.sources,function(e,t){n.append(t.label),t.default&&n.value(e)})}((r.prototype=Object.create(a.prototype)).constructor=r).prototype.kind="Controlbar",r.prototype.CONF={kind:"Controlbar",layout:"[Slider:timebar=Preview]|[Button:play=Play][Button:pause=Pause][Button:reload=Reload][Button:stop=Stop][Label:quote=Live broadcast][Label:time=00:00/00:00]||[Button:report=Report][Button:capture=Capture][Button:download=Download][Button:mute=Mute][Button:unmute=Unmute][Slider:volumebar=80][Select:definition=Definition][Button:danmuoff=Danmu Off][Button:danmuon=Danmu On][Button:fullpage=Fullpage][Button:exitfullpage=Exit Fullpage][Button:fullscreen=Fullscreen][Button:exitfullscreen=Exit Fullscreen]",autohide:!1,visibility:!0},e.register(r)}(playease),function(u){var p=u.utils,f=u.Browser,e=u.events,t=e.EventDispatcher,m=e.MouseEvent,e=u.UI;function r(s,e){t.call(this,"ContextMenu",{logger:e},[m.CLICK]);var d,c,l=this;l.element=function(){return d},l.resize=function(e,t){},function(){l.config=s,l.config.items=[{id:0,mode:"featured",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA2UExURebm5ubm5ubm5ubm5ubm5ubm5ubm5kxpcebm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5rnvS8UAAAASdFJOU/9GGpAEVa0AOw0vovB5tnDaudiwhIIAAACiSURBVBjTXZHbAsQQDERDkQS97P//7GaibLfzgJxgIoiHVHIWvQPysRZylbpg2mhpSwOmgx46kkPf10KMoflewGqLLsNBugXVIDxuZhRuTGrJZmHIXhBuUEIuMC7pJ3I4R9nGyHzCY2eONmWHesMyoQyI3BXncRgZ1M+16zJCSbMRqyT4LriKt2calP9nWkMM7q+GcEo/OFvnGrDIo/Ov7/gCDPoHpWEsixcAAAAASUVORK5CYII=",text:"playease/"+u.VERSION,shortcut:"",handler:function(){window.open("https://github.com/studease/playease")}}].concat("array"===p.typeOf(s.items)?s.items:[]),f.flash&&l.config.items.push({mode:"",icon:"",text:"Flash Version "+f.flash,shortcut:"",handler:function(){window.open("http://get.adobe.com/cn/flashplayer/about/")}}),l.config.items.push({mode:"",icon:"",text:"Show Media Info",shortcut:"",handler:function(){l.dispatchEvent(m.CLICK,{name:"info"})}}),l.config.items.push({mode:"",icon:"",text:"Show Media Stats",shortcut:"",handler:function(){l.dispatchEvent(m.CLICK,{name:"stats"})}}),d=p.createElement("div","pe-contextmenu"),c=p.createElement("table"),d.appendChild(c);for(var e=0;e<l.config.items.length;e++){var t=l.config.items[e],r=p.createElement("tr","pe-contextmenu-item"+(t.mode?" "+t.mode:""));r.onmousedown=t.handler;var n=p.createElement("td");t.icon&&((o=p.createElement("span","pe-contextmenu-item-icon")).innerHTML='<a style="background-image: url('+t.icon+');"></a>',n.appendChild(o));var a=p.createElement("td");t.text&&((o=p.createElement("span","pe-contextmenu-item-text")).innerHTML=t.text,a.appendChild(o));var o,i=p.createElement("td");t.shortcut&&((o=p.createElement("span","pe-contextmenu-item-shortcut")).innerHTML=t.shortcut,i.appendChild(o)),r.appendChild(n),r.appendChild(a),r.appendChild(i),c.appendChild(r)}}()}((r.prototype=Object.create(t.prototype)).constructor=r).prototype.kind="ContextMenu",r.prototype.CONF={kind:"ContextMenu",items:[],visibility:!0},e.register(r)}(playease);