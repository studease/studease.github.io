playease=function(){if(playease.api)return playease.api.getInstance.apply(this,arguments)};playease.version="1.0.22";
(function(d){function h(a){return null!==navigator.userAgent.toLowerCase().match(a)}var a=d.utils={};a.exists=function(c){switch(a.typeOf(c)){case "string":return 0<c.length;case "object":return null!==c;case "null":return!1}return!0};a.extend=function(){var c=Array.prototype.slice.call(arguments,0),b=c[0];if(1<c.length)for(var e=1;e<c.length;e++)a.foreach(c[e],function(a,c){void 0!==c&&null!==c&&(b[a]=c)});return b};a.foreach=function(c,b){for(var e in c)c.hasOwnProperty&&"function"===a.typeOf(c.hasOwnProperty)?
c.hasOwnProperty(e)&&b(e,c[e]):b(e,c[e])};a.getCookie=function(a){var c;return(c=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)")))?unescape(c[2]):null};a.formatTime=function(c){var b=c.getHours()+1,e=c.getMinutes(),f=c.getSeconds();return c.toLocaleDateString()+" "+a.pad(b,2)+":"+a.pad(e,2)+":"+a.pad(f,2)};a.pad=function(a,b){for(a+="";a.length<b;)a="0"+a;return a};a.createElement=function(a,b){a=document.createElement(a);b&&(a.className=b);return a};a.addClass=function(c,b){var e="string"===
a.typeOf(c.className)?c.className.split(" "):[];b="array"===a.typeOf(b)?b:b.split(" ");a.foreach(b,function(c,b){-1===a.indexOf(e,b)&&e.push(b)});c.className=a.trim(e.join(" "))};a.removeClass=function(c,b){var e="string"===a.typeOf(c.className)?c.className.split(" "):[];b="array"===a.typeOf(b)?b:b.split(" ");a.foreach(b,function(c,b){c=a.indexOf(e,b);0<=c&&e.splice(c,1)});c.className=a.trim(e.join(" "))};a.emptyElement=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};a.typeOf=function(a){if(null===
a||void 0===a)return"null";var c=typeof a;if("object"===c)try{if("[object Array]"===toString.call(a))return"array"}catch(e){}return c};a.isInt=function(a){return 0===parseFloat(a)%1};a.trim=function(a){return a.replace(/^\s+|\s+$/g,"")};a.indexOf=function(a,b){if(null==a)return-1;for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1};a.isMSIE=function(a){return a?(a=parseFloat(a).toFixed(1),h(new RegExp("msie\\s*"+a,"i"))):h(/msie/i)};a.isIOS=function(a){return a?h(new RegExp("iP(hone|ad|od).+\\sOS\\s"+
a,"i")):h(/iP(hone|ad|od)/i)};a.isAndroid=function(c,b){return b&&h(/chrome\/[123456789]/i)&&!h(/chrome\/18/)?!1:c?(a.isInt(c)&&!/\./.test(c)&&(c=""+c+"."),h(new RegExp("Android\\s*"+c,"i"))):h(/Android/i)};a.isMobile=function(){return a.isIOS()||a.isAndroid()};var m=window.console=window.console||{log:function(){}};a.log=function(){var c=Array.prototype.slice.call(arguments,0);"object"===a.typeOf(m.log)?m.log(c):m.log.apply(m,c)}})(playease);
(function(d){d=d.utils;d.littleEndian=function(){var h=new ArrayBuffer(2);(new DataView(h)).setInt16(0,256,!0);return 256===(new Int16Array(h))[0]}();d.getUint32=function(h,a,d){void 0==a&&(a=0);return d?h[a+0]|h[a+1]>>>8|h[a+2]>>>16|h[a+3]>>>24:h[a+0]<<24|h[a+1]<<16|h[a+2]<<8|h[a+3]}})(playease);
(function(d){function h(){var a=document.createElement("style");a.type="text/css";document.getElementsByTagName("head")[0].appendChild(a);return a.sheet||a.styleSheet}var a=d.utils,m;(a.css=function(c,b){m||(m=h());var e="";a.foreach(b,function(a,b){e+=a+": "+b+"; "});try{m.insertRule?m.insertRule(c+" { "+e+"}",m.cssRules.length):m.addRule(c,e,m.rules.length)}catch(f){a.log("Failed to insert css rule: "+c)}}).style=function(c,b,e){if(void 0!==c&&null!==c)for(void 0===c.length&&(c=[c]),b=a.extend({},
b),e=0;e<c.length;e++){var f=c[e];void 0!==f&&null!==f&&a.foreach(b,function(a,b){a=a.split("-");for(var c=1;c<a.length;c++)a[c]=a[c].charAt(0).toUpperCase()+a[c].slice(1);a=a.join("");f.style[a]!==b&&(f.style[a]=b)})}}})(playease);
(function(d){d.events={ERROR:"error",PLAYEASE_READY:"playeaseReady",PLAYEASE_SETUP_ERROR:"playeaseSetupError",PLAYEASE_RENDER_ERROR:"playeaseRenderError",PLAYEASE_STATE:"playeaseState",PLAYEASE_PROPERTY:"playeaseProperty",PLAYEASE_METADATA:"playeaseMetaData",PLAYEASE_BUFFER:"playeaseBuffer",PLAYEASE_PLAY:"playeasePlay",PLAYEASE_PAUSE:"playeasePause",PLAYEASE_RELOAD:"playeaseReload",PLAYEASE_SEEK:"playeaseSeek",PLAYEASE_STOP:"playeaseStop",PLAYEASE_REPORT:"playeaseReport",PLAYEASE_MUTE:"playeaseMute",
PLAYEASE_VOLUME:"playeaseVolume",PLAYEASE_HD:"playeaseHD",PLAYEASE_BULLET:"playeaseBullet",PLAYEASE_FULLPAGE:"playeaseFullpage",PLAYEASE_FULLSCREEN:"playeaseFullscreen",PLAYEASE_VIEW_PLAY:"playeaseViewPlay",PLAYEASE_VIEW_PAUSE:"playeaseViewPause",PLAYEASE_VIEW_RELOAD:"playeaseViewReload",PLAYEASE_VIEW_SEEK:"playeaseViewSeek",PLAYEASE_VIEW_STOP:"playeaseViewStop",PLAYEASE_VIEW_REPORT:"playeaseViewReport",PLAYEASE_VIEW_MUTE:"playeaseViewMute",PLAYEASE_VIEW_VOLUME:"playeaseViewVolume",PLAYEASE_VIEW_HD:"playeaseViewHD",
PLAYEASE_VIEW_BULLET:"playeaseViewBullet",PLAYEASE_VIEW_FULLPAGE:"playeaseViewFullpage",PLAYEASE_VIEW_FULLSCREEN:"playeaseViewFullscreen",PLAYEASE_CONTENT_LENGTH:"playeaseContentLength",PLAYEASE_PROGRESS:"playeaseProgress",PLAYEASE_COMPLETE:"playeaseComplete",PLAYEASE_FLV_TAG:"playeaseFlvTag",PLAYEASE_AVC_CONFIG_RECORD:"playeaseAVCConfigRecord",PLAYEASE_AVC_SAMPLE:"playeaseAVCSample",PLAYEASE_AAC_SPECIFIC_CONFIG:"playeaseAACSpecificConfig",PLAYEASE_AAC_SAMPLE:"playeaseAACSample",PLAYEASE_MP4_INIT_SEGMENT:"playeaseMp4InitSegment",
PLAYEASE_MP4_SEGMENT:"playeaseMp4Segment",PLAYEASE_END_OF_STREAM:"playeaseEndOfStream",PLAYEASE_TIMER:"playeaseTimer",PLAYEASE_TIMER_COMPLETE:"playeaseTimerComplete"}})(playease);
(function(d){var h=d.utils;d.events.eventdispatcher=function(a){function m(a,b,c){if(a)for(var f=0;f<a.length;f++){var e=a[f];if(e){null!==e.count&&0===--e.count&&delete a[f];try{e.listener(b)}catch(I){h.log('Error handling "'+c+'" event listener ['+f+"]: "+I.toString(),e.listener,b)}}}}var c={},b=[];this.addEventListener=function(a,b,g){try{h.exists(c[a])||(c[a]=[]),"string"===h.typeOf(b)&&(b=(new Function("return "+b))()),c[a].push({listener:b,count:g||null})}catch(p){h.log("error",p)}return!1};
this.removeEventListener=function(a,b){if(c[a]){try{if(void 0===b){c[a]=[];return}var f;for(f=0;f<c[a].length;f++)if(c[a][f].listener.toString()===b.toString()){c[a].splice(f,1);break}}catch(p){h.log("error",p)}return!1}};this.addGlobalListener=function(a,c){try{"string"===h.typeOf(a)&&(a=(new Function("return "+a))()),b.push({listener:a,count:c||null})}catch(g){h.log("error",g)}return!1};this.removeGlobalListener=function(a){if(a){try{var c;for(c=b.length-1;0<=c;c--)b[c].listener.toString()===a.toString()&&
b.splice(c,1)}catch(g){h.log("error",g)}return!1}};this.dispatchEvent=function(e,f){f||(f={});h.extend(f,{id:a,version:d.version,type:e});d.debug&&h.log(e,f);m(c[e],f,e);m(b,f,e)}}})(playease);
(function(d){var h=d.utils,a=d.events;h.loader=function(d){var c=h.extend(this,new a.eventdispatcher("utils.loader")),b={method:"GET",headers:{},mode:"cors",cache:"default"},e,f;c.load=function(b){e=b;f=!1;fetch?fetch(e,c.config).then(function(b){if(f)f=!1;else{if(b.ok&&200<=b.status&&299>=b.status){var e=b.headers.get("Content-Length");e&&(e=parseInt(e),c.dispatchEvent(a.PLAYEASE_CONTENT_LENGTH,{length:e}));return c.pump(b.body.getReader())}c.dispatchEvent(a.ERROR,{message:"Loader error: Invalid http status("+
b.status+" "+b.statusText+")."})}}).catch(function(b){c.dispatchEvent(a.ERROR,{message:"Loader error: "+b.message})}):c.dispatchEvent(a.ERROR,{message:"Loader error: Fetch is not supported."})};c.pump=function(b){return b.read().then(function(e){if(e.done)c.dispatchEvent(a.PLAYEASE_COMPLETE);else{if(f)return f=!1,b.cancel();c.dispatchEvent(a.PLAYEASE_PROGRESS,{data:e.value.buffer});return c.pump(b)}}).catch(function(b){c.dispatchEvent(a.ERROR,{message:"Loader error: Failed to read response data."})})};
c.abort=function(){f=!0};(function(){c.config=h.extend({},b,d);var a=new Headers,e;for(e in c.config.headers)a.append(e,c.config.headers[e]);c.config.headers=a;f=!1})()}})(playease);
(function(d){var h=d.utils;h.filekeeper=function(a){var d=this,c,b,e,f,g;d.append=function(a){c.push(a)};d.save=function(a){a||(a=d.config.filename);b=new Blob(c,{type:d.config.type});e=URL.createObjectURL(b);f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);g=document.createElementNS("http://www.w3.org/1999/xhtml","a");g.href=e;g.download=a;g.dispatchEvent(f);c=[];URL.revokeObjectURL(e)};d.config=h.extend({},{filename:"sample.fragmented.mp4",
type:"video/mpeg"},a);c=[]}})(playease);
(function(d){var h=d.utils,a=d.events;h.timer=function(d,c){function b(){g++;e.dispatchEvent(a.PLAYEASE_TIMER);0<e.repeatCount&&g>=e.repeatCount&&(e.stop(),e.dispatchEvent(a.PLAYEASE_TIMER_COMPLETE))}var e=h.extend(this,new a.eventdispatcher("utils.timer")),f,g=0,p=!1;e.start=function(){!1===p&&(f=setInterval(b,e.delay),p=!0)};e.stop=function(){p&&(clearInterval(f),f=0,p=!1)};e.reset=function(){e.stop();g=0};e.currentCount=function(){return g};e.running=function(){return p};e.delay=d||50;e.repeatCount=
c||0}})(playease);
(function(d){var h=d.utils,a=d.events,m={},c={onError:a.ERROR,onReady:a.PLAYEASE_READY,onMetaData:a.PLAYEASE_METADATA,onBuffer:a.PLAYEASE_BUFFER,onPlay:a.PLAYEASE_PLAY,onPause:a.PLAYEASE_PAUSE,onReload:a.PLAYEASE_RELOAD,onSeek:a.PLAYEASE_SEEK,onStop:a.PLAYEASE_STOP,onReport:a.PLAYEASE_REPORT,onMute:a.PLAYEASE_MUTE,onVolume:a.PLAYEASE_VOLUME,onHD:a.PLAYEASE_HD,onBullet:a.PLAYEASE_BULLET,onFullpage:a.PLAYEASE_FULLPAFE,onFullscreen:a.PLAYEASE_VIEW_FULLSCREEN};d.api=function(b){function e(a){f.dispatchEvent(a.type,a)}
var f=h.extend(this,new a.eventdispatcher("api")),g;f.container=b;f.id=b.id;f.setup=function(a){h.emptyElement(f.container);d.debug=!!a.debug;f.config=a;f.config.id=f.id;f.embedder=new d.embed(f);f.embedder.addGlobalListener(e);f.embedder.embed();return f};f.setEntity=function(a,b){g=a;f.renderName=b;f.play=g.play;f.pause=g.pause;f.reload=g.reload;f.seek=g.seek;f.stop=g.stop;f.report=g.report;f.mute=g.mute;f.volume=g.volume;f.hd=g.hd;f.bullet=g.bullet;f.fullpage=g.fullpage;f.fullscreen=g.fullscreen;
f.resize=g.resize};(function(){h.foreach(c,function(a,b){f[a]=function(a){f.addEventListener(b,a)}})})()};d.api.getInstance=function(a){var b;null==a?a=0:a.nodeType?b=a:"string"===h.typeOf(a)&&(b=document.getElementById(a));if(b){var c=m[b.id];c||(m[a]=c=new d.api(b));return c}return"number"===h.typeOf(a)?m[a]:null};d.api.displayError=function(a,c){}})(playease);(function(d){d.muxer={}})(playease);
(function(d){var h=d.utils,a=d.muxer.AMF={},m=a.types={DOUBLE:0,BOOLEAN:1,STRING:2,OBJECT:3,MOVIE_CLIP:4,NULL:5,UNDEFINED:6,REFERENCE:7,MIXED_ARRAY:8,END_OF_OBJECT:9,ARRAY:10,DATE:11,LONG_STRING:12,UNSUPPORTED:13,RECORD_SET:14,XML:15,TYPED_OBJECT:16,AMF3_DATA:17};a.parse=function(c,b,e){var f={};try{var g=a.parseValue(c,b,e),d=a.parseValue(c,b+g.size,e-g.size);f.key=g.data;f.value=d.data}catch(l){h.log("AMF.parse() failed. Error: "+l)}return f};a.parseObject=function(c,b,e){if(3>e)throw"Data not enough while parsing AMF object.";
for(var f={},g=0,h,d={ended:!1};!d.ended&&g<e;)h=a.parseString(c,b+g,e-g),g+=h.size,d=a.parseValue(c,b+g,e-g),g+=d.size,h.data&&d.data&&(f[h.data]=d.data);return{data:f,size:g,ended:d.ended}};a.parseString=function(a,b,e){if(2>e)throw"Data not enough while parsing AMF string.";var c=0;e=(new DataView(a,b,e)).getUint16(c);c+=2;return{data:0<e?String.fromCharCode.apply(String,new Uint8Array(a,b+c,e)):"",size:c+e}};a.parseLongString=function(a,b,e){if(4>e)throw"Data not enough while parsing AMF long string.";
var c=0;e=(new DataView(a,b,e)).getUint32(c);c+=4;return{data:0<e?String.fromCharCode.apply(String,new Uint8Array(a,b+c,e)):"",size:c+e}};a.parseDate=function(a,b,e){if(10>e)throw"Data not enough while parsing AMF date.";e=new DataView(a,b,e);a=0;b=e.getFloat64(a);a+=8;e=e.getInt16(a);return{data:new Date(b+6E4*e),size:a+2}};a.parseValue=function(c,b,e){if(1>e)throw"Data not enough while parsing AMF value.";var f=new DataView(c,b,e),g=0,d=f.getUint8(g),g=g+1,l=void 0,I=!1;try{switch(d){case m.DOUBLE:l=
f.getFloat64(g);g+=8;break;case m.BOOLEAN:l=f.getUint8(g)?!0:!1;g+=1;break;case m.STRING:var F=a.parseString(c,b+g,e-g),l=F.data,g=g+F.size;break;case m.OBJECT:var z=a.parseObject(c,b+g,e-g),l=z.data,g=g+z.size;break;case m.MIXED_ARRAY:var C;f.getUint32(g);var g=g+4,y=a.parseObject(c,b+g,e-g),l=y.data,g=g+y.size;break;case m.END_OF_OBJECT:l=void 0;I=!0;break;case m.ARRAY:C=f.getUint32(g);g+=4;l=[];for(f=0;f<C;f++){var x=a.parseValue(c,b+g,e-g);l.push(x.data);g+=x.size}break;case m.DATE:var k=a.parseDate(c,
b+g,e-g),l=k.data,g=g+k.size;break;case m.LONG_STRING:var r=a.parseString(c,b+g,e-g),l=r.data,g=g+r.size;break;default:h.log("Skipping unsupported AMF value type("+d+")."),g+=e}}catch(q){h.log("AMF.parseValue() failed. Error: "+q)}return{data:l,size:g,ended:I}}})(playease);
(function(d){var h=function(a){function h(){var a=g-f;if(0>=a)throw"Data not enough while filling current word.";var a=Math.min(4,a),b=new Uint8Array(4);b.set(e.subarray(f,f+a));d=(new DataView(b.buffer)).getUint32(0,!1);f+=a;l=8*a}function c(){var a;for(a=0;a<l;a++)if(0!==(d&2147483648>>>a))return d<<=a,l-=a,a;h();return a+c()}var b=this,e,f,g,d,l;b.readBits=function(a){if(32<a)throw"Data not enough while reading bits of ExpGolomb.";if(a<=l){var b=d>>>32-a;d<<=a;l-=a;return b}b=l?d:0;b>>>=32-l;a-=
l;h();a=Math.min(a,l);var c=d>>>32-a;d<<=a;l-=a;return b<<a|c};b.readBool=function(){return 1===b.readBits(1)};b.readByte=function(){return b.readBits(8)};b.readUEG=function(){var a=c();return b.readBits(a+1)-1};b.readSEG=function(){var a=b.readUEG();return a&1?a+1>>>1:-1*(a>>>1)};b.destroy=function(){e=null};e=a;f=0;g=a.byteLength;l=d=0};(d.muxer.SPS={}).parse=function(a){for(var d=a.byteLength,c=new Uint8Array(d),b=0,e=0;e<d;e++)2<=e&&3===a[e]&&0===a[e-1]&&0===a[e-2]||(c[b]=a[e],b++);a=new Uint8Array(c.buffer,
0,b);a=new h(a);a.readByte();var f=a.readByte();a.readByte();c=a.readByte();a.readUEG();switch(f){case 66:d="Baseline";break;case 77:d="Main";break;case 88:d="Extended";break;case 100:d="High";break;case 110:d="High10";break;case 122:d="High422";break;case 244:d="High444";break;default:d="Unknown"}var c=(c/10).toFixed(1),g=1,b=420,p=[0,420,422,444],e=8;if(100===f||110===f||122===f||244===f||44===f||83===f||86===f||118===f||128===f||138===f||144===f)if(g=a.readUEG(),3===g&&a.readBits(1),3>=g&&(b=p[g]),
e=a.readUEG()+8,a.readUEG(),a.readBits(1),a.readBool())for(f=3!==g?8:12,p=0;p<f;p++)if(a.readBool())for(var l=a,I=6>p?16:64,F=8,z=8,C=0;C<I;C++)0!==z&&(z=l.readSEG(),z=(F+z+256)%256),F=0===z?F:z;a.readUEG();f=a.readUEG();if(0===f)a.readUEG();else if(1===f)for(a.readBits(1),a.readSEG(),a.readSEG(),f=a.readUEG(),p=0;p<f;p++)a.readSEG();a.readUEG();a.readBits(1);var y=a.readUEG(),z=a.readUEG(),x=a.readBits(1);0===x&&a.readBits(1);a.readBits(1);var k=0,r=0,q=0,n=0;a.readBool()&&(k=a.readUEG(),r=a.readUEG(),
q=a.readUEG(),n=a.readUEG());p=f=1;F=0;l=!0;C=I=0;if(a.readBool()){if(a.readBool()){var v=a.readByte(),A=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],w=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<v&&16>v?(f=A[v-1],p=w[v-1]):255===v&&(f=a.readByte()<<8|a.readByte(),p=a.readByte()<<8|a.readByte())}a.readBool()&&a.readBool();a.readBool()&&(a.readBits(4),a.readBool()&&a.readBits(24));a.readBool()&&(a.readUEG(),a.readUEG());a.readBool()&&(F=a.readBits(32),I=a.readBits(32),l=a.readBool(),C=2*F,F=
I/C)}v=1;if(1!==f||1!==p)v=f/p;0===g?(A=1,g=2-x):(A=3===g?1:2,g=(1===g?2:1)*(2-x));y=16*(y+1)-(k+r)*A;g=16*(2-x)*(z+1)-(q+n)*g;z=Math.ceil(y*v);a.destroy();switch(b){case 420:a="4:2:0";break;case 422:a="4:2:2";break;case 444:a="4:4:4";break;default:a="Unknown"}return{profile_string:d,level_string:c,bit_depth:e,chroma_format:b,chroma_format_string:a,frame_rate:{fixed:l,fps:F,fps_den:C,fps_num:I},sar_ratio:{width:f,height:p},codec_size:{width:y,height:g},present_size:{width:z,height:g}}}})(playease);
(function(d){var h=d.utils,a=d.events;d=d.muxer;var m=d.SPS,c={AUDIO:8,VIDEO:9,SCRIPT:18},b={KEYFRAME:1,INTER_FRAME:2,DISPOSABLE_INTER_FRAME:3,GENERATED_KEYFRAME:4,INFO_OR_COMMAND_FRAME:5},e={types:{SEQUENCE_HEADER:0,NALU:1,END_OF_SEQUENCE:2}},f={types:{SPECIFIC_CONFIG:0,RAW_FRAME_DATA:1},audioObjectTypes:{NULL:0,AAC_MAIN:1,AAC_LC:2,AAC_SSR:3,AAC_LTP:4,AAC_HE_OR_SBR:5,AAC_SCALABLE:6},samplingRates:[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350]},g=[5500,11025,22050,44100],p=
function(){var a=this;a.isComplete=function(){var b=!1===a.hasAudio||!0===a.hasAudio&&null!=a.audioCodec&&null!=a.audioSampleRate&&null!=a.audioChannelCount,c=!1===a.hasVideo||!0===a.hasVideo&&null!=a.videoCodec&&null!=a.width&&null!=a.height&&null!=a.fps&&null!=a.profile&&null!=a.level&&null!=a.chromaFormat&&null!=a.sarNum&&null!=a.sarDen;return null!=a.mimeType&&null!=a.duration&&null!=a.metadata&&null!=a.hasKeyframesIndex&&b&&c};a.isSeekable=function(){return!0===a.hasKeyframesIndex};a.getNearestKeyframe=
function(b){if(null==a.keyframesIndex)return null;var c=a.keyframesIndex,e=c.times,f=0,d=e.length-1,g,k=0,h=d;b<e[0]&&(f=0,k=h+1);for(;k<=h;)if(g=k+Math.floor((h-k)/2),g===d||b>=e[g]&&b<e[g+1]){f=g;break}else e[g]<b?k=g+1:h=g-1;b=f;return{index:b,milliseconds:c.times[b],fileposition:c.filepositions[b]}}};d.flv=function(d){var l=h.extend(this,new a.eventdispatcher("muxer.flv")),F,z,C,y,x,k,r,q,n,v,A,w,D,E,B,u,t,H;l.reset=function(){z=F=0;C=1;k.position=0;A=[];w=new p;B={type:"video",id:1,sequenceNumber:0,
samples:[],length:0};u={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};H=t=0};l.parse=function(b){var t=new Uint8Array(b),e=0;if(1==C){if(13>b.byteLength)return 0;e=l.probe(b);C=4;var f=h.getUint32(t,e);f&&h.log("First tag size "+f);e+=4;C=2}for(;e<b.byteLength;)switch(C){case 2:q[k.position++]=t[e++];11==k.position&&(v=q[1]<<16|q[2]<<8|q[3],C=3);break;case 3:var d=q[0],H=q[1]<<16|q[2]<<8|q[3],G=q[4]<<16|q[5]<<8|q[6]|q[7]<<24,f=q[8]<<16|q[9]<<8|q[10];0!=f&&h.log("Unknown stream ID "+f);f=
{tag:d,data:b,offset:e,size:H};switch(d){case c.AUDIO:f.timestamp=G;v==H&&(f.format=t[e]>>>4,f.rate=g[(t[e]&12)>>>2],f.samplesize=(t[e]&2)>>>1,f.sampletype=t[e]&1);break;case c.VIDEO:f.timestamp=G;v==H&&(f.frametype=t[e]>>>4,f.codec=t[e]&15);break;case c.SCRIPT:f.hasAudio=y,f.hasVideo=x}d=Math.min(b.byteLength-e,v);v-=d;e+=d;if(v){A.push(f);break}if(A.length){f=A[0];H=new Uint8Array(H);for(H.position=0;A.length;)G=A.shift(),d=new Uint8Array(G.data.slice(G.offset)),H.set(d,H.position),H.position+=
G.data.byteLength-G.offset;d=new Uint8Array(b.slice(0,e));H.set(d,H.position);f.data=H.buffer;f.offset=0}C=4;r.position=0;l.dispatchEvent(a.PLAYEASE_FLV_TAG,f);break;case 4:n[r.position++]=t[e++];4==r.position&&(H=q[1]<<16|q[2]<<8|q[3],f=h.getUint32(n),f!=11+H&&h.log("prevTagSize("+f+") is not equals to "+(11+H)+"."),C=2,k.position=0);break;default:h.log("Unknown parsing state "+C);return}};l.parseAVCVideoPacket=function(c,f,k,d,g){if(5>k)l.dispatchEvent(a.ERROR,{message:"Data not enough while parsing AVC video packet."});
else{var G=new DataView(c,f,k),p=1,q=G.getUint8(p++),G=G.getUint8(p++)<<16|G.getUint8(p++)<<8|G.getUint8(p++);switch(q){case e.types.SEQUENCE_HEADER:G=f+p;f=k-p;if(7>f)l.dispatchEvent(a.ERROR,{message:"Data not enough while parsing AVC decoder configuration record."});else if(k=B,k={type:k.type,id:k.id,timescale:1E3,duration:1E3*D.duration||0},p=new DataView(c,G,f),q=0,g=p.getUint8(q++),d=p.getUint8(q++),p.getUint8(q++),p.getUint8(q++),1!=g||0==d)l.dispatchEvent(a.ERROR,{message:"Invalid AVCDecoderConfigurationRecord."});
else if(t=1+(p.getUint8(q++)&3),3!=t&&4!=t)l.dispatchEvent(a.ERROR,{message:"Invalid lengthSizeMinusOne "+t+"."});else{d=p.getUint8(q++)&31;for(g=0;g<d;g++){var r=p.getUint16(q),q=q+2;if(0!=r){var v=new Uint8Array(c,G+q,r),q=q+r,r=m.parse(v),n=k,J=r;n.codecWidth=J.codec_size.width;n.codecHeight=J.codec_size.height;n.presentWidth=J.present_size.width;n.presentHeight=J.present_size.height;n.profile=J.profile_string;n.level=J.level_string;n.bitDepth=J.bit_depth;n.chromaFormat=J.chroma_format;n.sarRatio=
J.sar_ratio;n.frameRate=J.frame_rate;if(!1===J.frame_rate.fixed||0===J.frame_rate.fps_num||0===J.frame_rate.fps_den)n.frameRate=E;n.refSampleDuration=Math.floor(n.frameRate.fps_den/n.frameRate.fps_num*n.timescale);for(var v=v.subarray(1,4),J="avc1.",u=0;3>u;u++){var K=v[u].toString(16);2>K.length&&(K="0"+K);J+=K}n.codec=J;n=k;w.hasAudio=y;w.hasVideo=x;w.duration=1E3*D.duration;w.metadata=D;w.width=n.codecWidth;w.height=n.codecHeight;w.fps=n.frameRate.fps;w.profile=n.profile;w.level=n.level;w.chromaFormat=
r.chroma_format_string;w.sarNum=n.sarRatio.width;w.sarDen=n.sarRatio.height;w.videoCodec=n.codec;w.mimeType='video/mp4; codecs="'+w.videoCodec+(w.hasAudio&&w.audioCodec?","+w.audioCodec:"")+'"';l.dispatchEvent(a.PLAYEASE_MEDIA_INFO,{info:w})}}d=p.getUint8(q++);for(g=0;g<d;g++)r=p.getUint16(q),q+=2,0!=r&&(new Uint8Array(c,G+q,r),q+=r);k.avcc=new Uint8Array(f);k.avcc.set(new Uint8Array(c,G,f),0);l.dispatchEvent(a.PLAYEASE_AVC_CONFIG_RECORD,{data:k})}break;case e.types.NALU:a:{f+=p;k-=p;p=new DataView(c,
f,k);q=[];d=H+d;g=g==b.KEYFRAME;for(n=r=0;r<k;){if(r+4>=k){l.dispatchEvent(a.ERROR,{message:"Data not enough for next NALU."});break a}v=p.getUint32(r);3==v&&(v>>>=8);if(v>k-t){h.log("Malformed Nalus near timestamp "+d+".");break a}J=p.getUint8(r+t)&31;J==b.INFO_OR_COMMAND_FRAME&&(g=!0);u=new Uint8Array(c,f+r,t+v);n+=u.byteLength;q.push({type:J,data:u});r+=t+v}0!=q.length&&(B.samples.push({units:q,length:n,isKeyframe:g,cts:G,dts:d,pts:G+d}),B.length+=n,l.dispatchEvent(a.PLAYEASE_AVC_SAMPLE,{data:B}))}break;
case e.types.END_OF_SEQUENCE:l.dispatchEvent(a.PLAYEASE_END_OF_STREAM);break;default:l.dispatchEvent(a.ERROR,{message:"Unknown AVC video packet type "+q+"."})}}};l.parseAACAudioPacket=function(b,c,t,e,k,d,g){if(2>t)l.dispatchEvent(a.ERROR,{message:"Data not enough while parsing AAC audio packet."});else switch(k=1,d=(new DataView(b,c,t)).getUint8(k++),d){case f.types.SPECIFIC_CONFIG:a:if(e=c+k,t-=k,2>t)l.dispatchEvent(a.ERROR,{message:"Data not enough while parsing AAC audio specific config."});else if(d=
new DataView(b,e,t),g=0,e=d.getUint8(g)>>>3,b=(d.getUint8(g++)&7)<<1|d.getUint8(g)>>>7,0>b||b>=f.samplingRates.length)l.dispatchEvent(a.ERROR,{message:"Invalid AAC sampling frequency index.",index:b});else if(c=u,c={type:c.type,id:c.id,timescale:1E3,duration:1E3*D.duration||0},c.audioSampleRate=f.samplingRates[b],c.refSampleDuration=Math.floor(1024/c.audioSampleRate*c.timescale),k=(d.getUint8(g)&120)>>>3,0>k||8<=k)l.dispatchEvent(a.ERROR,{message:"Invalid AAC channel configuration.",config:k});else{if(e===
f.audioObjectTypes.AAC_HE_OR_SBR){if(3>t){l.dispatchEvent(a.ERROR,{message:"Data not enough while parsing AAC_HE_OR_SBR audio specific config."});break a}d.getUint8(g++);d.getUint8(g);d.getUint8(g)}t=self.navigator.userAgent.toLowerCase();-1!==t.indexOf("firefox")?b>=f.audioObjectTypes.AAC_SCALABLE?(e=f.audioObjectTypes.AAC_HE_OR_SBR,t=b-3,d=Array(4)):(e=f.audioObjectTypes.AAC_LC,t=b,d=Array(2)):-1!==t.indexOf("android")?(e=f.audioObjectTypes.AAC_LC,t=b,d=Array(2)):(e=f.audioObjectTypes.AAC_HE_OR_SBR,
t=b,d=Array(4),b>=f.audioObjectTypes.AAC_SCALABLE?t=b-3:1===k&&(e=f.audioObjectTypes.AAC_LC,t=b,d=Array(2)));d[0]=e<<3;d[0]|=(b&15)>>>1;d[1]=(b&15)<<7;d[1]|=(k&15)<<3;e===f.audioObjectTypes.AAC_HE_OR_SBR&&(d[1]|=(t&15)>>>1,d[2]=(t&1)<<7,d[2]|=8,d[3]=0);c.channelCount=k;c.codec="mp4a.40."+e;c.config=d;w.audioCodec=c.codec;w.audioSampleRate=c.audioSampleRate;w.audioChannelCount=c.channelCount;w.mimeType='video/mp4; codecs="'+w.videoCodec+(w.hasAudio&&w.audioCodec?","+w.audioCodec:"")+'"';l.dispatchEvent(a.PLAYEASE_MEDIA_INFO,
{info:w});l.dispatchEvent(a.PLAYEASE_AAC_SPECIFIC_CONFIG,{data:c})}break;case f.types.RAW_FRAME_DATA:b=new Uint8Array(b,c+k,t-k);t=H+e;u.samples.push({unit:b,dts:t,pts:t});u.length+=b.length;l.dispatchEvent(a.PLAYEASE_AAC_SAMPLE,{data:u});break;default:l.dispatchEvent(a.ERROR,{message:"Unknown AAC audio packet type "+d+"."})}};l.probe=function(a){a=new Uint8Array(a);if(70!==a[0]||76!==a[1]||86!==a[2]||1!==a[3])return 0;y=0!==(a[4]&4)>>>2;x=0!==(a[4]&1);if(!y&&!x)return 0;a=h.getUint32(a,5);return 9>
a?0:a};l.setMetaData=function(a){D=a;"number"===typeof D.audiodatarate&&(w.audioDataRate=D.audiodatarate);"number"===typeof D.videodatarate&&(w.videoDataRate=D.videodatarate);if("number"===typeof D.framerate&&(a=Math.floor(1E3*D.framerate),0<a)){var b=a/1E3;E.fixed=!0;E.fps=b;E.fps_num=a;E.fps_den=1E3;w.fps=b}w.hasKeyframesIndex="object"===typeof D.keyframes?!0:!1};l.getMetaData=function(){return D};l.offset=function(){return F};l.length=function(){return z};l.destroy=function(){};l.config=h.extend({},
{},d);z=F=0;C=1;k=new ArrayBuffer(11);k.position=0;q=new Uint8Array(k);r=new ArrayBuffer(4);r.position=0;n=new Uint8Array(r);v=0;A=[];w=new p;E={fixed:!0,fps:23.976,fps_num:23976,fps_den:1E3};B={type:"video",id:1,sequenceNumber:0,samples:[],length:0};u={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};H=t=0};d.flv.TAG=c;d.flv.FORMATS={LINEAR_PCM_PLATFORM_ENDIAN:0,ADPCM:1,MP3:2,LINEAR_PCM_LITTLE_ENDIAN:3,NELLYMOSER_16_kHz_MONO:4,NELLYMOSER_8_kHz_MONO:5,NELLYMOSER:6,G_711_A_LAW_LOGARITHMIC_PCM:7,
G_711_MU_LAW_LOGARITHMIC_PCM:8,RESERVED:9,AAC:10,SPEEX:11,MP3_8_kHz:14,DEVICE_SPECIFIC_SOUND:15};d.flv.FRAMES=b;d.flv.CODECS={JPEG:1,H263:2,SCREEN_VIDEO:3,VP6:4,VP6_ALPHA:5,SCREEN_VIDEO_2:6,AVC:7};d.flv.AVC=e;d.flv.AAC=f})(playease);
(function(d){var h=d.utils,a=d.events;d=d.muxer;var m=d.flv.AAC,c,b,e,f,g,p,l,I,F;c=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]);b=new Uint8Array([0,0,0,0,0,0,0,1]);e=new Uint8Array([0,0,0,0,0,0,0,0]);f=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);g=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);p=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,
108,101,114,0]);l=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);I=new Uint8Array([0,0,0,0,0,0,0,0]);F=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]);m.getSilentFrame=function(a){return 1===a?new Uint8Array([0,200,0,128,35,128]):2===a?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===a?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===a?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===a?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,
0,33,144,2,56]):6===a?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):null};var z=function(a,b,c,e,f){this.dts=a;this.pts=b;this.duration=c;this.originalDts=e;this.isSyncPoint=f;this.fileposition=null},C=function(){var a=[];this.appendSyncPoint=function(b){b.isSyncPoint=!0;a.push(b)}},y=function(a){function b(){e=[];f=-1}var c=this,e,f;c.reset=b;c.searchNearestSegmentBefore=function(a){if(0===e.length)return-2;var b=e.length-1,c,f=0,d=b,k=0;if(a<e[0].originalBeginDts)return-1;
for(;f<=d;){c=f+Math.floor((d-f)/2);if(c===b||a>e[c].lastSample.originalDts&&a<e[c+1].originalBeginDts){k=c;break}e[c].originalBeginDts<a?f=c+1:d=c-1}return k};c.searchNearestSegmentAfter=function(a){return c.searchNearestSegmentBefore(a)+1};c.append=function(a){var b=f,d=0;-1!==b&&b<e.length&&a.originalBeginDts>=e[b].lastSample.originalDts&&(b===e.length-1||b<e.length-1&&a.originalBeginDts<e[b+1].originalBeginDts)?d=b+1:0<e.length&&(d=c.searchNearestSegmentBefore(a.originalBeginDts)+1);f=d;e.splice(d,
0,a)};c.getLastSegmentBefore=function(a){a=c.searchNearestSegmentBefore(a);return 0>a?null:e[a]};c.getLastSampleBefore=function(a){a=c.getLastSegmentBefore(a);return null==a?null:a.lastSample};c.getLastSyncPointBefore=function(a){a=c.searchNearestSegmentBefore(a);for(var b=e[a].syncPoints;0===b.length&&a--;)b=e[a].syncPoints;return 0>=b.length?null:b[b.length-1]};c.isEmpty=function(){return 0===e.length};c.clear=function(){e=[];f=-1};b()};d.mp4=function(d){var k=h.extend(this,new a.eventdispatcher("muxer.mp4")),
r={islive:!1},q,n,v,x,w,D,E,B,u={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};k.reset=function(){q=0;v=n=void 0;D.reset();E.reset();B=!1};k.getInitSegment=function(b){var e=k.box(u.ftyp,c),f=k.moov(b),t=new Uint8Array(e.byteLength+f.byteLength);t.set(e,0);t.set(f,e.byteLength);
k.dispatchEvent(a.PLAYEASE_MP4_INIT_SEGMENT,{tp:b.type,data:t})};k.getVideoSegment=function(b){var c=b.samples,e=void 0,f=-1,t=-1,d;if(c&&0!==c.length){d=0;var g=8+b.length,h=new Uint8Array(g);h[d++]=g>>>24&255;h[d++]=g>>>16&255;h[d++]=g>>>8&255;h[d++]=g&255;h.set(u.mdat,d);d+=4;for(var g=[],p=new C;c.length;){var l=c.shift(),m=l.isKeyframe,r=l.dts-q;if(void 0==e)if(void 0==n)if(D.isEmpty())e=0;else if(e=D.getLastSampleBefore(r),null!=e){var v=r-(e.originalDts+e.duration);3>=v&&(v=0);e=r-(e.dts+e.duration+
v)}else e=0;else e=r-n;var v=r-e,w=l.cts,B=v+w;-1===f&&(f=v,t=B);for(var E=0;l.units.length;){var A=l.units.shift().data;h.set(A,d);d+=A.byteLength;E+=A.byteLength}A=1<=c.length?c[0].dts-q-e-v:1<=g.length?g[g.length-1].duration:x.refSampleDuration+e;if(m){var y=new z(v,B,A,l.dts,!0);y.fileposition=l.fileposition;p.appendSyncPoint(y)}g.push({dts:v,pts:B,cts:w,size:E,isKeyframe:m,duration:A,originalDts:r,flags:{isLeading:0,dependsOn:m?2:1,isDependedOn:m?1:0,hasRedundancy:0,isNonSync:m?0:1}})}l=g[g.length-
1];c=l.dts+l.duration;d=l.pts+l.duration;n=c;p.beginDts=f;p.endDts=c;p.beginPts=t;p.endPts=d;p.originalBeginDts=g[0].originalDts;p.originalEndDts=l.originalDts+l.duration;p.firstSample=new z(g[0].dts,g[0].pts,g[0].duration,g[0].originalDts,g[0].isKeyframe);p.lastSample=new z(l.dts,l.pts,l.duration,l.originalDts,l.isKeyframe);k.config.islive||D.append(p);b.samples=g;b.sequenceNumber++;f=k.moof(b,f);b.samples=[];b.length=0;k.dispatchEvent(a.PLAYEASE_MP4_SEGMENT,{tp:"video",data:_mergeBoxes(f,h),sampleCount:g.length,
info:p})}};k.getAudioSegment=function(b){var c=b.samples,e=void 0,f=-1,d;d=!1;var t=-1;if(c&&0!==c.length){var g=0,l=8+b.length,p=new Uint8Array(l);p[g++]=l>>>24&255;p[g++]=l>>>16&255;p[g++]=l>>>8&255;p[g++]=l&255;p.set(u.mdat,g);for(var g=g+4,n=[];c.length;){var r=c.shift(),A=r.unit,x=r.dts-q;if(void 0==e)if(void 0==v)if(E.isEmpty())e=0,B&&!D.isEmpty()&&(d=!0);else if(e=E.getLastSampleBefore(x),null!=e){var y=x-(e.originalDts+e.duration);3>=y&&(y=0);e=x-(e.dts+e.duration+y)}else e=0;else e=x-v;y=
x-e;if(d){var I=D.getLastSegmentBefore(x);null!=I&&I.beginDts<y?(t=y-I.beginDts,y=I.beginDts):d=!1}-1===f&&(f=y);d?(d=!1,c.unshift(r),r=y,A=t,x=m.getSilentFrame(w.channelCount),null==x?(h.log("Cannot generate silent aac frame, channelCount: "+w.channelCount+"."),r=null):r={unit:x,mp4Sample:{dts:r,pts:r,cts:0,size:x.byteLength,duration:A,originalDts:r,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}},null!=r&&(A=r.unit,n.push(r.mp4Sample),g=0,l+=A.byteLength,p=new Uint8Array(l),p[g++]=
l>>>24&255,p[g++]=l>>>16&255,p[g++]=l>>>8&255,p[g++]=l&255,p.set(u.mdat,g),g+=4,p.set(A,g),g+=A.byteLength)):(n.push({dts:y,pts:y,cts:0,size:A.byteLength,duration:1<=c.length?c[0].dts-q-e-y:1<=n.length?n[n.length-1].duration:w.refSampleDuration+e,originalDts:x,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),p.set(A,g),g+=A.byteLength)}t=n[n.length-1];v=d=t.dts+t.duration;c=new C;c.beginDts=f;c.endDts=d;c.beginPts=f;c.endPts=d;c.originalBeginDts=n[0].originalDts;c.originalEndDts=t.originalDts+
t.duration;c.firstSample=new z(n[0].dts,n[0].pts,n[0].duration,n[0].originalDts,!1);c.lastSample=new z(t.dts,t.pts,t.duration,t.originalDts,!1);k.config.islive||E.append(c);b.samples=n;b.sequenceNumber++;f=k.moof(b,f);b.samples=[];b.length=0;k.dispatchEvent(a.PLAYEASE_MP4_SEGMENT,{tp:"audio",data:_mergeBoxes(f,p),sampleCount:n.length,info:c})}};_mergeBoxes=function(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);c.set(a,0);c.set(b,a.byteLength);return c};k.setVideoMeta=function(a){x=a};k.setAudioMeta=
function(a){w=a};k.box=function(a){for(var b=8,c=Array.prototype.slice.call(arguments,1),e=0;e<c.length;e++)b+=c[e].byteLength;var f=new Uint8Array(b),d=0;f[d++]=b>>>24&255;f[d++]=b>>>16&255;f[d++]=b>>>8&255;f[d++]=b&255;f.set(a,d);d+=4;for(e=0;e<c.length;e++)f.set(c[e],d),d+=c[e].byteLength;return f};k.moov=function(a){var b=k.mvhd(a.timescale,a.duration),c=k.trak(a);a=k.mvex(a);return k.box(u.moov,b,c,a)};k.mvhd=function(a,b){return k.box(u.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,a>>>24&255,
a>>>16&255,a>>>8&255,a&255,b>>>24&255,b>>>16&255,b>>>8&255,b&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))};k.trak=function(a){return k.box(u.trak,k.tkhd(a),k.mdia(a))};k.tkhd=function(a){var b=a.id,c=a.duration,e=a.presentWidth;a=a.presentHeight;return k.box(u.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,b>>>24&255,b>>>16&255,b>>>8&255,b&255,0,0,0,0,c>>>24&255,c>>>16&
255,c>>>8&255,c&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,e>>>8&255,e&255,0,0,a>>>8&255,a&255,0,0]))};k.mdia=function(a){return k.box(u.mdia,k.mdhd(a),k.hdlr(a),k.minf(a))};k.mdhd=function(a){var b=a.timescale;a=a.duration;return k.box(u.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,b>>>24&255,b>>>16&255,b>>>8&255,b&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255,85,196,0,0]))};k.hdlr=function(a){return k.box(u.hdlr,"audio"===a.type?p:g)};
k.minf=function(a){var b;b="audio"===a.type?k.box(u.smhd,I):k.box(u.vmhd,F);return k.box(u.minf,b,k.dinf(),k.stbl(a))};k.dinf=function(){return k.box(u.dinf,k.box(u.dref,l))};k.stbl=function(a){return k.box(u.stbl,k.stsd(a),k.box(u.stts,e),k.box(u.stsc,e),k.box(u.stsz,f),k.box(u.stco,e))};k.stsd=function(a){return"audio"===a.type?k.box(u.stsd,b,k.mp4a(a)):k.box(u.stsd,b,k.avc1(a))};k.mp4a=function(a){var b=a.audioSampleRate,b=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,a.channelCount,0,16,0,
0,0,0,b>>>8&255,b&255,0,0]);return k.box(u.mp4a,b,k.esds(a))};k.esds=function(a){a=a.config;var b=a.length;a=new Uint8Array([0,0,0,0,3,23+b,0,1,0,4,15+b,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([b]).concat(a).concat([6,1,2]));return k.box(u.esds,a)};k.avc1=function(a){var b=a.avcc,c=a.codecWidth;a=a.codecHeight;c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>>8&255,c&255,a>>>8&255,a&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return k.box(u.avc1,c,k.box(u.avcC,b))};k.mvex=function(a){return k.box(u.mvex,k.trex(a))};k.trex=function(a){a=a.id;a=new Uint8Array([0,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,a&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return k.box(u.trex,a)};k.moof=function(a,b){return k.box(u.moof,k.mfhd(a.sequenceNumber),k.traf(a,b))};k.mfhd=function(a){a=new Uint8Array([0,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,a&255]);return k.box(u.mfhd,a)};k.traf=function(a,b){var c=a.id,c=k.box(u.tfhd,
new Uint8Array([0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,c&255]));b=k.box(u.tfdt,new Uint8Array([0,0,0,0,b>>>24&255,b>>>16&255,b>>>8&255,b&255]));var e=k.sdtp(a);a=k.trun(a,e.byteLength+16+16+8+16+8+8);return k.box(u.traf,c,b,a,e)};k.sdtp=function(a){a=a.samples||[];for(var b=a.length,c=new Uint8Array(4+b),e=0;e<b;e++){var f=a[e].flags;c[e+4]=f.isLeading<<6|f.dependsOn<<4|f.isDependedOn<<2|f.hasRedundancy}return k.box(u.sdtp,c)};k.trun=function(a,b){a=a.samples||[];var c=a.length,e=12+16*c,f=new Uint8Array(e);
b+=8+e;f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,c&255,b>>>24&255,b>>>16&255,b>>>8&255,b&255],0);for(b=0;b<c;b++){var e=a[b].duration,d=a[b].size,g=a[b].flags,h=a[b].cts;f.set([e>>>24&255,e>>>16&255,e>>>8&255,e&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,g.isLeading<<2|g.dependsOn,g.isDependedOn<<6|g.hasRedundancy<<4|g.isNonSync,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*b)}return k.box(u.trun,f)};k.mdat=function(a){return k.box(u.mdat,a)};k.destroy=function(){};(function(){k.config=h.extend({},
r,d);for(var a in u)u[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)];q=0;D=new y("video");E=new y("audio");B=!1})()}})(playease);(function(d){d.core={}})(playease);(function(d){d.core.states={BUFFERING:"buffering",PLAYING:"playing",SEEKING:"seeking",PAUSED:"paused",STOPPED:"stopped",ERROR:"error"}})(playease);(function(d){d.core.skins={}})(playease);(function(d){d.core.skins.modes={DEFAULT:"def"}})(playease);
(function(d){var h=d.utils,a=d.events;d=d.core.skins;var m=d.modes,c=h.css,b="pla-skin";d.def=function(e){var f=h.extend(this,new a.eventdispatcher("skins.def")),d=e.width,p=e.height;f.resize=function(a,b){h.log("Resizing to "+a+", "+b);d=parseInt(a);p=parseInt(b)};f.name=m.DEFAULT;b+="-"+f.name;c(".pla-wrapper",{width:d+"px",height:p+40+"px","box-shadow":"0 1px 1px rgba(0, 0, 0, 0.05)"});c(".pla-wrapper.fp, .pla-wrapper.fs",{width:"100%",height:"100%"});c(".pla-wrapper *",{margin:"0",padding:"0",
"font-family":"\u5fae\u8f6f\u96c5\u9ed1,arial,sans-serif","font-size":"12px","font-weight":"normal","box-sizing":"content-box"});c("."+b+" .pldevider",{padding:"0 2px","line-height":"40px",color:"#FFF",cursor:"default"});c("."+b+" .pllabel",{"line-height":"40px",color:"#FFF",cursor:"default"});c("."+b+" .plbutton",{cursor:"pointer"});c("."+b+" .plslider",{cursor:"pointer"});c("."+b+" .pla-render",{width:"100%",height:"calc(100% - 40px)",position:"relative",background:"black"});c("."+b+".fs .pla-render",
{height:"100%"});c("."+b+" .pla-render video",{width:"100%",height:"100%"});c("."+b+" .pla-controls",{width:"100%",height:"40px",background:"#222",position:"relative"});c("."+b+".fs .pla-controls",{top:"-40px"});c("."+b+" .pla-controls > div, ."+b+" .pla-controls > div > *",{"float":"left"});c("."+b+" .pla-controls .plcenter",{});c("."+b+" .pla-controls .plright",{"float":"right"});c("."+b+" .pla-controls .plslider.time",{width:"100%",height:"2px",position:"absolute",top:"-2px",display:"none"});c("."+
b+" .pla-controls:hover .plslider.time",{height:"10px",top:"-10px"});c("."+b+" .pla-controls .plslider.time .plrail",{width:"0",height:"100%",position:"absolute",top:"0"});c("."+b+" .pla-controls .plslider.time .plrail.bg",{width:"100%",background:"#CCC",filter:"alpha(opacity=50)",opacity:"0.5"});c("."+b+" .pla-controls .plslider.time .plrail.buf",{background:"#707070"});c("."+b+" .pla-controls .plslider.time .plrail.pro",{background:"#00A0E9"});c("."+b+" .pla-controls .plplay",{"margin-left":"8px",
width:"26px",height:"40px",background:"url(/webplayer/playease/skins/playButton.png) no-repeat center"});c("."+b+" .pla-controls .plplay:hover",{background:"url(/webplayer/playease/skins/playButtonOver.png) no-repeat center"});c("."+b+" .pla-controls .plpause",{"margin-left":"8px",width:"26px",height:"40px",display:"none",background:"url(/webplayer/playease/skins/pauseButton.png) no-repeat center"});c("."+b+" .pla-controls .plpause:hover",{background:"url(/webplayer/playease/skins/pauseButtonOver.png) no-repeat center"});
c("."+b+" .pla-controls .plreload",{"margin-left":"4px",width:"26px",height:"40px",background:"url(/webplayer/playease/skins/reloadButton.png) no-repeat center"});c("."+b+" .pla-controls .plreload:hover",{background:"url(/webplayer/playease/skins/reloadButtonOver.png) no-repeat center"});c("."+b+" .pla-controls .plstop",{"margin-left":"4px",width:"26px",height:"40px",display:"none",background:"url(/webplayer/playease/skins/stopButton.png) no-repeat center"});c("."+b+" .pla-controls .plstop:hover",
{background:"url(/webplayer/playease/skins/stopButtonOver.png) no-repeat center"});c("."+b+" .pla-controls .plelapsed",{"margin-left":"8px"});c("."+b+".playing .pla-controls .plplay, ."+b+".vod .pla-controls .plreload, ."+b+".vod .pla-controls .plalt, ."+b+" .pla-controls .plelapsed, ."+b+" .pla-controls .pldevider, ."+b+" .pla-controls .plduration",{display:"none"});c("."+b+".vod .pla-controls .plslider.time, ."+b+".playing .pla-controls .plpause, ."+b+".vod .pla-controls .plstop, ."+b+".vod .pla-controls .plelapsed, ."+
b+".vod .pla-controls .pldevider, ."+b+".vod .pla-controls .plduration",{display:"block"});c("."+b+" .pla-controls .plreport",{"margin-right":"8px",width:"20px",height:"40px",background:"url(/webplayer/playease/skins/reportButton.png) no-repeat center"});c("."+b+" .pla-controls .plreport:hover",{background:"url(/webplayer/playease/skins/reportButtonOver.png) no-repeat center"});c("."+b+" .pla-controls .plvolume",{"margin-right":"4px",width:"25px",height:"40px",background:"url(/webplayer/playease/skins/volumeButton.png) no-repeat center"});
c("."+b+" .pla-controls .plvolume:hover",{background:"url(/webplayer/playease/skins/volumeButtonOver.png) no-repeat center"});c("."+b+" .pla-controls .plvolume.mute",{background:"url(/webplayer/playease/skins/volumeMuteButton.png) no-repeat center"});c("."+b+" .pla-controls .plvolume.mute:hover",{background:"url(/webplayer/playease/skins/volumeMuteButtonOver.png) no-repeat center"});c("."+b+" .pla-controls .plslider.volume",{margin:"15px 8px 0 0",width:"60px",height:"12px",position:"relative"});c("."+
b+" .pla-controls .plslider.volume .plrail",{width:"100%",height:"4px",position:"absolute",top:"4px"});c("."+b+" .pla-controls .plslider.volume .plrail.buf",{background:"#909090"});c("."+b+" .pla-controls .plslider.volume:hover .plrail.buf",{background:"#B0B0B0"});c("."+b+" .pla-controls .plslider.volume .plrail.pro",{width:"80%",background:"#E6E6E6"});c("."+b+" .pla-controls .plslider.volume:hover .plrail.pro",{background:"#FFFFFF"});c("."+b+" .pla-controls .plslider.volume .plthumb",{width:"10px",
height:"12px",position:"absolute",background:"url(/webplayer/playease/skins/volumeSliderThumb.png) no-repeat center"});c("."+b+" .pla-controls .plhd",{"margin-right":"8px",width:"48px",height:"40px",background:"url(/webplayer/playease/skins/hdButton.png) no-repeat center"});c("."+b+" .pla-controls .plhd:hover",{background:"url(/webplayer/playease/skins/hdButtonOver.png) no-repeat center"});c("."+b+" .pla-controls .plbullet",{"margin-right":"8px",width:"58px",height:"40px",background:"url(/webplayer/playease/skins/bulletButton.png) no-repeat center"});
c("."+b+" .pla-controls .plbullet.off",{background:"url(/webplayer/playease/skins/bulletOffButton.png) no-repeat center"});c("."+b+" .pla-controls .plfullpage",{"margin-right":"8px",width:"25px",height:"40px",background:"url(/webplayer/playease/skins/fullpageButton.png) no-repeat center"});c("."+b+" .pla-controls .plfullpage:hover",{background:"url(/webplayer/playease/skins/fullpageButtonOver.png) no-repeat center"});c("."+b+".fp .pla-controls .plfullpage",{display:"none"});c("."+b+" .pla-controls .plfpexit",
{"margin-right":"8px",width:"25px",height:"40px",display:"none",background:"url(/webplayer/playease/skins/fullpageExitButton.png) no-repeat center"});c("."+b+" .pla-controls .plfpexit:hover",{background:"url(/webplayer/playease/skins/fullpageExitButtonOver.png) no-repeat center"});c("."+b+".fp .pla-controls .plfpexit",{display:"block"});c("."+b+" .pla-controls .plfullscreen",{"margin-right":"8px",width:"25px",height:"40px",background:"url(/webplayer/playease/skins/fullscreenButton.png) no-repeat center"});
c("."+b+" .pla-controls .plfullscreen:hover",{background:"url(/webplayer/playease/skins/fullscreenButtonOver.png) no-repeat center"});c("."+b+".fs .pla-controls .plfullscreen",{display:"none"});c("."+b+" .pla-controls .plfsexit",{"margin-right":"8px",width:"25px",height:"40px",display:"none",background:"url(/webplayer/playease/skins/fullscreenExitButton.png) no-repeat center"});c("."+b+" .pla-controls .plfsexit:hover",{background:"url(/webplayer/playease/skins/fullscreenExitButtonOver.png) no-repeat center"});
c("."+b+".fs .pla-controls .plfsexit",{display:"block"})}})(playease);(function(d){d.core.renders={}})(playease);(function(d){d.core.renders.modes={DEFAULT:"def",FLV:"flv"}})(playease);
(function(d){var h=d.utils,a=d.events;d=d.core.renders;var m=d.modes;d.def=function(c,b){var e=h.extend(this,new a.eventdispatcher("renders.def")),f,d;e.setup=function(){e.dispatchEvent(a.PLAYEASE_READY,{id:e.config.id})};e.play=function(a){if(f.src!==d||a&&a!=e.config.url)a&&a!=e.config.url&&(e.config.url=a),f.src=e.config.url,f.load(),d=f.src;f.play()};e.pause=function(){f.pause()};e.reload=function(){f.load()};e.seek=function(a){};e.stop=function(){f.pause();f.src=d=void 0};e.mute=function(a){f.muted=
a};e.volume=function(a){f.volume=a/100};e.hd=function(a){};e.element=function(){return f};e.resize=function(a,b){};e.destroy=function(){};e.name=m.DEFAULT;e.config=h.extend({},{},b);f=h.createElement("video");f.playsinline=f["webkit-playsinline"]=e.config.playsinline;f.poster=e.config.poster}})(playease);
(function(d){var h=d.utils,a=d.events,m=d.muxer;d=d.core.renders;var c=d.modes,b=m.AMF,e=m.flv.TAG,f=m.flv.FORMATS,g=m.flv.CODECS;d.flv=function(d,l){function p(a){h.log("media source open");n.load(l.url)}function F(a){h.log("update end");var b=a.target.type;if(u){if(!D||"open"!==D.readyState)return;if(!B.audio.length&&!B.video.length){D.endOfStream();return}}if(0!=B[b].length&&(a=E[b],!a.updating)){b=B[b].shift();try{a.appendBuffer(b)}catch(G){h.log(G)}}}function z(a){h.log("source buffer error")}
function C(a){h.log("media source ended")}function y(a){h.log("media source close")}function x(a){h.log("media source error")}var k=h.extend(this,new a.eventdispatcher("renders.def")),r,q,n,v,A,w,D,E,B,u=!1;k.setup=function(){k.dispatchEvent(a.PLAYEASE_READY,{id:k.config.id})};k.play=function(a){if(r.src!==q||a&&a!=k.config.url)a&&a!=k.config.url&&(k.config.url=a),B.audio=[],B.video=[],n.abort(),v.reset(),A.reset(),r.src=URL.createObjectURL(D),r.load(),q=r.src;r.play()};k.pause=function(){r.pause()};
k.reload=function(){r.load()};k.seek=function(a){};k.stop=function(){B.audio=[];B.video=[];n.abort();r.pause();r.src=q=void 0};k.mute=function(a){r.muted=a};k.volume=function(a){r.volume=a/100};k.hd=function(a){};k.appendInitSegment=function(b,c){var e=b+'/mp4; codecs="'+w[b+"Codec"]+'"';h.log("Mime type: "+e+".");MediaSource.isTypeSupported(e)?"closed"==D.readyState?k.dispatchEvent(a.PLAYEASE_RENDER_ERROR,{message:"MediaSource is closed while appending init segment."}):(e=E[b]=D.addSourceBuffer(e),
e.type=b,e.addEventListener("updateend",F),e.addEventListener("error",z),e.appendBuffer(c)):k.dispatchEvent(a.PLAYEASE_RENDER_ERROR,{message:"Mime type is not surpported: "+e+"."})};k.appendSegment=function(a,b){B[a].push(b);var c=E[a];c.updating||(b=B[a].shift(),c.appendBuffer(b))};k.element=function(){return r};k.resize=function(a,b){};k.destroy=function(){};k.name=c.FLV;k.config=h.extend({},{},l);E={audio:null,video:null};B={audio:[],video:[]};r=h.createElement("video");r.playsinline=r["webkit-playsinline"]=
k.config.playsinline;r.poster=k.config.poster;n=new h.loader(l.loader);n.addEventListener(a.PLAYEASE_CONTENT_LENGTH,function(a){h.log("onContenLength: "+a.length)});n.addEventListener(a.PLAYEASE_PROGRESS,function(a){v.parse(a.data)});n.addEventListener(a.PLAYEASE_COMPLETE,function(a){h.log("onLoaderComplete")});n.addEventListener(a.ERROR,function(a){h.log(a.message)});v=new m.flv;v.addEventListener(a.PLAYEASE_FLV_TAG,function(a){switch(a.tag){case e.AUDIO:if(a.format&&a.format!=f.AAC){h.log("Unsupported audio format("+
a.format+").");break}v.parseAACAudioPacket(a.data,a.offset,a.size,a.timestamp,a.rate,a.samplesize,a.sampletype);break;case e.VIDEO:if(a.codec&&a.codec!=g.AVC){h.log("Unsupported video codec("+a.codec+").");break}v.parseAVCVideoPacket(a.data,a.offset,a.size,a.timestamp,a.frametype);break;case e.SCRIPT:a=b.parse(a.data,a.offset,a.size);h.log(a.key+": "+JSON.stringify(a.value));"onMetaData"==a.key&&v.setMetaData(a.value);break;default:h.log("Skipping unknown tag type "+a.tag)}});v.addEventListener(a.PLAYEASE_MEDIA_INFO,
function(a){w=a.info});v.addEventListener(a.PLAYEASE_AVC_CONFIG_RECORD,function(a){A.setVideoMeta(a.data);A.getInitSegment(a.data)});v.addEventListener(a.PLAYEASE_AVC_SAMPLE,function(a){A.getVideoSegment(a.data)});v.addEventListener(a.PLAYEASE_AAC_SPECIFIC_CONFIG,function(a){A.setAudioMeta(a.data);A.getInitSegment(a.data)});v.addEventListener(a.PLAYEASE_AAC_SAMPLE,function(a){A.getAudioSegment(a.data)});v.addEventListener(a.PLAYEASE_END_OF_STREAM,function(a){u=!0});v.addEventListener(a.ERROR,function(a){h.log(a.message)});
A=new m.mp4;A.addEventListener(a.PLAYEASE_MP4_INIT_SEGMENT,function(a){k.appendInitSegment(a.tp,a.data)});A.addEventListener(a.PLAYEASE_MP4_SEGMENT,function(a){k.appendSegment(a.tp,a.data)});A.addEventListener(a.ERROR,function(a){h.log(a.message)});window.MediaSource=window.MediaSource||window.WebKitMediaSource;D=new MediaSource;D.addEventListener("sourceopen",p);D.addEventListener("sourceended",C);D.addEventListener("sourceclose",y);D.addEventListener("error",x);D.addEventListener("webkitsourceopen",
p);D.addEventListener("webkitsourceended",C);D.addEventListener("webkitsourceclose",y);D.addEventListener("webkiterror",x)}})(playease);(function(d){d.core.components={}})(playease);
(function(d){var h=d.utils,a=d.events;d.core.components.slider=function(d){function c(b){(b.target.parentNode===z?b.target.parentNode:b.target)===z&&(b=f(b.clientX,b.clientY),b!=x&&(x=b,g.dispatchEvent(a.PLAYEASE_SLIDER_CHANGE,{value:b})),y=!0)}function b(b){y&&(b=f(b.clientX,b.clientY),b!=x&&(x=b,g.dispatchEvent(a.PLAYEASE_SLIDER_CHANGE,{value:b})))}function e(b){y&&(b=f(b.clientX,b.clientY),b!=x&&(x=b,g.dispatchEvent(a.PLAYEASE_SLIDER_CHANGE,{value:b})),y=!1)}function f(a,b){var c=document.getElementById(g.config.wrapper);
a=a-z.offsetLeft-c.offsetLeft;b=b-z.offsetTop-z.parentNode.parentNode.offsetTop;b=0==F?Math.floor(a/z.clientWidth*100):Math.floor(b/z.clientHeight*100);return b=Math.max(0,Math.min(b,100))}var g=h.extend(this,new a.eventdispatcher("components.controlbar")),p=["bg","buf","pro"],l,m,F,z,C,y,x;g.buffered=function(a){l.buf.style.width=a+"%"};g.update=function(a){C=a;l.pro.style.width=C+"%";m.style.left="calc("+C+"% - 5px)"};g.element=function(){return z};g.config=h.extend({},{wrapper:"",name:"",direction:0},
d);l={};F=g.config.direction;C=0;y=!1;(function(){if(!h.isMobile()||0!==g.config.name.indexOf("volume")){z=h.createElement("div","plslider "+g.config.name);for(var a=0;a<p.length;a++){var b=p[a],b=l[b]=h.createElement("span","plrail "+b);z.appendChild(b)}m=h.createElement("span","plthumb");z.appendChild(m)}})();try{document.addEventListener("mousedown",c),document.addEventListener("mousemove",b),document.addEventListener("mouseup",e)}catch(k){document.attachEvent("onmousedown",c),document.attachEvent("onmousemove",
b),document.attachEvent("onmouseup",e)}}})(playease);
(function(d){var h=d.utils,a=d.events,m=d.core.components;m.controlbar=function(c,b){function e(a,b,c){return{name:a,type:b,className:c}}function f(b,e){b=h.createElement("div","pl"+b);for(var f=0;f<e.length;f++){var g;g=void 0;var k=e[f];switch(k.type){case 0:g=h.createElement("span","pldevider");g.innerHTML="/";break;case 1:g=k.name;var r="pllabel pl"+g,k="";switch(g){case "alt":k="Live broadcast";break;case "elapsed":case "duration":r+=" plhidden";k="00:00";break;case "devider":k="/"}r=h.createElement("span",
r);r.innerHTML=k;g=y[g]=r;break;case 2:g=k.name;if(h.isMobile()&&("volume"===g||0===g.indexOf("volume"))||h.isAndroid(4,!0)&&/hd|cc/.test(g))g=null;else{k=h.createElement("span","plbutton pl"+g);k.name=g;try{k.addEventListener("click",d)}catch(w){k.attachEvent("onclick",d)}g=x[g]=k}break;case 3:"volume"===k.name&&(C=new m.slider({wrapper:l.config.wrapper,name:k.name}),C.addEventListener(a.PLAYEASE_SLIDER_CHANGE,p),g=C.element())}g&&b.appendChild(g)}c.appendChild(b)}function d(b){switch(b.target.name){case "play":l.dispatchEvent(a.PLAYEASE_VIEW_PLAY);
break;case "pause":l.dispatchEvent(a.PLAYEASE_VIEW_PAUSE);break;case "reload":l.dispatchEvent(a.PLAYEASE_VIEW_RELOAD);break;case "stop":l.dispatchEvent(a.PLAYEASE_VIEW_STOP);break;case "report":l.dispatchEvent(a.PLAYEASE_VIEW_REPORT);break;case "volume":l.dispatchEvent(a.PLAYEASE_VIEW_MUTE);break;case "hd":l.dispatchEvent(a.PLAYEASE_VIEW_HD);break;case "bullet":l.dispatchEvent(a.PLAYEASE_VIEW_BULLET);break;case "fullpage":case "fpexit":l.dispatchEvent(a.PLAYEASE_VIEW_FULLPAGE);break;case "fullscreen":case "fsexit":l.dispatchEvent(a.PLAYEASE_VIEW_FULLSCREEN)}}
function p(b){l.dispatchEvent(a.PLAYEASE_VIEW_VOLUME,{volume:b.value})}var l=h.extend(this,new a.eventdispatcher("components.controlbar")),I=[e("play",2),e("pause",2),e("reload",2),e("stop",2),e("alt",1),e("elapsed",1),e("devider",0),e("duration",1)],F=[e("report",2),e("volume",2),e("volume",3),e("hd",2),e("bullet",2),e("fullpage",2),e("fpexit",2),e("fullscreen",2),e("fsexit",2)],z,C,y,x;l.setDuration=function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60);a=Math.floor(a%60);b=(b?h.pad(b,2)+
":":"")+h.pad(c,2)+":"+h.pad(a,2);y.duration.innerHTML=b};l.setElapsed=function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60);a=Math.floor(a%60);b=(b?h.pad(b,2)+":":"")+h.pad(c,2)+":"+h.pad(a,2);y.elapsed.innerHTML=b};l.setProgress=function(a,b){b&&z.update(Math.floor(a/b*1E4)/100)};l.setBuffered=function(a,b){b&&z.buffered(Math.floor(a/b*1E4)/100)};l.setMuted=function(a,b){a?(h.addClass(x.volume,"mute"),C.update(0)):(h.removeClass(x.volume,"mute"),C.update(b))};l.setVolume=function(a){a?h.removeClass(x.volume,
"mute"):h.addClass(x.volume,"mute");C.update(a)};l.setBullet=function(a){a?h.removeClass(x.bullet,"off"):h.addClass(x.bullet,"off")};l.resize=function(a,b){};l.destroy=function(){};l.config=h.extend({},{wrapper:""},b);z=new m.slider({wrapper:l.config.wrapper,name:"time"});z.addEventListener(a.PLAYEASE_SLIDER_CHANGE,function(b){l.dispatchEvent(a.PLAYEASE_VIEW_SEEK,{offset:b.value})});c.appendChild(z.element());y={};x={};f("left",I);f("center",[]);f("right",F)}})(playease);
(function(d){var h=d.utils,a=d.events,m=d.core;m.entity=function(c){var b=h.extend(this,new a.eventdispatcher("core.entity")),e,f,d;b.setup=function(){setTimeout(function(){f.setup()},0)};b.destroy=function(){d&&d.stop();f&&f.destroy();e&&e.destroy()};b.id=c.id;b.model=e=new m.model(c);b.view=f=new m.view(b,e);b.controller=d=new m.controller(e,f);d.addGlobalListener(function(a){b.dispatchEvent(a.type,a)});b.play=d.play;b.pause=d.pause;b.reload=d.reload;b.seek=d.seek;b.stop=d.stop;b.report=d.report;
b.mute=d.mute;b.volume=d.volume;b.hd=d.hd;b.bullet=d.bullet;b.fullpage=d.fullpage;b.fullscreen=d.fullscreen;b.getState=e.getState;b.resize=f.resize}})(playease);
(function(d){var h=d.utils,a=d.events;d=d.core;var m=d.states;d.model=function(c){var b=h.extend(this,new a.eventdispatcher("core.model")),e=m.STOPPED,d;b.setState=function(c){c!==e&&(e=c,b.dispatchEvent(a.PLAYEASE_STATE,{state:c}))};b.getState=function(){return e};b.setProperty=function(c,e){1==d.hasOwnProperty(c)&&(d[c]=e,b.dispatchEvent(a.PLAYEASE_PROPERTY,{key:c,value:e}))};b.getProperty=function(a){return d[a]};b.getConfig=function(a){return b.config[a]||{}};b.destroy=function(){};b.config=h.extend({},
{},c);d={sources:c.sources,muted:!1,volume:80,bullet:!0,fullpage:!1,fullscreen:!1}}})(playease);
(function(d){var h=d.utils,a=d.events;d=d.core;var m=d.renders,c=d.components,b=d.skins,e="pla-skin";d.view=function(d,g){function f(){var b=h.extend({},g.getConfig("render"),{id:d.id,url:g.config.url,width:g.config.width,height:g.config.height,controls:g.config.controls,autoplay:g.config.autoplay,playsinline:g.config.playsinline,poster:g.config.poster,loader:{mode:g.config.cors}});try{E=q.render=new m[b.name](q,b),E.addEventListener(a.PLAYEASE_READY,r),E.addEventListener(a.PLAYEASE_RENDER_ERROR,
k)}catch(G){h.log("Failed to init render "+b.name+"!")}E&&(u=E.element(),u.addEventListener("loadstart",l),u.addEventListener("durationchange",I),u.addEventListener("ended",z),u.addEventListener("error",C),v.appendChild(u))}function l(b){t||(t=new h.timer(500),t.addEventListener(a.PLAYEASE_TIMER,F));t.start()}function I(a){B.setDuration(u.duration);h.addClass(n,"vod")}function F(a){a=u.currentTime;B.setElapsed(a);B.setProgress(a,u.duration);for(var b=u.buffered,c=0;c<b.length;c++){var e=b.start(c),
d=b.end(c);e<=a&&a<d&&B.setBuffered(d,u.duration)}}function z(a){t&&t.stop()}function C(a){t&&t.stop()}function y(){var a=h.extend({},g.getConfig("skin"),{id:d.id,width:g.config.width,height:g.config.height});try{new b[a.name](a)}catch(G){h.log("Failed to init skin "+a.name+"!")}}function x(a){if(a.ctrlKey||a.metaKey)return!0;if(/13|32/.test(a.keyCode))return a.preventDefault?a.preventDefault():a.returnValue=!1,!1}function k(a){r(a)}function r(a){q.dispatchEvent(a.type,a)}var q=h.extend(this,new a.eventdispatcher("core.view")),
n,v,A,w,D,E,B,u,t;q.setup=function(){if(E){E.setup();try{n.addEventListener("keydown",x)}catch(H){n.attachEvent("onkeydown",x)}}else q.dispatchEvent(a.PLAYEASE_SETUP_ERROR,{message:"Render not available!",name:g.config.render.name})};q.play=function(a){h.addClass(n,"playing");E.play(a)};q.pause=function(){h.removeClass(n,"playing");E.pause()};q.reload=function(){h.addClass(n,"playing");E.reload()};q.seek=function(a){h.addClass(n,"playing");B.setProgress(a,100);E.seek(a)};q.stop=function(){h.removeClass(n,
"playing");B.setDuration(0);B.setElapsed(0);B.setProgress(0,1);B.setBuffered(0,1);E.stop()};q.report=function(){};q.mute=function(a){B.setMuted(a,g.getProperty("volume"));E.mute(a)};q.volume=function(a){B.setVolume(a);E.volume(a)};q.bullet=function(a){B.setBullet(a)};q.fullpage=function(a){if(document.webkitIsFullScreen){document.exitFullscreen=document.exitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen;if(!document.exitFullscreen)return;document.exitFullscreen();
h.removeClass(n,"fs")}a?h.removeClass(n,"fp"):h.addClass(n,"fp")};q.fullscreen=function(a){a?(document.exitFullscreen=document.exitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen,document.exitFullscreen?(document.exitFullscreen(),h.removeClass(n,"fs")):q.fullpage(a)):(n.requestFullscreen=n.requestFullscreen||n.webkitRequestFullScreen||n.mozRequestFullScreen||n.msRequestFullscreen,n.requestFullscreen?(n.requestFullscreen(),h.addClass(n,"fs")):q.fullpage(a))};
q.display=function(a,b){};q.resize=function(a,b){E&&E.resize(a,b)};q.destroy=function(){if(n)try{n.removeEventListener("keydown",x)}catch(H){n.detachEvent("onkeydown",x)}E&&E.destroy()};(function(){e+="-"+g.config.skin.name;n=h.createElement("div","pla-wrapper "+e+("vod"===g.config.type?" vod":""));n.id=d.id;n.tabIndex=0;v=h.createElement("div","pla-render");A=h.createElement("div","pla-bullet");w=h.createElement("div","pla-controls");D=h.createElement("div","pla-contextmenu");n.appendChild(v);n.appendChild(A);
n.appendChild(w);n.appendChild(D);f();try{B=new c.controlbar(w,{wrapper:d.id}),B.addGlobalListener(r),B.setVolume(g.getProperty("volume"))}catch(G){h.log("Failed to init controlbar!")}y();var a=document.getElementById(d.id);a.parentNode.replaceChild(n,a);window.onresize=function(){"function"==h.typeOf(g.config.onresize)&&g.config.onresize.call(null)}})()}})(playease);
(function(d){var h=d.utils,a=d.events;d=d.core;var m=d.states;d.controller=function(c,b){function e(a){d.dispatchEvent(a.type,a)}var d=h.extend(this,new a.eventdispatcher("core.controller")),g=!1;d.play=function(a){c.setState(m.PLAYING);b.play(a)};d.pause=function(){c.setState(m.PAUSED);b.pause()};d.reload=function(){c.setState(m.PLAYING);b.play()};d.seek=function(a){c.setState(m.PLAYING);b.seek(a)};d.stop=function(){c.setState(m.STOPPED);b.stop()};d.mute=function(){var a=c.getProperty("muted");c.setProperty("muted",
!a);b.mute(!a)};d.volume=function(a){0==a&&c.setProperty("muted",!0);c.setProperty("volume",a);b.volume(a)};d.bullet=function(){var a=c.getProperty("bullet");c.setProperty("bullet",!a);b.bullet(!a)};d.hd=function(a){var b=c.getProperty("sources");b&&b[a]&&d.play(b[a])};c.addEventListener(a.PLAYEASE_STATE,function(b){switch(b.state){case m.BUFFERING:d.dispatchEvent(a.PLAYEASE_BUFFER);break;case m.PLAYING:d.dispatchEvent(a.PLAYEASE_PLAY);break;case m.PAUSED:d.dispatchEvent(a.PLAYEASE_PAUSE);break;case m.SEEKING:d.dispatchEvent(a.PLAYEASE_SEEK);
break;case m.STOPPED:d.dispatchEvent(a.PLAYEASE_STOP);break;case m.ERROR:break;default:d.dispatchEvent(a.ERROR,{message:"Unknown model state!",state:b.state})}});b.addEventListener(a.PLAYEASE_READY,function(a){g||(h.log("Player ready!"),g=!0,e(a),c.config.autoplay&&d.play(),window.onbeforeunload=function(a){})});b.addEventListener(a.PLAYEASE_SETUP_ERROR,function(a){c.setState(m.ERROR);e(a)});b.addEventListener(a.PLAYEASE_VIEW_PLAY,function(a){var b=c.getState();if(b==m.PAUSED||b==m.STOPPED||b==m.ERROR)d.play(),
e(a)});b.addEventListener(a.PLAYEASE_VIEW_PAUSE,function(a){var b=c.getState();if(b==m.BUFFERING||b==m.PLAYING||b==m.ERROR)d.pause(),e(a)});b.addEventListener(a.PLAYEASE_VIEW_RELOAD,function(a){c.setState(m.BUFFERING);d.reload();e(a)});b.addEventListener(a.PLAYEASE_VIEW_SEEK,function(a){c.getState()!=m.SEEKING&&(d.seek(a.offset),e(a))});b.addEventListener(a.PLAYEASE_VIEW_STOP,function(a){d.stop();e(a)});b.addEventListener(a.PLAYEASE_VIEW_REPORT,function(a){d.report();e(a)});b.addEventListener(a.PLAYEASE_VIEW_MUTE,
function(a){d.mute();e(a)});b.addEventListener(a.PLAYEASE_VIEW_VOLUME,function(a){d.volume(a.volume);e(a)});b.addEventListener(a.PLAYEASE_VIEW_HD,function(a){});b.addEventListener(a.PLAYEASE_VIEW_BULLET,function(a){d.bullet();e(a)});b.addEventListener(a.PLAYEASE_VIEW_FULLPAGE,function(a){var b=c.getProperty("fullpage");d.fullpage(b);e(a);c.setProperty("fullpage",!b)});b.addEventListener(a.PLAYEASE_VIEW_FULLSCREEN,function(a){var b=c.getProperty("fullscreen");d.fullscreen(b);e(a);c.setProperty("fullscreen",
!b)});b.addEventListener(a.PLAYEASE_RENDER_ERROR,function(a){c.setState(m.ERROR);e(a)});d.report=b.report;d.fullpage=b.fullpage;d.fullscreen=b.fullscreen}})(playease);
(function(d){var h=d.utils,a=d.events,m=d.embed=function(c){function b(b){switch(b.type){case a.ERROR:case a.PLAYEASE_SETUP_ERROR:case a.PLAYEASE_RENDER_ERROR:case a.PLAYEASE_ERROR:e.errorScreen(b.message);e.dispatchEvent(a.ERROR,b);break;default:e.dispatchEvent(b.type,b)}}var e=h.extend(this,new a.eventdispatcher("embed")),f={},g=!1,p=null;e.embed=function(){try{f=new m.config(c.config),p=new m.embedder(c,f)}catch(l){h.log("Failed to init embedder!");e.dispatchEvent(a.PLAYEASE_SETUP_ERROR,{message:"Failed to init embedder!",
render:f.render.name});return}p.addGlobalListener(b);p.embed()};e.errorScreen=function(a){g||(g=!0,d.api.displayError(a,f))};(function(){h.foreach(c.config.events,function(a,b){a=c[a];"function"===h.typeOf(a)&&a.call(c,b)})})()}})(playease);
(function(d){var h=d.utils,a=d.embed,m=d.core.renders.modes,c=d.core.skins.modes;a.config=function(a){return h.extend({},{url:"http://"+window.location.host+"/vod/sample.mp4",width:640,height:360,sources:[],type:"live",cors:"no-cors",bufferTime:.1,controls:!0,autoplay:!0,playsinline:!0,poster:"",render:{name:m.DEFAULT},skin:{name:c.DEFAULT}},a)};a.config.addConfig=function(a,c){return h.extend(a,c)}})(playease);
(function(d){var h=d.utils,a=d.events,m=d.core;d.embed.embedder=function(c,b){function d(a){f.dispatchEvent(a.type,a)}var f=h.extend(this,new a.eventdispatcher("embed.embedder"));f.embed=function(){var a=new m.entity(b);a.addGlobalListener(d);a.setup();c.setEntity(a,b.render.name)}}})(playease);