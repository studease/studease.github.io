playease=function(){if(playease.api)return playease.api.getInstance.apply(this,arguments)};playease.version="1.0.18";
(function(d){function h(a){return null!==navigator.userAgent.toLowerCase().match(a)}var a=d.utils={};a.exists=function(c){switch(a.typeOf(c)){case "string":return 0<c.length;case "object":return null!==c;case "null":return!1}return!0};a.extend=function(){var c=Array.prototype.slice.call(arguments,0),b=c[0];if(1<c.length)for(var e=1;e<c.length;e++)a.foreach(c[e],function(a,c){void 0!==c&&null!==c&&(b[a]=c)});return b};a.foreach=function(c,b){for(var e in c)c.hasOwnProperty&&"function"===a.typeOf(c.hasOwnProperty)?
c.hasOwnProperty(e)&&b(e,c[e]):b(e,c[e])};a.getCookie=function(a){var c;return(c=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)")))?unescape(c[2]):null};a.formatTime=function(c){var b=c.getHours()+1,e=c.getMinutes(),f=c.getSeconds();return c.toLocaleDateString()+" "+a.pad(b,2)+":"+a.pad(e,2)+":"+a.pad(f,2)};a.pad=function(a,b){for(a+="";a.length<b;)a="0"+a;return a};a.createElement=function(a,b){a=document.createElement(a);b&&(a.className=b);return a};a.addClass=function(c,b){var e="string"===
a.typeOf(c.className)?c.className.split(" "):[];b="array"===a.typeOf(b)?b:b.split(" ");a.foreach(b,function(c,b){-1===a.indexOf(e,b)&&e.push(b)});c.className=a.trim(e.join(" "))};a.removeClass=function(c,b){var e="string"===a.typeOf(c.className)?c.className.split(" "):[];b="array"===a.typeOf(b)?b:b.split(" ");a.foreach(b,function(c,b){c=a.indexOf(e,b);0<=c&&e.splice(c,1)});c.className=a.trim(e.join(" "))};a.emptyElement=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};a.typeOf=function(a){if(null===
a||void 0===a)return"null";var c=typeof a;if("object"===c)try{if("[object Array]"===toString.call(a))return"array"}catch(e){}return c};a.trim=function(a){return a.replace(/^\s+|\s+$/g,"")};a.indexOf=function(a,b){if(null==a)return-1;for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1};a.isMSIE=function(a){return a?(a=parseFloat(a).toFixed(1),h(new RegExp("msie\\s*"+a,"i"))):h(/msie/i)};a.isIOS=function(a){return a?h(new RegExp("iP(hone|ad|od).+\\sOS\\s"+a,"i")):h(/iP(hone|ad|od)/i)};a.isAndroid=
function(c,b){return b&&h(/chrome\/[123456789]/i)&&!h(/chrome\/18/)?!1:c?(a.isInt(c)&&!/\./.test(c)&&(c=""+c+"."),h(new RegExp("Android\\s*"+c,"i"))):h(/Android/i)};a.isMobile=function(){return a.isIOS()||a.isAndroid()};var p=window.console=window.console||{log:function(){}};a.log=function(){var c=Array.prototype.slice.call(arguments,0);"object"===a.typeOf(p.log)?p.log(c):p.log.apply(p,c)}})(playease);
(function(d){d=d.utils;d.littleEndian=function(){var h=new ArrayBuffer(2);(new DataView(h)).setInt16(0,256,!0);return 256===(new Int16Array(h))[0]}();d.getUint32=function(h,a,d){void 0==a&&(a=0);return d?h[a+0]|h[a+1]>>>8|h[a+2]>>>16|h[a+3]>>>24:h[a+0]<<24|h[a+1]<<16|h[a+2]<<8|h[a+3]}})(playease);
(function(d){function h(){var a=document.createElement("style");a.type="text/css";document.getElementsByTagName("head")[0].appendChild(a);return a.sheet||a.styleSheet}var a=d.utils,p;(a.css=function(c,b){p||(p=h());var e="";a.foreach(b,function(a,b){e+=a+": "+b+"; "});try{p.insertRule?p.insertRule(c+" { "+e+"}",p.cssRules.length):p.addRule(c,e,p.rules.length)}catch(f){a.log("Failed to insert css rule: "+c)}}).style=function(c,b,e){if(void 0!==c&&null!==c)for(void 0===c.length&&(c=[c]),b=a.extend({},
b),e=0;e<c.length;e++){var f=c[e];void 0!==f&&null!==f&&a.foreach(b,function(a,b){a=a.split("-");for(var c=1;c<a.length;c++)a[c]=a[c].charAt(0).toUpperCase()+a[c].slice(1);a=a.join("");f.style[a]!==b&&(f.style[a]=b)})}}})(playease);
(function(d){d.events={ERROR:"error",PLAYEASE_READY:"playeaseReady",PLAYEASE_SETUP_ERROR:"playeaseSetupError",PLAYEASE_RENDER_ERROR:"playeaseRenderError",PLAYEASE_STATE:"playeaseState",PLAYEASE_PROPERTY:"playeaseProperty",PLAYEASE_METADATA:"playeaseMetaData",PLAYEASE_BUFFER:"playeaseBuffer",PLAYEASE_PLAY:"playeasePlay",PLAYEASE_PAUSE:"playeasePause",PLAYEASE_RELOAD:"playeaseReload",PLAYEASE_SEEK:"playeaseSeek",PLAYEASE_STOP:"playeaseStop",PLAYEASE_REPORT:"playeaseReport",PLAYEASE_MUTE:"playeaseMute",
PLAYEASE_VOLUME:"playeaseVolume",PLAYEASE_HD:"playeaseHD",PLAYEASE_BULLET:"playeaseBullet",PLAYEASE_FULLPAGE:"playeaseFullpage",PLAYEASE_FULLSCREEN:"playeaseFullscreen",PLAYEASE_VIEW_PLAY:"playeaseViewPlay",PLAYEASE_VIEW_PAUSE:"playeaseViewPause",PLAYEASE_VIEW_RELOAD:"playeaseViewReload",PLAYEASE_VIEW_SEEK:"playeaseViewSeek",PLAYEASE_VIEW_STOP:"playeaseViewStop",PLAYEASE_VIEW_REPORT:"playeaseViewReport",PLAYEASE_VIEW_MUTE:"playeaseViewMute",PLAYEASE_VIEW_VOLUME:"playeaseViewVolume",PLAYEASE_VIEW_HD:"playeaseViewHD",
PLAYEASE_VIEW_BULLET:"playeaseViewBullet",PLAYEASE_VIEW_FULLPAGE:"playeaseViewFullpage",PLAYEASE_VIEW_FULLSCREEN:"playeaseViewFullscreen",PLAYEASE_CONTENT_LENGTH:"playeaseContentLength",PLAYEASE_PROGRESS:"playeaseProgress",PLAYEASE_COMPLETE:"playeaseComplete",PLAYEASE_FLV_TAG:"playeaseFlvTag",PLAYEASE_AVC_CONFIG_RECORD:"playeaseAVCConfigRecord",PLAYEASE_AVC_SAMPLE:"playeaseAVCSample",PLAYEASE_AAC_SPECIFIC_CONFIG:"playeaseAACSpecificConfig",PLAYEASE_AAC_SAMPLE:"playeaseAACSample",PLAYEASE_MP4_INIT_SEGMENT:"playeaseMp4InitSegment",
PLAYEASE_MP4_SEGMENT:"playeaseMp4Segment",PLAYEASE_END_OF_STREAM:"playeaseEndOfStream",PLAYEASE_TIMER:"playeaseTimer",PLAYEASE_TIMER_COMPLETE:"playeaseTimerComplete"}})(playease);
(function(d){var h=d.utils;d.events.eventdispatcher=function(a){function p(a,b,c){if(a)for(var f=0;f<a.length;f++){var e=a[f];if(e){null!==e.count&&0===--e.count&&delete a[f];try{e.listener(b)}catch(H){h.log('Error handling "'+c+'" event listener ['+f+"]: "+H.toString(),e.listener,b)}}}}var c={},b=[];this.addEventListener=function(a,b,g){try{h.exists(c[a])||(c[a]=[]),"string"===h.typeOf(b)&&(b=(new Function("return "+b))()),c[a].push({listener:b,count:g||null})}catch(l){h.log("error",l)}return!1};
this.removeEventListener=function(a,b){if(c[a]){try{if(void 0===b){c[a]=[];return}var f;for(f=0;f<c[a].length;f++)if(c[a][f].listener.toString()===b.toString()){c[a].splice(f,1);break}}catch(l){h.log("error",l)}return!1}};this.addGlobalListener=function(a,c){try{"string"===h.typeOf(a)&&(a=(new Function("return "+a))()),b.push({listener:a,count:c||null})}catch(g){h.log("error",g)}return!1};this.removeGlobalListener=function(a){if(a){try{var c;for(c=b.length-1;0<=c;c--)b[c].listener.toString()===a.toString()&&
b.splice(c,1)}catch(g){h.log("error",g)}return!1}};this.dispatchEvent=function(e,f){f||(f={});h.extend(f,{id:a,version:d.version,type:e});d.debug&&h.log(e,f);p(c[e],f,e);p(b,f,e)}}})(playease);
(function(d){var h=d.utils,a=d.events;h.loader=function(d){var c=h.extend(this,new a.eventdispatcher("utils.loader")),b={method:"GET",headers:{},mode:"cors",cache:"default"},e,f;c.load=function(b){e=b;f=!1;fetch?fetch(e,c.config).then(function(b){if(f)f=!1;else{if(b.ok&&200<=b.status&&299>=b.status){var e=b.headers.get("Content-Length");e&&(e=parseInt(e),c.dispatchEvent(a.PLAYEASE_CONTENT_LENGTH,{length:e}));return c.pump(b.body.getReader())}c.dispatchEvent(a.ERROR,{message:"Loader error: Invalid http status("+
b.status+" "+b.statusText+")."})}}).catch(function(b){c.dispatchEvent(a.ERROR,{message:"Loader error: "+b.message})}):c.dispatchEvent(a.ERROR,{message:"Loader error: Fetch is not supported."})};c.pump=function(b){return b.read().then(function(e){if(e.done)c.dispatchEvent(a.PLAYEASE_COMPLETE);else{if(f)return f=!1,b.cancel();c.dispatchEvent(a.PLAYEASE_PROGRESS,{data:e.value.buffer});return c.pump(b)}}).catch(function(b){c.dispatchEvent(a.ERROR,{message:"Loader error: Failed to read response data."})})};
c.abort=function(){f=!0};(function(){c.config=h.extend({},b,d);var a=new Headers,e;for(e in c.config.headers)a.append(e,c.config.headers[e]);c.config.headers=a;f=!1})()}})(playease);
(function(d){var h=d.utils;h.filekeeper=function(a){var d=this,c,b,e,f,g;d.append=function(a){c.push(a)};d.save=function(a){a||(a=d.config.filename);b=new Blob(c,{type:d.config.type});e=URL.createObjectURL(b);f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);g=document.createElementNS("http://www.w3.org/1999/xhtml","a");g.href=e;g.download=a;g.dispatchEvent(f);c=[];URL.revokeObjectURL(e)};d.config=h.extend({},{filename:"sample.fragmented.mp4",
type:"video/mpeg"},a);c=[]}})(playease);
(function(d){var h=d.utils,a=d.events;h.timer=function(d,c){function b(){g++;e.dispatchEvent(a.PLAYEASE_TIMER);0<e.repeatCount&&g>=e.repeatCount&&(e.stop(),e.dispatchEvent(a.PLAYEASE_TIMER_COMPLETE))}var e=h.extend(this,new a.eventdispatcher("utils.timer")),f,g=0,l=!1;e.start=function(){!1===l&&(f=setInterval(b,e.delay),l=!0)};e.stop=function(){l&&(clearInterval(f),f=0,l=!1)};e.reset=function(){e.stop();g=0};e.currentCount=function(){return g};e.running=function(){return l};e.delay=d||50;e.repeatCount=
c||0}})(playease);
(function(d){var h=d.utils,a=d.events,p={},c={onError:a.ERROR,onReady:a.PLAYEASE_READY,onMetaData:a.PLAYEASE_METADATA,onBuffer:a.PLAYEASE_BUFFER,onPlay:a.PLAYEASE_PLAY,onPause:a.PLAYEASE_PAUSE,onReload:a.PLAYEASE_RELOAD,onSeek:a.PLAYEASE_SEEK,onStop:a.PLAYEASE_STOP,onReport:a.PLAYEASE_REPORT,onMute:a.PLAYEASE_MUTE,onVolume:a.PLAYEASE_VOLUME,onHD:a.PLAYEASE_HD,onBullet:a.PLAYEASE_BULLET,onFullpage:a.PLAYEASE_FULLPAFE,onFullscreen:a.PLAYEASE_VIEW_FULLSCREEN};d.api=function(b){function e(a){f.dispatchEvent(a.type,a)}
var f=h.extend(this,new a.eventdispatcher("api")),g;f.container=b;f.id=b.id;f.setup=function(a){h.emptyElement(f.container);d.debug=!!a.debug;f.config=a;f.config.id=f.id;f.embedder=new d.embed(f);f.embedder.addGlobalListener(e);f.embedder.embed();return f};f.setEntity=function(a,b){g=a;f.renderName=b;f.play=g.play;f.pause=g.pause;f.reload=g.reload;f.seek=g.seek;f.stop=g.stop;f.report=g.report;f.mute=g.mute;f.volume=g.volume;f.hd=g.hd;f.bullet=g.bullet;f.fullpage=g.fullpage;f.fullscreen=g.fullscreen;
f.resize=g.resize};(function(){h.foreach(c,function(a,b){f[a]=function(a){f.addEventListener(b,a)}})})()};d.api.getInstance=function(a){var b;null==a?a=0:a.nodeType?b=a:"string"===h.typeOf(a)&&(b=document.getElementById(a));if(b){var c=p[b.id];c||(p[a]=c=new d.api(b));return c}return"number"===h.typeOf(a)?p[a]:null};d.api.displayError=function(a,c){}})(playease);(function(d){d.muxer={}})(playease);
(function(d){var h=d.utils,a=d.muxer.AMF={},p=a.types={DOUBLE:0,BOOLEAN:1,STRING:2,OBJECT:3,MOVIE_CLIP:4,NULL:5,UNDEFINED:6,REFERENCE:7,MIXED_ARRAY:8,END_OF_OBJECT:9,ARRAY:10,DATE:11,LONG_STRING:12,UNSUPPORTED:13,RECORD_SET:14,XML:15,TYPED_OBJECT:16,AMF3_DATA:17};a.parse=function(c,b,e){var f={};try{var g=a.parseValue(c,b,e),d=a.parseValue(c,b+g.size,e-g.size);f.key=g.data;f.value=d.data}catch(m){h.log("AMF.parse() failed. Error: "+m)}return f};a.parseObject=function(c,b,e){if(3>e)throw"Data not enough while parsing AMF object.";
for(var f={},g=0,h,d={ended:!1};!d.ended&&g<e;)h=a.parseString(c,b+g,e-g),g+=h.size,d=a.parseValue(c,b+g,e-g),g+=d.size,h.data&&d.data&&(f[h.data]=d.data);return{data:f,size:g,ended:d.ended}};a.parseString=function(a,b,e){if(2>e)throw"Data not enough while parsing AMF string.";var c=0;e=(new DataView(a,b,e)).getUint16(c);c+=2;return{data:0<e?String.fromCharCode.apply(String,new Uint8Array(a,b+c,e)):"",size:c+e}};a.parseLongString=function(a,b,e){if(4>e)throw"Data not enough while parsing AMF long string.";
var c=0;e=(new DataView(a,b,e)).getUint32(c);c+=4;return{data:0<e?String.fromCharCode.apply(String,new Uint8Array(a,b+c,e)):"",size:c+e}};a.parseDate=function(a,b,e){if(10>e)throw"Data not enough while parsing AMF date.";e=new DataView(a,b,e);a=0;b=e.getFloat64(a);a+=8;e=e.getInt16(a);return{data:new Date(b+6E4*e),size:a+2}};a.parseValue=function(c,b,e){if(1>e)throw"Data not enough while parsing AMF value.";var f=new DataView(c,b,e),g=0,d=f.getUint8(g),g=g+1,m=void 0,H=!1;try{switch(d){case p.DOUBLE:m=
f.getFloat64(g);g+=8;break;case p.BOOLEAN:m=f.getUint8(g)?!0:!1;g+=1;break;case p.STRING:var y=a.parseString(c,b+g,e-g),m=y.data,g=g+y.size;break;case p.OBJECT:var D=a.parseObject(c,b+g,e-g),m=D.data,g=g+D.size;break;case p.MIXED_ARRAY:var C;f.getUint32(g);var g=g+4,z=a.parseObject(c,b+g,e-g),m=z.data,g=g+z.size;break;case p.END_OF_OBJECT:m=void 0;H=!0;break;case p.ARRAY:C=f.getUint32(g);g+=4;m=[];for(f=0;f<C;f++){var A=a.parseValue(c,b+g,e-g);m.push(A.data);g+=A.size}break;case p.DATE:var k=a.parseDate(c,
b+g,e-g),m=k.data,g=g+k.size;break;case p.LONG_STRING:var w=a.parseString(c,b+g,e-g),m=w.data,g=g+w.size;break;default:h.log("Skipping unsupported AMF value type("+d+")."),g+=e}}catch(r){h.log("AMF.parseValue() failed. Error: "+r)}return{data:m,size:g,ended:H}}})(playease);
(function(d){var h=function(a){function h(){var a=g-f;if(0>=a)throw"Data not enough while filling current word.";var a=Math.min(4,a),b=new Uint8Array(4);b.set(e.subarray(f,f+a));d=(new DataView(b.buffer)).getUint32(0,!1);f+=a;m=8*a}function c(){var a;for(a=0;a<m;a++)if(0!==(d&2147483648>>>a))return d<<=a,m-=a,a;h();return a+c()}var b=this,e,f,g,d,m;b.readBits=function(a){if(32<a)throw"Data not enough while reading bits of ExpGolomb.";if(a<=m){var b=d>>>32-a;d<<=a;m-=a;return b}b=m?d:0;b>>>=32-m;a-=
m;h();a=Math.min(a,m);var c=d>>>32-a;d<<=a;m-=a;return b<<a|c};b.readBool=function(){return 1===b.readBits(1)};b.readByte=function(){return b.readBits(8)};b.readUEG=function(){var a=c();return b.readBits(a+1)-1};b.readSEG=function(){var a=b.readUEG();return a&1?a+1>>>1:-1*(a>>>1)};b.destroy=function(){e=null};e=a;f=0;g=a.byteLength;m=d=0};(d.muxer.SPS={}).parse=function(a){for(var d=a.byteLength,c=new Uint8Array(d),b=0,e=0;e<d;e++)2<=e&&3===a[e]&&0===a[e-1]&&0===a[e-2]||(c[b]=a[e],b++);a=new Uint8Array(c.buffer,
0,b);a=new h(a);a.readByte();var f=a.readByte();a.readByte();c=a.readByte();a.readUEG();switch(f){case 66:d="Baseline";break;case 77:d="Main";break;case 88:d="Extended";break;case 100:d="High";break;case 110:d="High10";break;case 122:d="High422";break;case 244:d="High444";break;default:d="Unknown"}var c=(c/10).toFixed(1),g=1,b=420,l=[0,420,422,444],e=8;if(100===f||110===f||122===f||244===f||44===f||83===f||86===f||118===f||128===f||138===f||144===f)if(g=a.readUEG(),3===g&&a.readBits(1),3>=g&&(b=l[g]),
e=a.readUEG()+8,a.readUEG(),a.readBits(1),a.readBool())for(f=3!==g?8:12,l=0;l<f;l++)if(a.readBool())for(var m=a,H=6>l?16:64,y=8,D=8,C=0;C<H;C++)0!==D&&(D=m.readSEG(),D=(y+D+256)%256),y=0===D?y:D;a.readUEG();f=a.readUEG();if(0===f)a.readUEG();else if(1===f)for(a.readBits(1),a.readSEG(),a.readSEG(),f=a.readUEG(),l=0;l<f;l++)a.readSEG();a.readUEG();a.readBits(1);var z=a.readUEG(),D=a.readUEG(),A=a.readBits(1);0===A&&a.readBits(1);a.readBits(1);var k=0,w=0,r=0,q=0;a.readBool()&&(k=a.readUEG(),w=a.readUEG(),
r=a.readUEG(),q=a.readUEG());l=f=1;y=0;m=!0;C=H=0;if(a.readBool()){if(a.readBool()){var v=a.readByte(),I=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],u=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<v&&16>v?(f=I[v-1],l=u[v-1]):255===v&&(f=a.readByte()<<8|a.readByte(),l=a.readByte()<<8|a.readByte())}a.readBool()&&a.readBool();a.readBool()&&(a.readBits(4),a.readBool()&&a.readBits(24));a.readBool()&&(a.readUEG(),a.readUEG());a.readBool()&&(y=a.readBits(32),H=a.readBits(32),m=a.readBool(),C=2*y,y=
H/C)}v=1;if(1!==f||1!==l)v=f/l;0===g?(I=1,g=2-A):(I=3===g?1:2,g=(1===g?2:1)*(2-A));z=16*(z+1)-(k+w)*I;g=16*(2-A)*(D+1)-(r+q)*g;D=Math.ceil(z*v);a.destroy();switch(b){case 420:a="4:2:0";break;case 422:a="4:2:2";break;case 444:a="4:4:4";break;default:a="Unknown"}return{profile_string:d,level_string:c,bit_depth:e,chroma_format:b,chroma_format_string:a,frame_rate:{fixed:m,fps:y,fps_den:C,fps_num:H},sar_ratio:{width:f,height:l},codec_size:{width:z,height:g},present_size:{width:D,height:g}}}})(playease);
(function(d){var h=d.utils,a=d.events;d=d.muxer;var p=d.SPS,c={AUDIO:8,VIDEO:9,SCRIPT:18},b={KEYFRAME:1,INTER_FRAME:2,DISPOSABLE_INTER_FRAME:3,GENERATED_KEYFRAME:4,INFO_OR_COMMAND_FRAME:5},e={types:{SEQUENCE_HEADER:0,NALU:1,END_OF_SEQUENCE:2}},f={types:{SPECIFIC_CONFIG:0,RAW_FRAME_DATA:1},audioObjectTypes:{NULL:0,AAC_MAIN:1,AAC_LC:2,AAC_SSR:3,AAC_LTP:4,AAC_HE_OR_SBR:5,AAC_SCALABLE:6},samplingRates:[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350]},g=[5500,11025,22050,44100],l=
function(){var a=this;a.isComplete=function(){var b=!1===a.hasAudio||!0===a.hasAudio&&null!=a.audioCodec&&null!=a.audioSampleRate&&null!=a.audioChannelCount,c=!1===a.hasVideo||!0===a.hasVideo&&null!=a.videoCodec&&null!=a.width&&null!=a.height&&null!=a.fps&&null!=a.profile&&null!=a.level&&null!=a.chromaFormat&&null!=a.sarNum&&null!=a.sarDen;return null!=a.mimeType&&null!=a.duration&&null!=a.metadata&&null!=a.hasKeyframesIndex&&b&&c};a.isSeekable=function(){return!0===a.hasKeyframesIndex};a.getNearestKeyframe=
function(b){if(null==a.keyframesIndex)return null;var c=a.keyframesIndex,e=c.times,f=0,d=e.length-1,g,h=0,l=d;b<e[0]&&(f=0,h=l+1);for(;h<=l;)if(g=h+Math.floor((l-h)/2),g===d||b>=e[g]&&b<e[g+1]){f=g;break}else e[g]<b?h=g+1:l=g-1;b=f;return{index:b,milliseconds:c.times[b],fileposition:c.filepositions[b]}}};d.flv=function(d){var m=h.extend(this,new a.eventdispatcher("muxer.flv")),y,D,C,z,A,k,w,r,q,v,I,u,E,x,B,t,n,J;m.reset=function(){D=y=0;C=1;k.position=0;I=[];u=new l;B={type:"video",id:1,sequenceNumber:0,
samples:[],length:0};t={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};J=n=0};m.parse=function(b){var e=new Uint8Array(b),f=0;if(1==C){if(13>b.byteLength)return 0;f=m.probe(b);C=4;var d=h.getUint32(e,f);d&&h.log("First tag size "+d);f+=4;C=2}for(;f<b.byteLength;)switch(C){case 2:r[k.position++]=e[f++];11==k.position&&(v=r[1]<<16|r[2]<<8|r[3],C=3);break;case 3:var J=r[0],n=r[1]<<16|r[2]<<8|r[3],t=r[4]<<16|r[5]<<8|r[6]|r[7]<<24,d=r[8]<<16|r[9]<<8|r[10];0!=d&&h.log("Unknown stream ID "+d);d=
{tag:J,data:b,offset:f,size:n};switch(J){case c.AUDIO:d.timestamp=t;v==n&&(d.format=e[f]>>>4,d.rate=g[(e[f]&12)>>>2],d.samplesize=(e[f]&2)>>>1,d.sampletype=e[f]&1);break;case c.VIDEO:d.timestamp=t;v==n&&(d.frametype=e[f]>>>4,d.codec=e[f]&15);break;case c.SCRIPT:d.hasAudio=z,d.hasVideo=A}J=Math.min(b.byteLength-f,v);v-=J;f+=J;if(v){I.push(d);break}if(I.length){d=I[0];n=new Uint8Array(n);for(n.position=0;I.length;)t=I.shift(),J=new Uint8Array(t.data.slice(t.offset)),n.set(J,n.position),n.position+=
t.data.byteLength-t.offset;J=new Uint8Array(b.slice(0,f));n.set(J,n.position);d.data=n.buffer;d.offset=0}C=4;w.position=0;m.dispatchEvent(a.PLAYEASE_FLV_TAG,d);break;case 4:q[w.position++]=e[f++];4==w.position&&(n=r[1]<<16|r[2]<<8|r[3],d=h.getUint32(q),d!=11+n&&h.log("prevTagSize("+d+") is not equals to "+(11+n)+"."),C=2,k.position=0);break;default:h.log("Unknown parsing state "+C);return}};m.parseAVCVideoPacket=function(c,f,d,g,k){if(5>d)m.dispatchEvent(a.ERROR,{message:"Data not enough while parsing AVC video packet."});
else{var t=new DataView(c,f,d),l=1,G=t.getUint8(l++),t=t.getUint8(l++)<<16|t.getUint8(l++)<<8|t.getUint8(l++);switch(G){case e.types.SEQUENCE_HEADER:t=f+l;f=d-l;if(7>f)m.dispatchEvent(a.ERROR,{message:"Data not enough while parsing AVC decoder configuration record."});else if(d=B,d={type:d.type,id:d.id,timescale:1E3,duration:1E3*E.duration||0},l=new DataView(c,t,f),G=0,k=l.getUint8(G++),g=l.getUint8(G++),l.getUint8(G++),l.getUint8(G++),1!=k||0==g)m.dispatchEvent(a.ERROR,{message:"Invalid AVCDecoderConfigurationRecord."});
else if(n=1+(l.getUint8(G++)&3),3!=n&&4!=n)m.dispatchEvent(a.ERROR,{message:"Invalid lengthSizeMinusOne "+n+"."});else{g=l.getUint8(G++)&31;for(k=0;k<g;k++){var r=l.getUint16(G),G=G+2;if(0!=r){var q=new Uint8Array(c,t+G,r),G=G+r,r=p.parse(q),F=d,v=r;F.codecWidth=v.codec_size.width;F.codecHeight=v.codec_size.height;F.presentWidth=v.present_size.width;F.presentHeight=v.present_size.height;F.profile=v.profile_string;F.level=v.level_string;F.bitDepth=v.bit_depth;F.chromaFormat=v.chroma_format;F.sarRatio=
v.sar_ratio;F.frameRate=v.frame_rate;if(!1===v.frame_rate.fixed||0===v.frame_rate.fps_num||0===v.frame_rate.fps_den)F.frameRate=x;F.refSampleDuration=Math.floor(F.frameRate.fps_den/F.frameRate.fps_num*F.timescale);for(var q=q.subarray(1,4),v="avc1.",w=0;3>w;w++){var K=q[w].toString(16);2>K.length&&(K="0"+K);v+=K}F.codec=v;F=d;u.hasAudio=z;u.hasVideo=A;u.duration=1E3*E.duration;u.metadata=E;u.width=F.codecWidth;u.height=F.codecHeight;u.fps=F.frameRate.fps;u.profile=F.profile;u.level=F.level;u.chromaFormat=
r.chroma_format_string;u.sarNum=F.sarRatio.width;u.sarDen=F.sarRatio.height;u.videoCodec=F.codec;u.mimeType='video/mp4; codecs="'+u.videoCodec+(u.hasAudio&&u.audioCodec?","+u.audioCodec:"")+'"';m.dispatchEvent(a.PLAYEASE_MEDIA_INFO,{info:u})}}g=l.getUint8(G++);for(k=0;k<g;k++)r=l.getUint16(G),G+=2,0!=r&&(new Uint8Array(c,t+G,r),G+=r);d.avcc=new Uint8Array(f);d.avcc.set(new Uint8Array(c,t,f),0);m.dispatchEvent(a.PLAYEASE_AVC_CONFIG_RECORD,{data:d})}break;case e.types.NALU:a:{f+=l;d-=l;l=new DataView(c,
f,d);G=[];g=J+g;k=k==b.KEYFRAME;for(F=r=0;r<d;){if(r+4>=d){m.dispatchEvent(a.ERROR,{message:"Data not enough for next NALU."});break a}q=l.getUint32(r);3==q&&(q>>>=8);if(q>d-n){h.log("Malformed Nalus near timestamp "+g+".");break a}v=l.getUint8(r+n)&31;v==b.INFO_OR_COMMAND_FRAME&&(k=!0);w=new Uint8Array(c,f+r,n+q);F+=w.byteLength;G.push({type:v,data:w});r+=n+q}0!=G.length&&(B.samples.push({units:G,length:F,isKeyframe:k,cts:t,dts:g,pts:t+g}),B.length+=F,m.dispatchEvent(a.PLAYEASE_AVC_SAMPLE,{data:B}))}break;
case e.types.END_OF_SEQUENCE:m.dispatchEvent(a.PLAYEASE_END_OF_STREAM);break;default:m.dispatchEvent(a.ERROR,{message:"Unknown AVC video packet type "+G+"."})}}};m.parseAACAudioPacket=function(b,c,e,d,g,n,h){if(2>e)m.dispatchEvent(a.ERROR,{message:"Data not enough while parsing AAC audio packet."});else switch(g=1,n=(new DataView(b,c,e)).getUint8(g++),n){case f.types.SPECIFIC_CONFIG:a:if(d=c+g,e-=g,2>e)m.dispatchEvent(a.ERROR,{message:"Data not enough while parsing AAC audio specific config."});else if(n=
new DataView(b,d,e),h=0,d=n.getUint8(h)>>>3,b=(n.getUint8(h++)&7)<<1|n.getUint8(h)>>>7,0>b||b>=f.samplingRates.length)m.dispatchEvent(a.ERROR,{message:"Invalid AAC sampling frequency index.",index:b});else if(c=t,c={type:c.type,id:c.id,timescale:1E3,duration:1E3*E.duration||0},c.audioSampleRate=f.samplingRates[b],c.refSampleDuration=Math.floor(1024/c.audioSampleRate*c.timescale),g=(n.getUint8(h)&120)>>>3,0>g||8<=g)m.dispatchEvent(a.ERROR,{message:"Invalid AAC channel configuration.",config:g});else{if(d===
f.audioObjectTypes.AAC_HE_OR_SBR){if(3>e){m.dispatchEvent(a.ERROR,{message:"Data not enough while parsing AAC_HE_OR_SBR audio specific config."});break a}n.getUint8(h++);n.getUint8(h);n.getUint8(h)}e=self.navigator.userAgent.toLowerCase();-1!==e.indexOf("firefox")?b>=f.audioObjectTypes.AAC_SCALABLE?(d=f.audioObjectTypes.AAC_HE_OR_SBR,e=b-3,n=Array(4)):(d=f.audioObjectTypes.AAC_LC,e=b,n=Array(2)):-1!==e.indexOf("android")?(d=f.audioObjectTypes.AAC_LC,e=b,n=Array(2)):(d=f.audioObjectTypes.AAC_HE_OR_SBR,
e=b,n=Array(4),b>=f.audioObjectTypes.AAC_SCALABLE?e=b-3:1===g&&(d=f.audioObjectTypes.AAC_LC,e=b,n=Array(2)));n[0]=d<<3;n[0]|=(b&15)>>>1;n[1]=(b&15)<<7;n[1]|=(g&15)<<3;d===f.audioObjectTypes.AAC_HE_OR_SBR&&(n[1]|=(e&15)>>>1,n[2]=(e&1)<<7,n[2]|=8,n[3]=0);c.channelCount=g;c.codec="mp4a.40."+d;c.config=n;u.audioCodec=c.codec;u.audioSampleRate=c.audioSampleRate;u.audioChannelCount=c.channelCount;u.mimeType='video/mp4; codecs="'+u.videoCodec+(u.hasAudio&&u.audioCodec?","+u.audioCodec:"")+'"';m.dispatchEvent(a.PLAYEASE_MEDIA_INFO,
{info:u});m.dispatchEvent(a.PLAYEASE_AAC_SPECIFIC_CONFIG,{data:c})}break;case f.types.RAW_FRAME_DATA:b=new Uint8Array(b,c+g,e-g);e=J+d;t.samples.push({unit:b,dts:e,pts:e});t.length+=b.length;m.dispatchEvent(a.PLAYEASE_AAC_SAMPLE,{data:t});break;default:m.dispatchEvent(a.ERROR,{message:"Unknown AAC audio packet type "+n+"."})}};m.probe=function(a){a=new Uint8Array(a);if(70!==a[0]||76!==a[1]||86!==a[2]||1!==a[3])return 0;z=0!==(a[4]&4)>>>2;A=0!==(a[4]&1);if(!z&&!A)return 0;a=h.getUint32(a,5);return 9>
a?0:a};m.setMetaData=function(a){E=a;"number"===typeof E.audiodatarate&&(u.audioDataRate=E.audiodatarate);"number"===typeof E.videodatarate&&(u.videoDataRate=E.videodatarate);if("number"===typeof E.framerate&&(a=Math.floor(1E3*E.framerate),0<a)){var b=a/1E3;x.fixed=!0;x.fps=b;x.fps_num=a;x.fps_den=1E3;u.fps=b}u.hasKeyframesIndex="object"===typeof E.keyframes?!0:!1};m.getMetaData=function(){return E};m.offset=function(){return y};m.length=function(){return D};m.destroy=function(){};m.config=h.extend({},
{},d);D=y=0;C=1;k=new ArrayBuffer(11);k.position=0;r=new Uint8Array(k);w=new ArrayBuffer(4);w.position=0;q=new Uint8Array(w);v=0;I=[];u=new l;x={fixed:!0,fps:23.976,fps_num:23976,fps_den:1E3};B={type:"video",id:1,sequenceNumber:0,samples:[],length:0};t={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};J=n=0};d.flv.TAG=c;d.flv.FORMATS={LINEAR_PCM_PLATFORM_ENDIAN:0,ADPCM:1,MP3:2,LINEAR_PCM_LITTLE_ENDIAN:3,NELLYMOSER_16_kHz_MONO:4,NELLYMOSER_8_kHz_MONO:5,NELLYMOSER:6,G_711_A_LAW_LOGARITHMIC_PCM:7,
G_711_MU_LAW_LOGARITHMIC_PCM:8,RESERVED:9,AAC:10,SPEEX:11,MP3_8_kHz:14,DEVICE_SPECIFIC_SOUND:15};d.flv.FRAMES=b;d.flv.CODECS={JPEG:1,H263:2,SCREEN_VIDEO:3,VP6:4,VP6_ALPHA:5,SCREEN_VIDEO_2:6,AVC:7};d.flv.AVC=e;d.flv.AAC=f})(playease);
(function(d){var h=d.utils,a=d.events;d=d.muxer;var p=d.flv.AAC,c,b,e,f,g,l,m,H,y;c=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]);b=new Uint8Array([0,0,0,0,0,0,0,1]);e=new Uint8Array([0,0,0,0,0,0,0,0]);f=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);g=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);l=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,
108,101,114,0]);m=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);H=new Uint8Array([0,0,0,0,0,0,0,0]);y=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]);p.getSilentFrame=function(a){return 1===a?new Uint8Array([0,200,0,128,35,128]):2===a?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===a?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===a?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===a?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,
0,33,144,2,56]):6===a?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):null};var D=function(a,b,c,e,f){this.dts=a;this.pts=b;this.duration=c;this.originalDts=e;this.isSyncPoint=f;this.fileposition=null},C=function(){var a=[];this.appendSyncPoint=function(b){b.isSyncPoint=!0;a.push(b)}},z=function(a){function b(){e=[];f=-1}var c=this,e,f;c.reset=b;c.searchNearestSegmentBefore=function(a){if(0===e.length)return-2;var b=e.length-1,c,f=0,d=b,g=0;if(a<e[0].originalBeginDts)return-1;
for(;f<=d;){c=f+Math.floor((d-f)/2);if(c===b||a>e[c].lastSample.originalDts&&a<e[c+1].originalBeginDts){g=c;break}e[c].originalBeginDts<a?f=c+1:d=c-1}return g};c.searchNearestSegmentAfter=function(a){return c.searchNearestSegmentBefore(a)+1};c.append=function(a){var b=f,d=0;-1!==b&&b<e.length&&a.originalBeginDts>=e[b].lastSample.originalDts&&(b===e.length-1||b<e.length-1&&a.originalBeginDts<e[b+1].originalBeginDts)?d=b+1:0<e.length&&(d=c.searchNearestSegmentBefore(a.originalBeginDts)+1);f=d;e.splice(d,
0,a)};c.getLastSegmentBefore=function(a){a=c.searchNearestSegmentBefore(a);return 0>a?null:e[a]};c.getLastSampleBefore=function(a){a=c.getLastSegmentBefore(a);return null==a?null:a.lastSample};c.getLastSyncPointBefore=function(a){a=c.searchNearestSegmentBefore(a);for(var b=e[a].syncPoints;0===b.length&&a--;)b=e[a].syncPoints;return 0>=b.length?null:b[b.length-1]};c.isEmpty=function(){return 0===e.length};c.clear=function(){e=[];f=-1};b()};d.mp4=function(d){var k=h.extend(this,new a.eventdispatcher("muxer.mp4")),
A={islive:!1},r,q,v,I,u,E,x,B,t={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};k.reset=function(){r=0;v=q=void 0;E.reset();x.reset();B=!1};k.getInitSegment=function(b){var e=k.box(t.ftyp,c),f=k.moov(b),d=new Uint8Array(e.byteLength+f.byteLength);d.set(e,0);d.set(f,e.byteLength);
k.dispatchEvent(a.PLAYEASE_MP4_INIT_SEGMENT,{tp:b.type,data:d})};k.getVideoSegment=function(b){var c=b.samples,e=void 0,f=-1,d=-1,g;if(c&&0!==c.length){g=0;var n=8+b.length,h=new Uint8Array(n);h[g++]=n>>>24&255;h[g++]=n>>>16&255;h[g++]=n>>>8&255;h[g++]=n&255;h.set(t.mdat,g);g+=4;for(var n=[],l=new C;c.length;){var m=c.shift(),p=m.isKeyframe,v=m.dts-r;if(void 0==e)if(void 0==q)if(E.isEmpty())e=0;else if(e=E.getLastSampleBefore(v),null!=e){var u=v-(e.originalDts+e.duration);3>=u&&(u=0);e=v-(e.dts+e.duration+
u)}else e=0;else e=v-q;var u=v-e,A=m.cts,w=u+A;-1===f&&(f=u,d=w);for(var x=0;m.units.length;){var B=m.units.shift().data;h.set(B,g);g+=B.byteLength;x+=B.byteLength}B=1<=c.length?c[0].dts-r-e-u:1<=n.length?n[n.length-1].duration:I.refSampleDuration+e;if(p){var y=new D(u,w,B,m.dts,!0);y.fileposition=m.fileposition;l.appendSyncPoint(y)}n.push({dts:u,pts:w,cts:A,size:x,isKeyframe:p,duration:B,originalDts:v,flags:{isLeading:0,dependsOn:p?2:1,isDependedOn:p?1:0,hasRedundancy:0,isNonSync:p?0:1}})}m=n[n.length-
1];c=m.dts+m.duration;g=m.pts+m.duration;q=c;l.beginDts=f;l.endDts=c;l.beginPts=d;l.endPts=g;l.originalBeginDts=n[0].originalDts;l.originalEndDts=m.originalDts+m.duration;l.firstSample=new D(n[0].dts,n[0].pts,n[0].duration,n[0].originalDts,n[0].isKeyframe);l.lastSample=new D(m.dts,m.pts,m.duration,m.originalDts,m.isKeyframe);k.config.islive||E.append(l);b.samples=n;b.sequenceNumber++;f=k.moof(b,f);b.samples=[];b.length=0;k.dispatchEvent(a.PLAYEASE_MP4_SEGMENT,{tp:"video",data:_mergeBoxes(f,h),sampleCount:n.length,
info:l})}};k.getAudioSegment=function(b){var c=b.samples,e=void 0,f=-1,d;d=!1;var g=-1;if(c&&0!==c.length){var n=0,l=8+b.length,m=new Uint8Array(l);m[n++]=l>>>24&255;m[n++]=l>>>16&255;m[n++]=l>>>8&255;m[n++]=l&255;m.set(t.mdat,n);for(var n=n+4,q=[];c.length;){var A=c.shift(),w=A.unit,y=A.dts-r;if(void 0==e)if(void 0==v)if(x.isEmpty())e=0,B&&!E.isEmpty()&&(d=!0);else if(e=x.getLastSampleBefore(y),null!=e){var z=y-(e.originalDts+e.duration);3>=z&&(z=0);e=y-(e.dts+e.duration+z)}else e=0;else e=y-v;z=
y-e;if(d){var H=E.getLastSegmentBefore(y);null!=H&&H.beginDts<z?(g=z-H.beginDts,z=H.beginDts):d=!1}-1===f&&(f=z);d?(d=!1,c.unshift(A),A=z,w=g,y=p.getSilentFrame(u.channelCount),null==y?(h.log("Cannot generate silent aac frame, channelCount: "+u.channelCount+"."),A=null):A={unit:y,mp4Sample:{dts:A,pts:A,cts:0,size:y.byteLength,duration:w,originalDts:A,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}},null!=A&&(w=A.unit,q.push(A.mp4Sample),n=0,l+=w.byteLength,m=new Uint8Array(l),m[n++]=
l>>>24&255,m[n++]=l>>>16&255,m[n++]=l>>>8&255,m[n++]=l&255,m.set(t.mdat,n),n+=4,m.set(w,n),n+=w.byteLength)):(q.push({dts:z,pts:z,cts:0,size:w.byteLength,duration:1<=c.length?c[0].dts-r-e-z:1<=q.length?q[q.length-1].duration:u.refSampleDuration+e,originalDts:y,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),m.set(w,n),n+=w.byteLength)}g=q[q.length-1];v=d=g.dts+g.duration;c=new C;c.beginDts=f;c.endDts=d;c.beginPts=f;c.endPts=d;c.originalBeginDts=q[0].originalDts;c.originalEndDts=g.originalDts+
g.duration;c.firstSample=new D(q[0].dts,q[0].pts,q[0].duration,q[0].originalDts,!1);c.lastSample=new D(g.dts,g.pts,g.duration,g.originalDts,!1);k.config.islive||x.append(c);b.samples=q;b.sequenceNumber++;f=k.moof(b,f);b.samples=[];b.length=0;k.dispatchEvent(a.PLAYEASE_MP4_SEGMENT,{tp:"audio",data:_mergeBoxes(f,m),sampleCount:q.length,info:c})}};_mergeBoxes=function(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);c.set(a,0);c.set(b,a.byteLength);return c};k.setVideoMeta=function(a){I=a};k.setAudioMeta=
function(a){u=a};k.box=function(a){for(var b=8,c=Array.prototype.slice.call(arguments,1),e=0;e<c.length;e++)b+=c[e].byteLength;var f=new Uint8Array(b),d=0;f[d++]=b>>>24&255;f[d++]=b>>>16&255;f[d++]=b>>>8&255;f[d++]=b&255;f.set(a,d);d+=4;for(e=0;e<c.length;e++)f.set(c[e],d),d+=c[e].byteLength;return f};k.moov=function(a){var b=k.mvhd(a.timescale,a.duration),c=k.trak(a);a=k.mvex(a);return k.box(t.moov,b,c,a)};k.mvhd=function(a,b){return k.box(t.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,a>>>24&255,
a>>>16&255,a>>>8&255,a&255,b>>>24&255,b>>>16&255,b>>>8&255,b&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))};k.trak=function(a){return k.box(t.trak,k.tkhd(a),k.mdia(a))};k.tkhd=function(a){var b=a.id,c=a.duration,e=a.presentWidth;a=a.presentHeight;return k.box(t.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,b>>>24&255,b>>>16&255,b>>>8&255,b&255,0,0,0,0,c>>>24&255,c>>>16&
255,c>>>8&255,c&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,e>>>8&255,e&255,0,0,a>>>8&255,a&255,0,0]))};k.mdia=function(a){return k.box(t.mdia,k.mdhd(a),k.hdlr(a),k.minf(a))};k.mdhd=function(a){var b=a.timescale;a=a.duration;return k.box(t.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,b>>>24&255,b>>>16&255,b>>>8&255,b&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255,85,196,0,0]))};k.hdlr=function(a){return k.box(t.hdlr,"audio"===a.type?l:g)};
k.minf=function(a){var b;b="audio"===a.type?k.box(t.smhd,H):k.box(t.vmhd,y);return k.box(t.minf,b,k.dinf(),k.stbl(a))};k.dinf=function(){return k.box(t.dinf,k.box(t.dref,m))};k.stbl=function(a){return k.box(t.stbl,k.stsd(a),k.box(t.stts,e),k.box(t.stsc,e),k.box(t.stsz,f),k.box(t.stco,e))};k.stsd=function(a){return"audio"===a.type?k.box(t.stsd,b,k.mp4a(a)):k.box(t.stsd,b,k.avc1(a))};k.mp4a=function(a){var b=a.audioSampleRate,b=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,a.channelCount,0,16,0,
0,0,0,b>>>8&255,b&255,0,0]);return k.box(t.mp4a,b,k.esds(a))};k.esds=function(a){a=a.config;var b=a.length;a=new Uint8Array([0,0,0,0,3,23+b,0,1,0,4,15+b,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([b]).concat(a).concat([6,1,2]));return k.box(t.esds,a)};k.avc1=function(a){var b=a.avcc,c=a.codecWidth;a=a.codecHeight;c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>>8&255,c&255,a>>>8&255,a&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return k.box(t.avc1,c,k.box(t.avcC,b))};k.mvex=function(a){return k.box(t.mvex,k.trex(a))};k.trex=function(a){a=a.id;a=new Uint8Array([0,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,a&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return k.box(t.trex,a)};k.moof=function(a,b){return k.box(t.moof,k.mfhd(a.sequenceNumber),k.traf(a,b))};k.mfhd=function(a){a=new Uint8Array([0,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,a&255]);return k.box(t.mfhd,a)};k.traf=function(a,b){var c=a.id,c=k.box(t.tfhd,
new Uint8Array([0,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,c&255]));b=k.box(t.tfdt,new Uint8Array([0,0,0,0,b>>>24&255,b>>>16&255,b>>>8&255,b&255]));var e=k.sdtp(a);a=k.trun(a,e.byteLength+16+16+8+16+8+8);return k.box(t.traf,c,b,a,e)};k.sdtp=function(a){a=a.samples||[];for(var b=a.length,c=new Uint8Array(4+b),e=0;e<b;e++){var f=a[e].flags;c[e+4]=f.isLeading<<6|f.dependsOn<<4|f.isDependedOn<<2|f.hasRedundancy}return k.box(t.sdtp,c)};k.trun=function(a,b){a=a.samples||[];var c=a.length,e=12+16*c,f=new Uint8Array(e);
b+=8+e;f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,c&255,b>>>24&255,b>>>16&255,b>>>8&255,b&255],0);for(b=0;b<c;b++){var e=a[b].duration,d=a[b].size,g=a[b].flags,h=a[b].cts;f.set([e>>>24&255,e>>>16&255,e>>>8&255,e&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,g.isLeading<<2|g.dependsOn,g.isDependedOn<<6|g.hasRedundancy<<4|g.isNonSync,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*b)}return k.box(t.trun,f)};k.mdat=function(a){return k.box(t.mdat,a)};k.destroy=function(){};(function(){k.config=h.extend({},
A,d);for(var a in t)t[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)];r=0;E=new z("video");x=new z("audio");B=!1})()}})(playease);(function(d){d.core={}})(playease);(function(d){d.core.states={BUFFERING:"buffering",PLAYING:"playing",SEEKING:"seeking",PAUSED:"paused",STOPPED:"stopped",ERROR:"error"}})(playease);(function(d){d.core.skins={}})(playease);(function(d){d.core.skins.modes={DEFAULT:"def"}})(playease);
(function(d){var h=d.utils,a=d.events;d=d.core.skins;var p=d.modes,c=h.css,b="pla-skin";d.def=function(e){var f=h.extend(this,new a.eventdispatcher("skins.def")),d=e.width,l=e.height;f.resize=function(a,b){h.log("Resizing to "+a+", "+b);d=parseInt(a);l=parseInt(b)};f.name=p.DEFAULT;b+="-"+f.name;c(".pla-wrapper",{width:d+"px",height:l+40+"px","box-shadow":"0 1px 1px rgba(0, 0, 0, 0.05)"});c(".pla-wrapper.fp, .pla-wrapper.fs",{width:"100%",height:"100%"});c(".pla-wrapper *",{margin:"0",padding:"0",
"font-family":"\u5fae\u8f6f\u96c5\u9ed1,arial,sans-serif","font-size":"12px","font-weight":"normal","box-sizing":"content-box"});c("."+b+" .pldevider",{padding:"0 2px","line-height":"40px",color:"#FFF",cursor:"default"});c("."+b+" .pllabel",{"line-height":"40px",color:"#FFF",cursor:"default"});c("."+b+" .plbutton",{cursor:"pointer"});c("."+b+" .plslider",{cursor:"pointer"});c("."+b+" .pla-render",{width:"100%",height:"calc(100% - 40px)",position:"relative",background:"black"});c("."+b+".fs .pla-render",
{height:"100%"});c("."+b+" .pla-render video",{width:"100%",height:"100%"});c("."+b+" .pla-controls",{width:"100%",height:"40px",background:"#222",position:"relative"});c("."+b+".fs .pla-controls",{top:"-40px"});c("."+b+" .pla-controls > div, ."+b+" .pla-controls > div > *",{"float":"left"});c("."+b+" .pla-controls .plcenter",{});c("."+b+" .pla-controls .plright",{"float":"right"});c("."+b+" .pla-controls .plslider.time",{width:"100%",height:"2px",position:"absolute",top:"-2px",display:"none"});c("."+
b+" .pla-controls:hover .plslider.time",{height:"10px",top:"-10px"});c("."+b+" .pla-controls .plslider.time .plrail",{width:"1px",height:"100%",position:"absolute",top:"0"});c("."+b+" .pla-controls .plslider.time .plrail.bg",{width:"100%",background:"#CCC",filter:"alpha(opacity=50)",opacity:"0.5"});c("."+b+" .pla-controls .plslider.time .plrail.buf",{background:"#707070"});c("."+b+" .pla-controls .plslider.time .plrail.pro",{background:"#00A0E9"});c("."+b+" .pla-controls .plplay",{"margin-left":"8px",
width:"26px",height:"40px",background:"url(/webplayer/playease/skins/playButton.png) no-repeat center"});c("."+b+" .pla-controls .plplay:hover",{background:"url(/webplayer/playease/skins/playButtonOver.png) no-repeat center"});c("."+b+" .pla-controls .plpause",{"margin-left":"8px",width:"26px",height:"40px",display:"none",background:"url(/webplayer/playease/skins/pauseButton.png) no-repeat center"});c("."+b+" .pla-controls .plpause:hover",{background:"url(/webplayer/playease/skins/pauseButtonOver.png) no-repeat center"});
c("."+b+" .pla-controls .plreload",{"margin-right":"8px",width:"26px",height:"40px",background:"url(/webplayer/playease/skins/reloadButton.png) no-repeat center"});c("."+b+" .pla-controls .plreload:hover",{background:"url(/webplayer/playease/skins/reloadButtonOver.png) no-repeat center"});c("."+b+" .pla-controls .plstop",{"margin-right":"8px",width:"26px",height:"40px",display:"none",background:"url(/webplayer/playease/skins/stopButton.png) no-repeat center"});c("."+b+" .pla-controls .plstop:hover",
{background:"url(/webplayer/playease/skins/stopButtonOver.png) no-repeat center"});c("."+b+".playing .pla-controls .plplay, ."+b+".vod .pla-controls .plreload, ."+b+".vod .pla-controls .plalt, ."+b+" .pla-controls .plelapsed, ."+b+" .pla-controls .pldevider, ."+b+" .pla-controls .plduration",{display:"none"});c("."+b+".vod .pla-controls .plslider.time, ."+b+".playing .pla-controls .plpause, ."+b+".vod .pla-controls .plstop, ."+b+".vod .pla-controls .plelapsed, ."+b+".vod .pla-controls .pldevider, ."+
b+".vod .pla-controls .plduration",{display:"block"});c("."+b+" .pla-controls .plreport",{"margin-right":"4px",width:"20px",height:"40px",background:"url(/webplayer/playease/skins/reportButton.png) no-repeat center"});c("."+b+" .pla-controls .plreport:hover",{background:"url(/webplayer/playease/skins/reportButtonOver.png) no-repeat center"});c("."+b+" .pla-controls .plvolume",{width:"25px",height:"40px",background:"url(/webplayer/playease/skins/volumeButton.png) no-repeat center"});c("."+b+" .pla-controls .plvolume:hover",
{background:"url(/webplayer/playease/skins/volumeButtonOver.png) no-repeat center"});c("."+b+" .pla-controls .plvolume.mute",{background:"url(/webplayer/playease/skins/volumeMuteButton.png) no-repeat center"});c("."+b+" .pla-controls .plvolume.mute:hover",{background:"url(/webplayer/playease/skins/volumeMuteButtonOver.png) no-repeat center"});c("."+b+" .pla-controls .plslider.volume",{margin:"15px 4px 0 0",width:"60px",height:"12px",position:"relative"});c("."+b+" .pla-controls .plslider.volume .plrail",
{width:"100%",height:"33%",position:"absolute",top:"33%"});c("."+b+" .pla-controls .plslider.volume .plrail.buf",{background:"#909090"});c("."+b+" .pla-controls .plslider.volume:hover .plrail.buf",{background:"#B0B0B0"});c("."+b+" .pla-controls .plslider.volume .plrail.pro",{width:"80%",background:"#E6E6E6"});c("."+b+" .pla-controls .plslider.volume:hover .plrail.pro",{background:"#FFFFFF"});c("."+b+" .pla-controls .plhd",{"margin-right":"4px",width:"48px",height:"40px",background:"url(/webplayer/playease/skins/hdButton.png) no-repeat center"});
c("."+b+" .pla-controls .plhd:hover",{background:"url(/webplayer/playease/skins/hdButtonOver.png) no-repeat center"});c("."+b+" .pla-controls .plbullet",{"margin-right":"4px",width:"58px",height:"40px",background:"url(/webplayer/playease/skins/bulletButton.png) no-repeat center"});c("."+b+" .pla-controls .plbullet.off",{background:"url(/webplayer/playease/skins/bulletOffButton.png) no-repeat center"});c("."+b+" .pla-controls .plfullpage",{"margin-right":"4px",width:"25px",height:"40px",background:"url(/webplayer/playease/skins/fullpageButton.png) no-repeat center"});
c("."+b+" .pla-controls .plfullpage:hover",{background:"url(/webplayer/playease/skins/fullpageButtonOver.png) no-repeat center"});c("."+b+".fp .pla-controls .plfullpage",{display:"none"});c("."+b+" .pla-controls .plfpexit",{"margin-right":"4px",width:"25px",height:"40px",display:"none",background:"url(/webplayer/playease/skins/fullpageExitButton.png) no-repeat center"});c("."+b+" .pla-controls .plfpexit:hover",{background:"url(/webplayer/playease/skins/fullpageExitButtonOver.png) no-repeat center"});
c("."+b+".fp .pla-controls .plfpexit",{display:"block"});c("."+b+" .pla-controls .plfullscreen",{"margin-right":"10px",width:"25px",height:"40px",background:"url(/webplayer/playease/skins/fullscreenButton.png) no-repeat center"});c("."+b+" .pla-controls .plfullscreen:hover",{background:"url(/webplayer/playease/skins/fullscreenButtonOver.png) no-repeat center"});c("."+b+".fs .pla-controls .plfullscreen",{display:"none"});c("."+b+" .pla-controls .plfsexit",{"margin-right":"10px",width:"25px",height:"40px",
display:"none",background:"url(/webplayer/playease/skins/fullscreenExitButton.png) no-repeat center"});c("."+b+" .pla-controls .plfsexit:hover",{background:"url(/webplayer/playease/skins/fullscreenExitButtonOver.png) no-repeat center"});c("."+b+".fs .pla-controls .plfsexit",{display:"block"})}})(playease);(function(d){d.core.renders={}})(playease);(function(d){d.core.renders.modes={DEFAULT:"def",FLV:"flv"}})(playease);
(function(d){var h=d.utils,a=d.events;d=d.core.renders;var p=d.modes;d.def=function(c,b){var e=h.extend(this,new a.eventdispatcher("renders.def")),f;e.setup=function(){e.dispatchEvent(a.PLAYEASE_READY,{id:e.config.id})};e.play=function(a){a&&(b.url=a);if(a||f.src!=b.url)f.pause(),f.src=b.url,f.load();f.play()};e.pause=function(){f.pause()};e.reload=function(){};e.seek=function(a){};e.stop=function(){f.pause();f.src=""};e.mute=function(a){};e.volume=function(a){};e.hd=function(a){};e.element=function(){return f};
e.resize=function(a,b){};e.destroy=function(){};e.name=p.DEFAULT;e.config=h.extend({},{},b);f=h.createElement("video");f.playsinline=f["webkit-playsinline"]=e.config.playsinline;f.poster=e.config.poster}})(playease);
(function(d){var h=d.utils,a=d.events,p=d.muxer;d=d.core.renders;var c=d.modes,b=p.AMF,e=p.flv.TAG,f=p.flv.FORMATS,g=p.flv.CODECS;d.flv=function(d,m){function l(a){h.log("media source open");r.load(m.url)}function y(a){h.log("update end");var b=a.target.type;if(B){if(!u||"open"!==u.readyState)return;if(!x.audio.length&&!x.video.length){u.endOfStream();return}}if(0!=x[b].length&&(a=E[b],!a.updating)){b=x[b].shift();try{a.appendBuffer(b)}catch(J){h.log(J)}}}function D(a){h.log("source buffer error")}
function C(a){h.log("media source ended")}function z(a){h.log("media source close")}function A(a){h.log("media source error")}var k=h.extend(this,new a.eventdispatcher("renders.def")),w,r,q,v,I,u,E,x,B=!1;k.setup=function(){k.dispatchEvent(a.PLAYEASE_READY,{id:k.config.id})};k.play=function(a){a&&(m.url=a);if(a||w.src!=m.url)x.audio=[],x.video=[],r.abort(),q.reset(),v.reset(),w.pause(),w.src=URL.createObjectURL(u),w.load();w.play()};k.pause=function(){w.pause()};k.reload=function(){};k.seek=function(a){};
k.stop=function(){x.audio=[];x.video=[];r.abort();w.pause();w.src=""};k.mute=function(a){};k.volume=function(a){};k.hd=function(a){};k.appendInitSegment=function(b,c){var e=b+'/mp4; codecs="'+I[b+"Codec"]+'"';h.log("Mime type: "+e+".");MediaSource.isTypeSupported(e)?"closed"==u.readyState?k.dispatchEvent(a.PLAYEASE_RENDER_ERROR,{message:"MediaSource is closed while appending init segment."}):(e=E[b]=u.addSourceBuffer(e),e.type=b,e.addEventListener("updateend",y),e.addEventListener("error",D),e.appendBuffer(c)):
k.dispatchEvent(a.PLAYEASE_RENDER_ERROR,{message:"Mime type is not surpported: "+e+"."})};k.appendSegment=function(a,b){x[a].push(b);var c=E[a];c.updating||(b=x[a].shift(),c.appendBuffer(b))};k.element=function(){return w};k.resize=function(a,b){};k.destroy=function(){};k.name=c.FLV;k.config=h.extend({},{},m);E={audio:null,video:null};x={audio:[],video:[]};w=h.createElement("video");w.playsinline=w["webkit-playsinline"]=k.config.playsinline;w.poster=k.config.poster;r=new h.loader(m.loader);r.addEventListener(a.PLAYEASE_CONTENT_LENGTH,
function(a){h.log("onContenLength: "+a.length)});r.addEventListener(a.PLAYEASE_PROGRESS,function(a){q.parse(a.data)});r.addEventListener(a.PLAYEASE_COMPLETE,function(a){h.log("onLoaderComplete")});r.addEventListener(a.ERROR,function(a){h.log(a.message)});q=new p.flv;q.addEventListener(a.PLAYEASE_FLV_TAG,function(a){switch(a.tag){case e.AUDIO:if(a.format&&a.format!=f.AAC){h.log("Unsupported audio format("+a.format+").");break}q.parseAACAudioPacket(a.data,a.offset,a.size,a.timestamp,a.rate,a.samplesize,
a.sampletype);break;case e.VIDEO:if(a.codec&&a.codec!=g.AVC){h.log("Unsupported video codec("+a.codec+").");break}q.parseAVCVideoPacket(a.data,a.offset,a.size,a.timestamp,a.frametype);break;case e.SCRIPT:a=b.parse(a.data,a.offset,a.size);h.log(a.key+": "+JSON.stringify(a.value));"onMetaData"==a.key&&q.setMetaData(a.value);break;default:h.log("Skipping unknown tag type "+a.tag)}});q.addEventListener(a.PLAYEASE_MEDIA_INFO,function(a){I=a.info});q.addEventListener(a.PLAYEASE_AVC_CONFIG_RECORD,function(a){v.setVideoMeta(a.data);
v.getInitSegment(a.data)});q.addEventListener(a.PLAYEASE_AVC_SAMPLE,function(a){v.getVideoSegment(a.data)});q.addEventListener(a.PLAYEASE_AAC_SPECIFIC_CONFIG,function(a){v.setAudioMeta(a.data);v.getInitSegment(a.data)});q.addEventListener(a.PLAYEASE_AAC_SAMPLE,function(a){v.getAudioSegment(a.data)});q.addEventListener(a.PLAYEASE_END_OF_STREAM,function(a){B=!0});q.addEventListener(a.ERROR,function(a){h.log(a.message)});v=new p.mp4;v.addEventListener(a.PLAYEASE_MP4_INIT_SEGMENT,function(a){k.appendInitSegment(a.tp,
a.data)});v.addEventListener(a.PLAYEASE_MP4_SEGMENT,function(a){k.appendSegment(a.tp,a.data)});v.addEventListener(a.ERROR,function(a){h.log(a.message)});window.MediaSource=window.MediaSource||window.WebKitMediaSource;u=new MediaSource;u.addEventListener("sourceopen",l);u.addEventListener("sourceended",C);u.addEventListener("sourceclose",z);u.addEventListener("error",A);u.addEventListener("webkitsourceopen",l);u.addEventListener("webkitsourceended",C);u.addEventListener("webkitsourceclose",z);u.addEventListener("webkiterror",
A)}})(playease);(function(d){d.core.components={}})(playease);
(function(d){var h=d.utils,a=d.events;d.core.components.slider=function(d){var c=h.extend(this,new a.eventdispatcher("components.controlbar")),b=["bg","buf","pro"],e,f,g;c.buffered=function(a){e.buf.style.width=a+"%"};c.update=function(a){g=a;e.pro.style.width=g+"%"};c.element=function(){return f};c.config=h.extend({},{name:"",direction:0},d);e={};g=90;(function(){if(!h.isMobile()||0!==c.config.name.indexOf("volume")){f=h.createElement("div","plslider "+c.config.name);for(var a=0;a<b.length;a++){var d=
b[a],d=e[d]=h.createElement("span","plrail "+d);f.appendChild(d)}a=h.createElement("span","plthumb");f.appendChild(a)}})()}})(playease);
(function(d){var h=d.utils,a=d.events,p=d.core.components;p.controlbar=function(c,b){function e(a,b,c){return{name:a,type:b,className:c}}function d(a,b){a=h.createElement("div","pl"+a);for(var e=0;e<b.length;e++){var d;d=void 0;var f=b[e];switch(f.type){case 0:d=h.createElement("span","pldevider");d.innerHTML="/";break;case 1:d=f.name;var l="pllabel pl"+d,f="";switch(d){case "alt":f="Live broadcast";break;case "elapsed":case "duration":l+=" plhidden";f="00:00";break;case "devider":f="/"}l=h.createElement("span",
l);l.innerHTML=f;d=C[d]=l;break;case 2:d=f.name;if(h.isMobile()&&("volume"===d||0===d.indexOf("volume"))||h.isAndroid(4,!0)&&/hd|cc/.test(d))d=null;else{f=h.createElement("span","plbutton pl"+d);f.name=d;try{f.addEventListener("click",g)}catch(I){f.attachEvent("onclick",g)}d=z[d]=f}break;case 3:"volume"===f.name&&(D=new p.slider({name:f.name}),d=D.element())}d&&a.appendChild(d)}c.appendChild(a)}function g(b){switch(b.target.name){case "play":l.dispatchEvent(a.PLAYEASE_VIEW_PLAY);break;case "pause":l.dispatchEvent(a.PLAYEASE_VIEW_PAUSE);
break;case "reload":l.dispatchEvent(a.PLAYEASE_VIEW_RELOAD);break;case "stop":l.dispatchEvent(a.PLAYEASE_VIEW_STOP);break;case "report":l.dispatchEvent(a.PLAYEASE_VIEW_REPORT);break;case "volume":l.dispatchEvent(a.PLAYEASE_VIEW_MUTE);break;case "hd":l.dispatchEvent(a.PLAYEASE_VIEW_HD);break;case "bullet":l.dispatchEvent(a.PLAYEASE_VIEW_BULLET);break;case "fullpage":case "fpexit":l.dispatchEvent(a.PLAYEASE_VIEW_FULLPAGE);break;case "fullscreen":case "fsexit":l.dispatchEvent(a.PLAYEASE_VIEW_FULLSCREEN)}}
var l=h.extend(this,new a.eventdispatcher("components.controlbar")),m=[e("play",2),e("pause",2),e("reload",2),e("stop",2),e("alt",1),e("elapsed",1),e("devider",0),e("duration",1)],H=[e("report",2),e("volume",2),e("volume",3),e("hd",2),e("bullet",2),e("fullpage",2),e("fpexit",2),e("fullscreen",2),e("fsexit",2)],y,D,C,z;l.setDuration=function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60);a=Math.floor(a%60);b=(b?h.pad(b,2)+":":"")+h.pad(c,2)+":"+h.pad(a,2);C.duration.innerHTML=b};l.setElapsed=
function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60);a=Math.floor(a%60);b=(b?h.pad(b,2)+":":"")+h.pad(c,2)+":"+h.pad(a,2);C.elapsed.innerHTML=b};l.setProgress=function(a,b){b&&y.update(Math.floor(a/b*1E4)/100)};l.setBuffered=function(a,b){b&&y.buffered(Math.floor(a/b*1E4)/100)};l.setMuted=function(a){a?h.addClass(z.volume,"mute"):h.removeClass(z.volume,"mute")};l.setVolume=function(a){D.update(a)};l.setBullet=function(a){a?h.removeClass(z.bullet,"off"):h.addClass(z.bullet,"off")};l.resize=
function(a,b){};l.destroy=function(){};l.config=h.extend({},{},b);y=new p.slider({name:"time"});c.appendChild(y.element());C={};z={};d("left",m);d("center",[]);d("right",H)}})(playease);
(function(d){var h=d.utils,a=d.events,p=d.core;p.entity=function(c){var b=h.extend(this,new a.eventdispatcher("core.entity")),e,d,g;b.setup=function(){setTimeout(function(){d.setup()},0)};b.destroy=function(){g&&g.stop();d&&d.destroy();e&&e.destroy()};b.id=c.id;b.model=e=new p.model(c);b.view=d=new p.view(b,e);b.controller=g=new p.controller(e,d);g.addGlobalListener(function(a){b.dispatchEvent(a.type,a)});b.play=g.play;b.pause=g.pause;b.reload=g.reload;b.seek=g.seek;b.stop=g.stop;b.report=g.report;
b.mute=g.mute;b.volume=g.volume;b.hd=g.hd;b.bullet=g.bullet;b.fullpage=g.fullpage;b.fullscreen=g.fullscreen;b.getState=e.getState;b.resize=d.resize}})(playease);
(function(d){var h=d.utils,a=d.events;d=d.core;var p=d.states;d.model=function(c){var b=h.extend(this,new a.eventdispatcher("core.model")),e=p.STOPPED,d;b.setState=function(c){c!==e&&(e=c,b.dispatchEvent(a.PLAYEASE_STATE,{state:c}))};b.getState=function(){return e};b.setProperty=function(c,e){1==d.hasOwnProperty(c)&&(d[c]=e,b.dispatchEvent(a.PLAYEASE_PROPERTY,{key:c,value:e}))};b.getProperty=function(a){return d[a]};b.getConfig=function(a){return b.config[a]||{}};b.destroy=function(){};b.config=h.extend({},
{},c);d={sources:c.sources,muted:!1,volume:90,bullet:!0,fullpage:!1,fullscreen:!1}}})(playease);
(function(d){var h=d.utils,a=d.events;d=d.core;var p=d.renders,c=d.components,b=d.skins,e="pla-skin";d.view=function(d,g){function f(){var b=h.extend({},g.getConfig("render"),{id:d.id,url:g.config.url,width:g.config.width,height:g.config.height,controls:g.config.controls,autoplay:g.config.autoplay,playsinline:g.config.playsinline,poster:g.config.poster,loader:{mode:g.config.cors}});try{x=r.render=new p[b.name](r,b),x.addEventListener(a.PLAYEASE_READY,w),x.addEventListener(a.PLAYEASE_RENDER_ERROR,
k)}catch(G){h.log("Failed to init render "+b.name+"!")}x&&(t=x.element(),t.addEventListener("loadstart",m),t.addEventListener("durationchange",H),t.addEventListener("ended",D),t.addEventListener("error",C),v.appendChild(t))}function m(b){n||(n=new h.timer(500),n.addEventListener(a.PLAYEASE_TIMER,y));n.start()}function H(a){B.setDuration(t.duration);h.addClass(q,"vod")}function y(a){a=t.currentTime;B.setElapsed(a);B.setProgress(a,t.duration);for(var b=t.buffered,c=0;c<b.length;c++){var e=b.start(c),
d=b.end(c);e<=a&&a<d&&B.setBuffered(d,t.duration)}}function D(a){n&&n.stop()}function C(a){n&&n.stop()}function z(){var a=h.extend({},g.getConfig("skin"),{id:d.id,width:g.config.width,height:g.config.height});try{new b[a.name](a)}catch(G){h.log("Failed to init skin "+a.name+"!")}}function A(a){if(a.ctrlKey||a.metaKey)return!0;if(/13|32/.test(a.keyCode))return a.preventDefault?a.preventDefault():a.returnValue=!1,!1}function k(a){w(a)}function w(a){r.dispatchEvent(a.type,a)}var r=h.extend(this,new a.eventdispatcher("core.view")),
q,v,I,u,E,x,B,t,n;r.setup=function(){if(x){x.setup();try{q.addEventListener("keydown",A)}catch(J){q.attachEvent("onkeydown",A)}}else r.dispatchEvent(a.PLAYEASE_SETUP_ERROR,{message:"Render not available!",name:g.config.render.name})};r.play=function(a){h.addClass(q,"playing");x.play(a)};r.pause=function(){h.removeClass(q,"playing");x.pause()};r.reload=function(){h.addClass(q,"playing");x.reload()};r.seek=function(a){h.addClass(q,"playing");x.seek(a)};r.stop=function(){h.removeClass(q,"playing");B.setDuration(0);
B.setElapsed(0);B.setProgress(0,1);B.setBuffered(0,1);x.stop()};r.report=function(){};r.mute=function(a){B.setMuted(a);x.mute(a)};r.volume=function(a){B.setVolume(a);x.volume(a)};r.bullet=function(a){B.setBullet(a)};r.fullpage=function(a){if(document.webkitIsFullScreen){document.exitFullscreen=document.exitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen;if(!document.exitFullscreen)return;document.exitFullscreen();h.removeClass(q,"fs")}a?h.removeClass(q,
"fp"):h.addClass(q,"fp")};r.fullscreen=function(a){a?(document.exitFullscreen=document.exitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen,document.exitFullscreen?(document.exitFullscreen(),h.removeClass(q,"fs")):r.fullpage(a)):(q.requestFullscreen=q.requestFullscreen||q.webkitRequestFullScreen||q.mozRequestFullScreen||q.msRequestFullscreen,q.requestFullscreen?(q.requestFullscreen(),h.addClass(q,"fs")):r.fullpage(a))};r.display=function(a,b){};
r.resize=function(a,b){x&&x.resize(a,b)};r.destroy=function(){if(q)try{q.removeEventListener("keydown",A)}catch(J){q.detachEvent("onkeydown",A)}x&&x.destroy()};(function(){e+="-"+g.config.skin.name;q=h.createElement("div","pla-wrapper "+e+("vod"===g.config.type?" vod":""));q.id=d.id;q.tabIndex=0;v=h.createElement("div","pla-render");I=h.createElement("div","pla-bullet");u=h.createElement("div","pla-controls");E=h.createElement("div","pla-contextmenu");q.appendChild(v);q.appendChild(I);q.appendChild(u);
q.appendChild(E);f();try{B=new c.controlbar(u,{}),B.addGlobalListener(w)}catch(G){h.log("Failed to init controlbar!")}z();var a=document.getElementById(d.id);a.parentNode.replaceChild(q,a);window.onresize=function(){"function"==h.typeOf(g.config.onresize)&&g.config.onresize.call(null)}})()}})(playease);
(function(d){var h=d.utils,a=d.events;d=d.core;var p=d.states;d.controller=function(c,b){function e(a){d.dispatchEvent(a.type,a)}var d=h.extend(this,new a.eventdispatcher("core.controller")),g=!1;d.play=function(a){c.setState(p.PLAYING);b.play(a)};d.pause=function(){c.setState(p.PAUSED);b.pause()};d.reload=function(){c.setState(p.PLAYING);b.play()};d.seek=function(a){c.setState(p.PLAYING);b.seek(a)};d.stop=function(){c.setState(p.STOPPED);b.stop()};d.mute=function(){var a=c.getProperty("muted");c.setProperty("muted",
!a);b.mute(!a)};d.volume=function(a){c.setProperty("volume",a);b.volume(a)};d.bullet=function(){var a=c.getProperty("bullet");c.setProperty("bullet",!a);b.bullet(!a)};d.hd=function(a){var b=c.getProperty("sources");b&&b[a]&&d.play(b[a])};c.addEventListener(a.PLAYEASE_STATE,function(b){switch(b.state){case p.BUFFERING:d.dispatchEvent(a.PLAYEASE_BUFFER);break;case p.PLAYING:d.dispatchEvent(a.PLAYEASE_PLAY);break;case p.PAUSED:d.dispatchEvent(a.PLAYEASE_PAUSE);break;case p.SEEKING:d.dispatchEvent(a.PLAYEASE_SEEK);
break;case p.STOPPED:d.dispatchEvent(a.PLAYEASE_STOP);break;case p.ERROR:break;default:d.dispatchEvent(a.ERROR,{message:"Unknown model state!",state:b.state})}});b.addEventListener(a.PLAYEASE_READY,function(a){g||(h.log("Player ready!"),g=!0,e(a),c.config.autoplay&&d.play(),window.onbeforeunload=function(a){})});b.addEventListener(a.PLAYEASE_SETUP_ERROR,function(a){c.setState(p.ERROR);e(a)});b.addEventListener(a.PLAYEASE_VIEW_PLAY,function(a){var b=c.getState();if(b==p.PAUSED||b==p.STOPPED||b==p.ERROR)d.play(),
e(a)});b.addEventListener(a.PLAYEASE_VIEW_PAUSE,function(a){var b=c.getState();if(b==p.BUFFERING||b==p.PLAYING||b==p.ERROR)d.pause(),e(a)});b.addEventListener(a.PLAYEASE_VIEW_RELOAD,function(a){c.setState(p.BUFFERING);d.reload();e(a)});b.addEventListener(a.PLAYEASE_VIEW_SEEK,function(a){c.getState()!=p.SEEKING&&(d.seek(a.time),e(a))});b.addEventListener(a.PLAYEASE_VIEW_STOP,function(a){d.stop();e(a)});b.addEventListener(a.PLAYEASE_VIEW_REPORT,function(a){d.report();e(a)});b.addEventListener(a.PLAYEASE_VIEW_MUTE,
function(a){d.mute();e(a)});b.addEventListener(a.PLAYEASE_VIEW_VOLUNE,function(a){d.volume(a.vol);e(a)});b.addEventListener(a.PLAYEASE_VIEW_HD,function(a){});b.addEventListener(a.PLAYEASE_VIEW_BULLET,function(a){d.bullet();e(a)});b.addEventListener(a.PLAYEASE_VIEW_FULLPAGE,function(a){var b=c.getProperty("fullpage");d.fullpage(b);e(a);c.setProperty("fullpage",!b)});b.addEventListener(a.PLAYEASE_VIEW_FULLSCREEN,function(a){var b=c.getProperty("fullscreen");d.fullscreen(b);e(a);c.setProperty("fullscreen",
!b)});b.addEventListener(a.PLAYEASE_RENDER_ERROR,function(a){c.setState(p.ERROR);e(a)});d.report=b.report;d.fullpage=b.fullpage;d.fullscreen=b.fullscreen}})(playease);
(function(d){var h=d.utils,a=d.events,p=d.embed=function(c){function b(b){switch(b.type){case a.ERROR:case a.PLAYEASE_SETUP_ERROR:case a.PLAYEASE_RENDER_ERROR:case a.PLAYEASE_ERROR:e.errorScreen(b.message);e.dispatchEvent(a.ERROR,b);break;default:e.dispatchEvent(b.type,b)}}var e=h.extend(this,new a.eventdispatcher("embed")),f={},g=!1,l=null;e.embed=function(){try{f=new p.config(c.config),l=new p.embedder(c,f)}catch(m){h.log("Failed to init embedder!");e.dispatchEvent(a.PLAYEASE_SETUP_ERROR,{message:"Failed to init embedder!",
render:f.render.name});return}l.addGlobalListener(b);l.embed()};e.errorScreen=function(a){g||(g=!0,d.api.displayError(a,f))};(function(){h.foreach(c.config.events,function(a,b){a=c[a];"function"===h.typeOf(a)&&a.call(c,b)})})()}})(playease);
(function(d){var h=d.utils,a=d.embed,p=d.core.renders.modes,c=d.core.skins.modes;a.config=function(a){return h.extend({},{url:"http://"+window.location.host+"/vod/sample.mp4",width:640,height:360,sources:[],type:"live",cors:"no-cors",bufferTime:.1,controls:!0,autoplay:!0,playsinline:!0,poster:"",render:{name:p.DEFAULT},skin:{name:c.DEFAULT}},a)};a.config.addConfig=function(a,c){return h.extend(a,c)}})(playease);
(function(d){var h=d.utils,a=d.events,p=d.core;d.embed.embedder=function(c,b){function d(a){f.dispatchEvent(a.type,a)}var f=h.extend(this,new a.eventdispatcher("embed.embedder"));f.embed=function(){var a=new p.entity(b);a.addGlobalListener(d);a.setup();c.setEntity(a,b.render.name)}}})(playease);