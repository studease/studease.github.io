chatease=function(){if(chatease.api)return chatease.api.getInstance.apply(this,arguments)};chatease.version="1.1.02";
(function(c){function e(a){return null!==navigator.userAgent.toLowerCase().match(a)}var f=c.utils={};f.exists=function(a){switch(f.typeOf(a)){case "string":return 0<a.length;case "object":return null!==a;case "null":return!1}return!0};f.extend=function(){var a=Array.prototype.slice.call(arguments,0),b=a[0];if(1<a.length)for(var d=1;d<a.length;d++)f.foreach(a[d],function(a,d){void 0!==d&&null!==d&&(b[a]=d)});return b};f.foreach=function(a,b){for(var d in a)a.hasOwnProperty&&"function"===f.typeOf(a.hasOwnProperty)?
a.hasOwnProperty(d)&&b(d,a[d]):b(d,a[d])};f.getCookie=function(a){var b;return(b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)")))?unescape(b[2]):null};f.formatTime=function(a){var b=a.getHours()+1,d=a.getMinutes(),g=a.getSeconds();return a.toLocaleDateString()+" "+f.pad(b,2)+":"+f.pad(d,2)+":"+f.pad(g,2)};f.pad=function(a,b){for(a+="";a.length<b;)a="0"+a;return a};f.typeOf=function(a){if(null===a||void 0===a)return"null";var b=typeof a;if("object"===b)try{var d=a.toString().match(/^\[object ([a-z]+)\]$/i);
if(d&&1<d.length&&d[1])return d[1].toLowerCase()}catch(g){}return b};f.isInt=function(a){return 0===parseFloat(a)%1};f.trim=function(a){return a.replace(/^\s+|\s+$/g,"")};f.indexOf=function(a,b){if(null==a)return-1;for(var d=0;d<a.length;d++)if(a[d]===b)return d;return-1};f.createElement=function(a,b){a=document.createElement(a);b&&(a.className=b);return a};f.addClass=function(a,b){var d="string"===f.typeOf(a.className)?a.className.split(" "):[];b="array"===f.typeOf(b)?b:b.split(" ");f.foreach(b,
function(a,b){-1===f.indexOf(d,b)&&d.push(b)});a.className=f.trim(d.join(" "))};f.removeClass=function(a,b){var d="string"===f.typeOf(a.className)?a.className.split(" "):[];b="array"===f.typeOf(b)?b:b.split(" ");f.foreach(b,function(a,b){a=f.indexOf(d,b);0<=a&&d.splice(a,1)});a.className=f.trim(d.join(" "))};f.emptyElement=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};f.isMSIE=function(a){return e(new RegExp("msie\\s*"+(a||""),"i"))};f.isSafari=function(){return e(/safari/i)&&!e(/chrome/i)&&
!e(/chromium/i)&&!e(/android/i)};f.isIOS=function(a){return a?e(new RegExp("iP(hone|ad|od).+\\sOS\\s"+a,"i")):e(/iP(hone|ad|od)/i)};f.isAndroid=function(a,b){return b&&e(/chrome\/[123456789]/i)&&!e(/chrome\/18/)?!1:a?(f.isInt(a)&&!/\./.test(a)&&(a=""+a+"."),e(new RegExp("Android\\s*"+a,"i"))):e(/Android/i)};f.isMobile=function(){return f.isIOS()||f.isAndroid()};f.getProtocol=function(a){var b="http";(a=a.match(/^([a-z]+):\/\//i))&&1<a.length&&(b=a[1]);return b};f.getFileName=function(a){var b="";
(a=a.match(/\/([a-z0-9\(\)\[\]\{\}\s\-_%]*(\.[a-z0-9]+)?)$/i))&&1<a.length&&(b=a[1]);return b};f.getExtension=function(a){var b="";(a=a.match(/\/?([a-z0-9\(\)\[\]\{\}\s\-_%]*(\.([a-z0-9]+))*)\??([a-z0-9\-_%&=]*)$/i))&&3<a.length&&(b=a[3]);return b};var k=window.console=window.console||{log:function(){}};f.log=function(){var a=Array.prototype.slice.call(arguments,0);"object"===f.typeOf(k.log)?k.log(a):k.log.apply(k,a)}})(chatease);
(function(c){var e=c.utils;c=e.crypt={};c.stringToByteArray=function(f){for(var e=[],a=0,b=0;b<f.length;b++){for(var d=f.charCodeAt(b);255<d;)e[a++]=d&255,d>>=8;e[a++]=d}return e};c.byteArrayToString=function(f){if(8192>=f.length)return String.fromCharCode.apply(null,f);for(var e="",a=0;a<f.length;a+=8192){var b=Array.slice(f,a,a+8192);e+=String.fromCharCode.apply(null,b)}return e};c.byteArrayToHex=function(e){return Array.map(e,function(e){e=e.toString(16);return 1<e.length?e:"0"+e}).join("")};c.hexToByteArray=
function(f){if(0!==f.length%2)return e.log("Key string length must be multiple of 2."),null;for(var c=[],a=0;a<f.length;a+=2)c.push(parseInt(f.substring(a,a+2),16));return c};c.stringToUTF8ByteArray=function(e){for(var f=[],a=0,b=0;b<e.length;b++){var d=e.charCodeAt(b);128>d?f[a++]=d:(2048>d?f[a++]=d>>6|192:(55296==(d&64512)&&b+1<e.length&&56320==(e.charCodeAt(b+1)&64512)?(d=65536+((d&1023)<<10)+(e.charCodeAt(++b)&1023),f[a++]=d>>18|240,f[a++]=d>>12&63|128):f[a++]=d>>12|224,f[a++]=d>>6&63|128),f[a++]=
d&63|128)}return f};c.UTF8ByteArrayToString=function(e){for(var f=[],a=0,b=0;a<e.length;){var d=e[a++];if(128>d)f[b++]=String.fromCharCode(d);else if(191<d&&224>d){var g=e[a++];f[b++]=String.fromCharCode((d&31)<<6|g&63)}else if(239<d&&365>d){g=e[a++];var c=e[a++],t=e[a++];d=((d&7)<<18|(g&63)<<12|(c&63)<<6|t&63)-65536;f[b++]=String.fromCharCode(55296+(d>>10));f[b++]=String.fromCharCode(56320+(d&1023))}else g=e[a++],c=e[a++],f[b++]=String.fromCharCode((d&15)<<12|(g&63)<<6|c&63)}return f.join("")};c.XORByteArray=
function(f,c){if(f.length!==c.length)e.log("XOR array lengths must match.");else{for(var a=[],b=0;b<f.length;b++)a.push(f[b]^c[b]);return a}}})(chatease);
(function(c){function e(){var a=document.createElement("style");a.type="text/css";document.getElementsByTagName("head")[0].appendChild(a);return a.sheet||a.styleSheet}var f=c.utils,k;(f.css=function(a,b){k||(k=e());var d="";f.foreach(b,function(a,b){d+=a+": "+b+"; "});try{k.insertRule?k.insertRule(a+" { "+d+"}",k.cssRules.length):k.addRule(a,d,k.rules.length)}catch(g){f.log("Failed to insert css rule: "+a)}}).style=function(a,b,d){if(void 0!==a&&null!==a)for(void 0===a.length&&(a=[a]),b=f.extend({},
b),d=0;d<a.length;d++){var e=a[d];void 0!==e&&null!==e&&f.foreach(b,function(a,b){a=a.split("-");for(var d=1;d<a.length;d++)a[d]=a[d].charAt(0).toUpperCase()+a[d].slice(1);a=a.join("");e.style[a]!==b&&(e.style[a]=b)})}}})(chatease);(function(c){var e=c.utils;e.filter=function(f){var c="";this.replace=function(b){return c&&a?b.replace(a,"**"):b};if("string"==e.typeOf(f)&&f){c=f;var a=new RegExp(c,"ig")}}})(chatease);
(function(c){c.events={ERROR:"error",CHATEASE_READY:"chateaseReady",CHATEASE_SETUP_ERROR:"chateaseSetupError",CHATEASE_RENDER_ERROR:"chateaseRenderError",CHATEASE_STATE:"chateaseState",CHATEASE_PROPERTY:"chateaseProperty",CHATEASE_CONNECT:"chateaseConnect",CHATEASE_INFO:"chateaseInfo",CHATEASE_MESSAGE:"chateaseMessage",CHATEASE_USER:"chateaseUser",CHATEASE_JOIN:"chateaseJoin",CHATEASE_LEFT:"chateaseLeft",CHATEASE_CTRL:"chateaseCtrl",CHATEASE_EXTERN:"chateaseExtern",CHATEASE_NICKCLICK:"chateaseNickClick",
CHATEASE_CLOSE:"chateaseClose",CHATEASE_VIEW_SEND:"chateaseViewSend",CHATEASE_VIEW_PROPERTY:"chateaseViewProperty",CHATEASE_VIEW_SHOWMORE:"chateaseViewShowMore",CHATEASE_VIEW_CLEARSCREEN:"chateaseViewClearScreen",CHATEASE_VIEW_NICKCLICK:"chateaseViewNickClick",CHATEASE_TIMER:"chateaseTimer",CHATEASE_TIMER_COMPLETE:"chateaseTimerComplete"}})(chatease);
(function(c){var e=c.utils;c.events.eventdispatcher=function(f){function k(a,b,f){if(a)for(var d=0;d<a.length;d++){var g=a[d];if(g){null!==g.count&&0===--g.count&&delete a[d];try{g.listener(b)}catch(w){e.log('Error handling "'+f+'" event listener ['+d+"]: "+w.toString(),g.listener,b)}}}}var a={},b=[];this.addEventListener=function(b,g,f){try{e.exists(a[b])||(a[b]=[]),"string"===e.typeOf(g)&&(g=(new Function("return "+g))()),a[b].push({listener:g,count:f||null})}catch(t){e.log("error",t)}return!1};
this.removeEventListener=function(b,f){if(a[b]){try{if(void 0===f){a[b]=[];return}var d;for(d=0;d<a[b].length;d++)if(a[b][d].listener.toString()===f.toString()){a[b].splice(d,1);break}}catch(t){e.log("error",t)}return!1}};this.addGlobalListener=function(a,f){try{"string"===e.typeOf(a)&&(a=(new Function("return "+a))()),b.push({listener:a,count:f||null})}catch(h){e.log("error",h)}return!1};this.removeGlobalListener=function(a){if(a){try{var d;for(d=b.length-1;0<=d;d--)b[d].listener.toString()===a.toString()&&
b.splice(d,1)}catch(h){e.log("error",h)}return!1}};this.dispatchEvent=function(d,g){g||(g={});e.extend(g,{id:f,version:c.version,type:d});"events"===c.debug&&e.log(d,g);k(a[d],g,d);k(b,g,d)}}})(chatease);
(function(c){var e=c.utils,f=c.events;e.timer=function(c,a){function b(){h++;d.dispatchEvent(f.CHATEASE_TIMER);0<d.repeatCount&&h>=d.repeatCount&&(d.stop(),d.dispatchEvent(f.CHATEASE_TIMER_COMPLETE))}var d=e.extend(this,new f.eventdispatcher("utils.timer")),g,h=0,t=!1;d.start=function(){!1===t&&(g=setInterval(b,d.delay),t=!0)};d.stop=function(){t&&(clearInterval(g),g=0,t=!1)};d.reset=function(){d.stop();h=0};d.currentCount=function(){return h};d.running=function(){return t};d.delay=c||50;d.repeatCount=
a||0}})(chatease);
(function(c){var e=c.utils,f=c.events,k={},a={onError:f.ERROR,onReady:f.CHATEASE_READY,onConnect:f.CHATEASE_CONNECT,onIdent:f.CHATEASE_INFO,onMessage:f.CHATEASE_MESSAGE,onJoin:f.CHATEASE_JOIN,onLeft:f.CHATEASE_LEFT,onUser:f.CHATEASE_USER,onExtern:f.CHATEASE_EXTERN,onNickClick:f.CHATEASE_VIEW_NICKCLICK,onClose:f.CHATEASE_CLOSE};c.api=function(b){function d(a){g.dispatchEvent(a.type,a)}var g=e.extend(this,new f.eventdispatcher("api")),h;g.container=b;g.id=b.id;g.setup=function(a){e.emptyElement(g.container);c.debug=
!!a.debug;g.config=a;g.config.id=g.id;g.embedder=new c.embed(g);g.embedder.addGlobalListener(d);g.embedder.embed();return g};g.setEntity=function(a,b){h=a;g.onSWFLoaded=h.setup;g.onSWFOpen=h.onSWFOpen;g.onSWFMessage=h.onSWFMessage;g.onSWFError=h.onSWFError;g.onSWFClose=h.onSWFClose;g.send=h.send;g.close=h.close;g.getState=h.getState;g.resize=h.resize};(function(){e.foreach(a,function(a,b){g[a]=function(a){g.addEventListener(b,a)}})})()};c.api.getInstance=function(a){var b;null==a?a=0:a.nodeType?b=
a:"string"===e.typeOf(a)&&(b=document.getElementById(a));if(b){var f=k[b.id];f||(k[a]=f=new c.api(b));return f}return"number"===e.typeOf(a)?k[a]:null};c.api.displayError=function(a,d){}})(chatease);(function(c){c.core={}})(chatease);(function(c){c.core.states={CONNECTED:"connected",CLOSED:"closed",ERROR:"error"}})(chatease);
(function(c){c.core.message={};c=c.core.message;c.keys={CMD:"cmd",SEQ:"seq",DATA:"data",MODE:"mode",USER:"user",SUB:"sub",CHANNEL:"channel",GROUP:"group",ERROR:"error",ID:"id",NAME:"name",ICON:"icon",ROLE:"role",STAT:"stat",STATUS:"status",CODE:"code"};c.cmds={INFO:"info",TEXT:"text",USER:"user",JOIN:"join",LEFT:"left",CTRL:"ctrl",EXTERN:"extern",PING:"ping",PONG:"pong",ERROR:"error"};c.opts={MUTE:"mute",FORBID:"forbid"};c.modes={UNI:0,MULTI:1,BROADCAST:2,OUTDATED:4};c.roles={VISITOR:0,NORMAL:1,VIP:14,
ASSISTANT:16,SECRETARY:32,ANCHOR:48,ADMIN:64,SU_ADMIN:128,SYSTEM:192};c.status={BadRequest:400,Unauthorized:401,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthRequired:407,RequestTimeout:408,TooManyRequests:429,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504};c.parseControl=function(e){e=/^([a-z]+):([0-9]+)$/i.exec(e);return null==e?null:[e[1],parseInt(e[2])]}})(chatease);
(function(c){(c.core.skins={}).modes={DEFAULT:"def",MOBILE:"mobile"}})(chatease);
(function(c){var e=c.utils,f=c.events;c=c.core.skins;var k=c.modes,a=e.css,b="cha-skin";c.def=function(d){var c=e.extend(this,new f.eventdispatcher("skins.def"));c.resize=function(b,d){b=document.getElementById(c.config.id);d=document.getElementById(c.config.id+"-input");a.style(d,{width:b.clientWidth-90+"px"})};c.name=k.DEFAULT;c.config=e.extend({},d);b+="-"+c.name;a(".cha-wrapper",{width:"100%",height:"100%","background-color":"#171717"});a(".cha-wrapper *",{margin:"0",padding:"0","font-family":"Microsoft YaHei,arial,sans-serif",
"font-size":"14px","font-weight":"normal","box-sizing":"content-box"});a("."+b+" .cha-checkbox",{color:"#E6E6E6",cursor:"pointer"});a("."+b+" .cha-checkbox .icon",{"float":"left",padding:"0 5px",width:"14px",height:"14px","background-repeat":"no-repeat","background-position":"center","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOAgMAAABiJsVCAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJUExURUxpcebm5ubm5kbBEu0AAAACdFJOUwCgoEVu0AAAABpJREFUCNdjYAABqVWrHBi0Vq1qII0AawMBACnPF0kf/g8sAAAAAElFTkSuQmCC)",
display:"inline-block"});a("."+b+" .cha-checkbox.checked .icon",{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAA40lEQVQ4T52SvXHCQBCF3wuUKDHp7QXYFZgOrBKgAqADOsDuRK7ALoEOGDqwk1UoSHSBZrTMMWhGY358w0YbvG9/3i7xYDByqloCmKfUMLPSe7/sQUuADmfNk4gwCTSzXZZli7ZtS5KvSWCE8jwvmqZZkVzHrv+CPRRCKAB89etcA38BjM+CA8lJzLuu25Ic3QJ/RORl4PBMRL5VdQPgbWjeRUcz+/Dev1dVVTjnNqo6HY54b1SQXDrnyrquRyGELYDnv6e6Z87MzCa9i8mgme2jeGjIrR2TXw7Ap4gsTp/zSBwBq1l6D5ci9L8AAAAASUVORK5CYII=)"});a("."+
b+" .cha-button",{padding:"0 10px","font-style":"normal","font-weight":"normal","text-align":"center","text-transform":"uppercase","white-space":"nowrap","word-spacing":"normal",border:"none","border-radius":"2px",cursor:"pointer",display:"inline-block","-webkit-font-smoothing":"subpixel-antialiased","-moz-osx-font-smoothing":"grayscale",transition:"150ms ease-in-out","transition-property":"background-color, color"});a("."+b+" .cha-button.red",{color:"#FFFFFF","background-color":"#FF0046"});a("."+
b+" .cha-button.red:hover",{"background-color":"#97052D"});a("."+b+" .cha-button.blue",{color:"#FFFFFF","background-color":"#0B7EF4"});a("."+b+" .cha-button.blue:hover",{"background-color":"#0966C3"});a("."+b+" .cha-button.white",{color:"#000000","background-color":"#FFFFFF"});a("."+b+" .cha-button.white:hover",{"background-color":"#E0E0E0"});a("."+b+" .cha-button.gray",{color:"#000000","background-color":"#E0E0E0"});a("."+b+" .cha-button.gray:hover",{"background-color":"#96A0B4"});a("."+b+" .cha-render",
{width:"100%",height:"100%",position:"relative"});a("."+b+" .cha-render object",{width:"0",height:"0",position:"absolute"});a("."+b+" .cha-render .cha-title",{width:"100%",height:"40px","font-family":"inherit","font-weight":"normal","text-align":"center","line-height":"40px",color:"#E6E6E6","background-color":"inherit",cursor:"default","pointer-events":"none"});a("."+b+" .cha-render .cha-console",{color:"#242424",top:(c.config.title?40:0)+"px",right:"0",bottom:"100px",left:"0",position:"absolute",
"background-color":"#F8F8F8","overflow-x":"hidden","overflow-y":c.config.smoothing?"hidden":"scroll"});a("."+b+" .cha-render .cha-console > div",{padding:"0 6px "+(c.config.smoothing?"6px":"0")+" 6px"});a("."+b+" .cha-render .cha-console > div > div",{margin:"6px 0","line-height":"20px"});a("."+b+" .cha-render .cha-console .cha-system, ."+b+" .cha-render .cha-console .cha-system > a",{"font-style":"normal","font-weight":"normal",color:"#33CC00",cursor:"default","pointer-events":"none"});a("."+b+" .cha-render .cha-console .icon",
{"float":"left","margin-right":"4px",width:"20px",height:"20px",display:"block"});a("."+b+" .cha-render .cha-console .icon img",{width:"100%",height:"100%",display:"inline-block"});a("."+b+" .cha-render .cha-console .area",{"margin-right":"2px"});a("."+b+" .cha-render .cha-console .area.area-uni",{color:"#F76767"});a("."+b+" .cha-render .cha-console .title",{"margin-right":"2px",padding:"0 2px",font:"normal 12px Microsoft YaHei,arial,sans-serif","white-space":"nowrap","word-spacing":"normal",border:"1px solid #3CAFAB",
"border-radius":"2px","vertical-align":"middle"});a("."+b+" .cha-render .cha-console .title.ttl-visitor, ."+b+" .cha-render .cha-console .title.ttl-normal, ."+b+" .cha-render .cha-console .title.ttl-system",{display:"none"});a("."+b+" .cha-render .cha-console .title.ttl-vip1, ."+b+" .cha-render .cha-console .title.ttl-vip2, ."+b+" .cha-render .cha-console .title.ttl-vip3",{color:"#3CAFAB","border-color":"#3CAFAB"});a("."+b+" .cha-render .cha-console .title.ttl-vip4, ."+b+" .cha-render .cha-console .title.ttl-vip5, ."+
b+" .cha-render .cha-console .title.ttl-vip6, ."+b+" .cha-render .cha-console .title.ttl-vip7",{color:"#77C773","border-color":"#77C773"});a("."+b+" .cha-render .cha-console .title.ttl-assistant, ."+b+" .cha-render .cha-console .title.ttl-secretary, ."+b+" .cha-render .cha-console .title.ttl-anchor",{color:"#5382E2","border-color":"#5382E2"});a("."+b+" .cha-render .cha-console .title.ttl-admin, ."+b+" .cha-render .cha-console .title.ttl-suadmin",{color:"#F76767","border-color":"#F76767"});a("."+b+
" .cha-render .cha-console a",{color:"#5382E2","text-decoration":"none",cursor:"pointer"});a("."+b+" .cha-render .cha-console .context",{"word-break":"break-all","word-wrap":"break-word"});a("."+b+" .cha-render .cha-controls",{height:"40px",right:"0",bottom:"60px",left:"0",position:"absolute",overflow:"hidden","line-height":"100%","background-color":"inherit"});a("."+b+" .cha-render .cha-controls > *",{margin:"8px 0","text-align":"center","line-height":"24px",display:"block"});a("."+b+" .cha-render .cha-controls .shieldtext",
{"float":"left"});a("."+b+" .cha-render .cha-controls .shieldtext .icon",{padding:"5px"});a("."+b+" .cha-render .cha-controls .clearscreen",{"float":"right",width:"50px"});a("."+b+" .cha-render .cha-dialog",{height:"60px",right:"0",bottom:"0",left:"0",position:"absolute",overflow:"hidden","background-color":"#E0E0E0"});a("."+b+" .cha-render .cha-dialog .more",{display:"none"});a("."+b+" .cha-render .cha-dialog textarea",{padding:"6px 10px",width:c.config.width-90+"px",height:"48px",resize:"none",
border:"0 none","background-color":"#E6E6E6"});a("."+b+" .cha-render .cha-dialog .send",{width:"50px",height:"100%",top:"0",right:"0",position:"absolute"})}})(chatease);
(function(c){var e=c.utils,f=c.events;c=c.core.skins;var k=c.modes,a=e.css,b="cha-skin";c.mobile=function(d){var c=e.extend(this,new f.eventdispatcher("skins.mobile"));c.resize=function(b,d){b=document.getElementById(c.config.id);d=document.getElementById(c.config.id+"-input");a.style(d,{width:b.clientWidth-114+"px"})};c.name=k.MOBILE;c.config=e.extend({},d);b+="-"+c.name;a(".cha-wrapper",{width:"100%",height:"100%","background-color":"#171717"});a(".cha-wrapper *",{margin:"0",padding:"0","font-family":"Microsoft YaHei,arial,sans-serif",
"font-size":"14px","font-weight":"normal","box-sizing":"content-box"});a("."+b+" .cha-checkbox",{color:"#E6E6E6",cursor:"pointer"});a("."+b+" .cha-checkbox .icon",{"float":"left",padding:"0 5px",width:"14px",height:"14px","background-repeat":"no-repeat","background-position":"center","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOAgMAAABiJsVCAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJUExURUxpcebm5ubm5kbBEu0AAAACdFJOUwCgoEVu0AAAABpJREFUCNdjYAABqVWrHBi0Vq1qII0AawMBACnPF0kf/g8sAAAAAElFTkSuQmCC)",
display:"inline-block"});a("."+b+" .cha-checkbox.checked .icon",{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAA40lEQVQ4T52SvXHCQBCF3wuUKDHp7QXYFZgOrBKgAqADOsDuRK7ALoEOGDqwk1UoSHSBZrTMMWhGY358w0YbvG9/3i7xYDByqloCmKfUMLPSe7/sQUuADmfNk4gwCTSzXZZli7ZtS5KvSWCE8jwvmqZZkVzHrv+CPRRCKAB89etcA38BjM+CA8lJzLuu25Ic3QJ/RORl4PBMRL5VdQPgbWjeRUcz+/Dev1dVVTjnNqo6HY54b1SQXDrnyrquRyGELYDnv6e6Z87MzCa9i8mgme2jeGjIrR2TXw7Ap4gsTp/zSBwBq1l6D5ci9L8AAAAASUVORK5CYII=)"});a("."+
b+" .cha-button",{padding:"0 10px","font-style":"normal","font-weight":"normal","text-align":"center","text-transform":"uppercase","white-space":"nowrap","word-spacing":"normal",border:"none","border-radius":"2px",cursor:"pointer",display:"inline-block","-webkit-font-smoothing":"subpixel-antialiased","-moz-osx-font-smoothing":"grayscale",transition:"150ms ease-in-out","transition-property":"background-color, color"});a("."+b+" .cha-button.red",{color:"#FFFFFF","background-color":"#FF0046"});a("."+
b+" .cha-button.red:hover",{"background-color":"#97052D"});a("."+b+" .cha-button.blue",{color:"#FFFFFF","background-color":"#0B7EF4"});a("."+b+" .cha-button.blue:hover",{"background-color":"#0966C3"});a("."+b+" .cha-button.white",{color:"#000000","background-color":"#FFFFFF"});a("."+b+" .cha-button.white:hover",{"background-color":"#E0E0E0"});a("."+b+" .cha-button.gray",{color:"#000000","background-color":"#E0E0E0"});a("."+b+" .cha-button.gray:hover",{"background-color":"#96A0B4"});a("."+b+" .cha-render",
{width:"100%",height:"100%",position:"relative",overflow:"hidden"});a("."+b+" .cha-render object",{width:"0",height:"0",position:"absolute"});a("."+b+" .cha-render .cha-title",{width:"100%",height:"40px","font-family":"inherit","font-weight":"normal","text-align":"center","line-height":"40px",color:"#E6E6E6","background-color":"inherit",cursor:"default","pointer-events":"none"});a("."+b+" .cha-render .cha-console",{color:"#242424",top:(c.config.title?40:0)+"px",right:"0",bottom:"40px",left:"0",position:"absolute",
"background-color":"#F8F8F8","overflow-x":"hidden","overflow-y":c.config.smoothing?"hidden":"scroll"});a("."+b+" .cha-render.more .cha-console",{bottom:"130px"});a("."+b+" .cha-render .cha-console > div",{padding:"0 6px "+(c.config.smoothing?"6px":"0")+" 6px"});a("."+b+" .cha-render .cha-console > div > div",{margin:"6px 0","line-height":"20px"});a("."+b+" .cha-render .cha-console .cha-system, ."+b+" .cha-render .cha-console .cha-system > a",{"font-style":"normal","font-weight":"normal",color:"#33CC00",
cursor:"default","pointer-events":"none"});a("."+b+" .cha-render .cha-console .icon",{"float":"left","margin-right":"4px",width:"20px",height:"20px",display:"block"});a("."+b+" .cha-render .cha-console .icon img",{width:"100%",height:"100%",display:"inline-block"});a("."+b+" .cha-render .cha-console .area",{"margin-right":"2px"});a("."+b+" .cha-render .cha-console .area.area-uni",{color:"#F76767"});a("."+b+" .cha-render .cha-console .title",{"margin-right":"2px",padding:"0 2px",font:"normal 12px Microsoft YaHei,arial,sans-serif",
"white-space":"nowrap","word-spacing":"normal",border:"1px solid #3CAFAB","border-radius":"2px","vertical-align":"middle"});a("."+b+" .cha-render .cha-console .title.ttl-visitor, ."+b+" .cha-render .cha-console .title.ttl-normal, ."+b+" .cha-render .cha-console .title.ttl-system",{display:"none"});a("."+b+" .cha-render .cha-console .title.ttl-vip1, ."+b+" .cha-render .cha-console .title.ttl-vip2, ."+b+" .cha-render .cha-console .title.ttl-vip3",{color:"#3CAFAB","border-color":"#3CAFAB"});a("."+b+
" .cha-render .cha-console .title.ttl-vip4, ."+b+" .cha-render .cha-console .title.ttl-vip5, ."+b+" .cha-render .cha-console .title.ttl-vip6, ."+b+" .cha-render .cha-console .title.ttl-vip7",{color:"#77C773","border-color":"#77C773"});a("."+b+" .cha-render .cha-console .title.ttl-assistant, ."+b+" .cha-render .cha-console .title.ttl-secretary, ."+b+" .cha-render .cha-console .title.ttl-anchor",{color:"#5382E2","border-color":"#5382E2"});a("."+b+" .cha-render .cha-console .title.ttl-admin, ."+b+" .cha-render .cha-console .title.ttl-suadmin",
{color:"#F76767","border-color":"#F76767"});a("."+b+" .cha-render .cha-console a",{color:"#5382E2","text-decoration":"none",cursor:"pointer"});a("."+b+" .cha-render .cha-console .context",{"word-break":"break-all","word-wrap":"break-word"});a("."+b+" .cha-render .cha-controls",{margin:"0",padding:"0",height:"90px",bottom:"-90px",right:"0",left:"0",position:"absolute",overflow:"hidden","background-color":"#F8F8F8"});a("."+b+" .cha-render.more .cha-controls",{bottom:"0"});a("."+b+" .cha-render .cha-controls > *",
{"float":"left",margin:"8px 0 0 8px",padding:"0",width:"60px",color:"#8A8A8A","font-size":"12px","text-align":"center","white-space":"normal","background-color":"transparent"});a("."+b+" .cha-render .cha-controls > *:hover",{"background-color":"transparent"});a("."+b+" .cha-render .cha-controls > * .icon",{"float":"none",margin:"0 4px",padding:"0",width:"50px",height:"50px",border:"1px solid #E6E6E6","border-radius":"5px","background-repeat":"no-repeat","background-position":"center",display:"inline-block"});
a("."+b+" .cha-render .cha-controls .shieldtext .icon",{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACeklEQVRYR8VX0XUTMRAcVQAdQCrAVJCkAkIFkAqyqSChAg8VkFQAqQCnApwKEiqIXYF4c0h6ynG6k87mWe/dl6Td2dHu7J7DgZc7sH9UAzCzhXPu2Hv/GoC+BYCVAnDOrb33DySfWgMaBWBmbwFcATgLTqfsr51zXC6Xt1MH4/4gADNThEsAn2sN9c6JiUuSP6bu/wPAzE4AfK+MeMq+AJyT3JQOvgBgZor425TVxv01gNMSiATAzPTOivx/rBXJ0yHDHYDw5o97or0UwBeS1/3NCIAALvYQ+l0oTdGeL+WVGD7rl6oL0T/v6PwrgOuxZCsmoZlZKLk5GB5UqiRTxBIsAB9SnTu38d7flURKDEjNjmd4l/OTGHWoIImWxGtoyY/yoFPPBNDMhP5dI4CtHMl5eMKfQZprzNyQPM8B+JpbvTOq69UM59FMAqEnkEq9agBxT1JZrfKV0qX3brCho5JqzsmBj9L4INmifu5S4EcC0BLFlqQa1a7RR9CXAiA6ayPJ6e8/3W8AU/OAKuRNRtl9VEJdzDdKtHZyGuYESXdc73MtGHuTXs/ZRAC1jSgCyFlLrNQmg5mlysu7YU0/iACkdr9mMpDf3fbngSlVlKSKLSVhrh/Kh34DKhHSlXBYf3MgX2Z2A+BT4fYTyaO9VsGQo4kG1SVcY/UMuZGcL4pT8QgTtyS7YXWHRqbrXT6NARjTh8iCREkl3CLlcp4qZwzA0JygeV85olzoRCdogtS0tqPKhsU2Xvov6I/mUjldGpzzQ1cUYH0lNmRDU5MCSGuoCiSXGh5Fr0prXfODES0GpVOty47KU5+m4heDSDxf/W9Yq3Kt5w4O4A9JNgxutXqzoAAAAABJRU5ErkJggg==)"});
a("."+b+" .cha-render .cha-controls .shieldtext.checked .icon",{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAB0klEQVRYR81X0VHCUBDcV4F0oHYgFQAVqBUIFXh2YAdZKhA7wAqECsQOpAOtIM4ySSZ5JOQBedGbyUcyye3e3r27i8Mfm/tjfAQTMLOBc26UpukYwA2Aq+xSDF/ZtXHOrdI0XZP8DgmulYCZCegBgAEYhDgFIHACeCUpco12kICZCTQJBK19zTlnSZLMm3zUEpDcAF4A3J0DXvp2CWBWl5Y9Ahn4e5bnjvB3blYkJ77DOgKLLOddgue+FiRnZccVAmamClf0MW1CcpUD+ARUsZcx0XVcSV7vEegp+hx3SHKjm0IBM4uZe1/UOUkd8QoB5WUUWf7cvTql6q1CoI/85wQ2JIc+AbXPi54U2JJUi/9fKVC7vO1JAQ2pqa+AHqj/92H3JBVwJQUaQCrE2HXwQ7IY634n1Ax/jCzBE0nh7MwnIGbqULHacXH+awnooZlp3fqIoMIngLG/EzQtJCKhzthVPWy13OT9vxxc40qWKaFKPTcdbwCmTUtq2054znxYA3guz/66tHZNQHkW6WUbcGMRllmama/ATs7sHdVJbloyDq7fTUUdqoCKSHksVqmuTkkIAYGqdwT96RxLrI3AIBZwUA0cG80p77f+G57i9JhvfgHYZaIhgJsBwwAAAABJRU5ErkJggg==)"});
a("."+b+" .cha-render .cha-controls .clearscreen .icon",{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACx0lEQVRYR8WWjXETQQyF31YAHWAqACogqYBQAaEClAogFVhUAFRAqICkAkgFmA5CBcd8N6ubvb0/nwmOZjyJz7e7T9J7T5v0wJEe+HwdFYCZnUj6Lsnd/YLkjw3gWtJLSb/dfXNUAGZ2JulrbvlHd7djA9hJepIBvHD3nz0AZvZc0lbSF3f/fJ/kNLNzSZ/ynrfuzlltdBwwsztJj/Lzp+6+y6DeSaJkLeJDwszK7C9g4BgADngm6Y+kjbvfmdkHSe8lXbo7/6+OYo9Y2yY3BuCxJIhxFdmaWTwDNBVaFXn9L0nsQ3xzd8jYxX+VoZkhNSr3Jp/4tubXJADQp5Roibbb7c0+qWepwRmCMtM6uBRArK7kKIBcOhwr2Hrt7qdzICqml69iPgDh7yCmAMDSyCQW9dhb75RtlnLjdGMBAPboqWkKQFhmudGkEqhYlDZLFzJH38s9IDImNFRB+ZaZsQGmVMZrd78ayZw2/ZCEeZFhq5bcdwyIvcJf+KmzYb7MkZA2sAGBDAc+kLOFK8jsxt2Zdr3IfEJ6rMeKe1I8WIaZ8dgrh99KOlnyiryGbLpKrgaQyYY7RraLh5ccqSs0C4A+ppQo26ZpGg6klOFqbT8p7R6ZhxnR/24OTHKgmt01aGYFhGOvjs0T0msfF8NoIOUpGdYqoMxIs/0sZVwpKq5h3ZArf59TAVlOejjt2acCZhaewj0jVNVhWOIAbH2V36bXl5mEVOi8rkSWHKbUtiZ7AdOQ6G5Be1UgXjKzshLxeLBZPox3zwozirWjHjFrRFUfKR3sDUdj45h0qIK5QVUYt63Giys4X09XDaMxRucMAREt4TX6ixUDoudwRe8Hl5BVLRixVlg9NvWYclcppV3TNDH/Wd67gq0yogVtkzmtwZziul0vWbxLrrbiifYABiBkzoc7wSTx/qkFc1U55Ld7qcAhB8eav3TZQDD7fopnAAAAAElFTkSuQmCC)"});
a("."+b+" .cha-render .cha-dialog",{height:"40px",right:"0",bottom:"0",left:"0",position:"absolute","background-color":"#E0E0E0"});a("."+b+" .cha-render.more .cha-dialog",{bottom:"90px"});a("."+b+" .cha-render .cha-dialog .more",{"float":"left",margin:"8px 5px",padding:"0",width:"24px",height:"24px","background-repeat":"no-repeat","background-position":"center","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABpklEQVRIS7VW7VHCQBTc68AS0gGxA6xAS8AKfFYgVuBagXRAqEA6ECogJdjBOZt5lzlDEkDJm8nkRy5v9+37uoARM7MihHAfY5wDKACUfnwHoA4hbGOMG5L1kJvQ90GOAbwAuANQAdjqIfmt82Z2A0Cgeh4AfAJ47QM6AjAz/UAAK72T0yGGDmYAFsImKUKt/QIwMx1aihVJyXC2mZnkk/MlSZFrrAXImJdDrF06hdWruUcjYm0kDYD/KJ1HmZtZEz5JydhrWSRzEUkACqkmKXkGzcxEQgBK7tg5+SlILkLGflCa5OkCAFWZZCwFoAoQmt6jdi6Ayy5VdgKQrqtuefUhXQigPDUSKetKSNNE18hBVjiVACLJvFzVxW8ApGPX8lHR/SaCz3kJy/cQgDr5LwCq/7ZHEsDkEk2e5MnLVElVh1670Q4AbqcfFVnNTjfsHCQtmv+O6y/vh2byXnvhrH11Hi+cbGKmSD4AvJ8aIb5kngA8nlyZGYgqSzNdc3/tt4d96lK/bcxijCKjZ+Or8mjT9d4qOkBykK4tM/+293mvwqjGri0/+EslZhJDzTgAAAAASUVORK5CYII=)",
display:"block"});a("."+b+" .cha-render .cha-dialog textarea",{margin:"5px 0",padding:"5px",width:c.config.width-114+"px",height:"20px",resize:"none",border:"0 none","line-height":"20px","background-color":"#F8F8F8"});a("."+b+" .cha-render .cha-dialog .send",{"float":"right",margin:"5px",padding:"0 5px",width:"50px",height:"30px",top:"0",right:"0",position:"absolute"})}})(chatease);(function(c){(c.core.renders={}).modes={DEFAULT:"def",NONE:"none"}})(chatease);
(function(c){var e=c.utils,f=c.events,k=c.core,a=k.message,b=a.modes,d=a.roles;k=k.renders;var g=k.modes,h=e.css;k.def=function(a,k){function t(a,b,d,c,f){var g=e.createElement("div",b);g.setAttribute("value",!!f);g.innerHTML='<span class="icon"></span>'+a;a=function(a,b){return function(d){d="true"==g.getAttribute("value")?!1:!0;g.setAttribute("value",d);d?e.addClass(g,"checked"):e.removeClass(g,"checked");l.dispatchEvent(a,e.extend({value:d},b))}}(d,c);try{g.addEventListener("click",a)}catch(N){g.attachEvent("onclick",
a)}return g}function F(a,b,d,c){b=e.createElement("div",b);b.innerHTML='<span class="icon"></span>'+a;a=function(a,b){return function(d){l.dispatchEvent(a,b)}}(d,c);try{b.addEventListener("click",a)}catch(L){b.attachEvent("onclick",a)}return b}function y(a){if(!a)return null;var b=e.createElement("span","icon");b.innerHTML='<img src="'+a+'">';return b}function n(a){var b="title ";if("number"!=e.typeOf(a)&&(a=parseInt(a),NaN==a||0>a))return null;if(a&d.SYSTEM){if((a&d.SYSTEM)!=d.SYSTEM)if(a&d.SU_ADMIN){var c=
e.createElement("span",b+"ttl-suadmin");c.innerText="\u8d85\u7ba1"}else c=e.createElement("span",b+"ttl-admin"),c.innerText="\u7ba1\u7406\u5458"}else a&d.ANCHOR?(a&d.ANCHOR)==d.ANCHOR?(c=e.createElement("span",b+"ttl-anchor"),c.innerText="\u4e3b\u64ad"):a&d.SECRETARY?(c=e.createElement("span",b+"ttl-secretary"),c.innerText="\u79d8\u4e66"):(c=e.createElement("span",b+"ttl-assistant"),c.innerText="\u52a9\u7406"):a&d.VIP&&(a=(a&d.VIP)>>>1,c=e.createElement("span",b+("ttl-vip"+a)),c.innerText="VIP"+a);
return c}var l=e.extend(this,new f.eventdispatcher("renders.def")),H={title:"CHATEASE "+c.version},q,v,z,A,r,D,u,B,x,C,E;l.setup=function(){e.isMSIE("(8|9)")?_object.setup&&(_object.setup(l.config),l.dispatchEvent(f.CHATEASE_READY,{id:l.config.id})):l.dispatchEvent(f.CHATEASE_READY,{id:l.config.id})};l.show=function(a,c,g){"object"!=e.typeOf(c)&&(c={id:0,name:"\u7cfb\u7edf",role:d.SYSTEM});var m=e.createElement("div");(c.role&d.SYSTEM)==d.SYSTEM&&(m.className="cha-system");var h=y(c.icon);h&&m.appendChild(h);
g==b.UNI&&(h=e.createElement("span","area area-uni"),h.innerHTML="[\u5bc6\u8bed]",m.appendChild(h));(h=n(c.role))&&m.appendChild(h);h=e.createElement("a");h.innerHTML=c.name+": ";c=function(a){return function(b){x.value="/r "+a.name+" ";l.dispatchEvent(f.CHATEASE_VIEW_NICKCLICK,{user:a})}}(c);try{h.addEventListener("click",c)}catch(M){h.attachEvent("onclick",c)}m.appendChild(h);h=e.createElement("span","context");h.innerHTML=a;m.appendChild(h);z.childNodes.length>=l.config.maxrecords&&z.removeChild(z.childNodes[0]);
g==b.OUTDATED?z.insertBefore(m,z.childNodes[0]):z.appendChild(m);l.config.smoothing?l.refresh():v.scrollTop=v.scrollHeight};l.send=function(){l.dispatchEvent(f.CHATEASE_VIEW_SEND,{data:{data:x.value,mode:b.MULTI}});l.clearInput()};l.refresh=function(){l.config.smoothing?(v.clientHeight<z.clientHeight&&h.style(z,{"transition-timing-function":"cubic-bezier(0.165, 0.84, 0.44, 1)","transition-duration":"100ms",transform:"translate(0px, "+(v.clientHeight-z.clientHeight)+"px) translateZ(0px)"}),E.refresh()):
v.scrollTop=v.scrollHeight};l.clearInput=function(){x.value=""};l.clearScreen=function(){e.emptyElement(z)};l.element=function(){return _object};l.resize=function(a,b){};l.destroy=function(){};l.name=g.DEFAULT;l.config=e.extend({},H,k);e.isMSIE("(8|9)")&&(a.innerHTML='<object id="cha-swf" name="cha-swf" align="middle" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+l.config.swf+'"><param name="quality" value="high"><param name="bgcolor" value="#ffffff"><param name="allowscriptaccess" value="sameDomain"><param name="allowfullscreen" value="true"><param name="wmode" value="transparent"><param name="FlashVars" value="id='+
l.config.id+'"></object>',_object=l.WebSocket=a.firstChild);(function(){l.config.title&&(q=e.createElement("div","cha-title"),a.appendChild(q),q.innerHTML=l.config.title);v=e.createElement("div","cha-console");v.id=l.config.id+"-console";a.appendChild(v);z=e.createElement("div","cha-content");v.appendChild(z);l.config.smoothing&&(E=new BScroll(v));A=e.createElement("div","cha-controls");a.appendChild(A);D=t("\u5c4f\u853d\u6d88\u606f","cha-checkbox shieldtext",f.CHATEASE_VIEW_PROPERTY,{key:"shield"},
!1);D.id=l.config.id+"-shieldtext";A.appendChild(D);u=F("\u6e05\u5c4f","cha-button white clearscreen",f.CHATEASE_VIEW_CLEARSCREEN,null);A.appendChild(u);r=e.createElement("div","cha-dialog");a.appendChild(r);B=t("","more",f.CHATEASE_VIEW_PROPERTY,{key:"more"},!1);r.appendChild(B);x=e.createElement("textarea");x.id=l.config.id+"-input";r.appendChild(x);C=e.createElement("button","cha-button blue send");r.appendChild(C);x.setAttribute("placeholder","\u8f93\u5165\u804a\u5929\u5185\u5bb9");l.config.maxlength&&
x.setAttribute("maxlength",l.config.maxlength);var b=function(){return function(a){a=window.event||a;13==a.keyCode&&(a.ctrlKey?x.value+="\r\n":(l.send(),window.event?a.returnValue=!1:a.preventDefault()))}}();try{x.addEventListener("keypress",b)}catch(G){x.attachEvent("onkeypress",b)}C.innerHTML="\u53d1\u9001";b=function(){return function(){l.send()}}();try{C.addEventListener("click",b)}catch(G){C.attachEvent("onclick",b)}})()}})(chatease);
(function(c){var e=c.utils,f=c.events;c=c.core.renders;var k=c.modes;c.none=function(a,b){var d=e.extend(this,new f.eventdispatcher("renders.none"));d.setup=function(){e.isMSIE("(8|9)")?_object.setup&&(d.config.debug=!0,_object.setup(d.config),d.dispatchEvent(f.CHATEASE_READY,{id:d.config.id})):d.dispatchEvent(f.CHATEASE_READY,{id:d.config.id})};d.show=function(a,b,d){};d.send=function(){};d.clearInput=function(){};d.clearScreen=function(){};d.element=function(){return _object};d.resize=function(a,
b){};d.destroy=function(){};d.name=k.NONE;d.config=e.extend({},{},b);e.isMSIE("(8|9)")&&(a.innerHTML='<object id="cha-swf" name="cha-swf" align="middle" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+d.config.swf+'"><param name="quality" value="high"><param name="bgcolor" value="#ffffff"><param name="allowscriptaccess" value="sameDomain"><param name="allowfullscreen" value="true"><param name="wmode" value="transparent"><param name="FlashVars" value="id='+d.config.id+
'"></object>',_object=d.WebSocket=a.firstChild)}})(chatease);
(function(c){var e=c.utils,f=c.events,k=c.core;k.entity=function(a){var b=e.extend(this,new f.eventdispatcher("core.entity")),d,c,h;b.setup=function(){setTimeout(function(){h.setup()},0)};b.destroy=function(){h&&h.stop();c&&c.destroy();d&&d.destroy()};b.id=a.id;b.model=d=new k.model(a);b.view=c=new k.view(d);b.controller=h=new k.controller(d,c);h.addGlobalListener(function(a){b.dispatchEvent(a.type,a)});b.onSWFOpen=h.onOpen;b.onSWFMessage=h.onMessage;b.onSWFError=h.onError;b.onSWFClose=h.onClose;
b.send=h.send;b.close=h.close;b.getState=d.getState;b.resize=c.resize}})(chatease);
(function(c){var e=c.utils,f=c.events;c=c.core;var k=c.states,a=function(){var a=this,b;a.update=function(b){e.extend(a,b);b=a.role;if(b&240)c=0;else{var d=2E3;b&&(d=1E3-100*(b>>1));c=d}};a.limited=function(){var a=(new Date).getTime();if(a<b+c)return!0;b=a;return!1};e.extend(a,{id:0,name:"",icon:"",role:0});var c=b=0},b=function(){var a=this;a.update=function(b){e.extend(a,b)};a.add=function(a){b[a.id]=a};a.remove=function(a){delete b[a.id]};a.find=function(a){return b[a]};a.freeze=function(a,b,
d,e){var f=c[a];void 0==f&&(f={},c[a]=f);f[b]={manager:d,until:Math.floor((new Date).getTime()/1E3)+e}};a.unfreeze=function(a,b){(a=c[a])&&delete a[b]};a.limited=function(a,b){if(a=c[a])if(b=a[b])return Math.floor((new Date).getTime()/1E3)<b.until;return!1};e.extend(a,{id:0,stat:0,group:0});var b={};var c={}};c.model=function(d){var c=e.extend(this,new f.eventdispatcher("core.model")),h=k.CLOSED;c.setState=function(a){a!==h&&(h=a,c.dispatchEvent(f.CHATEASE_STATE,{state:a}))};c.getState=function(){return h};
c.setProperty=function(a,b){1==t.hasOwnProperty(a)&&(t[a]=b,c.dispatchEvent(f.CHATEASE_PROPERTY,{key:a,value:b}))};c.getProperty=function(a){return t[a]};c.getConfig=function(a){return c.config[a]};c.destroy=function(){};c.config=e.extend({},{},d);var t={user:new a,channel:new b,shield:!1}}})(chatease);
(function(c){var e=c.utils,f=c.events;c=c.core;var k=c.message.roles,a=c.renders,b=a.modes,d=c.skins;c.view=function(c){function g(a){if(a.ctrlKey||a.metaKey)return!0;switch(a.keyCode){case 13:q&&q.send()}if(/13/.test(a.keyCode))return a.preventDefault?a.preventDefault():a.returnValue=!1,!1}function t(a){y.resize()}function F(a){switch(a.key){case "more":a.value?e.addClass(l,"more"):e.removeClass(l,"more");q.refresh();break;case "shield":var b=a.value?"\u53d6\u6d88\u5c4f\u853d":"\u5c4f\u853d\u6d88\u606f";
document.getElementById(c.getConfig("id")+"-shieldtext").innerHTML='<span class="icon"></span>'+b}p(a)}function w(a){p(a)}function p(a){y.dispatchEvent(a.type,a)}var y=e.extend(this,new f.eventdispatcher("core.view")),n,l,H,q,v;y.setup=function(){q?(q.setup(),y.resize()):y.dispatchEvent(f.CHATEASE_SETUP_ERROR,{message:"Render not available!",name:c.config.render.name})};y.show=function(a,b,d){(!b||b.role&k.SYSTEM||!c.getProperty("shield"))&&q&&q.show(a,b,d)};y.resize=function(a,b){setTimeout(function(){q&&
q.resize(a,b);v&&v.resize(a,b)},0)};y.destroy=function(){n&&n.removeEventListener("keydown",g);q&&q.destroy()};(function(){n=e.createElement("div","cha-wrapper cha-skin-"+c.getConfig("skin").name);n.id=c.getConfig("id");l=e.createElement("div","cha-render");H=e.createElement("div","cha-contextmenu");n.appendChild(l);n.appendChild(H);var h=e.extend({},c.getConfig("render"),{id:c.getConfig("id"),url:c.getConfig("url"),width:c.getConfig("width"),height:c.getConfig("height"),maxlength:c.getConfig("maxlength"),
maxrecords:c.getConfig("maxrecords"),smoothing:c.getConfig("smoothing")});try{q=y.render=new a[h.name](l,h),q.addEventListener(f.CHATEASE_READY,p),q.addEventListener(f.CHATEASE_VIEW_SEND,p),q.addEventListener(f.CHATEASE_VIEW_PROPERTY,F),q.addEventListener(f.CHATEASE_VIEW_CLEARSCREEN,p),q.addEventListener(f.CHATEASE_VIEW_NICKCLICK,p),q.addEventListener(f.CHATEASE_RENDER_ERROR,w)}catch(A){e.log("Failed to init render "+h.name+"!")}h=e.extend({},c.getConfig("skin"),{id:c.getConfig("id"),width:c.config.width,
height:c.config.height,title:!!q.config.title,smoothing:c.getConfig("smoothing")});try{v=new d[h.name](h)}catch(A){e.log("Failed to init skin "+h.name+"!")}if(!q||q.name!=b.NONE){h=document.getElementById(c.getConfig("id"));h.parentNode.replaceChild(n,h);try{n.addEventListener("keydown",g),window.addEventListener("resize",t)}catch(A){n.attachEvent("onkeydown",g),window.attachEvent("onresize",t)}}})()}})(chatease);
(function(c){var e=c.utils,f=e.crypt,k=c.events,a=c.core,b=a.states,d=a.message,g=d.keys,h=d.cmds,t=d.opts,F=d.modes,w=d.roles,p=d.status;a.controller=function(a,n){function l(){if(u){if(a.getState()==b.CONNECTED){e.log("Websocket had connected already.");return}u.readyState!=WebSocket.CONNECTING&&u.readyState!=WebSocket.OPEN||u.close()}n.render.clearScreen();c.debug?n.show("\u804a\u5929\u5ba4\u8fde\u63a5\u4e2d\u2026"):e.log("\u804a\u5929\u5ba4\u8fde\u63a5\u4e2d\u2026");try{window.WebSocket=window.WebSocket||
window.MozWebSocket,window.WebSocket?(u=new WebSocket(a.config.url,"binary"),u.binaryType="arraybuffer",u.onopen=r.onOpen,u.onmessage=r.onMessage,u.onerror=r.onError,u.onclose=r.onClose):(u=n.render.WebSocket,u.connect())}catch(m){e.log("Failed to initialize websocket: "+m),q(p.NOT_ACCEPTABLE,null)}}function y(a){var b="";if("number"!=e.typeOf(a)&&(a=parseInt(a),NaN==a||0>a))return"";a&w.SYSTEM?b=(a&w.SYSTEM)==w.SYSTEM?b+"[\u7cfb\u7edf] ":a&w.SU_ADMIN?b+"[\u8d85\u7ba1] ":b+"[\u7ba1\u7406\u5458] ":
a&w.ANCHOR?b=(a&w.ANCHOR)==w.ANCHOR?b+"[\u4e3b\u64ad] ":a&w.SECRETARY?b+"[\u52a9\u7406] ":b+"[\u623f\u7ba1] ":a&w.VIP?b+="[VIP"+((a&w.VIP)-1)+"] ":(a&w.NORMAL)!=w.NORMAL&&(b+="[\u6e38\u5ba2] ");return b}function q(a,b){var c=v(a);c&&n.show(c);var d={raw:"error",error:{code:a,status:c}};e.foreach(b,function(a,b){"cmd"!=a&&"raw"!=a&&"error"!=a&&(d[a]=b)});r.dispatchEvent(k.ERROR,d)}function v(a){var b="";switch(a){case p.BadRequest:b="\u9519\u8bef\u8bf7\u6c42\uff01";break;case p.Unauthorized:b="\u8bf7\u5148\u767b\u5f55\uff01";
break;case p.Forbidden:b="\u6743\u9650\u9519\u8bef\uff01";break;case p.NotFound:b="\u672a\u77e5\u8bf7\u6c42\uff01";break;case p.NotAcceptable:b="\u65e0\u6cd5\u8bc6\u522b\uff01";break;case p.RequestTimeout:b="\u8bf7\u6c42\u8d85\u65f6\uff01";break;case p.TooManyRequests:b="\u64cd\u4f5c\u9891\u7e41\uff01";break;case p.InternalServerError:b="\u5185\u90e8\u9519\u8bef\uff01";break;case p.NotImplemented:b="\u65e0\u6cd5\u8bc6\u522b\uff01";break;case p.BadGateway:b="\u7f51\u5173\u9519\u8bef\uff01";break;case p.ServiceUnavailable:b=
"\u670d\u52a1\u8fc7\u8f7d\uff01";break;case p.GatewayTimeout:b="\u7f51\u5173\u8d85\u65f6\uff01"}return b}function z(a){B||(B=new e.timer(a,1),B.addEventListener(k.CHATEASE_TIMER,function(a){l()}));B.delay=a;B.reset();B.start()}function A(a){r.dispatchEvent(a.type,a)}var r=e.extend(this,new k.eventdispatcher("core.controller")),D=!1,u,B,x,C=0;r.setup=function(a){D||n.setup()};r.send=function(c,d){if(u&&a.getState()==b.CONNECTED)if("object"!=e.typeOf(c)||0==c.hasOwnProperty(g.CMD)||0==c.hasOwnProperty(g.DATA))q(p.BadRequest,
c);else{var h=a.getProperty("user");if(h.limited())q(p.TooManyRequests,c);else{var k=a.getProperty("channel");if(h.role<k.stat||k.limited(h.id,t.MUTE))q(p.Forbidden,c);else{d&&(I++,E[I]=d,c.seq=I);c=JSON.stringify(c);try{var m=f.stringToUTF8ByteArray(c),n=new Uint8Array(m);u.send(n.buffer);return}catch(K){}try{u.send(c)}catch(K){}}}}else l()};r.onOpen=function(c){a.setState(b.CONNECTED)};r.onMessage=function(b){var l=b.data;"arraybuffer"===e.typeOf(b.data)&&(l=new Uint8Array(b.data),l=f.UTF8ByteArrayToString(l));
try{var m=eval("("+l+")")}catch(J){e.log("Failed to parse JSON. \nError: "+J+"\ndata: "+b.data);return}m.hasOwnProperty(g.SEQ)&&E.hasOwnProperty(m.seq)&&(b=E[m.seq],l=b.result,m.cmd==h.ERROR&&(l=b.status),l&&l.call(null,m),delete E[m.seq]);b=a.getProperty("user");l=a.getProperty("channel");switch(m.cmd){case h.INFO:b.update(e.extend({},m.user));l.update(e.extend({},m.channel));c.debug?n.show("\u5df2\u52a0\u5165\u623f\u95f4\uff08"+l.id+"\uff09\u3002"):e.log("\u5df2\u52a0\u5165\u623f\u95f4\uff08"+l.id+
"\uff09\u3002");b.role<l.stat&&n.show("\u60a8\u6240\u5728\u7684\u7528\u6237\u7ec4\u4e0d\u80fd\u53d1\u8a00\uff01");r.dispatchEvent(k.CHATEASE_INFO,m);break;case h.TEXT:try{x||(x=new e.filter(a.config.keywords)),m.data=x.replace(m.data)}catch(J){e.log("Failed to execute filter.")}l.add(m.user);n.show(m.data,m.user,m.mode);r.dispatchEvent(k.CHATEASE_MESSAGE,m);break;case h.USER:r.dispatchEvent(k.CHATEASE_USER,m);break;case h.JOIN:l.add(m.user);b=y(m.user.role);n.show(b+m.user.name+" \u8fdb\u5165\u623f\u95f4\u3002");
r.dispatchEvent(k.CHATEASE_JOIN,m);break;case h.LEFT:l.remove(m.user);b=y(m.user.role);n.show(b+m.user.name+" \u79bb\u5f00\u623f\u95f4\u3002");r.dispatchEvent(k.CHATEASE_LEFT,m);break;case h.CTRL:var p=d.parseControl(m.data);if(p){var u=p[0];p=p[1];0==p?l.unfreeze(m.sub,u):l.freeze(m.sub,u,m.user,p);if(m.sub==b.id)switch(u){case t.MUTE:n.show("\u60a8\u5df2\u88ab"+(p?"":"\u89e3\u9664")+"\u7981\u8a00"+(p?p+"\u79d2":"")+"\u3002");break;case t.FORBID:n.show("\u60a8\u5df2\u88ab\u9650\u5236\u8fdb\u5165\u8be5\u623f\u95f4"+
p+"\u79d2\u3002"),a.config.maxretries=0,r.close()}}break;case h.EXTERN:r.dispatchEvent(k.CHATEASE_EXTERN,m);break;case h.ERROR:q(m.error.code,m);break;default:e.log("Unknown cmd: "+m.cmd+", ignored.")}};r.onError=function(c){a.setState(b.ERROR)};r.onClose=function(c){a.setState(b.CLOSED)};r.close=function(){u&&u.close()};var E={};var I=0;var G="";a.addEventListener(k.CHATEASE_STATE,function(d){switch(d.state){case b.CONNECTED:c.debug?n.show("\u804a\u5929\u5ba4\u5df2\u8fde\u63a5\u2026"):e.log("\u804a\u5929\u5ba4\u5df2\u8fde\u63a5\u2026");
C=0;r.dispatchEvent(k.CHATEASE_CONNECT);break;case b.CLOSED:c.debug?n.show("\u804a\u5929\u5ba4\u8fde\u63a5\u5df2\u65ad\u5f00\uff01"):e.log("\u804a\u5929\u5ba4\u8fde\u63a5\u5df2\u65ad\u5f00\uff01");r.dispatchEvent(k.CHATEASE_CLOSE,{channel:{id:a.channel}});if(0>a.config.maxretries||C<a.config.maxretries)d=Math.ceil(a.config.retrydelay+3E3*Math.random()),c.debug?n.show("\u6b63\u5728\u51c6\u5907\u91cd\u8fde\uff0c"+d/1E3+"\u79d2..."):e.log("\u6b63\u5728\u51c6\u5907\u91cd\u8fde\uff0c"+d/1E3+"\u79d2..."),
C++,z(d);break;case b.ERROR:c.debug?n.show("\u804a\u5929\u5ba4\u5f02\u5e38\uff01"):e.log("\u804a\u5929\u5ba4\u5f02\u5e38\uff01");r.dispatchEvent(k.ERROR,{message:"Chat room error!",channel:{id:a.channel}});break;default:r.dispatchEvent(k.ERROR,{message:"Unknown model state!",state:d.state})}});a.addEventListener(k.CHATEASE_PROPERTY,function(a){A(a)});n.addEventListener(k.CHATEASE_READY,function(b){D||(e.log("Chat ready!"),D=!0,A(b),c.debug||n.show("\u804a\u5929\u5ba4\u5df2\u8fde\u63a5\uff01"),l(),
window.addEventListener("beforeunload",function(b){u&&a.getState()}))});n.addEventListener(k.CHATEASE_SETUP_ERROR,function(c){a.setState(b.ERROR);A(c)});n.addEventListener(k.CHATEASE_VIEW_SEND,function(b){var c=b.data.data;if(c){b={cmd:h.TEXT,data:c,mode:b.data.mode};var d=c.match(/^\/r\s(\S+)\s(.*)/i);if(d&&2<d.length){if(!a.getProperty("channel").find(G)){q(p.NotFound,null);return}b.mode=F.UNI;b.sub=G;c=d[2]}0<=a.config.maxlength&&(c=c.substr(0,a.config.maxlength));if(c=e.trim(c))b.data=c,r.send(b)}else n.show("\u8bf7\u8f93\u5165\u5185\u5bb9\uff01")});
n.addEventListener(k.CHATEASE_VIEW_PROPERTY,function(b){a.setProperty(b.key,b.value)});n.addEventListener(k.CHATEASE_VIEW_CLEARSCREEN,function(a){n.render.clearScreen();A(a)});n.addEventListener(k.CHATEASE_VIEW_NICKCLICK,function(b){var c=a.getProperty("channel");G=b.user.id;r.dispatchEvent(k.CHATEASE_NICKCLICK,{user:b.user,channel:{id:c.id,group:c.group,stat:c.stat}})});n.addEventListener(k.CHATEASE_RENDER_ERROR,function(c){a.setState(b.ERROR);A(c)})}})(chatease);
(function(c){var e=c.utils,f=c.events,k=c.embed=function(a){function b(a){switch(a.type){case f.ERROR:case f.CHATEASE_SETUP_ERROR:case f.CHATEASE_RENDER_ERROR:d.errorScreen(a.message);d.dispatchEvent(f.ERROR,a);break;default:d.dispatchEvent(a.type,a)}}var d=e.extend(this,new f.eventdispatcher("embed")),g={},h=null,t=!1;d.embed=function(){try{g=new k.config(a.config),h=new k.embedder(a,g)}catch(F){e.log("Failed to init embedder!");d.dispatchEvent(f.CHATEASE_SETUP_ERROR,{message:"Failed to init embedder!",
render:g.render.name});return}h.addGlobalListener(b);h.embed()};d.errorScreen=function(a){t||(t=!0,c.api.displayError(a,g))};(function(){e.foreach(a.config.events,function(b,c){b=a[b];"function"===e.typeOf(b)&&b.call(a,c)})})()}})(chatease);
(function(c){var e=c.utils,f=c.embed,k=c.core.renders.modes,a=c.core.skins.modes;f.config=function(b){b=e.extend({},{url:"ws://"+window.location.host+"/ch1?token=",width:640,height:400,keywords:"",maxlength:50,maxrecords:50,maxretries:-1,retrydelay:3E3,smoothing:!1,debug:!1,render:{name:k.DEFAULT,title:"CHATEASE "+c.version,swf:"swf/chatease.swf"},skin:{name:a.DEFAULT}},b);b.smoothing=b.smoothing&&e.isMobile()&&BScroll;return b};f.config.addConfig=function(a,c){return e.extend(a,c)}})(chatease);
(function(c){var e=c.utils,f=c.events,k=c.core;c.embed.embedder=function(a,b){function c(a){g.dispatchEvent(a.type,a)}var g=e.extend(this,new f.eventdispatcher("embed.embedder"));g.embed=function(){var d=new k.entity(b);d.addGlobalListener(c);d.setup();a.setEntity(d,b.render.name)}}})(chatease);