chatease=function(){if(chatease.api)return chatease.api.getInstance.apply(this,arguments)};chatease.version="1.1.05";
(function(d){function f(c){return null!==navigator.userAgent.toLowerCase().match(c)}var e=d.utils={};e.exists=function(c){switch(e.typeOf(c)){case "string":return 0<c.length;case "object":return null!==c;case "null":return!1}return!0};e.extend=function(){var c=Array.prototype.slice.call(arguments,0),b=c[0];if(1<c.length)for(var a=1;a<c.length;a++)e.foreach(c[a],function(a,c){void 0!==c&&null!==c&&(b[a]=c)});return b};e.foreach=function(c,b){for(var a in c)c.hasOwnProperty&&"function"===e.typeOf(c.hasOwnProperty)?
c.hasOwnProperty(a)&&b(a,c[a]):b(a,c[a])};e.getCookie=function(c){var b;return(b=document.cookie.match(new RegExp("(^| )"+c+"=([^;]*)(;|$)")))?unescape(b[2]):null};e.formatTime=function(c){var b=c.getHours()+1,a=c.getMinutes(),h=c.getSeconds();return c.toLocaleDateString()+" "+e.pad(b,2)+":"+e.pad(a,2)+":"+e.pad(h,2)};e.pad=function(c,b){for(c+="";c.length<b;)c="0"+c;return c};e.typeOf=function(c){if(null===c||void 0===c)return"null";var b=typeof c;if("object"===b)try{var a=c.toString().match(/^\[object ([a-z]+)\]$/i);
if(a&&1<a.length&&a[1])return a[1].toLowerCase()}catch(h){}return b};e.isInt=function(c){return 0===parseFloat(c)%1};e.trim=function(c){return c.replace(/^\s+|\s+$/g,"")};e.indexOf=function(c,b){if(null==c)return-1;for(var a=0;a<c.length;a++)if(c[a]===b)return a;return-1};e.createElement=function(c,b){c=document.createElement(c);b&&(c.className=b);return c};e.addClass=function(c,b){var a="string"===e.typeOf(c.className)?c.className.split(" "):[];b="array"===e.typeOf(b)?b:b.split(" ");e.foreach(b,
function(b,c){-1===e.indexOf(a,c)&&a.push(c)});c.className=e.trim(a.join(" "))};e.removeClass=function(c,b){var a="string"===e.typeOf(c.className)?c.className.split(" "):[];b="array"===e.typeOf(b)?b:b.split(" ");e.foreach(b,function(b,c){b=e.indexOf(a,c);0<=b&&a.splice(b,1)});c.className=e.trim(a.join(" "))};e.emptyElement=function(c){for(;c.firstChild;)c.removeChild(c.firstChild)};e.isMSIE=function(c){return f(new RegExp("msie\\s*"+(c||""),"i"))};e.isSafari=function(){return f(/safari/i)&&!f(/chrome/i)&&
!f(/chromium/i)&&!f(/android/i)};e.isIOS=function(c){return c?f(new RegExp("iP(hone|ad|od).+\\sOS\\s"+c,"i")):f(/iP(hone|ad|od)/i)};e.isAndroid=function(c,b){return b&&f(/chrome\/[123456789]/i)&&!f(/chrome\/18/)?!1:c?(e.isInt(c)&&!/\./.test(c)&&(c=""+c+"."),f(new RegExp("Android\\s*"+c,"i"))):f(/Android/i)};e.isMobile=function(){return e.isIOS()||e.isAndroid()};e.getProtocol=function(c){var b="http";(c=c.match(/^([a-z]+):\/\//i))&&1<c.length&&(b=c[1]);return b};e.getFileName=function(c){var b="";
(c=c.match(/\/([a-z0-9\(\)\[\]\{\}\s\-_%]*(\.[a-z0-9]+)?)$/i))&&1<c.length&&(b=c[1]);return b};e.getExtension=function(c){var b="";(c=c.match(/\/?([a-z0-9\(\)\[\]\{\}\s\-_%]*(\.([a-z0-9]+))*)\??([a-z0-9\-_%&=]*)$/i))&&3<c.length&&(b=c[3]);return b};var g=window.console=window.console||{log:function(){}};e.log=function(){var c=Array.prototype.slice.call(arguments,0);"object"===e.typeOf(g.log)?g.log(c):g.log.apply(g,c)}})(chatease);
(function(d){var f=d.utils;d=f.crypt={};d.stringToByteArray=function(e){for(var g=[],c=0,b=0;b<e.length;b++){for(var a=e.charCodeAt(b);255<a;)g[c++]=a&255,a>>=8;g[c++]=a}return g};d.byteArrayToString=function(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var g="",c=0;c<e.length;c+=8192){var b=Array.slice(e,c,c+8192);g+=String.fromCharCode.apply(null,b)}return g};d.byteArrayToHex=function(e){return Array.map(e,function(e){e=e.toString(16);return 1<e.length?e:"0"+e}).join("")};d.hexToByteArray=
function(e){if(0!==e.length%2)return f.log("Key string length must be multiple of 2."),null;for(var g=[],c=0;c<e.length;c+=2)g.push(parseInt(e.substring(c,c+2),16));return g};d.stringToUTF8ByteArray=function(e){for(var f=[],c=0,b=0;b<e.length;b++){var a=e.charCodeAt(b);128>a?f[c++]=a:(2048>a?f[c++]=a>>6|192:(55296==(a&64512)&&b+1<e.length&&56320==(e.charCodeAt(b+1)&64512)?(a=65536+((a&1023)<<10)+(e.charCodeAt(++b)&1023),f[c++]=a>>18|240,f[c++]=a>>12&63|128):f[c++]=a>>12|224,f[c++]=a>>6&63|128),f[c++]=
a&63|128)}return f};d.UTF8ByteArrayToString=function(e){for(var f=[],c=0,b=0;c<e.length;){var a=e[c++];if(128>a)f[b++]=String.fromCharCode(a);else if(191<a&&224>a){var h=e[c++];f[b++]=String.fromCharCode((a&31)<<6|h&63)}else if(239<a&&365>a){h=e[c++];var d=e[c++],m=e[c++];a=((a&7)<<18|(h&63)<<12|(d&63)<<6|m&63)-65536;f[b++]=String.fromCharCode(55296+(a>>10));f[b++]=String.fromCharCode(56320+(a&1023))}else h=e[c++],d=e[c++],f[b++]=String.fromCharCode((a&15)<<12|(h&63)<<6|d&63)}return f.join("")};d.XORByteArray=
function(e,d){if(e.length!==d.length)f.log("XOR array lengths must match.");else{for(var c=[],b=0;b<e.length;b++)c.push(e[b]^d[b]);return c}}})(chatease);
(function(d){function f(){var c=document.createElement("style");c.type="text/css";document.getElementsByTagName("head")[0].appendChild(c);return c.sheet||c.styleSheet}var e=d.utils,g;(e.css=function(c,b){g||(g=f());var a="";e.foreach(b,function(b,c){a+=b+": "+c+"; "});try{g.insertRule?g.insertRule(c+" { "+a+"}",g.cssRules.length):g.addRule(c,a,g.rules.length)}catch(h){e.log("Failed to insert css rule: "+c)}}).style=function(c,b,a){if(void 0!==c&&null!==c)for(void 0===c.length&&(c=[c]),b=e.extend({},
b),a=0;a<c.length;a++){var h=c[a];void 0!==h&&null!==h&&e.foreach(b,function(a,b){a=a.split("-");for(var c=1;c<a.length;c++)a[c]=a[c].charAt(0).toUpperCase()+a[c].slice(1);a=a.join("");h.style[a]!==b&&(h.style[a]=b)})}}})(chatease);(function(d){var f=d.utils;f.filter=function(e){var d="";this.replace=function(b){return d&&c?b.replace(c,"**"):b};if("string"==f.typeOf(e)&&e){d=e;var c=new RegExp(d,"ig")}}})(chatease);
(function(d){d.events={ERROR:"error",CHATEASE_READY:"chateaseReady",CHATEASE_SETUP_ERROR:"chateaseSetupError",CHATEASE_RENDER_ERROR:"chateaseRenderError",CHATEASE_STATE:"chateaseState",CHATEASE_PROPERTY:"chateaseProperty",CHATEASE_CONNECT:"chateaseConnect",CHATEASE_INFO:"chateaseInfo",CHATEASE_MESSAGE:"chateaseMessage",CHATEASE_USER:"chateaseUser",CHATEASE_JOIN:"chateaseJoin",CHATEASE_LEFT:"chateaseLeft",CHATEASE_CTRL:"chateaseCtrl",CHATEASE_EXTERN:"chateaseExtern",CHATEASE_NICKCLICK:"chateaseNickClick",
CHATEASE_CLOSE:"chateaseClose",CHATEASE_VIEW_SEND:"chateaseViewSend",CHATEASE_VIEW_PROPERTY:"chateaseViewProperty",CHATEASE_VIEW_SHOWMORE:"chateaseViewShowMore",CHATEASE_VIEW_CLEARSCREEN:"chateaseViewClearScreen",CHATEASE_VIEW_NICKCLICK:"chateaseViewNickClick",CHATEASE_TIMER:"chateaseTimer",CHATEASE_TIMER_COMPLETE:"chateaseTimerComplete"}})(chatease);
(function(d){var f=d.utils;d.events.eventdispatcher=function(e){function g(a,b,c){if(a)for(var h=0;h<a.length;h++){var e=a[h];if(e){null!==e.count&&0===--e.count&&delete a[h];try{e.listener(b)}catch(v){f.log('Error handling "'+c+'" event listener ['+h+"]: "+v.toString(),e.listener,b)}}}}var c={},b=[];this.addEventListener=function(a,b,e){try{f.exists(c[a])||(c[a]=[]),"string"===f.typeOf(b)&&(b=(new Function("return "+b))()),c[a].push({listener:b,count:e||null})}catch(m){f.log("error",m)}return!1};
this.removeEventListener=function(a,b){if(c[a]){try{if(void 0===b){c[a]=[];return}var e;for(e=0;e<c[a].length;e++)if(c[a][e].listener.toString()===b.toString()){c[a].splice(e,1);break}}catch(m){f.log("error",m)}return!1}};this.addGlobalListener=function(a,c){try{"string"===f.typeOf(a)&&(a=(new Function("return "+a))()),b.push({listener:a,count:c||null})}catch(n){f.log("error",n)}return!1};this.removeGlobalListener=function(a){if(a){try{var c;for(c=b.length-1;0<=c;c--)b[c].listener.toString()===a.toString()&&
b.splice(c,1)}catch(n){f.log("error",n)}return!1}};this.dispatchEvent=function(a,h){h||(h={});f.extend(h,{id:e,version:d.version,type:a});"events"===d.debug&&f.log(a,h);g(c[a],h,a);g(b,h,a)}}})(chatease);
(function(d){var f=d.utils,e=d.events;f.timer=function(d,c){function b(){g++;a.dispatchEvent(e.CHATEASE_TIMER);0<a.repeatCount&&g>=a.repeatCount&&(a.stop(),a.dispatchEvent(e.CHATEASE_TIMER_COMPLETE))}var a=f.extend(this,new e.eventdispatcher("utils.timer")),h,g=0,m=!1;a.start=function(){!1===m&&(h=setInterval(b,a.delay),m=!0)};a.stop=function(){m&&(clearInterval(h),h=0,m=!1)};a.reset=function(){a.stop();g=0};a.currentCount=function(){return g};a.running=function(){return m};a.delay=d||50;a.repeatCount=
c||0}})(chatease);
(function(d){var f=d.utils,e=d.events,g={},c={onError:e.ERROR,onReady:e.CHATEASE_READY,onConnect:e.CHATEASE_CONNECT,onIdent:e.CHATEASE_INFO,onMessage:e.CHATEASE_MESSAGE,onJoin:e.CHATEASE_JOIN,onLeft:e.CHATEASE_LEFT,onUser:e.CHATEASE_USER,onExtern:e.CHATEASE_EXTERN,onNickClick:e.CHATEASE_VIEW_NICKCLICK,onClose:e.CHATEASE_CLOSE};d.api=function(b){function a(a){h.dispatchEvent(a.type,a)}var h=f.extend(this,new e.eventdispatcher("api")),g;h.container=b;h.id=b.id;h.setup=function(b){f.emptyElement(h.container);d.debug=
!!b.debug;h.config=b;h.config.id=h.id;h.embedder=new d.embed(h);h.embedder.addGlobalListener(a);h.embedder.embed();return h};h.setEntity=function(a,b){g=a;h.onSWFLoaded=g.setup;h.onSWFOpen=g.onSWFOpen;h.onSWFMessage=g.onSWFMessage;h.onSWFError=g.onSWFError;h.onSWFClose=g.onSWFClose;h.send=g.send;h.close=g.close;h.getState=g.getState;h.resize=g.resize};(function(){f.foreach(c,function(a,b){h[a]=function(a){h.addEventListener(b,a)}})})()};d.api.getInstance=function(b){var a;null==b?b=0:b.nodeType?a=
b:"string"===f.typeOf(b)&&(a=document.getElementById(b));if(a){var c=g[a.id];c||(g[b]=c=new d.api(a));return c}return"number"===f.typeOf(b)?g[b]:null};d.api.displayError=function(b,a){}})(chatease);(function(d){d.core={}})(chatease);(function(d){d.core.states={CONNECTED:"connected",CLOSED:"closed",ERROR:"error"}})(chatease);
(function(d){d.core.message={};d=d.core.message;d.keys={CMD:"cmd",SEQ:"seq",DATA:"data",MODE:"mode",USER:"user",SUB:"sub",CHANNEL:"channel",GROUP:"group",ERROR:"error",ID:"id",NAME:"name",ICON:"icon",ROLE:"role",STAT:"stat",STATUS:"status",CODE:"code"};d.cmds={INFO:"info",TEXT:"text",USER:"user",JOIN:"join",LEFT:"left",CTRL:"ctrl",EXTERN:"extern",PING:"ping",PONG:"pong",ERROR:"error"};d.opts={MUTE:"mute",FORBID:"forbid"};d.modes={UNI:0,MULTI:1,BROADCAST:2,OUTDATED:128};d.roles={VISITOR:0,NORMAL:1,
VIP:14,ASSISTANT:16,SECRETARY:32,ANCHOR:48,ADMIN:64,SU_ADMIN:128,SYSTEM:192};d.status={BadRequest:400,Unauthorized:401,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthRequired:407,RequestTimeout:408,TooManyRequests:429,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504};d.parseControl=function(f){f=/^([a-z]+):([0-9]+)$/i.exec(f);return null==f?null:[f[1],parseInt(f[2])]}})(chatease);
(function(d){(d.core.skins={}).modes={DEFAULT:"def",MOBILE:"mobile"}})(chatease);
(function(d){var f=d.utils,e=d.events,g=d.core.message.roles;d=d.core.skins;var c=d.modes,b=f.css,a="cha-skin",h={0:"r-visitor",1:"r-normal",14:"r-vip",16:"r-assistant",32:"r-secretary",48:"r-anchor",64:"r-admin",128:"r-suadmin",192:"r-system"};d.def=function(d){var m=f.extend(this,new e.eventdispatcher("skins.def"));m.resize=function(a,c){a=document.getElementById(m.config.id);c=document.getElementById(m.config.id+"-input");b.style(c,{width:a.clientWidth-90+"px"})};m.name=c.DEFAULT;m.config=f.extend({},
d);a+="-"+m.name;b(".cha-wrapper",{width:"100%",height:"100%","background-color":"#171717"});b(".cha-wrapper *",{margin:"0",padding:"0","font-family":"Microsoft YaHei,arial,sans-serif","font-size":"14px","font-weight":"normal","box-sizing":"content-box"});b("."+a+" .cha-checkbox",{color:"#E6E6E6",cursor:"pointer"});b("."+a+" .cha-checkbox .icon",{"float":"left",padding:"0 5px",width:"14px",height:"14px","background-repeat":"no-repeat","background-position":"center","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOAgMAAABiJsVCAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJUExURUxpcebm5ubm5kbBEu0AAAACdFJOUwCgoEVu0AAAABpJREFUCNdjYAABqVWrHBi0Vq1qII0AawMBACnPF0kf/g8sAAAAAElFTkSuQmCC)",
display:"inline-block"});b("."+a+" .cha-checkbox.checked .icon",{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAA40lEQVQ4T52SvXHCQBCF3wuUKDHp7QXYFZgOrBKgAqADOsDuRK7ALoEOGDqwk1UoSHSBZrTMMWhGY358w0YbvG9/3i7xYDByqloCmKfUMLPSe7/sQUuADmfNk4gwCTSzXZZli7ZtS5KvSWCE8jwvmqZZkVzHrv+CPRRCKAB89etcA38BjM+CA8lJzLuu25Ic3QJ/RORl4PBMRL5VdQPgbWjeRUcz+/Dev1dVVTjnNqo6HY54b1SQXDrnyrquRyGELYDnv6e6Z87MzCa9i8mgme2jeGjIrR2TXw7Ap4gsTp/zSBwBq1l6D5ci9L8AAAAASUVORK5CYII=)"});b("."+
a+" .cha-button",{padding:"0 10px","font-style":"normal","font-weight":"normal","text-align":"center","text-transform":"uppercase","white-space":"nowrap","word-spacing":"normal",border:"none","border-radius":"2px",cursor:"pointer",display:"inline-block","-webkit-font-smoothing":"subpixel-antialiased","-moz-osx-font-smoothing":"grayscale",transition:"150ms ease-in-out","transition-property":"background-color, color"});b("."+a+" .cha-button.red",{color:"#FFFFFF","background-color":"#FF0046"});b("."+
a+" .cha-button.red:hover",{"background-color":"#97052D"});b("."+a+" .cha-button.blue",{color:"#FFFFFF","background-color":"#0B7EF4"});b("."+a+" .cha-button.blue:hover",{"background-color":"#0966C3"});b("."+a+" .cha-button.white",{color:"#000000","background-color":"#FFFFFF"});b("."+a+" .cha-button.white:hover",{"background-color":"#E0E0E0"});b("."+a+" .cha-button.gray",{color:"#000000","background-color":"#E0E0E0"});b("."+a+" .cha-button.gray:hover",{"background-color":"#96A0B4"});b("."+a+" .cha-render",
{width:"100%",height:"100%",position:"relative"});b("."+a+" .cha-render object",{width:"0",height:"0",position:"absolute"});b("."+a+" .cha-render .cha-title",{width:"100%",height:"40px","font-family":"inherit","font-weight":"normal","text-align":"center","line-height":"40px",color:"#E6E6E6","background-color":"inherit",cursor:"default","pointer-events":"none"});b("."+a+" .cha-render .cha-console",{color:"#242424",top:(m.config.title?40:0)+"px",right:"0",bottom:"100px",left:"0",position:"absolute",
"background-color":"#F8F8F8","overflow-x":"hidden","overflow-y":m.config.smoothing?"hidden":"scroll"});b("."+a+" .cha-render .cha-console > div",{padding:"0 6px "+(m.config.smoothing?"6px":"0")+" 6px"});b("."+a+" .cha-render .cha-console > div > div",{margin:"6px 0","line-height":"20px"});b("."+a+" .cha-render .cha-console .user",{cursor:"pointer"});b("."+a+" .cha-render .cha-console .area",{"margin-right":"2px","vertical-align":"middle"});b("."+a+" .cha-render .cha-console .area.uni",{color:"#F76767"});
b("."+a+" .cha-render .cha-console .area.outdated",{color:"#F76767"});b("."+a+" .cha-render .cha-console .icon",{"margin-right":"4px",width:"20px",height:"20px",display:"inline-block","vertical-align":"middle"});b("."+a+" .cha-render .cha-console .role",{"margin-right":"2px",padding:"0 2px",font:"normal 12px Microsoft YaHei,arial,sans-serif","white-space":"nowrap","word-spacing":"normal",border:"1px solid #3CAFAB","border-radius":"2px","vertical-align":"middle"});b("."+a+" .cha-render .cha-console ."+
h[g.VISITOR]+" .role, ."+a+" .cha-render .cha-console ."+h[g.NORMAL]+" .role, ."+a+" .cha-render .cha-console ."+h[g.SYSTEM]+" .role",{display:"none"});b("."+a+" .cha-render .cha-console ."+h[g.VIP]+"1 .role, ."+a+" .cha-render .cha-console ."+h[g.VIP]+"2 .role, ."+a+" .cha-render .cha-console ."+h[g.VIP]+"3 .role",{color:"#3CAFAB","border-color":"#3CAFAB"});b("."+a+" .cha-render .cha-console ."+h[g.VIP]+"4 .role, ."+a+" .cha-render .cha-console ."+h[g.VIP]+"5 .role, ."+a+" .cha-render .cha-console ."+
h[g.VIP]+"6 .role, ."+a+" .cha-render .cha-console ."+h[g.VIP]+"7 .role",{color:"#77C773","border-color":"#77C773"});b("."+a+" .cha-render .cha-console ."+h[g.ASSISTANT]+" .role, ."+a+" .cha-render .cha-console ."+h[g.SECRETARY]+" .role, ."+a+" .cha-render .cha-console ."+h[g.ANCHOR]+" .role",{color:"#5382E2","border-color":"#5382E2"});b("."+a+" .cha-render .cha-console ."+h[g.ADMIN]+" .role, ."+a+" .cha-render .cha-console ."+h[g.SU_ADMIN]+" .role",{color:"#F76767","border-color":"#F76767"});b("."+
a+" .cha-render .cha-console .nick",{color:"#5382E2","text-decoration":"none"});b("."+a+" .cha-render .cha-console ."+h[g.SYSTEM]+", ."+a+" .cha-render .cha-console ."+h[g.SYSTEM]+" .nick",{color:"#33CC00",cursor:"default","pointer-events":"none"});b("."+a+" .cha-render .cha-console .context",{"word-wrap":"break-word"});b("."+a+" .cha-render .cha-controls",{height:"40px",right:"0",bottom:"60px",left:"0",position:"absolute",overflow:"hidden","line-height":"100%","background-color":"inherit"});b("."+
a+" .cha-render .cha-controls > *",{margin:"8px 0","text-align":"center","line-height":"24px",display:"block"});b("."+a+" .cha-render .cha-controls .shieldtext",{"float":"left"});b("."+a+" .cha-render .cha-controls .shieldtext .icon",{padding:"5px"});b("."+a+" .cha-render .cha-controls .clearscreen",{"float":"right",width:"50px"});b("."+a+" .cha-render .cha-dialog",{height:"60px",right:"0",bottom:"0",left:"0",position:"absolute",overflow:"hidden","background-color":"#E0E0E0"});b("."+a+" .cha-render .cha-dialog .more",
{display:"none"});b("."+a+" .cha-render .cha-dialog textarea",{padding:"6px 10px",width:m.config.width-90+"px",height:"48px",resize:"none",border:"0 none","background-color":"#E6E6E6"});b("."+a+" .cha-render .cha-dialog .send",{width:"50px",height:"100%",top:"0",right:"0",position:"absolute"})}})(chatease);
(function(d){var f=d.utils,e=d.events,g=d.core.message.roles;d=d.core.skins;var c=d.modes,b=f.css,a="cha-skin",h={0:"r-visitor",1:"r-normal",14:"r-vip",16:"r-assistant",32:"r-secretary",48:"r-anchor",64:"r-admin",128:"r-suadmin",192:"r-system"};d.mobile=function(d){var m=f.extend(this,new e.eventdispatcher("skins.mobile"));m.resize=function(a,c){a=document.getElementById(m.config.id);c=document.getElementById(m.config.id+"-input");b.style(c,{width:a.clientWidth-114+"px"})};m.name=c.MOBILE;m.config=
f.extend({},d);a+="-"+m.name;b(".cha-wrapper",{width:"100%",height:"100%","background-color":"#171717"});b(".cha-wrapper *",{margin:"0",padding:"0","font-family":"Microsoft YaHei,arial,sans-serif","font-size":"14px","font-weight":"normal","box-sizing":"content-box"});b("."+a+" .cha-checkbox",{color:"#E6E6E6",cursor:"pointer"});b("."+a+" .cha-checkbox .icon",{"float":"left",padding:"0 5px",width:"14px",height:"14px","background-repeat":"no-repeat","background-position":"center","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOAgMAAABiJsVCAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJUExURUxpcebm5ubm5kbBEu0AAAACdFJOUwCgoEVu0AAAABpJREFUCNdjYAABqVWrHBi0Vq1qII0AawMBACnPF0kf/g8sAAAAAElFTkSuQmCC)",
display:"inline-block"});b("."+a+" .cha-checkbox.checked .icon",{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAA40lEQVQ4T52SvXHCQBCF3wuUKDHp7QXYFZgOrBKgAqADOsDuRK7ALoEOGDqwk1UoSHSBZrTMMWhGY358w0YbvG9/3i7xYDByqloCmKfUMLPSe7/sQUuADmfNk4gwCTSzXZZli7ZtS5KvSWCE8jwvmqZZkVzHrv+CPRRCKAB89etcA38BjM+CA8lJzLuu25Ic3QJ/RORl4PBMRL5VdQPgbWjeRUcz+/Dev1dVVTjnNqo6HY54b1SQXDrnyrquRyGELYDnv6e6Z87MzCa9i8mgme2jeGjIrR2TXw7Ap4gsTp/zSBwBq1l6D5ci9L8AAAAASUVORK5CYII=)"});b("."+
a+" .cha-button",{padding:"0 10px","font-style":"normal","font-weight":"normal","text-align":"center","text-transform":"uppercase","white-space":"nowrap","word-spacing":"normal",border:"none","border-radius":"2px",cursor:"pointer",display:"inline-block","-webkit-font-smoothing":"subpixel-antialiased","-moz-osx-font-smoothing":"grayscale",transition:"150ms ease-in-out","transition-property":"background-color, color"});b("."+a+" .cha-button.red",{color:"#FFFFFF","background-color":"#FF0046"});b("."+
a+" .cha-button.red:hover",{"background-color":"#97052D"});b("."+a+" .cha-button.blue",{color:"#FFFFFF","background-color":"#0B7EF4"});b("."+a+" .cha-button.blue:hover",{"background-color":"#0966C3"});b("."+a+" .cha-button.white",{color:"#000000","background-color":"#FFFFFF"});b("."+a+" .cha-button.white:hover",{"background-color":"#E0E0E0"});b("."+a+" .cha-button.gray",{color:"#000000","background-color":"#E0E0E0"});b("."+a+" .cha-button.gray:hover",{"background-color":"#96A0B4"});b("."+a+" .cha-render",
{width:"100%",height:"100%",position:"relative",overflow:"hidden"});b("."+a+" .cha-render object",{width:"0",height:"0",position:"absolute"});b("."+a+" .cha-render .cha-title",{width:"100%",height:"40px","font-family":"inherit","font-weight":"normal","text-align":"center","line-height":"40px",color:"#E6E6E6","background-color":"inherit",cursor:"default","pointer-events":"none"});b("."+a+" .cha-render .cha-console",{color:"#242424",top:(m.config.title?40:0)+"px",right:"0",bottom:"40px",left:"0",position:"absolute",
"background-color":"#F8F8F8","overflow-x":"hidden","overflow-y":m.config.smoothing?"hidden":"scroll"});b("."+a+" .cha-render.more .cha-console",{bottom:"130px"});b("."+a+" .cha-render .cha-console > div",{padding:"0 6px "+(m.config.smoothing?"6px":"0")+" 6px"});b("."+a+" .cha-render .cha-console > div > div",{margin:"6px 0","line-height":"20px"});b("."+a+" .cha-render .cha-console .user",{cursor:"pointer"});b("."+a+" .cha-render .cha-console .area",{"margin-right":"2px","vertical-align":"middle"});
b("."+a+" .cha-render .cha-console .area.uni",{color:"#F76767"});b("."+a+" .cha-render .cha-console .area.outdated",{color:"#F76767"});b("."+a+" .cha-render .cha-console .icon",{"margin-right":"4px",width:"20px",height:"20px",display:"inline-block","vertical-align":"middle"});b("."+a+" .cha-render .cha-console .role",{"margin-right":"2px",padding:"0 2px",font:"normal 12px Microsoft YaHei,arial,sans-serif","white-space":"nowrap","word-spacing":"normal",border:"1px solid #3CAFAB","border-radius":"2px",
"vertical-align":"middle"});b("."+a+" .cha-render .cha-console ."+h[g.VISITOR]+" .role, ."+a+" .cha-render .cha-console ."+h[g.NORMAL]+" .role, ."+a+" .cha-render .cha-console ."+h[g.SYSTEM]+" .role",{display:"none"});b("."+a+" .cha-render .cha-console ."+h[g.VIP]+"1 .role, ."+a+" .cha-render .cha-console ."+h[g.VIP]+"2 .role, ."+a+" .cha-render .cha-console ."+h[g.VIP]+"3 .role",{color:"#3CAFAB","border-color":"#3CAFAB"});b("."+a+" .cha-render .cha-console ."+h[g.VIP]+"4 .role, ."+a+" .cha-render .cha-console ."+
h[g.VIP]+"5 .role, ."+a+" .cha-render .cha-console ."+h[g.VIP]+"6 .role, ."+a+" .cha-render .cha-console ."+h[g.VIP]+"7 .role",{color:"#77C773","border-color":"#77C773"});b("."+a+" .cha-render .cha-console ."+h[g.ASSISTANT]+" .role, ."+a+" .cha-render .cha-console ."+h[g.SECRETARY]+" .role, ."+a+" .cha-render .cha-console ."+h[g.ANCHOR]+" .role",{color:"#5382E2","border-color":"#5382E2"});b("."+a+" .cha-render .cha-console ."+h[g.ADMIN]+" .role, ."+a+" .cha-render .cha-console ."+h[g.SU_ADMIN]+" .role",
{color:"#F76767","border-color":"#F76767"});b("."+a+" .cha-render .cha-console .nick",{color:"#5382E2","text-decoration":"none"});b("."+a+" .cha-render .cha-console ."+h[g.SYSTEM]+", ."+a+" .cha-render .cha-console ."+h[g.SYSTEM]+" .nick",{color:"#33CC00",cursor:"default","pointer-events":"none"});b("."+a+" .cha-render .cha-console .context",{"word-wrap":"break-word"});b("."+a+" .cha-render .cha-controls",{margin:"0",padding:"0",height:"90px",bottom:"-90px",right:"0",left:"0",position:"absolute",
overflow:"hidden","background-color":"#F8F8F8"});b("."+a+" .cha-render.more .cha-controls",{bottom:"0"});b("."+a+" .cha-render .cha-controls > *",{"float":"left",margin:"8px 0 0 8px",padding:"0",width:"60px",color:"#8A8A8A","font-size":"12px","text-align":"center","white-space":"normal","background-color":"transparent"});b("."+a+" .cha-render .cha-controls > *:hover",{"background-color":"transparent"});b("."+a+" .cha-render .cha-controls > * .icon",{"float":"none",margin:"0 4px",padding:"0",width:"50px",
height:"50px",border:"1px solid #E6E6E6","border-radius":"5px","background-repeat":"no-repeat","background-position":"center",display:"inline-block"});b("."+a+" .cha-render .cha-controls .shieldtext .icon",{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACeklEQVRYR8VX0XUTMRAcVQAdQCrAVJCkAkIFkAqyqSChAg8VkFQAqQCnApwKEiqIXYF4c0h6ynG6k87mWe/dl6Td2dHu7J7DgZc7sH9UAzCzhXPu2Hv/GoC+BYCVAnDOrb33DySfWgMaBWBmbwFcATgLTqfsr51zXC6Xt1MH4/4gADNThEsAn2sN9c6JiUuSP6bu/wPAzE4AfK+MeMq+AJyT3JQOvgBgZor425TVxv01gNMSiATAzPTOivx/rBXJ0yHDHYDw5o97or0UwBeS1/3NCIAALvYQ+l0oTdGeL+WVGD7rl6oL0T/v6PwrgOuxZCsmoZlZKLk5GB5UqiRTxBIsAB9SnTu38d7flURKDEjNjmd4l/OTGHWoIImWxGtoyY/yoFPPBNDMhP5dI4CtHMl5eMKfQZprzNyQPM8B+JpbvTOq69UM59FMAqEnkEq9agBxT1JZrfKV0qX3brCho5JqzsmBj9L4INmifu5S4EcC0BLFlqQa1a7RR9CXAiA6ayPJ6e8/3W8AU/OAKuRNRtl9VEJdzDdKtHZyGuYESXdc73MtGHuTXs/ZRAC1jSgCyFlLrNQmg5mlysu7YU0/iACkdr9mMpDf3fbngSlVlKSKLSVhrh/Kh34DKhHSlXBYf3MgX2Z2A+BT4fYTyaO9VsGQo4kG1SVcY/UMuZGcL4pT8QgTtyS7YXWHRqbrXT6NARjTh8iCREkl3CLlcp4qZwzA0JygeV85olzoRCdogtS0tqPKhsU2Xvov6I/mUjldGpzzQ1cUYH0lNmRDU5MCSGuoCiSXGh5Fr0prXfODES0GpVOty47KU5+m4heDSDxf/W9Yq3Kt5w4O4A9JNgxutXqzoAAAAABJRU5ErkJggg==)"});
b("."+a+" .cha-render .cha-controls .shieldtext.checked .icon",{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAB0klEQVRYR81X0VHCUBDcV4F0oHYgFQAVqBUIFXh2YAdZKhA7wAqECsQOpAOtIM4ySSZ5JOQBedGbyUcyye3e3r27i8Mfm/tjfAQTMLOBc26UpukYwA2Aq+xSDF/ZtXHOrdI0XZP8DgmulYCZCegBgAEYhDgFIHACeCUpco12kICZCTQJBK19zTlnSZLMm3zUEpDcAF4A3J0DXvp2CWBWl5Y9Ahn4e5bnjvB3blYkJ77DOgKLLOddgue+FiRnZccVAmamClf0MW1CcpUD+ARUsZcx0XVcSV7vEegp+hx3SHKjm0IBM4uZe1/UOUkd8QoB5WUUWf7cvTql6q1CoI/85wQ2JIc+AbXPi54U2JJUi/9fKVC7vO1JAQ2pqa+AHqj/92H3JBVwJQUaQCrE2HXwQ7IY634n1Ax/jCzBE0nh7MwnIGbqULHacXH+awnooZlp3fqIoMIngLG/EzQtJCKhzthVPWy13OT9vxxc40qWKaFKPTcdbwCmTUtq2054znxYA3guz/66tHZNQHkW6WUbcGMRllmama/ATs7sHdVJbloyDq7fTUUdqoCKSHksVqmuTkkIAYGqdwT96RxLrI3AIBZwUA0cG80p77f+G57i9JhvfgHYZaIhgJsBwwAAAABJRU5ErkJggg==)"});
b("."+a+" .cha-render .cha-controls .clearscreen .icon",{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACx0lEQVRYR8WWjXETQQyF31YAHWAqACogqYBQAaEClAogFVhUAFRAqICkAkgFmA5CBcd8N6ubvb0/nwmOZjyJz7e7T9J7T5v0wJEe+HwdFYCZnUj6Lsnd/YLkjw3gWtJLSb/dfXNUAGZ2JulrbvlHd7djA9hJepIBvHD3nz0AZvZc0lbSF3f/fJ/kNLNzSZ/ynrfuzlltdBwwsztJj/Lzp+6+y6DeSaJkLeJDwszK7C9g4BgADngm6Y+kjbvfmdkHSe8lXbo7/6+OYo9Y2yY3BuCxJIhxFdmaWTwDNBVaFXn9L0nsQ3xzd8jYxX+VoZkhNSr3Jp/4tubXJADQp5Roibbb7c0+qWepwRmCMtM6uBRArK7kKIBcOhwr2Hrt7qdzICqml69iPgDh7yCmAMDSyCQW9dhb75RtlnLjdGMBAPboqWkKQFhmudGkEqhYlDZLFzJH38s9IDImNFRB+ZaZsQGmVMZrd78ayZw2/ZCEeZFhq5bcdwyIvcJf+KmzYb7MkZA2sAGBDAc+kLOFK8jsxt2Zdr3IfEJ6rMeKe1I8WIaZ8dgrh99KOlnyiryGbLpKrgaQyYY7RraLh5ccqSs0C4A+ppQo26ZpGg6klOFqbT8p7R6ZhxnR/24OTHKgmt01aGYFhGOvjs0T0msfF8NoIOUpGdYqoMxIs/0sZVwpKq5h3ZArf59TAVlOejjt2acCZhaewj0jVNVhWOIAbH2V36bXl5mEVOi8rkSWHKbUtiZ7AdOQ6G5Be1UgXjKzshLxeLBZPox3zwozirWjHjFrRFUfKR3sDUdj45h0qIK5QVUYt63Giys4X09XDaMxRucMAREt4TX6ixUDoudwRe8Hl5BVLRixVlg9NvWYclcppV3TNDH/Wd67gq0yogVtkzmtwZziul0vWbxLrrbiifYABiBkzoc7wSTx/qkFc1U55Ld7qcAhB8eav3TZQDD7fopnAAAAAElFTkSuQmCC)"});
b("."+a+" .cha-render .cha-dialog",{height:"40px",right:"0",bottom:"0",left:"0",position:"absolute","background-color":"#E0E0E0"});b("."+a+" .cha-render.more .cha-dialog",{bottom:"90px"});b("."+a+" .cha-render .cha-dialog .more",{"float":"left",margin:"8px 5px",padding:"0",width:"24px",height:"24px","background-repeat":"no-repeat","background-position":"center","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABpklEQVRIS7VW7VHCQBTc68AS0gGxA6xAS8AKfFYgVuBagXRAqEA6ECogJdjBOZt5lzlDEkDJm8nkRy5v9+37uoARM7MihHAfY5wDKACUfnwHoA4hbGOMG5L1kJvQ90GOAbwAuANQAdjqIfmt82Z2A0Cgeh4AfAJ47QM6AjAz/UAAK72T0yGGDmYAFsImKUKt/QIwMx1aihVJyXC2mZnkk/MlSZFrrAXImJdDrF06hdWruUcjYm0kDYD/KJ1HmZtZEz5JydhrWSRzEUkACqkmKXkGzcxEQgBK7tg5+SlILkLGflCa5OkCAFWZZCwFoAoQmt6jdi6Ayy5VdgKQrqtuefUhXQigPDUSKetKSNNE18hBVjiVACLJvFzVxW8ApGPX8lHR/SaCz3kJy/cQgDr5LwCq/7ZHEsDkEk2e5MnLVElVh1670Q4AbqcfFVnNTjfsHCQtmv+O6y/vh2byXnvhrH11Hi+cbGKmSD4AvJ8aIb5kngA8nlyZGYgqSzNdc3/tt4d96lK/bcxijCKjZ+Or8mjT9d4qOkBykK4tM/+293mvwqjGri0/+EslZhJDzTgAAAAASUVORK5CYII=)",
display:"block"});b("."+a+" .cha-render .cha-dialog textarea",{margin:"5px 0",padding:"5px",width:m.config.width-114+"px",height:"20px",resize:"none",border:"0 none","line-height":"20px","background-color":"#F8F8F8"});b("."+a+" .cha-render .cha-dialog .send",{"float":"right",margin:"5px",padding:"0 5px",width:"50px",height:"30px",top:"0",right:"0",position:"absolute"})}})(chatease);(function(d){(d.core.renders={}).modes={DEFAULT:"def",NONE:"none"}})(chatease);
(function(d){var f=d.utils,e=d.events,g=d.core,c=g.message,b=c.modes,a=c.roles;g=g.renders;var h=g.modes,n=f.css,m={0:"uni",1:"",2:""},G={0:"r-visitor",1:"r-normal",2:"r-vip1",4:"r-vip2",6:"r-vip3",8:"r-vip4",10:"r-vip5",12:"r-vip6",14:"r-vip7",16:"r-assistant",32:"r-secretary",48:"r-anchor",64:"r-admin",128:"r-suadmin",192:"r-system"},v={0:"[\u5bc6\u8bed]",1:"",2:""},w={0:"",1:"",2:"VIP1",4:"VIP2",6:"VIP3",8:"VIP4",10:"VIP5",12:"VIP6",14:"VIP7",16:"\u52a9\u7406",32:"\u79d8\u4e66",48:"\u4e3b\u64ad",
64:"\u7ba1\u7406\u5458",128:"\u8d85\u7ba1",192:""};CSS_SMOOTH_EASE="opacity .25s ease";CSS_100PCT="100%";CSS_ABSOLUTE="absolute";CSS_IMPORTANT=" !important";CSS_HIDDEN="hidden";CSS_NONE="none";CSS_BLOCK="block";g.def=function(c,g){function x(a,b,c,e,h){var d=f.createElement("div",b);d.setAttribute("value",!!h);d.innerHTML='<span class="icon"></span>'+a;a=function(a,b){return function(c){c="true"==d.getAttribute("value")?!1:!0;d.setAttribute("value",c);c?f.addClass(d,"checked"):f.removeClass(d,"checked");
k.dispatchEvent(a,f.extend({value:c},b))}}(c,e);try{d.addEventListener("click",a)}catch(M){d.attachEvent("onclick",a)}return d}function p(a,b,c,e){b=f.createElement("div",b);b.innerHTML='<span class="icon"></span>'+a;a=function(a,b){return function(c){k.dispatchEvent(a,b)}}(c,e);try{b.addEventListener("click",a)}catch(K){b.attachEvent("onclick",a)}return b}function u(b){var c=0;if("number"!=f.typeOf(b)&&(b=parseInt(b),NaN==b||0>b))return c;b&a.SYSTEM?c=b&a.SYSTEM:b&a.ANCHOR?c=b&a.ANCHOR:b&a.VIP?c=
b&a.VIP:b&a.NORMAL&&(c=a.NORMAL);return c}var k=f.extend(this,new e.eventdispatcher("renders.def")),D={title:"CHATEASE "+d.version},t,z,q,A,C,E,F,H,y,l,r;k.setup=function(){f.isMSIE("(8|9)")?_object.setup&&(_object.setup(k.config),k.dispatchEvent(e.CHATEASE_READY,{id:k.config.id})):k.dispatchEvent(e.CHATEASE_READY,{id:k.config.id})};k.show=function(c,h,d){var g=u(c.role),l=f.createElement("div",G[g]),n=v[d&127];if(n&&g!=a.SYSTEM){var r=f.createElement("span","area "+m[d&127]);r.innerHTML=n;l.appendChild(r)}n=
f.createElement("span","user");l.appendChild(n);c.icon&&(r=f.createElement("img","icon"),r.src=c.icon,n.appendChild(r));if(g=w[g])r=f.createElement("span","role"),r.innerHTML=g,n.appendChild(r);g=f.createElement("a","nick");g.innerHTML=c.name+": ";c=function(a){return function(b){y.value="/r "+a.name+" ";k.dispatchEvent(e.CHATEASE_VIEW_NICKCLICK,{user:a})}}(c);try{n.addEventListener("click",c)}catch(N){n.attachEvent("onclick",c)}n.appendChild(g);r=f.createElement("span","context");r.innerHTML=h;l.appendChild(r);
q.childNodes.length>=k.config.maxrecords&&q.removeChild(q.childNodes[0]);d&b.OUTDATED?q.insertBefore(l,q.childNodes[0]):q.appendChild(l);k.config.smoothing?k.refresh():z.scrollTop=z.scrollHeight};k.send=function(){k.dispatchEvent(e.CHATEASE_VIEW_SEND,{data:{data:y.value,mode:b.MULTI}});k.clearInput()};k.refresh=function(){k.config.smoothing?(z.clientHeight<q.clientHeight&&n.style(q,{"transition-timing-function":"cubic-bezier(0.165, 0.84, 0.44, 1)","transition-duration":"100ms",transform:"translate(0px, "+
(z.clientHeight-q.clientHeight)+"px) translateZ(0px)"}),r.refresh()):z.scrollTop=z.scrollHeight};k.clearInput=function(){y.value=""};k.clearScreen=function(){f.emptyElement(q)};k.element=function(){return _object};k.resize=function(a,b){};k.destroy=function(){};k.name=h.DEFAULT;k.config=f.extend({},D,g);f.isMSIE("(8|9)")&&(c.innerHTML='<object id="cha-swf" name="cha-swf" align="middle" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+k.config.swf+'"><param name="quality" value="high"><param name="bgcolor" value="#ffffff"><param name="allowscriptaccess" value="sameDomain"><param name="allowfullscreen" value="true"><param name="wmode" value="transparent"><param name="FlashVars" value="id='+
k.config.id+'"></object>',_object=k.WebSocket=c.firstChild);(function(){k.config.title&&(t=f.createElement("div","cha-title"),c.appendChild(t),t.innerHTML=k.config.title);z=f.createElement("div","cha-console");z.id=k.config.id+"-console";c.appendChild(z);q=f.createElement("div","cha-content");z.appendChild(q);k.config.smoothing&&(r=new BScroll(z));A=f.createElement("div","cha-controls");c.appendChild(A);E=x("\u5c4f\u853d\u6d88\u606f","cha-checkbox shieldtext",e.CHATEASE_VIEW_PROPERTY,{key:"shield"},
!1);E.id=k.config.id+"-shieldtext";A.appendChild(E);F=p("\u6e05\u5c4f","cha-button white clearscreen",e.CHATEASE_VIEW_CLEARSCREEN,null);A.appendChild(F);C=f.createElement("div","cha-dialog");c.appendChild(C);H=x("","more",e.CHATEASE_VIEW_PROPERTY,{key:"more"},!1);C.appendChild(H);y=f.createElement("textarea");y.id=k.config.id+"-input";C.appendChild(y);l=f.createElement("button","cha-button blue send");C.appendChild(l);y.setAttribute("placeholder","\u8f93\u5165\u804a\u5929\u5185\u5bb9");k.config.maxlength&&
y.setAttribute("maxlength",k.config.maxlength);var a=function(){return function(a){a=window.event||a;13==a.keyCode&&(a.ctrlKey?y.value+="\r\n":(k.send(),window.event?a.returnValue=!1:a.preventDefault()))}}();try{y.addEventListener("keypress",a)}catch(L){y.attachEvent("onkeypress",a)}l.innerHTML="\u53d1\u9001";a=function(){return function(){k.send()}}();try{l.addEventListener("click",a)}catch(L){l.attachEvent("onclick",a)}})()}})(chatease);
(function(d){var f=d.utils,e=d.events;d=d.core.renders;var g=d.modes;d.none=function(c,b){var a=f.extend(this,new e.eventdispatcher("renders.none"));a.setup=function(){f.isMSIE("(8|9)")?_object.setup&&(a.config.debug=!0,_object.setup(a.config),a.dispatchEvent(e.CHATEASE_READY,{id:a.config.id})):a.dispatchEvent(e.CHATEASE_READY,{id:a.config.id})};a.show=function(a,b,c){};a.send=function(){};a.clearInput=function(){};a.clearScreen=function(){};a.element=function(){return _object};a.resize=function(a,
b){};a.destroy=function(){};a.name=g.NONE;a.config=f.extend({},{},b);f.isMSIE("(8|9)")&&(c.innerHTML='<object id="cha-swf" name="cha-swf" align="middle" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+a.config.swf+'"><param name="quality" value="high"><param name="bgcolor" value="#ffffff"><param name="allowscriptaccess" value="sameDomain"><param name="allowfullscreen" value="true"><param name="wmode" value="transparent"><param name="FlashVars" value="id='+a.config.id+
'"></object>',_object=a.WebSocket=c.firstChild)}})(chatease);
(function(d){var f=d.utils,e=d.events,g=d.core;g.entity=function(c){var b=f.extend(this,new e.eventdispatcher("core.entity")),a,d,n;b.setup=function(){setTimeout(function(){n.setup()},0)};b.destroy=function(){n&&n.stop();d&&d.destroy();a&&a.destroy()};b.id=c.id;b.model=a=new g.model(c);b.view=d=new g.view(a);b.controller=n=new g.controller(a,d);n.addGlobalListener(function(a){b.dispatchEvent(a.type,a)});b.onSWFOpen=n.onOpen;b.onSWFMessage=n.onMessage;b.onSWFError=n.onError;b.onSWFClose=n.onClose;
b.send=n.send;b.close=n.close;b.getState=a.getState;b.resize=d.resize}})(chatease);
(function(d){var f=d.utils,e=d.events;d=d.core;var g=d.states,c=function(){var a=this,b;a.update=function(b){f.extend(a,b);b=a.role;if(b&240)c=0;else{var e=2E3;b&&(e=1E3-100*(b>>1));c=e}};a.limited=function(){var a=(new Date).getTime();if(a<b+c)return!0;b=a;return!1};f.extend(a,{id:0,name:"",icon:"",role:0});var c=b=0},b=function(){var a=this;a.update=function(b){f.extend(a,b)};a.add=function(a){b[a.id]=a};a.remove=function(a){delete b[a.id]};a.find=function(a){return b[a]};a.freeze=function(a,b,
e,d){var f=c[a];void 0==f&&(f={},c[a]=f);f[b]={manager:e,until:Math.floor((new Date).getTime()/1E3)+d}};a.unfreeze=function(a,b){(a=c[a])&&delete a[b]};a.limited=function(a,b){if(a=c[a])if(b=a[b])return Math.floor((new Date).getTime()/1E3)<b.until;return!1};f.extend(a,{id:0,stat:0,group:0});var b={};var c={}};d.model=function(a){var d=f.extend(this,new e.eventdispatcher("core.model")),n=g.CLOSED;d.setState=function(a){a!==n&&(n=a,d.dispatchEvent(e.CHATEASE_STATE,{state:a}))};d.getState=function(){return n};
d.setProperty=function(a,b){1==m.hasOwnProperty(a)&&(m[a]=b,d.dispatchEvent(e.CHATEASE_PROPERTY,{key:a,value:b}))};d.getProperty=function(a){return m[a]};d.getConfig=function(a){return d.config[a]};d.destroy=function(){};d.config=f.extend({},{},a);var m={user:new c,channel:new b,shield:!1}}})(chatease);
(function(d){var f=d.utils,e=d.events;d=d.core;var g=d.message.roles,c=d.renders,b=c.modes,a=d.skins;d.view=function(d){function h(a){if(a.ctrlKey||a.metaKey)return!0;switch(a.keyCode){case 13:u&&u.send()}if(/13/.test(a.keyCode))return a.preventDefault?a.preventDefault():a.returnValue=!1,!1}function m(a){x.resize()}function G(a){switch(a.key){case "more":a.value?f.addClass(I,"more"):f.removeClass(I,"more");u.refresh();break;case "shield":var b=a.value?"\u53d6\u6d88\u5c4f\u853d":"\u5c4f\u853d\u6d88\u606f";
document.getElementById(d.getConfig("id")+"-shieldtext").innerHTML='<span class="icon"></span>'+b}w(a)}function v(a){w(a)}function w(a){x.dispatchEvent(a.type,a)}var x=f.extend(this,new e.eventdispatcher("core.view")),p,I,B,u,k;x.setup=function(){u?(u.setup(),x.resize()):x.dispatchEvent(e.CHATEASE_SETUP_ERROR,{message:"Render not available!",name:d.config.render.name})};x.show=function(a,b,c){u&&(a.role&g.SYSTEM||!d.getProperty("shield"))&&u.show(a,b,c)};x.resize=function(a,b){setTimeout(function(){u&&
u.resize(a,b);k&&k.resize(a,b)},0)};x.destroy=function(){p&&p.removeEventListener("keydown",h);u&&u.destroy()};(function(){p=f.createElement("div","cha-wrapper cha-skin-"+d.getConfig("skin").name);p.id=d.getConfig("id");I=f.createElement("div","cha-render");B=f.createElement("div","cha-contextmenu");p.appendChild(I);p.appendChild(B);var g=f.extend({},d.getConfig("render"),{id:d.getConfig("id"),url:d.getConfig("url"),width:d.getConfig("width"),height:d.getConfig("height"),maxlength:d.getConfig("maxlength"),
maxrecords:d.getConfig("maxrecords"),smoothing:d.getConfig("smoothing")});try{u=x.render=new c[g.name](I,g),u.addEventListener(e.CHATEASE_READY,w),u.addEventListener(e.CHATEASE_VIEW_SEND,w),u.addEventListener(e.CHATEASE_VIEW_PROPERTY,G),u.addEventListener(e.CHATEASE_VIEW_CLEARSCREEN,w),u.addEventListener(e.CHATEASE_VIEW_NICKCLICK,w),u.addEventListener(e.CHATEASE_RENDER_ERROR,v)}catch(t){f.log("Failed to init render "+g.name+"!")}g=f.extend({},d.getConfig("skin"),{id:d.getConfig("id"),width:d.config.width,
height:d.config.height,title:!!u.config.title,smoothing:d.getConfig("smoothing")});try{k=new a[g.name](g)}catch(t){f.log("Failed to init skin "+g.name+"!")}if(!u||u.name!=b.NONE){g=document.getElementById(d.getConfig("id"));g.parentNode.replaceChild(p,g);try{p.addEventListener("keydown",h),window.addEventListener("resize",m)}catch(t){p.attachEvent("onkeydown",h),window.attachEvent("onresize",m)}}})()}})(chatease);
(function(d){var f=d.utils,e=f.crypt,g=d.events,c=d.core,b=c.states,a=c.message,h=a.keys,n=a.cmds,m=a.opts,G=a.modes,v=a.status,w={id:-1,name:"[\u7cfb\u7edf]",role:a.roles.SYSTEM};c.controller=function(c,p){function x(){if(q){if(c.getState()==b.CONNECTED){f.log("Websocket had connected already.");return}q.readyState!=WebSocket.CONNECTING&&q.readyState!=WebSocket.OPEN||q.close()}p.render.clearScreen();d.debug?p.show(w,"\u804a\u5929\u5ba4\u8fde\u63a5\u4e2d\u2026"):f.log("\u804a\u5929\u5ba4\u8fde\u63a5\u4e2d\u2026");
try{window.WebSocket=window.WebSocket||window.MozWebSocket,window.WebSocket?(q=new WebSocket(c.config.url,"binary"),q.binaryType="arraybuffer",q.onopen=t.onOpen,q.onmessage=t.onMessage,q.onerror=t.onError,q.onclose=t.onClose):(q=p.render.WebSocket,q.connect())}catch(l){f.log("Failed to initialize websocket: "+l),B(v.NOT_ACCEPTABLE,null)}}function B(a,b){var c=u(a);c&&p.show(w,c);var d={raw:"error",error:{code:a,status:c}};f.foreach(b,function(a,b){"cmd"!=a&&"raw"!=a&&"error"!=a&&(d[a]=b)});t.dispatchEvent(g.ERROR,
d)}function u(a){var b="";switch(a){case v.BadRequest:b="\u9519\u8bef\u8bf7\u6c42\uff01";break;case v.Unauthorized:b="\u8bf7\u5148\u767b\u5f55\uff01";break;case v.Forbidden:b="\u6743\u9650\u9519\u8bef\uff01";break;case v.NotFound:b="\u672a\u77e5\u8bf7\u6c42\uff01";break;case v.NotAcceptable:b="\u65e0\u6cd5\u8bc6\u522b\uff01";break;case v.RequestTimeout:b="\u8bf7\u6c42\u8d85\u65f6\uff01";break;case v.TooManyRequests:b="\u64cd\u4f5c\u9891\u7e41\uff01";break;case v.InternalServerError:b="\u5185\u90e8\u9519\u8bef\uff01";
break;case v.NotImplemented:b="\u65e0\u6cd5\u8bc6\u522b\uff01";break;case v.BadGateway:b="\u7f51\u5173\u9519\u8bef\uff01";break;case v.ServiceUnavailable:b="\u670d\u52a1\u8fc7\u8f7d\uff01";break;case v.GatewayTimeout:b="\u7f51\u5173\u8d85\u65f6\uff01"}return b}function k(a){A||(A=new f.timer(a,1),A.addEventListener(g.CHATEASE_TIMER,function(a){x()}));A.delay=a;A.reset();A.start()}function D(a){t.dispatchEvent(a.type,a)}var t=f.extend(this,new g.eventdispatcher("core.controller")),z=!1,q,A,C,E=0;t.setup=
function(a){z||p.setup()};t.send=function(a,d){if(q&&c.getState()==b.CONNECTED)if("object"!=f.typeOf(a)||0==a.hasOwnProperty(h.CMD)||0==a.hasOwnProperty(h.DATA))B(v.BadRequest,a);else{var g=c.getProperty("user");if(g.limited())B(v.TooManyRequests,a);else{var l=c.getProperty("channel");if(g.role<l.stat||l.limited(g.id,m.MUTE))B(v.Forbidden,a);else{d&&(H++,F[H]=d,a.seq=H);a=JSON.stringify(a);try{var n=e.stringToUTF8ByteArray(a),r=new Uint8Array(n);q.send(r.buffer);return}catch(K){}try{q.send(a)}catch(K){}}}}else x()};
t.onOpen=function(a){c.setState(b.CONNECTED)};t.onMessage=function(b){var r=b.data;"arraybuffer"===f.typeOf(b.data)&&(r=new Uint8Array(b.data),r=e.UTF8ByteArrayToString(r));try{var l=eval("("+r+")")}catch(J){f.log("Failed to parse JSON. \nError: "+J+"\ndata: "+b.data);return}l.hasOwnProperty(h.SEQ)&&F.hasOwnProperty(l.seq)&&(b=F[l.seq],r=b.result,l.cmd==n.ERROR&&(r=b.status),r&&r.call(null,l),delete F[l.seq]);b=c.getProperty("user");r=c.getProperty("channel");switch(l.cmd){case n.INFO:b.update(f.extend({},
l.user));r.update(f.extend({},l.channel));d.debug?p.show(w,"\u5df2\u52a0\u5165\u623f\u95f4\uff08"+r.id+"\uff09\u3002"):f.log("\u5df2\u52a0\u5165\u623f\u95f4\uff08"+r.id+"\uff09\u3002");b.role<r.stat&&p.show(w,"\u60a8\u6240\u5728\u7684\u7528\u6237\u7ec4\u4e0d\u80fd\u53d1\u8a00\uff01");t.dispatchEvent(g.CHATEASE_INFO,l);break;case n.TEXT:try{C||(C=new f.filter(c.config.keywords)),l.data=C.replace(l.data)}catch(J){f.log("Failed to execute filter.")}r.add(l.user);p.show(l.user,l.data,l.mode);t.dispatchEvent(g.CHATEASE_MESSAGE,
l);break;case n.USER:t.dispatchEvent(g.CHATEASE_USER,l);break;case n.JOIN:r.add(l.user);p.show(l.user,l.user.name+" \u8fdb\u5165\u623f\u95f4\u3002");t.dispatchEvent(g.CHATEASE_JOIN,l);break;case n.LEFT:r.remove(l.user);p.show(l.user,l.user.name+" \u79bb\u5f00\u623f\u95f4\u3002");t.dispatchEvent(g.CHATEASE_LEFT,l);break;case n.CTRL:var k=a.parseControl(l.data);if(k){var q=k[0];k=k[1];0==k?r.unfreeze(l.sub,q):r.freeze(l.sub,q,l.user,k);if(l.sub==b.id)switch(q){case m.MUTE:p.show(w,"\u60a8\u5df2\u88ab"+
(k?"":"\u89e3\u9664")+"\u7981\u8a00"+(k?k+"\u79d2":"")+"\u3002");break;case m.FORBID:p.show(w,"\u60a8\u5df2\u88ab\u9650\u5236\u8fdb\u5165\u8be5\u623f\u95f4"+k+"\u79d2\u3002"),c.config.maxretries=0,t.close()}}break;case n.EXTERN:t.dispatchEvent(g.CHATEASE_EXTERN,l);break;case n.ERROR:B(l.error.code,l);break;default:f.log("Unknown cmd: "+l.cmd+", ignored.")}};t.onError=function(a){c.setState(b.ERROR)};t.onClose=function(a){c.setState(b.CLOSED)};t.close=function(){q&&q.close()};var F={};var H=0;var y=
"";c.addEventListener(g.CHATEASE_STATE,function(a){switch(a.state){case b.CONNECTED:d.debug?p.show(w,"\u804a\u5929\u5ba4\u5df2\u8fde\u63a5\u2026"):f.log("\u804a\u5929\u5ba4\u5df2\u8fde\u63a5\u2026");E=0;t.dispatchEvent(g.CHATEASE_CONNECT);break;case b.CLOSED:d.debug?p.show(w,"\u804a\u5929\u5ba4\u8fde\u63a5\u5df2\u65ad\u5f00\uff01"):f.log("\u804a\u5929\u5ba4\u8fde\u63a5\u5df2\u65ad\u5f00\uff01");t.dispatchEvent(g.CHATEASE_CLOSE,{channel:{id:c.channel}});if(0>c.config.maxretries||E<c.config.maxretries)a=
Math.ceil(c.config.retrydelay+3E3*Math.random()),d.debug?p.show(w,"\u6b63\u5728\u51c6\u5907\u91cd\u8fde\uff0c"+a/1E3+"\u79d2..."):f.log("\u6b63\u5728\u51c6\u5907\u91cd\u8fde\uff0c"+a/1E3+"\u79d2..."),E++,k(a);break;case b.ERROR:d.debug?p.show(w,"\u804a\u5929\u5ba4\u5f02\u5e38\uff01"):f.log("\u804a\u5929\u5ba4\u5f02\u5e38\uff01");t.dispatchEvent(g.ERROR,{message:"Chat room error!",channel:{id:c.channel}});break;default:t.dispatchEvent(g.ERROR,{message:"Unknown model state!",state:a.state})}});c.addEventListener(g.CHATEASE_PROPERTY,
function(a){D(a)});p.addEventListener(g.CHATEASE_READY,function(a){z||(f.log("Chat ready!"),z=!0,D(a),d.debug||p.show(w,"\u804a\u5929\u5ba4\u5df2\u8fde\u63a5\uff01"),x(),window.addEventListener("beforeunload",function(a){q&&c.getState()}))});p.addEventListener(g.CHATEASE_SETUP_ERROR,function(a){c.setState(b.ERROR);D(a)});p.addEventListener(g.CHATEASE_VIEW_SEND,function(a){var b=a.data.data;if(b){a={cmd:n.TEXT,data:b,mode:a.data.mode};var d=b.match(/^\/r\s(\S+)\s(.*)/i);if(d&&2<d.length){if(!c.getProperty("channel").find(y)){B(v.NotFound,
null);return}a.mode=G.UNI;a.sub=y;b=d[2]}0<=c.config.maxlength&&(b=b.substr(0,c.config.maxlength));if(b=f.trim(b))a.data=b,t.send(a)}else p.show(w,"\u8bf7\u8f93\u5165\u5185\u5bb9\uff01")});p.addEventListener(g.CHATEASE_VIEW_PROPERTY,function(a){c.setProperty(a.key,a.value)});p.addEventListener(g.CHATEASE_VIEW_CLEARSCREEN,function(a){p.render.clearScreen();D(a)});p.addEventListener(g.CHATEASE_VIEW_NICKCLICK,function(a){var b=c.getProperty("channel");y=a.user.id;t.dispatchEvent(g.CHATEASE_NICKCLICK,
{user:a.user,channel:{id:b.id,group:b.group,stat:b.stat}})});p.addEventListener(g.CHATEASE_RENDER_ERROR,function(a){c.setState(b.ERROR);D(a)})}})(chatease);
(function(d){var f=d.utils,e=d.events,g=d.embed=function(c){function b(b){switch(b.type){case e.ERROR:case e.CHATEASE_SETUP_ERROR:case e.CHATEASE_RENDER_ERROR:a.errorScreen(b.message);a.dispatchEvent(e.ERROR,b);break;default:a.dispatchEvent(b.type,b)}}var a=f.extend(this,new e.eventdispatcher("embed")),h={},n=null,m=!1;a.embed=function(){try{h=new g.config(c.config),n=new g.embedder(c,h)}catch(G){f.log("Failed to init embedder!");a.dispatchEvent(e.CHATEASE_SETUP_ERROR,{message:"Failed to init embedder!",
render:h.render.name});return}n.addGlobalListener(b);n.embed()};a.errorScreen=function(a){m||(m=!0,d.api.displayError(a,h))};(function(){f.foreach(c.config.events,function(a,b){a=c[a];"function"===f.typeOf(a)&&a.call(c,b)})})()}})(chatease);
(function(d){var f=d.utils,e=d.embed,g=d.core.renders.modes,c=d.core.skins.modes;e.config=function(b){b=f.extend({},{url:"ws://"+window.location.host+"/ch1?token=",width:640,height:400,keywords:"",maxlength:50,maxrecords:50,maxretries:-1,retrydelay:3E3,smoothing:!1,debug:!1,render:{name:g.DEFAULT,title:"CHATEASE "+d.version,swf:"swf/chatease.swf"},skin:{name:c.DEFAULT}},b);b.smoothing=b.smoothing&&f.isMobile()&&BScroll;return b};e.config.addConfig=function(b,a){return f.extend(b,a)}})(chatease);
(function(d){var f=d.utils,e=d.events,g=d.core;d.embed.embedder=function(c,b){function a(a){d.dispatchEvent(a.type,a)}var d=f.extend(this,new e.eventdispatcher("embed.embedder"));d.embed=function(){var d=new g.entity(b);d.addGlobalListener(a);d.setup();c.setEntity(d,b.render.name)}}})(chatease);