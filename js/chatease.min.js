chatease=function(){if(chatease.api)return chatease.api.getInstance.apply(this,arguments)};chatease.version="1.0.34";
(function(d){function f(a){return null!==navigator.userAgent.toLowerCase().match(a)}var e=d.utils={};e.exists=function(a){switch(e.typeOf(a)){case "string":return 0<a.length;case "object":return null!==a;case "null":return!1}return!0};e.extend=function(){var a=Array.prototype.slice.call(arguments,0),b=a[0];if(1<a.length)for(var c=1;c<a.length;c++)e.foreach(a[c],function(a,c){void 0!==c&&null!==c&&(b[a]=c)});return b};e.foreach=function(a,b){for(var c in a)a.hasOwnProperty&&"function"===e.typeOf(a.hasOwnProperty)?
a.hasOwnProperty(c)&&b(c,a[c]):b(c,a[c])};e.getCookie=function(a){var b;return(b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)")))?unescape(b[2]):null};e.formatTime=function(a){var b=a.getHours()+1,c=a.getMinutes(),h=a.getSeconds();return a.toLocaleDateString()+" "+e.pad(b,2)+":"+e.pad(c,2)+":"+e.pad(h,2)};e.pad=function(a,b){for(a+="";a.length<b;)a="0"+a;return a};e.typeOf=function(a){if(null===a||void 0===a)return"null";var b=typeof a;if("object"===b)try{var c=a.toString().match(/^\[object ([a-z]+)\]$/i);
if(c&&1<c.length&&c[1])return c[1].toLowerCase()}catch(h){}return b};e.isInt=function(a){return 0===parseFloat(a)%1};e.trim=function(a){return a.replace(/^\s+|\s+$/g,"")};e.indexOf=function(a,b){if(null==a)return-1;for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1};e.createElement=function(a,b){a=document.createElement(a);b&&(a.className=b);return a};e.addClass=function(a,b){var c="string"===e.typeOf(a.className)?a.className.split(" "):[];b="array"===e.typeOf(b)?b:b.split(" ");e.foreach(b,
function(a,b){-1===e.indexOf(c,b)&&c.push(b)});a.className=e.trim(c.join(" "))};e.removeClass=function(a,b){var c="string"===e.typeOf(a.className)?a.className.split(" "):[];b="array"===e.typeOf(b)?b:b.split(" ");e.foreach(b,function(a,b){a=e.indexOf(c,b);0<=a&&c.splice(a,1)});a.className=e.trim(c.join(" "))};e.emptyElement=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};e.isMSIE=function(a){return f(new RegExp("msie\\s*"+(a||""),"i"))};e.isSafari=function(){return f(/safari/i)&&!f(/chrome/i)&&
!f(/chromium/i)&&!f(/android/i)};e.isIOS=function(a){return a?f(new RegExp("iP(hone|ad|od).+\\sOS\\s"+a,"i")):f(/iP(hone|ad|od)/i)};e.isAndroid=function(a,b){return b&&f(/chrome\/[123456789]/i)&&!f(/chrome\/18/)?!1:a?(e.isInt(a)&&!/\./.test(a)&&(a=""+a+"."),f(new RegExp("Android\\s*"+a,"i"))):f(/Android/i)};e.isMobile=function(){return e.isIOS()||e.isAndroid()};e.getProtocol=function(a){var b="http";(a=a.match(/^([a-z]+)\:\/\//i))&&1<a.length&&(b=a[1]);return b};e.getFileName=function(a){var b="";
(a=a.match(/\/([a-z0-9\(\)\[\]\{\}\s\-_%]*(\.[a-z0-9]+)?)$/i))&&1<a.length&&(b=a[1]);return b};e.getExtension=function(a){var b="";(a=a.match(/\/?([a-z0-9\(\)\[\]\{\}\s\-_%]*(\.([a-z0-9]+))*)\??([a-z0-9\-_%&=]*)$/i))&&3<a.length&&(b=a[3]);return b};var g=window.console=window.console||{log:function(){}};e.log=function(){var a=Array.prototype.slice.call(arguments,0);"object"===e.typeOf(g.log)?g.log(a):g.log.apply(g,a)}})(chatease);
(function(d){var f=d.utils;d=f.crypt={};d.stringToByteArray=function(e){for(var f=[],a=0,b=0;b<e.length;b++){for(var c=e.charCodeAt(b);255<c;)f[a++]=c&255,c>>=8;f[a++]=c}return f};d.byteArrayToString=function(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var f="",a=0;a<e.length;a+=8192)var b=Array.slice(e,a,a+8192),f=f+String.fromCharCode.apply(null,b);return f};d.byteArrayToHex=function(e){return Array.map(e,function(e){e=e.toString(16);return 1<e.length?e:"0"+e}).join("")};d.hexToByteArray=
function(e){if(0!==e.length%2)return f.log("Key string length must be multiple of 2."),null;for(var d=[],a=0;a<e.length;a+=2)d.push(parseInt(e.substring(a,a+2),16));return d};d.stringToUTF8ByteArray=function(e){for(var f=[],a=0,b=0;b<e.length;b++){var c=e.charCodeAt(b);128>c?f[a++]=c:(2048>c?f[a++]=c>>6|192:(55296==(c&64512)&&b+1<e.length&&56320==(e.charCodeAt(b+1)&64512)?(c=65536+((c&1023)<<10)+(e.charCodeAt(++b)&1023),f[a++]=c>>18|240,f[a++]=c>>12&63|128):f[a++]=c>>12|224,f[a++]=c>>6&63|128),f[a++]=
c&63|128)}return f};d.UTF8ByteArrayToString=function(e){for(var f=[],a=0,b=0;a<e.length;){var c=e[a++];if(128>c)f[b++]=String.fromCharCode(c);else if(191<c&&224>c){var h=e[a++];f[b++]=String.fromCharCode((c&31)<<6|h&63)}else if(239<c&&365>c){var h=e[a++],d=e[a++],l=e[a++],c=((c&7)<<18|(h&63)<<12|(d&63)<<6|l&63)-65536;f[b++]=String.fromCharCode(55296+(c>>10));f[b++]=String.fromCharCode(56320+(c&1023))}else h=e[a++],d=e[a++],f[b++]=String.fromCharCode((c&15)<<12|(h&63)<<6|d&63)}return f.join("")};d.XORByteArray=
function(e,d){if(e.length!==d.length)f.log("XOR array lengths must match.");else{for(var a=[],b=0;b<e.length;b++)a.push(e[b]^d[b]);return a}}})(chatease);
(function(d){function f(){var a=document.createElement("style");a.type="text/css";document.getElementsByTagName("head")[0].appendChild(a);return a.sheet||a.styleSheet}var e=d.utils,g;(e.css=function(a,b){g||(g=f());var c="";e.foreach(b,function(a,b){c+=a+": "+b+"; "});try{g.insertRule?g.insertRule(a+" { "+c+"}",g.cssRules.length):g.addRule(a,c,g.rules.length)}catch(h){e.log("Failed to insert css rule: "+a)}}).style=function(a,b,c){if(void 0!==a&&null!==a)for(void 0===a.length&&(a=[a]),b=e.extend({},
b),c=0;c<a.length;c++){var f=a[c];void 0!==f&&null!==f&&e.foreach(b,function(a,b){a=a.split("-");for(var c=1;c<a.length;c++)a[c]=a[c].charAt(0).toUpperCase()+a[c].slice(1);a=a.join("");f.style[a]!==b&&(f.style[a]=b)})}}})(chatease);(function(d){var f=d.utils;f.filter=function(e){var d,a="";this.replace=function(b){return a&&d?b.replace(d,"**"):b};"string"==f.typeOf(e)&&e&&(a=e,d=new RegExp(a,"ig"))}})(chatease);
(function(d){d.events={ERROR:"error",CHATEASE_READY:"chateaseReady",CHATEASE_SETUP_ERROR:"chateaseSetupError",CHATEASE_RENDER_ERROR:"chateaseRenderError",CHATEASE_STATE:"chateaseState",CHATEASE_PROPERTY:"chateaseProperty",CHATEASE_CONNECT:"chateaseConnect",CHATEASE_INDENT:"chateaseIdent",CHATEASE_MESSAGE:"chateaseMessage",CHATEASE_JOIN:"chateaseJoin",CHATEASE_LEFT:"chateaseLeft",CHATEASE_USERS:"chateaseUsers",CHATEASE_EXTERN:"chateaseExtern",CHATEASE_NICKCLICK:"chateaseNickClick",CHATEASE_CLOSE:"chateaseClose",
CHATEASE_VIEW_SEND:"chateaseViewSend",CHATEASE_VIEW_PROPERTY:"chateaseViewProperty",CHATEASE_VIEW_SHOWMORE:"chateaseViewShowMore",CHATEASE_VIEW_CLEARSCREEN:"chateaseViewClearScreen",CHATEASE_VIEW_NICKCLICK:"chateaseViewNickClick",CHATEASE_TIMER:"chateaseTimer",CHATEASE_TIMER_COMPLETE:"chateaseTimerComplete"}})(chatease);
(function(d){var f=d.utils;d.events.eventdispatcher=function(e){function g(a,b,e){if(a)for(var c=0;c<a.length;c++){var d=a[c];if(d){null!==d.count&&0===--d.count&&delete a[c];try{d.listener(b)}catch(q){f.log('Error handling "'+e+'" event listener ['+c+"]: "+q.toString(),d.listener,b)}}}}var a={},b=[];this.addEventListener=function(b,e,d){try{f.exists(a[b])||(a[b]=[]),"string"===f.typeOf(e)&&(e=(new Function("return "+e))()),a[b].push({listener:e,count:d||null})}catch(l){f.log("error",l)}return!1};
this.removeEventListener=function(b,e){if(a[b]){try{if(void 0===e){a[b]=[];return}var c;for(c=0;c<a[b].length;c++)if(a[b][c].listener.toString()===e.toString()){a[b].splice(c,1);break}}catch(l){f.log("error",l)}return!1}};this.addGlobalListener=function(a,e){try{"string"===f.typeOf(a)&&(a=(new Function("return "+a))()),b.push({listener:a,count:e||null})}catch(n){f.log("error",n)}return!1};this.removeGlobalListener=function(a){if(a){try{var c;for(c=b.length-1;0<=c;c--)b[c].listener.toString()===a.toString()&&
b.splice(c,1)}catch(n){f.log("error",n)}return!1}};this.dispatchEvent=function(c,h){h||(h={});f.extend(h,{id:e,version:d.version,type:c});"events"===d.debug&&f.log(c,h);g(a[c],h,c);g(b,h,c)}}})(chatease);
(function(d){var f=d.utils,e=d.events;f.timer=function(d,a){function b(){g++;c.dispatchEvent(e.CHATEASE_TIMER);0<c.repeatCount&&g>=c.repeatCount&&(c.stop(),c.dispatchEvent(e.CHATEASE_TIMER_COMPLETE))}var c=f.extend(this,new e.eventdispatcher("utils.timer")),h,g=0,l=!1;c.start=function(){!1===l&&(h=setInterval(b,c.delay),l=!0)};c.stop=function(){l&&(clearInterval(h),h=0,l=!1)};c.reset=function(){c.stop();g=0};c.currentCount=function(){return g};c.running=function(){return l};c.delay=d||50;c.repeatCount=
a||0}})(chatease);
(function(d){var f=d.utils,e=d.events,g={},a={onError:e.ERROR,onReady:e.CHATEASE_READY,onConnect:e.CHATEASE_CONNECT,onIdent:e.CHATEASE_INDENT,onMessage:e.CHATEASE_MESSAGE,onJoin:e.CHATEASE_JOIN,onLeft:e.CHATEASE_LEFT,onUsers:e.CHATEASE_USERS,onExtern:e.CHATEASE_EXTERN,onNickClick:e.CHATEASE_VIEW_NICKCLICK,onClose:e.CHATEASE_CLOSE};d.api=function(b){function c(a){h.dispatchEvent(a.type,a)}var h=f.extend(this,new e.eventdispatcher("api")),g;h.container=b;h.id=b.id;h.setup=function(a){f.emptyElement(h.container);d.debug=
!!a.debug;h.config=a;h.config.id=h.id;h.embedder=new d.embed(h);h.embedder.addGlobalListener(c);h.embedder.embed();return h};h.setEntity=function(a,b){g=a;h.onSWFLoaded=g.setup;h.onSWFOpen=g.onSWFOpen;h.onSWFMessage=g.onSWFMessage;h.onSWFError=g.onSWFError;h.onSWFClose=g.onSWFClose;h.send=g.send;h.close=g.close;h.getState=g.getState;h.resize=g.resize};(function(){f.foreach(a,function(a,b){h[a]=function(a){h.addEventListener(b,a)}})})()};d.api.getInstance=function(a){var b;null==a?a=0:a.nodeType?b=
a:"string"===f.typeOf(a)&&(b=document.getElementById(a));if(b){var e=g[b.id];e||(g[a]=e=new d.api(b));return e}return"number"===f.typeOf(a)?g[a]:null};d.api.displayError=function(a,c){}})(chatease);(function(d){d.core={}})(chatease);(function(d){d.core.states={CONNECTED:"connected",CLOSED:"closed",ERROR:"error"}})(chatease);
(function(d){d.core.protocol={};d=d.core.protocol;d.cmds={TEXT:"text",MUTE:"mute",KICKOUT:"kickout",EXTERN:"extern",PING:"ping"};d.raws={IDENT:"ident",TEXT:"text",JOIN:"join",LEFT:"left",USERS:"users",MUTE:"mute",KICKOUT:"kickout",EXTERN:"extern",ERROR:"error",PONG:"pong"};d.roles={VISITOR:0,NORMAL:1,VIP:14,ASSISTANT:16,SECRETARY:32,ANCHOR:48,ADMIN:64,SU_ADMIN:128,SYSTEM:192};d.channelStates={NORMAL:0,MUTED:1,LOCKED:3};d.punishments={MUTED:1,KICKED_OUT:3};d.errors={BAD_REQUEST:400,UNAUTHORIZED:401,
FORBIDDEN:403,NOT_FOUND:404,NOT_ACCEPTABLE:406,REQUEST_TIMEOUT:408,CONFLICT:409,EXPECTATION_FAILED:417,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504}})(chatease);(function(d){(d.core.skins={}).modes={DEFAULT:"def",MOBILE:"mobile"}})(chatease);
(function(d){var f=d.utils,e=d.events;d=d.core.skins;var g=d.modes,a=f.css,b="cha-skin";d.def=function(c){var d=f.extend(this,new e.eventdispatcher("skins.def"));d.resize=function(b,c){b=document.getElementById(d.config.id);c=document.getElementById(d.config.id+"-input");a.style(c,{width:b.clientWidth-90+"px"})};d.name=g.DEFAULT;d.config=f.extend({},c);b+="-"+d.name;a(".cha-wrapper",{width:"100%",height:"100%","background-color":"#171717"});a(".cha-wrapper *",{margin:"0",padding:"0","font-family":"Microsoft YaHei,arial,sans-serif",
"font-size":"14px","font-weight":"normal","box-sizing":"content-box"});a("."+b+" .cha-checkbox",{color:"#E6E6E6",cursor:"pointer"});a("."+b+" .cha-checkbox .icon",{"float":"left",padding:"0 5px",width:"14px",height:"14px","background-repeat":"no-repeat","background-position":"center","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOAgMAAABiJsVCAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJUExURUxpcebm5ubm5kbBEu0AAAACdFJOUwCgoEVu0AAAABpJREFUCNdjYAABqVWrHBi0Vq1qII0AawMBACnPF0kf/g8sAAAAAElFTkSuQmCC)",
display:"inline-block"});a("."+b+" .cha-checkbox.checked .icon",{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAA40lEQVQ4T52SvXHCQBCF3wuUKDHp7QXYFZgOrBKgAqADOsDuRK7ALoEOGDqwk1UoSHSBZrTMMWhGY358w0YbvG9/3i7xYDByqloCmKfUMLPSe7/sQUuADmfNk4gwCTSzXZZli7ZtS5KvSWCE8jwvmqZZkVzHrv+CPRRCKAB89etcA38BjM+CA8lJzLuu25Ic3QJ/RORl4PBMRL5VdQPgbWjeRUcz+/Dev1dVVTjnNqo6HY54b1SQXDrnyrquRyGELYDnv6e6Z87MzCa9i8mgme2jeGjIrR2TXw7Ap4gsTp/zSBwBq1l6D5ci9L8AAAAASUVORK5CYII=)"});a("."+
b+" .cha-button",{padding:"0 10px","font-style":"normal","font-weight":"normal","text-align":"center","text-transform":"uppercase","white-space":"nowrap","word-spacing":"normal",border:"none","border-radius":"2px",cursor:"pointer",display:"inline-block","-webkit-font-smoothing":"subpixel-antialiased","-moz-osx-font-smoothing":"grayscale",transition:"150ms ease-in-out","transition-property":"background-color, color"});a("."+b+" .cha-button.red",{color:"#FFFFFF","background-color":"#FF0046"});a("."+
b+" .cha-button.red:hover",{"background-color":"#97052D"});a("."+b+" .cha-button.blue",{color:"#FFFFFF","background-color":"#0B7EF4"});a("."+b+" .cha-button.blue:hover",{"background-color":"#0966C3"});a("."+b+" .cha-button.white",{color:"#000000","background-color":"#FFFFFF"});a("."+b+" .cha-button.white:hover",{"background-color":"#E0E0E0"});a("."+b+" .cha-button.gray",{color:"#000000","background-color":"#E0E0E0"});a("."+b+" .cha-button.gray:hover",{"background-color":"#96A0B4"});a("."+b+" .cha-render",
{width:"100%",height:"100%",position:"relative"});a("."+b+" .cha-render object",{width:"0",height:"0",position:"absolute"});a("."+b+" .cha-render .cha-title",{width:"100%",height:"40px","font-family":"inherit","font-weight":"normal","text-align":"center","line-height":"40px",color:"#E6E6E6","background-color":"inherit",cursor:"default","pointer-events":"none"});a("."+b+" .cha-render .cha-console",{color:"#242424",top:(d.config.title?40:0)+"px",right:"0",bottom:"100px",left:"0",position:"absolute",
"background-color":"#F8F8F8","overflow-x":"hidden","overflow-y":d.config.smoothing?"hidden":"scroll"});a("."+b+" .cha-render .cha-console > div",{padding:"0 6px "+(d.config.smoothing?"6px":"0")+" 6px"});a("."+b+" .cha-render .cha-console > div > div",{margin:"6px 0","line-height":"20px"});a("."+b+" .cha-render .cha-console .cha-system, ."+b+" .cha-render .cha-console .cha-system > a",{"font-style":"normal","font-weight":"normal",color:"#33CC00",cursor:"default","pointer-events":"none"});a("."+b+" .cha-render .cha-console .icon",
{"float":"left","margin-right":"4px",width:"20px",height:"20px",display:"block"});a("."+b+" .cha-render .cha-console .icon img",{width:"100%",height:"100%",display:"inline-block"});a("."+b+" .cha-render .cha-console .title",{"margin-right":"2px",padding:"0 2px",font:"normal 12px Microsoft YaHei,arial,sans-serif","white-space":"nowrap","word-spacing":"normal",border:"1px solid #3CAFAB","border-radius":"2px","vertical-align":"middle"});a("."+b+" .cha-render .cha-console .title.ttl-visitor, ."+b+" .cha-render .cha-console .title.ttl-normal, ."+
b+" .cha-render .cha-console .title.ttl-system",{display:"none"});a("."+b+" .cha-render .cha-console .title.ttl-vip1, ."+b+" .cha-render .cha-console .title.ttl-vip2, ."+b+" .cha-render .cha-console .title.ttl-vip3",{color:"#3CAFAB","border-color":"#3CAFAB"});a("."+b+" .cha-render .cha-console .title.ttl-vip4, ."+b+" .cha-render .cha-console .title.ttl-vip5, ."+b+" .cha-render .cha-console .title.ttl-vip6, ."+b+" .cha-render .cha-console .title.ttl-vip7",{color:"#77C773","border-color":"#77C773"});
a("."+b+" .cha-render .cha-console .title.ttl-assistant, ."+b+" .cha-render .cha-console .title.ttl-secretary, ."+b+" .cha-render .cha-console .title.ttl-anchor",{color:"#5382E2","border-color":"#5382E2"});a("."+b+" .cha-render .cha-console .title.ttl-admin, ."+b+" .cha-render .cha-console .title.ttl-suadmin",{color:"#F76767","border-color":"#F76767"});a("."+b+" .cha-render .cha-console a",{color:"#5382E2","text-decoration":"none",cursor:"pointer"});a("."+b+" .cha-render .cha-console .context",{"word-break":"break-all",
"word-wrap":"break-word"});a("."+b+" .cha-render .cha-controls",{height:"40px",right:"0",bottom:"60px",left:"0",position:"absolute",overflow:"hidden","line-height":"100%","background-color":"inherit"});a("."+b+" .cha-render .cha-controls > *",{margin:"8px 0","text-align":"center","line-height":"24px",display:"block"});a("."+b+" .cha-render .cha-controls .shieldtext",{"float":"left"});a("."+b+" .cha-render .cha-controls .shieldtext .icon",{padding:"5px"});a("."+b+" .cha-render .cha-controls .clearscreen",
{"float":"right",width:"50px"});a("."+b+" .cha-render .cha-dialog",{height:"60px",right:"0",bottom:"0",left:"0",position:"absolute",overflow:"hidden","background-color":"#E0E0E0"});a("."+b+" .cha-render .cha-dialog .more",{display:"none"});a("."+b+" .cha-render .cha-dialog textarea",{padding:"6px 10px",width:d.config.width-90+"px",height:"48px",resize:"none",border:"0 none","background-color":"#E6E6E6"});a("."+b+" .cha-render .cha-dialog .send",{width:"50px",height:"100%",top:"0",right:"0",position:"absolute"})}})(chatease);
(function(d){var f=d.utils,e=d.events;d=d.core.skins;var g=d.modes,a=f.css,b="cha-skin";d.mobile=function(c){var d=f.extend(this,new e.eventdispatcher("skins.mobile"));d.resize=function(b,c){b=document.getElementById(d.config.id);c=document.getElementById(d.config.id+"-input");a.style(c,{width:b.clientWidth-114+"px"})};d.name=g.MOBILE;d.config=f.extend({},c);b+="-"+d.name;a(".cha-wrapper",{width:"100%",height:"100%","background-color":"#171717"});a(".cha-wrapper *",{margin:"0",padding:"0","font-family":"Microsoft YaHei,arial,sans-serif",
"font-size":"14px","font-weight":"normal","box-sizing":"content-box"});a("."+b+" .cha-checkbox",{color:"#E6E6E6",cursor:"pointer"});a("."+b+" .cha-checkbox .icon",{"float":"left",padding:"0 5px",width:"14px",height:"14px","background-repeat":"no-repeat","background-position":"center","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOAgMAAABiJsVCAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJUExURUxpcebm5ubm5kbBEu0AAAACdFJOUwCgoEVu0AAAABpJREFUCNdjYAABqVWrHBi0Vq1qII0AawMBACnPF0kf/g8sAAAAAElFTkSuQmCC)",
display:"inline-block"});a("."+b+" .cha-checkbox.checked .icon",{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAA40lEQVQ4T52SvXHCQBCF3wuUKDHp7QXYFZgOrBKgAqADOsDuRK7ALoEOGDqwk1UoSHSBZrTMMWhGY358w0YbvG9/3i7xYDByqloCmKfUMLPSe7/sQUuADmfNk4gwCTSzXZZli7ZtS5KvSWCE8jwvmqZZkVzHrv+CPRRCKAB89etcA38BjM+CA8lJzLuu25Ic3QJ/RORl4PBMRL5VdQPgbWjeRUcz+/Dev1dVVTjnNqo6HY54b1SQXDrnyrquRyGELYDnv6e6Z87MzCa9i8mgme2jeGjIrR2TXw7Ap4gsTp/zSBwBq1l6D5ci9L8AAAAASUVORK5CYII=)"});a("."+
b+" .cha-button",{padding:"0 10px","font-style":"normal","font-weight":"normal","text-align":"center","text-transform":"uppercase","white-space":"nowrap","word-spacing":"normal",border:"none","border-radius":"2px",cursor:"pointer",display:"inline-block","-webkit-font-smoothing":"subpixel-antialiased","-moz-osx-font-smoothing":"grayscale",transition:"150ms ease-in-out","transition-property":"background-color, color"});a("."+b+" .cha-button.red",{color:"#FFFFFF","background-color":"#FF0046"});a("."+
b+" .cha-button.red:hover",{"background-color":"#97052D"});a("."+b+" .cha-button.blue",{color:"#FFFFFF","background-color":"#0B7EF4"});a("."+b+" .cha-button.blue:hover",{"background-color":"#0966C3"});a("."+b+" .cha-button.white",{color:"#000000","background-color":"#FFFFFF"});a("."+b+" .cha-button.white:hover",{"background-color":"#E0E0E0"});a("."+b+" .cha-button.gray",{color:"#000000","background-color":"#E0E0E0"});a("."+b+" .cha-button.gray:hover",{"background-color":"#96A0B4"});a("."+b+" .cha-render",
{width:"100%",height:"100%",position:"relative",overflow:"hidden"});a("."+b+" .cha-render object",{width:"0",height:"0",position:"absolute"});a("."+b+" .cha-render .cha-title",{width:"100%",height:"40px","font-family":"inherit","font-weight":"normal","text-align":"center","line-height":"40px",color:"#E6E6E6","background-color":"inherit",cursor:"default","pointer-events":"none"});a("."+b+" .cha-render .cha-console",{color:"#242424",top:(d.config.title?40:0)+"px",right:"0",bottom:"40px",left:"0",position:"absolute",
"background-color":"#F8F8F8","overflow-x":"hidden","overflow-y":d.config.smoothing?"hidden":"scroll"});a("."+b+" .cha-render.more .cha-console",{bottom:"130px"});a("."+b+" .cha-render .cha-console > div",{padding:"0 6px "+(d.config.smoothing?"6px":"0")+" 6px"});a("."+b+" .cha-render .cha-console > div > div",{margin:"6px 0","line-height":"20px"});a("."+b+" .cha-render .cha-console .cha-system, ."+b+" .cha-render .cha-console .cha-system > a",{"font-style":"normal","font-weight":"normal",color:"#33CC00",
cursor:"default","pointer-events":"none"});a("."+b+" .cha-render .cha-console .icon",{"float":"left","margin-right":"4px",width:"20px",height:"20px",display:"block"});a("."+b+" .cha-render .cha-console .icon img",{width:"100%",height:"100%",display:"inline-block"});a("."+b+" .cha-render .cha-console .title",{"margin-right":"2px",padding:"0 2px",font:"normal 12px Microsoft YaHei,arial,sans-serif","white-space":"nowrap","word-spacing":"normal",border:"1px solid #3CAFAB","border-radius":"2px","vertical-align":"middle"});
a("."+b+" .cha-render .cha-console .title.ttl-visitor, ."+b+" .cha-render .cha-console .title.ttl-normal, ."+b+" .cha-render .cha-console .title.ttl-system",{display:"none"});a("."+b+" .cha-render .cha-console .title.ttl-vip1, ."+b+" .cha-render .cha-console .title.ttl-vip2, ."+b+" .cha-render .cha-console .title.ttl-vip3",{color:"#3CAFAB","border-color":"#3CAFAB"});a("."+b+" .cha-render .cha-console .title.ttl-vip4, ."+b+" .cha-render .cha-console .title.ttl-vip5, ."+b+" .cha-render .cha-console .title.ttl-vip6, ."+
b+" .cha-render .cha-console .title.ttl-vip7",{color:"#77C773","border-color":"#77C773"});a("."+b+" .cha-render .cha-console .title.ttl-assistant, ."+b+" .cha-render .cha-console .title.ttl-secretary, ."+b+" .cha-render .cha-console .title.ttl-anchor",{color:"#5382E2","border-color":"#5382E2"});a("."+b+" .cha-render .cha-console .title.ttl-admin, ."+b+" .cha-render .cha-console .title.ttl-suadmin",{color:"#F76767","border-color":"#F76767"});a("."+b+" .cha-render .cha-console a",{color:"#5382E2","text-decoration":"none",
cursor:"pointer"});a("."+b+" .cha-render .cha-console .context",{"word-break":"break-all","word-wrap":"break-word"});a("."+b+" .cha-render .cha-controls",{margin:"0",padding:"0",height:"90px",bottom:"-90px",right:"0",left:"0",position:"absolute",overflow:"hidden","background-color":"#F8F8F8"});a("."+b+" .cha-render.more .cha-controls",{bottom:"0"});a("."+b+" .cha-render .cha-controls > *",{"float":"left",margin:"8px 0 0 8px",padding:"0",width:"60px",color:"#8A8A8A","font-size":"12px","text-align":"center",
"white-space":"normal","background-color":"transparent"});a("."+b+" .cha-render .cha-controls > *:hover",{"background-color":"transparent"});a("."+b+" .cha-render .cha-controls > * .icon",{"float":"none",margin:"0 4px",padding:"0",width:"50px",height:"50px",border:"1px solid #E6E6E6","border-radius":"5px","background-repeat":"no-repeat","background-position":"center",display:"inline-block"});a("."+b+" .cha-render .cha-controls .shieldtext .icon",{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACeklEQVRYR8VX0XUTMRAcVQAdQCrAVJCkAkIFkAqyqSChAg8VkFQAqQCnApwKEiqIXYF4c0h6ynG6k87mWe/dl6Td2dHu7J7DgZc7sH9UAzCzhXPu2Hv/GoC+BYCVAnDOrb33DySfWgMaBWBmbwFcATgLTqfsr51zXC6Xt1MH4/4gADNThEsAn2sN9c6JiUuSP6bu/wPAzE4AfK+MeMq+AJyT3JQOvgBgZor425TVxv01gNMSiATAzPTOivx/rBXJ0yHDHYDw5o97or0UwBeS1/3NCIAALvYQ+l0oTdGeL+WVGD7rl6oL0T/v6PwrgOuxZCsmoZlZKLk5GB5UqiRTxBIsAB9SnTu38d7flURKDEjNjmd4l/OTGHWoIImWxGtoyY/yoFPPBNDMhP5dI4CtHMl5eMKfQZprzNyQPM8B+JpbvTOq69UM59FMAqEnkEq9agBxT1JZrfKV0qX3brCho5JqzsmBj9L4INmifu5S4EcC0BLFlqQa1a7RR9CXAiA6ayPJ6e8/3W8AU/OAKuRNRtl9VEJdzDdKtHZyGuYESXdc73MtGHuTXs/ZRAC1jSgCyFlLrNQmg5mlysu7YU0/iACkdr9mMpDf3fbngSlVlKSKLSVhrh/Kh34DKhHSlXBYf3MgX2Z2A+BT4fYTyaO9VsGQo4kG1SVcY/UMuZGcL4pT8QgTtyS7YXWHRqbrXT6NARjTh8iCREkl3CLlcp4qZwzA0JygeV85olzoRCdogtS0tqPKhsU2Xvov6I/mUjldGpzzQ1cUYH0lNmRDU5MCSGuoCiSXGh5Fr0prXfODES0GpVOty47KU5+m4heDSDxf/W9Yq3Kt5w4O4A9JNgxutXqzoAAAAABJRU5ErkJggg==)"});
a("."+b+" .cha-render .cha-controls .shieldtext.checked .icon",{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAB0klEQVRYR81X0VHCUBDcV4F0oHYgFQAVqBUIFXh2YAdZKhA7wAqECsQOpAOtIM4ySSZ5JOQBedGbyUcyye3e3r27i8Mfm/tjfAQTMLOBc26UpukYwA2Aq+xSDF/ZtXHOrdI0XZP8DgmulYCZCegBgAEYhDgFIHACeCUpco12kICZCTQJBK19zTlnSZLMm3zUEpDcAF4A3J0DXvp2CWBWl5Y9Ahn4e5bnjvB3blYkJ77DOgKLLOddgue+FiRnZccVAmamClf0MW1CcpUD+ARUsZcx0XVcSV7vEegp+hx3SHKjm0IBM4uZe1/UOUkd8QoB5WUUWf7cvTql6q1CoI/85wQ2JIc+AbXPi54U2JJUi/9fKVC7vO1JAQ2pqa+AHqj/92H3JBVwJQUaQCrE2HXwQ7IY634n1Ax/jCzBE0nh7MwnIGbqULHacXH+awnooZlp3fqIoMIngLG/EzQtJCKhzthVPWy13OT9vxxc40qWKaFKPTcdbwCmTUtq2054znxYA3guz/66tHZNQHkW6WUbcGMRllmama/ATs7sHdVJbloyDq7fTUUdqoCKSHksVqmuTkkIAYGqdwT96RxLrI3AIBZwUA0cG80p77f+G57i9JhvfgHYZaIhgJsBwwAAAABJRU5ErkJggg==)"});
a("."+b+" .cha-render .cha-controls .clearscreen .icon",{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACx0lEQVRYR8WWjXETQQyF31YAHWAqACogqYBQAaEClAogFVhUAFRAqICkAkgFmA5CBcd8N6ubvb0/nwmOZjyJz7e7T9J7T5v0wJEe+HwdFYCZnUj6Lsnd/YLkjw3gWtJLSb/dfXNUAGZ2JulrbvlHd7djA9hJepIBvHD3nz0AZvZc0lbSF3f/fJ/kNLNzSZ/ynrfuzlltdBwwsztJj/Lzp+6+y6DeSaJkLeJDwszK7C9g4BgADngm6Y+kjbvfmdkHSe8lXbo7/6+OYo9Y2yY3BuCxJIhxFdmaWTwDNBVaFXn9L0nsQ3xzd8jYxX+VoZkhNSr3Jp/4tubXJADQp5Roibbb7c0+qWepwRmCMtM6uBRArK7kKIBcOhwr2Hrt7qdzICqml69iPgDh7yCmAMDSyCQW9dhb75RtlnLjdGMBAPboqWkKQFhmudGkEqhYlDZLFzJH38s9IDImNFRB+ZaZsQGmVMZrd78ayZw2/ZCEeZFhq5bcdwyIvcJf+KmzYb7MkZA2sAGBDAc+kLOFK8jsxt2Zdr3IfEJ6rMeKe1I8WIaZ8dgrh99KOlnyiryGbLpKrgaQyYY7RraLh5ccqSs0C4A+ppQo26ZpGg6klOFqbT8p7R6ZhxnR/24OTHKgmt01aGYFhGOvjs0T0msfF8NoIOUpGdYqoMxIs/0sZVwpKq5h3ZArf59TAVlOejjt2acCZhaewj0jVNVhWOIAbH2V36bXl5mEVOi8rkSWHKbUtiZ7AdOQ6G5Be1UgXjKzshLxeLBZPox3zwozirWjHjFrRFUfKR3sDUdj45h0qIK5QVUYt63Giys4X09XDaMxRucMAREt4TX6ixUDoudwRe8Hl5BVLRixVlg9NvWYclcppV3TNDH/Wd67gq0yogVtkzmtwZziul0vWbxLrrbiifYABiBkzoc7wSTx/qkFc1U55Ld7qcAhB8eav3TZQDD7fopnAAAAAElFTkSuQmCC)"});
a("."+b+" .cha-render .cha-dialog",{height:"40px",right:"0",bottom:"0",left:"0",position:"absolute","background-color":"#E0E0E0"});a("."+b+" .cha-render.more .cha-dialog",{bottom:"90px"});a("."+b+" .cha-render .cha-dialog .more",{"float":"left",margin:"8px 5px",padding:"0",width:"24px",height:"24px","background-repeat":"no-repeat","background-position":"center","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABpklEQVRIS7VW7VHCQBTc68AS0gGxA6xAS8AKfFYgVuBagXRAqEA6ECogJdjBOZt5lzlDEkDJm8nkRy5v9+37uoARM7MihHAfY5wDKACUfnwHoA4hbGOMG5L1kJvQ90GOAbwAuANQAdjqIfmt82Z2A0Cgeh4AfAJ47QM6AjAz/UAAK72T0yGGDmYAFsImKUKt/QIwMx1aihVJyXC2mZnkk/MlSZFrrAXImJdDrF06hdWruUcjYm0kDYD/KJ1HmZtZEz5JydhrWSRzEUkACqkmKXkGzcxEQgBK7tg5+SlILkLGflCa5OkCAFWZZCwFoAoQmt6jdi6Ayy5VdgKQrqtuefUhXQigPDUSKetKSNNE18hBVjiVACLJvFzVxW8ApGPX8lHR/SaCz3kJy/cQgDr5LwCq/7ZHEsDkEk2e5MnLVElVh1670Q4AbqcfFVnNTjfsHCQtmv+O6y/vh2byXnvhrH11Hi+cbGKmSD4AvJ8aIb5kngA8nlyZGYgqSzNdc3/tt4d96lK/bcxijCKjZ+Or8mjT9d4qOkBykK4tM/+293mvwqjGri0/+EslZhJDzTgAAAAASUVORK5CYII=)",
display:"block"});a("."+b+" .cha-render .cha-dialog textarea",{margin:"5px 0",padding:"5px",width:d.config.width-114+"px",height:"20px",resize:"none",border:"0 none","line-height":"20px","background-color":"#F8F8F8"});a("."+b+" .cha-render .cha-dialog .send",{"float":"right",margin:"5px",padding:"0 5px",width:"50px",height:"30px",top:"0",right:"0",position:"absolute"})}})(chatease);(function(d){(d.core.renders={}).modes={DEFAULT:"def",NONE:"none"}})(chatease);
(function(d){var f=d.utils,e=d.events;d=d.core;var g=d.protocol.roles;d=d.renders;var a=d.modes,b=f.css;d.def=function(c,d){function h(a,b,c,d,e){var h=f.createElement("div",b);h.setAttribute("value",!!e);h.innerHTML='<span class="icon"></span>'+a;a=function(a,b){return function(c){c="true"==h.getAttribute("value")?!1:!0;h.setAttribute("value",c);c?f.addClass(h,"checked"):f.removeClass(h,"checked");k.dispatchEvent(a,f.extend({value:c},b))}}(c,d);try{h.addEventListener("click",a)}catch(E){h.attachEvent("onclick",
a)}return h}function l(a,b,c,d){b=f.createElement("div",b);b.innerHTML='<span class="icon"></span>'+a;a=function(a,b){return function(c){k.dispatchEvent(a,b)}}(c,d);try{b.addEventListener("click",a)}catch(G){b.attachEvent("onclick",a)}return b}function A(a){if(!a)return null;var b=f.createElement("span","icon");b.innerHTML='<img src="'+a+'">';return b}function q(a){var b,c="title ";if("number"!=f.typeOf(a)&&(a=parseInt(a),NaN==a||0>a))return null;a&g.SYSTEM?(a&g.SYSTEM)!=g.SYSTEM&&(a&g.SU_ADMIN?(b=
f.createElement("span",c+"ttl-suadmin"),b.innerText="\u8d85\u7ba1"):(b=f.createElement("span",c+"ttl-admin"),b.innerText="\u7ba1\u7406\u5458")):a&g.ANCHOR?(a&g.ANCHOR)==g.ANCHOR?(b=f.createElement("span",c+"ttl-anchor"),b.innerText="\u4e3b\u64ad"):a&g.SECRETARY?(b=f.createElement("span",c+"ttl-secretary"),b.innerText="\u79d8\u4e66"):(b=f.createElement("span",c+"ttl-assistant"),b.innerText="\u52a9\u7406"):a&g.VIP&&(a=(a&g.VIP)>>>1,b=f.createElement("span",c+("ttl-vip"+a)),b.innerText="VIP"+a);return b}
var k=f.extend(this,new e.eventdispatcher("renders.def")),x,r,t,w,y,p,u,m,C;k.setup=function(){f.isMSIE("(8|9)")?_object.setup&&(_object.setup(k.config),k.dispatchEvent(e.CHATEASE_READY,{id:k.config.id})):k.dispatchEvent(e.CHATEASE_READY,{id:k.config.id})};k.show=function(a,b,c){"object"!=f.typeOf(b)&&(b={id:0,name:"\u7cfb\u7edf",role:g.SYSTEM});"uni"!=c&&(c="multi");var d=f.createElement("div");(b.role&g.SYSTEM)==g.SYSTEM&&(d.className="cha-system");var h=A(b.icon);h&&d.appendChild(h);"uni"==c&&
(c=f.createElement("span"),c.innerHTML="[\u5bc6\u8bed]",d.appendChild(c));(c=q(b.role))&&d.appendChild(c);c=f.createElement("a");c.innerHTML=b.name+": ";b=function(a){return function(b){k.dispatchEvent(e.CHATEASE_VIEW_NICKCLICK,{user:a})}}(b);try{c.addEventListener("click",b)}catch(D){c.attachEvent("onclick",b)}d.appendChild(c);c=f.createElement("span","context");c.innerHTML=a;d.appendChild(c);t.childNodes.length>=k.config.maxrecords&&t.removeChild(t.childNodes[0]);t.appendChild(d);k.config.smoothing?
k.refresh():r.scrollTop=r.scrollHeight};k.send=function(){k.dispatchEvent(e.CHATEASE_VIEW_SEND,{data:{data:u.value,type:"multi"}});k.clearInput()};k.refresh=function(){k.config.smoothing?(r.clientHeight<t.clientHeight&&b.style(t,{"transition-timing-function":"cubic-bezier(0.165, 0.84, 0.44, 1)","transition-duration":"100ms",transform:"translate(0px, "+(r.clientHeight-t.clientHeight)+"px) translateZ(0px)"}),C.refresh()):r.scrollTop=r.scrollHeight};k.clearInput=function(){u.value=""};k.clearScreen=
function(){f.emptyElement(r)};k.element=function(){return _object};k.resize=function(a,b){};k.destroy=function(){};k.name=a.DEFAULT;k.config=f.extend({},{},d);f.isMSIE("(8|9)")&&(c.innerHTML='<object id="cha-swf" name="cha-swf" align="middle" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+k.config.swf+'"><param name="quality" value="high"><param name="bgcolor" value="#ffffff"><param name="allowscriptaccess" value="sameDomain"><param name="allowfullscreen" value="true"><param name="wmode" value="transparent"><param name="FlashVars" value="id='+
k.config.id+'"></object>',_object=k.WebSocket=c.firstChild);(function(){k.config.title&&(x=f.createElement("div","cha-title"),c.appendChild(x),x.innerHTML=k.config.title);r=f.createElement("div","cha-console");r.id=k.config.id+"-console";c.appendChild(r);t=f.createElement("div","cha-content");r.appendChild(t);k.config.smoothing&&(C=new BScroll(r));w=f.createElement("div","cha-controls");c.appendChild(w);var a=h("\u5c4f\u853d\u6d88\u606f","cha-checkbox shieldtext",e.CHATEASE_VIEW_PROPERTY,{key:"shield"},
!1);a.id=k.config.id+"-shieldtext";w.appendChild(a);a=l("\u6e05\u5c4f","cha-button white clearscreen",e.CHATEASE_VIEW_CLEARSCREEN,null);w.appendChild(a);y=f.createElement("div","cha-dialog");c.appendChild(y);p=h("","more",e.CHATEASE_VIEW_PROPERTY,{key:"more"},!1);y.appendChild(p);u=f.createElement("textarea");u.id=k.config.id+"-input";y.appendChild(u);m=f.createElement("button","cha-button blue send");y.appendChild(m);u.setAttribute("placeholder","\u8f93\u5165\u804a\u5929\u5185\u5bb9");k.config.maxlength&&
u.setAttribute("maxlength",k.config.maxlength);a=function(){return function(a){a=window.event||a;13==a.keyCode&&(a.ctrlKey?u.value+="\r\n":(k.send(),window.event?a.returnValue=!1:a.preventDefault()))}}();try{u.addEventListener("keypress",a)}catch(z){u.attachEvent("onkeypress",a)}m.innerHTML="\u53d1\u9001";a=function(){return function(){k.send()}}();try{m.addEventListener("click",a)}catch(z){m.attachEvent("onclick",a)}})()}})(chatease);
(function(d){var f=d.utils,e=d.events;d=d.core.renders;var g=d.modes;d.none=function(a,b){var c=f.extend(this,new e.eventdispatcher("renders.none"));c.setup=function(){f.isMSIE("(8|9)")?_object.setup&&(c.config.debug=!0,_object.setup(c.config),c.dispatchEvent(e.CHATEASE_READY,{id:c.config.id})):c.dispatchEvent(e.CHATEASE_READY,{id:c.config.id})};c.show=function(a,b,c){};c.send=function(){};c.clearInput=function(){};c.clearScreen=function(){};c.element=function(){return _object};c.resize=function(a,
b){};c.destroy=function(){};c.name=g.NONE;c.config=f.extend({},{},b);f.isMSIE("(8|9)")&&(a.innerHTML='<object id="cha-swf" name="cha-swf" align="middle" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+c.config.swf+'"><param name="quality" value="high"><param name="bgcolor" value="#ffffff"><param name="allowscriptaccess" value="sameDomain"><param name="allowfullscreen" value="true"><param name="wmode" value="transparent"><param name="FlashVars" value="id='+c.config.id+
'"></object>',_object=c.WebSocket=a.firstChild)}})(chatease);
(function(d){var f=d.utils,e=d.events,g=d.core;g.entity=function(a){var b=f.extend(this,new e.eventdispatcher("core.entity")),c,d,n;b.setup=function(){setTimeout(function(){n.setup()},0)};b.destroy=function(){n&&n.stop();d&&d.destroy();c&&c.destroy()};b.id=a.id;b.model=c=new g.model(a);b.view=d=new g.view(c);b.controller=n=new g.controller(c,d);n.addGlobalListener(function(a){b.dispatchEvent(a.type,a)});b.onSWFOpen=n.onOpen;b.onSWFMessage=n.onMessage;b.onSWFError=n.onError;b.onSWFClose=n.onClose;
b.send=n.send;b.close=n.close;b.getState=c.getState;b.resize=d.resize}})(chatease);
(function(d){var f=d.utils,e=d.events;d=d.core;var g=d.states,a=d.protocol.punishments,b=function(){var b=this,d,e;b.set=function(a){f.extend(b,a);if(1==a.hasOwnProperty("role")){var c=a.role;a=2E3;c&240?a=0:c&&(a*=.5,--c&&(a=a>=100*c?a-100*c:0));d=a}};b.isMuted=function(){return b.role<b.state||!!(b.punishment.code&a.MUTED)};b.isActive=function(){if(0>d)return!1;var a=(new Date).getTime();if(e&&a-e<d)return!1;e=a;return!0};f.extend(b,{channel:null,role:-1,state:0,punishment:{code:0,time:0}});d=-1;
e=0};d.model=function(a){var c=f.extend(this,new e.eventdispatcher("core.model")),d=g.CLOSED,l;c.setState=function(a){a!==d&&(d=a,c.dispatchEvent(e.CHATEASE_STATE,{state:a}))};c.getState=function(){return d};c.setProperty=function(a,b){1==l.hasOwnProperty(a)&&(l[a]=b,c.dispatchEvent(e.CHATEASE_PROPERTY,{key:a,value:b}))};c.getProperty=function(a){return l[a]};c.getConfig=function(a){return c.config[a]};c.destroy=function(){};c.config=f.extend({},{},a);l={userinfo:new b,shield:!1}}})(chatease);
(function(d){var f=d.utils,e=d.events;d=d.core;var g=d.protocol.roles,a=d.renders,b=a.modes,c=d.skins;d.view=function(d){function h(a){if(a.ctrlKey||a.metaKey)return!0;switch(a.keyCode){case 13:p&&p.send()}if(/13/.test(a.keyCode))return a.preventDefault?a.preventDefault():a.returnValue=!1,!1}function l(a){r.resize()}function A(a){switch(a.key){case "more":a.value?f.addClass(w,"more"):f.removeClass(w,"more");p.refresh();break;case "shield":var b=a.value?"\u53d6\u6d88\u5c4f\u853d":"\u5c4f\u853d\u6d88\u606f";
document.getElementById(d.getConfig("id")+"-shieldtext").innerHTML='<span class="icon"></span>'+b}x(a)}function q(a){r.dispatchEvent(e.CHATEASE_NICKCLICK,{user:a.user})}function k(a){x(a)}function x(a){r.dispatchEvent(a.type,a)}var r=f.extend(this,new e.eventdispatcher("core.view")),t,w,y,p,u;r.setup=function(){p?(p.setup(),r.resize()):r.dispatchEvent(e.CHATEASE_SETUP_ERROR,{message:"Render not available!",name:d.config.render.name})};r.show=function(a,b,c){(!b||b.role&g.SYSTEM||!d.getProperty("shield"))&&
p&&p.show(a,b,c)};r.resize=function(a,b){setTimeout(function(){p&&p.resize(a,b);u&&u.resize(a,b)},0)};r.destroy=function(){t&&t.removeEventListener("keydown",h);p&&p.destroy()};(function(){t=f.createElement("div","cha-wrapper cha-skin-"+d.getConfig("skin").name);t.id=d.getConfig("id");w=f.createElement("div","cha-render");y=f.createElement("div","cha-contextmenu");t.appendChild(w);t.appendChild(y);var g=f.extend({},d.getConfig("render"),{id:d.getConfig("id"),url:d.getConfig("url"),width:d.getConfig("width"),
height:d.getConfig("height"),maxlength:d.getConfig("maxlength"),maxrecords:d.getConfig("maxrecords"),smoothing:d.getConfig("smoothing")});try{p=r.render=new a[g.name](w,g),p.addEventListener(e.CHATEASE_READY,x),p.addEventListener(e.CHATEASE_VIEW_SEND,x),p.addEventListener(e.CHATEASE_VIEW_PROPERTY,A),p.addEventListener(e.CHATEASE_VIEW_CLEARSCREEN,x),p.addEventListener(e.CHATEASE_VIEW_NICKCLICK,q),p.addEventListener(e.CHATEASE_RENDER_ERROR,k)}catch(C){f.log("Failed to init render "+g.name+"!")}g=f.extend({},
d.getConfig("skin"),{id:d.getConfig("id"),width:d.config.width,height:d.config.height,title:!!d.getConfig("render").title,smoothing:d.getConfig("smoothing")});try{u=new c[g.name](g)}catch(C){f.log("Failed to init skin "+g.name+"!")}if(!p||p.name!=b.NONE){g=document.getElementById(d.getConfig("id"));g.parentNode.replaceChild(t,g);try{t.addEventListener("keydown",h),window.addEventListener("resize",l)}catch(C){t.attachEvent("onkeydown",h),window.attachEvent("onresize",l)}}})()}})(chatease);
(function(d){var f=d.utils,e=f.crypt,g=d.events,a=d.core,b=a.states,c=a.protocol,h=c.cmds,n=c.raws,l=c.roles,A=c.punishments,q=c.errors;a.controller=function(a,c){function k(){if(v){if(a.getState()==b.CONNECTED){f.log("Websocket had connected already.");return}v.readyState!=WebSocket.CONNECTING&&v.readyState!=WebSocket.OPEN||v.close()}d.debug?c.show("\u804a\u5929\u5ba4\u8fde\u63a5\u4e2d\u2026"):f.log("\u804a\u5929\u5ba4\u8fde\u63a5\u4e2d\u2026");try{window.WebSocket=window.WebSocket||window.MozWebSocket,
window.WebSocket?(v=new WebSocket(a.config.url,"binary"),v.binaryType="arraybuffer",v.onopen=m.onOpen,v.onmessage=m.onMessage,v.onerror=m.onError,v.onclose=m.onClose):(v=c.render.WebSocket,v.connect())}catch(E){f.log("Failed to initialize websocket: "+E),w(q.NOT_ACCEPTABLE,null)}}function t(a){var b="";if("number"!=f.typeOf(a)&&(a=parseInt(a),NaN==a||0>a))return"";a&l.SYSTEM?b=(a&l.SYSTEM)==l.SYSTEM?b+"[\u7cfb\u7edf]":a&l.SU_ADMIN?b+"[\u8d85\u7ba1]":b+"[\u7ba1\u7406\u5458]":a&l.ANCHOR?b=(a&l.ANCHOR)==
l.ANCHOR?b+"[\u4e3b\u64ad]":a&l.SECRETARY?b+"[\u52a9\u7406]":b+"[\u623f\u7ba1]":a&l.VIP?b+="[VIP"+((a&l.VIP)-1)+"]":(a&l.NORMAL)!=l.NORMAL&&(b+="[\u6e38\u5ba2]");return b}function w(a,b){var d=y(a);d&&c.show(d);var e={raw:"error",error:{code:a,explain:d}};f.foreach(b,function(a,b){"cmd"!=a&&"raw"!=a&&"error"!=a&&(e[a]=b)});m.dispatchEvent(g.ERROR,e)}function y(a){var b="";switch(a){case q.BAD_REQUEST:b="\u9519\u8bef\u8bf7\u6c42\uff01";break;case q.UNAUTHORIZED:b="\u8bf7\u5148\u767b\u5f55\uff01";break;
case q.FORBIDDEN:b="\u6743\u9650\u9519\u8bef\uff01";break;case q.NOT_FOUND:b="\u672a\u77e5\u8bf7\u6c42\uff01";break;case q.NOT_ACCEPTABLE:b="\u65e0\u6cd5\u8bc6\u522b\uff01";break;case q.REQUEST_TIMEOUT:b="\u8bf7\u6c42\u8d85\u65f6\uff01";break;case q.CONFLICT:b="\u64cd\u4f5c\u9891\u7e41\uff01";break;case q.EXPECTATION_FAILED:b="\u64cd\u4f5c\u5931\u8d25\uff01";break;case q.INTERNAL_SERVER_ERROR:b="\u5185\u90e8\u9519\u8bef\uff01";break;case q.NOT_IMPLEMENTED:b="\u65e0\u6cd5\u8bc6\u522b\uff01";break;
case q.BAD_GATEWAY:b="\u54cd\u5e94\u65e0\u6548\uff01";break;case q.SERVICE_UNAVAILABLE:b="\u670d\u52a1\u8fc7\u8f7d\uff01";break;case q.GATEWAY_TIMEOUT:b="\u7f51\u5173\u8d85\u65f6\uff01"}return b}function p(a){z||(z=new f.timer(a,1),z.addEventListener(g.CHATEASE_TIMER,function(a){k()}));z.delay=a;z.reset();z.start()}function u(a){m.dispatchEvent(a.type,a)}var m=f.extend(this,new g.eventdispatcher("core.controller")),x=!1,v,z,F,B,G,D=0;m.setup=function(a){x||c.setup()};m.send=function(c,d){if(v&&a.getState()==
b.CONNECTED)if("object"!=f.typeOf(c)||0==c.hasOwnProperty("cmd"))w(q.BAD_REQUEST,c);else{var g=a.getProperty("userinfo");if(0==g.isActive())w(q.CONFLICT,c);else if(1==g.isMuted())w(q.EXPECTATION_FAILED,c);else{d&&(g=G++,B[g]=d,c.req=g);c=JSON.stringify(c);try{var h=e.stringToUTF8ByteArray(c),E=new Uint8Array(h);v.send(E.buffer);return}catch(I){}try{v.send(c)}catch(I){}}}else k()};m.onOpen=function(c){a.setState(b.CONNECTED)};m.onMessage=function(b){var h=b.data;"arraybuffer"===f.typeOf(b.data)&&(h=
new Uint8Array(b.data),h=e.UTF8ByteArrayToString(h));var k;try{k=eval("("+h+")")}catch(H){f.log("Failed to parse JSON. \nError: "+H+"\ndata: "+b.data);return}k.hasOwnProperty("req")&&B.hasOwnProperty(k.req)&&(b=B[k.req],h=b.result,k.raw==n.ERROR&&(h=b.status),h&&h.call(null,k),delete B[k.req]);switch(k.raw){case n.IDENT:b=a.getProperty("userinfo");b.set(f.extend({},k.user,{channel:k.channel.id,state:k.channel.state}));d.debug?c.show("\u5df2\u52a0\u5165\u623f\u95f4\uff08"+b.channel+"\uff09\u3002"):
f.log("\u5df2\u52a0\u5165\u623f\u95f4\uff08"+b.channel+"\uff09\u3002");b.role<b.state&&c.show("\u60a8\u6240\u5728\u7684\u7528\u6237\u7ec4\u4e0d\u80fd\u53d1\u8a00\uff01");b.punishment.code&A.MUTED&&(h=new Date,h.setTime(b.punishment.time),c.show("\u60a8\u5df2\u88ab\u7981\u8a00\u81f3\uff08"+f.formatTime(h)+"\uff09\uff01"));m.dispatchEvent(g.CHATEASE_INDENT,k);break;case n.TEXT:try{F||(F=new f.filter(a.config.keywords)),k.data=F.replace(k.data)}catch(H){f.log("Failed to execute filter.")}c.show(k.data,
k.user,k.type);m.dispatchEvent(g.CHATEASE_MESSAGE,k);break;case n.JOIN:b=t(k.user.role);c.show((b?b+" ":"")+k.user.name+" \u8fdb\u5165\u623f\u95f4\u3002");m.dispatchEvent(g.CHATEASE_JOIN,k);break;case n.LEFT:b=t(k.user.role);c.show((b?b+" ":"")+k.user.name+" \u5df2\u79bb\u5f00\u3002");m.dispatchEvent(g.CHATEASE_LEFT,k);break;case n.USERS:m.dispatchEvent(g.CHATEASE_USERS,k);break;case n.EXTERN:m.dispatchEvent(g.CHATEASE_EXTERN,k);break;case n.ERROR:w(k.error.code,k);break;default:f.log("Unknown data type: "+
k.raw+", ignored.")}};m.onError=function(c){a.setState(b.ERROR)};m.onClose=function(c){a.setState(b.CLOSED)};m.close=function(){v&&v.close()};B={};G=0;a.addEventListener(g.CHATEASE_STATE,function(e){switch(e.state){case b.CONNECTED:d.debug?c.show("\u804a\u5929\u5ba4\u5df2\u8fde\u63a5\u2026"):f.log("\u804a\u5929\u5ba4\u5df2\u8fde\u63a5\u2026");D=0;m.dispatchEvent(g.CHATEASE_CONNECT);break;case b.CLOSED:d.debug?c.show("\u804a\u5929\u5ba4\u8fde\u63a5\u5df2\u65ad\u5f00\uff01"):f.log("\u804a\u5929\u5ba4\u8fde\u63a5\u5df2\u65ad\u5f00\uff01");
m.dispatchEvent(g.CHATEASE_CLOSE,{channel:{id:a.channel}});if(0>a.config.maxretries||D<a.config.maxretries)e=Math.ceil(a.config.retrydelay+3E3*Math.random()),d.debug?c.show("\u6b63\u5728\u51c6\u5907\u91cd\u8fde\uff0c"+e/1E3+"\u79d2..."):f.log("\u6b63\u5728\u51c6\u5907\u91cd\u8fde\uff0c"+e/1E3+"\u79d2..."),D++,p(e);break;case b.ERROR:d.debug?c.show("\u804a\u5929\u5ba4\u5f02\u5e38\uff01"):f.log("\u804a\u5929\u5ba4\u5f02\u5e38\uff01");m.dispatchEvent(g.ERROR,{message:"Chat room error!",channel:{id:a.channel}});
break;default:m.dispatchEvent(g.ERROR,{message:"Unknown model state!",state:e.state})}});a.addEventListener(g.CHATEASE_PROPERTY,function(a){u(a)});c.addEventListener(g.CHATEASE_READY,function(b){x||(f.log("Chat ready!"),x=!0,u(b),d.debug||c.show("\u804a\u5929\u5ba4\u5df2\u8fde\u63a5\uff01"),k(),window.onbeforeunload=function(b){v&&a.getState()})});c.addEventListener(g.CHATEASE_SETUP_ERROR,function(c){a.setState(b.ERROR);u(c)});c.addEventListener(g.CHATEASE_VIEW_SEND,function(b){var d=b.data.data;
if(d){0<=a.config.maxlength&&(d=d.substr(0,a.config.maxlength));var d=f.trim(d),e=a.getProperty("userinfo");m.send({cmd:h.TEXT,data:d,type:b.data.type,channel:{id:e.channel}})}else c.show("\u8bf7\u8f93\u5165\u5185\u5bb9\uff01")});c.addEventListener(g.CHATEASE_VIEW_PROPERTY,function(b){a.setProperty(b.key,b.value)});c.addEventListener(g.CHATEASE_VIEW_CLEARSCREEN,function(a){c.render.clearScreen();u(a)});c.addEventListener(g.CHATEASE_VIEW_NICKCLICK,function(b){var c=a.getProperty("userinfo");b.channel=
{id:c.channel,state:c.state};u(b)});c.addEventListener(g.CHATEASE_RENDER_ERROR,function(c){a.setState(b.ERROR);u(c)})}})(chatease);
(function(d){var f=d.utils,e=d.events,g=d.embed=function(a){function b(a){switch(a.type){case e.ERROR:case e.CHATEASE_SETUP_ERROR:case e.CHATEASE_RENDER_ERROR:c.errorScreen(a.message);c.dispatchEvent(e.ERROR,a);break;default:c.dispatchEvent(a.type,a)}}var c=f.extend(this,new e.eventdispatcher("embed")),h={},n=null,l=!1;c.embed=function(){try{h=new g.config(a.config),n=new g.embedder(a,h)}catch(A){f.log("Failed to init embedder!");c.dispatchEvent(e.CHATEASE_SETUP_ERROR,{message:"Failed to init embedder!",
render:h.render.name});return}n.addGlobalListener(b);n.embed()};c.errorScreen=function(a){l||(l=!0,d.api.displayError(a,h))};(function(){f.foreach(a.config.events,function(b,c){b=a[b];"function"===f.typeOf(b)&&b.call(a,c)})})()}})(chatease);
(function(d){var f=d.utils,e=d.embed,g=d.core.renders.modes,a=d.core.skins.modes;e.config=function(b){b=f.extend({},{url:"ws://"+window.location.host+"/ch1?token=",width:640,height:400,keywords:"",maxlength:50,maxrecords:50,maxretries:-1,retrydelay:3E3,smoothing:!1,render:{name:g.DEFAULT,title:"CHATEASE "+d.version,swf:"swf/chatease.swf"},skin:{name:a.DEFAULT}},b);b.smoothing=b.smoothing&&f.isMobile()&&BScroll;return b};e.config.addConfig=function(a,c){return f.extend(a,c)}})(chatease);
(function(d){var f=d.utils,e=d.events,g=d.core;d.embed.embedder=function(a,b){function c(a){d.dispatchEvent(a.type,a)}var d=f.extend(this,new e.eventdispatcher("embed.embedder"));d.embed=function(){var d=new g.entity(b);d.addGlobalListener(c);d.setup();a.setEntity(d,b.render.name)}}})(chatease);