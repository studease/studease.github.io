playease=function(){if(playease.API)return playease.API.get.apply(this,arguments)};playease.VERSION="2.0.64";playease.DEBUG=!1;
(function(d){var c={extendz:function(){var a=Array.prototype.slice.call(arguments,0),b=a[0];switch(c.typeOf(b)){case "null":case "number":case "string":throw{name:"TypeError",message:"Could not extend to type "+c.typeOf(b)+"."};}for(var e=1;e<a.length;e++){var g=a[e];switch(c.typeOf(g)){case "null":case "number":case "string":d.DEBUG&&c.warn("Could not extend from type "+c.typeOf(g));break;case "array":c.forEach(g,function(e,k){switch(c.typeOf(k)){case "object":b.push(c.extendz({},k));break;case "array":b.push(c.extendz([],
k));break;default:"array"===c.typeOf(b)?b.push(k):b[e]=k}});break;default:c.forEach(g,function(e,k){switch(c.typeOf(k)){case "object":switch(c.typeOf(b[e])){case "null":case "number":case "string":b[e]={}}b[e]=c.extendz(b[e],k);break;case "array":b[e]=c.extendz([],k);break;default:b[e]=k}})}}return b},forEach:function(a,b){for(var e in a)a.hasOwnProperty&&"function"===c.typeOf(a.hasOwnProperty)?a.hasOwnProperty(e)&&b(e,a[e]):b(e,a[e])},getCookie:function(a){var b;return(b=document.cookie.match(new RegExp("(^| )"+
a+"=([^;]*)(;|$)")))?unescape(b[2]):null},padStart:function(a,b,e){for(a+="";a.length<b;)a=e+a;return a},padEnd:function(a,b,e){for(a+="";a.length<b;)a+=e;return a},hex:function(a){return"0x"+c.padStart(a.toString(16),2,"0")},time2string:function(a){var b="",e=a/3600|0,g=a%3600/60|0;a=a%60|0;e&&(b+=c.padStart(e,2,"0")+":");return b+=c.padStart(g,2,"0")+":"+c.padStart(a,2,"0")},typeOf:function(a){if(null===a||void 0===a)return"null";var b=typeof a;if("object"===b)try{var e=Object.prototype.toString.call(a).match(/^\[object ([a-z]+)\]$/i);
if(e&&1<e.length&&e[1])return e[1].toLowerCase()}catch(g){}return b},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},indexOf:function(a,b){if("array"===c.typeOf(a))for(var e=0;e<a.length;e++)if(a[e]===b)return e;return-1},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:b&3|8).toString(16)})}};void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.MAX_SAFE_INTEGER&&(Number.MAX_SAFE_INTEGER=Math.pow(2,
53)-1);void 0===Number.MIN_SAFE_INTEGER&&(Number.MIN_SAFE_INTEGER=-1*Number.MAX_SAFE_INTEGER);c.equal=function(a,b){return Math.abs(a-b)<Number.EPSILON};c.createElement=function(a,b){a=document.createElement(a);b&&(a.className=b);return a};c.addClass=function(a,b){var e="string"===c.typeOf(a.className)?a.className.split(" "):[];b="array"===c.typeOf(b)?b:b.split(" ");c.forEach(b,function(a,b){-1===c.indexOf(e,b)&&e.push(b)});a.className=c.trim(e.join(" "))};c.hasClass=function(a,b){a=a.className||
"";b="array"===c.typeOf(b)?b:b.split(" ");for(var e=0;e<b.length;e++)if(-1===a.search(new RegExp("\\b"+b[e]+"\\b","i")))return!1;return!0};c.removeClass=function(a,b){var e="string"===c.typeOf(a.className)?a.className.split(" "):[];b="array"===c.typeOf(b)?b:b.split(" ");c.foreach(b,function(a,b){a=c.indexOf(e,b);0<=a&&e.splice(a,1)});a.className=c.trim(e.join(" "))};c.emptyElement=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};var a=window.console=window.console||{log:function(){},warn:function(){},
error:function(){}};c.debug=function(){d.DEBUG&&c.log.apply(c,arguments)};c.log=function(){var d=Array.prototype.slice.call(arguments,0);"object"===c.typeOf(a)?a.log.apply(a,d):a.log(d)};c.warn=function(){var d=Array.prototype.slice.call(arguments,0);"object"===c.typeOf(a)?a.warn.apply(a,d):a.warn(d)};c.error=function(){var d=Array.prototype.slice.call(arguments,0);"object"===c.typeOf(a)?a.error.apply(a,d):a.error(d)};d.utils=c})(playease);
(function(d){function c(e){var a=this;a.set=function(e,k,g){switch(a.type){case b.DOUBLE:if("number"!==h.typeOf(k))throw{name:"TypeError",message:"Value should be number."};break;case b.BOOLEAN:if("boolean"!==h.typeOf(k))throw{name:"TypeError",message:"Value should be boolean."};case b.STRING:case b.LONG_STRING:if("string"!==h.typeOf(k))throw{name:"TypeError",message:"Value should be string."};break;case b.OBJECT:case b.ECMA_ARRAY:if("array"!==h.typeOf(k))throw{name:"TypeError",message:"Value should be array."};
for(g=0;g<k.length;g++){var f=k[g];a.table[f.key]=f}break;case b.STRICT_ARRAY:if("array"!==h.typeOf(k))throw{name:"TypeError",message:"Value should be array."};break;case b.DATE:if("number"!==h.typeOf(k))throw{name:"TypeError",message:"Value should be number."};if("number"!==h.typeOf(g))throw{name:"TypeError",message:"Offset not presented."};a.offset=g;break;case b.NULL:case b.UNDEFINED:if("null"!==h.typeOf(k))throw{name:"TypeError",message:"Value should be null."};break;default:throw{name:"TypeError",
message:"Unrecognized amf type "+a.type+"."};}a.key=e;a.value=k;return a};a.get=function(){switch(a.type){case b.DATE:return new Date(a.value+6E4*a.offset);default:return a.value}};a.type=e;a.key="";a.value=null;a.table={};a.offset=0;a.ended=!1}function a(a,g){for(var e=0,k=0;k<g.value.length;k++){var c=g.value[k];c.key&&(c=crypt.stringToByteArray(c.key),a.WriteUint16(c.length,!1),a.Write(c),e+=2+c.length);e+=b.encode(a,g)}return e}var h=d.utils,b={DOUBLE:0,BOOLEAN:1,STRING:2,OBJECT:3,MOVIE_CLIP:4,
NULL:5,UNDEFINED:6,REFERENCE:7,ECMA_ARRAY:8,END_OF_OBJECT:9,STRICT_ARRAY:10,DATE:11,LONG_STRING:12,UNSUPPORTED:13,RECORD_SET:14,XML:15,TYPED_OBJECT:16,AMF3_DATA:17,decode:function(a,g,c){if(1>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf Value."};var e=0,d=new DataView(g,c);a.type=d.getUint8(e);e+=1;d={0:b.decodeDouble,1:b.decodeBoolean,2:b.decodeString,3:b.decodeObject,5:b.decodeNull,6:b.decodeUndefined,8:b.decodeECMAArray,9:b.decodeEndOfObject,10:b.decodeStrictArray,
11:b.decodeDate,12:b.decodeLongString}[a.type];if(!d)throw{name:"TypeError",message:"Unrecognized amf type "+a.type+"."};return e+=d(a,g,c+e)},decodeDouble:function(a,g,b){if(8>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf double."};g=new DataView(g,b);a.value=g.getFloat64(0);return 8},decodeBoolean:function(a,g,b){if(1>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf boolean."};g=new DataView(g,b);a.value=!!g.getUint8(0);return 1},
decodeString:function(a,g,b){if(2>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf string."};var e=0,c=(new DataView(g,b)).getUint16(e);e+=2;0<c?(a.value=String.fromCharCode.apply(String,new Uint8Array(g,b+e,c)),e+=c):a.value="";return e},decodeObject:function(a,g,d){if(3>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf object."};var e=0,h=g.byteLength-d;for(a.value=[];e<h;){var f=new c;e+=b.decodeString(f,g,d+e);f.key=f.get();e+=b.decode(f,
g,d+e);if(f.type===b.END_OF_OBJECT)break;a.value.push(f);a.table[f.key]=f}return e},decodeNull:function(a,g,b){a.value=null;return 0},decodeUndefined:function(a,g,b){a.value=void 0;return 0},decodeECMAArray:function(a,g,c){if(4>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf ecma array."};var e=4;new DataView(g,c);return e+=b.decodeObject(a,g,c+e)},decodeEndOfObject:function(a,g,b){a.ended=!0;return 0},decodeStrictArray:function(a,g,d){if(4>g.byteLength)throw{name:"DataError",
message:"Data not enough while decoding amf strict array."};var e=0,h=new DataView(g,d),f=h.getUint32(e);e+=4;var n=g.byteLength-d;a.value=[];for(var p=0;p<f&&e<n;p++){var q=new c;e+=b.decode(q,g,d+e);a.value.push(q)}e+3<=n&&0===h.getUint8(e)&&0===h.getUint8(e+1)&&h.getUint8(e+2)===b.END_OF_OBJECT&&(a.ended=!0,e+=3);return e},decodeDate:function(a,g,b){if(10>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf date."};var e=0;g=new DataView(g,b);a.Timestamp=g.getFloat64(e);
e+=8;a.Timeoffset=g.getInt16(e);return e+2},decodeLongString:function(a,g,b){if(4>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf long string."};var e=0,c=(new DataView(g,b)).getUint32(e);e+=4;0<c&&(a.value=String.fromCharCode.apply(String,new Uint8Array(g,b+e,c)),e+=c);return e},appendBytes:function(a,b){a.Write(b)},appendInt8:function(a,b){a.writeInt8(b)},appendInt16:function(a,b,c){a.WriteInt16(b,c)},appendInt32:function(a,b,c){a.WriteInt32(b,c)},appendUint8:function(a,
b){a.writeUint8(b)},appendUint16:function(a,b,c){a.WriteUint16(b,c)},appendUint32:function(a,b,c){a.WriteUint32(b,c)},encode:function(a,g){var e={0:b.encodeDouble,1:b.encodeBoolean,2:b.encodeString,3:b.encodeObject,5:b.encodeNull,6:b.encodeUndefined,8:b.encodeECMAArray,10:b.encodeStrictArray,11:b.encodeDate,12:b.encodeLongString}[g.type];if(!e)throw{name:"TypeError",message:"Unrecognized amf type "+g.type+"."};return e(a,g)},encodeNumber:function(a,g){a.WriteUint8(b.DOUBLE);a.WriteFloat64(g.value,
!1);return 9},encodeBoolean:function(a,g){a.WriteUint8(b.BOOLEAN);a.WriteUint8(g.value?1:0);return 2},encodeString:function(a,g){if(!g.value)return 0;if(65535<=g.value.length)return b.encodeLongString(a,g);g=crypt.stringToByteArray(g.value);a.WriteUint8(b.STRING);a.WriteUint16(g.length,!1);a.Write(g);return 3+g.length},encodeObject:function(e,g){var c=1;e.WriteUint8(b.OBJECT);c+=a(g);g.ended&&(e.WriteUint16(0),e.WriteUint8(b.END_OF_OBJECT),c+=3);return c},encodeNull:function(a,g){a.WriteUint8(b.NULL);
return 1},encodeUndefined:function(a,g){a.WriteUint8(b.UNDEFINED);return 1},encodeECMAArray:function(e,g){var c=3;e.WriteUint8(b.ECMA_ARRAY);e.WriteUint32(g.value.length,!1);return c+=a(e,g)},encodeStrictArray:function(e,g){var c=3;e.WriteUint8(b.STRICT_ARRAY);e.WriteUint32(g.value.length,!1);return c+=a(e,g)},encodeDate:function(a,g){a.WriteUint8(b.DATE);a.WriteFloat64(g.value,!1);a.WriteUint16(g.offset,!1);return 11},encodeLongString:function(a,g){if(!g.value)return 0;g=crypt.stringToByteArray(g.value);
a.WriteUint8(b.LONG_STRING);a.WriteUint32(g.length,!1);a.Write(g);return 5+g.length}};b.Value=c;h.AMF=b})(playease);
(function(d){d=d.utils;d.MIN_UINT32=0;d.MAX_UINT32=4294967295;d.MAX_INT32=2147483647;d.MIN_INT32=-2147483648;d.MIN_CACHE_BITS=25;d.BitStream=function(c){var a=this;a.ShowBits=function(a){if(0===a)return 0;var g=e>>>3,k=0;e<b&&(k=d.getUint8(g)<<24);e+8<b&&(k|=d.getUint8(g+1)<<16);e+16<b&&(k|=d.getUint8(g+2)<<8);e+24<b&&(k|=d.getUint8(g+3));return k<<(e&7)>>>32-a};a.ShowBitsLong=function(e){return 25>=e?a.ShowBits(e):a.ShowBits(16)<<e-16|a.ShowBits(e-16)};a.ReadBits=function(b){var g=a.ShowBits(b);
e+=b;return g};a.ReadBitsLong=function(b){var g=a.ShowBitsLong(b);e+=b;return g};a.SkipBits=function(a){e+=a};a.Left=function(){return b-e};var d=new DataView(c.buffer,c.byteOffset,c.byteLength);var b=8*c.byteLength;var e=0}})(playease);
(function(d){var c=new function(){function a(a){return g.match(/(Chrome|CriOS)\/((\d+)\.(\d+))/)}function c(){if(!e.isWindows)return 0;var a=navigator.plugins;if(a){var b=a["Shockwave Flash"];if(b&&b.description){var g=b.description.replace(/\D+(\d+\.?\d*).*/,"$1");return parseFloat(g)}}if("undefined"!==typeof window.ActiveXObject)try{return b=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),g=b.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."),parseFloat(g)}catch(f){}return 0}
function b(){return void 0!==window.orientation?90===window.orientation||-90===window.orientation:window.innerWidth>window.innerHeight}var e=this;var g=navigator.userAgent;e.OS={name:"",version:"",major:NaN,minor:NaN};e.Browser={name:"",version:"",major:NaN,minor:NaN};(function(){var a=g.match(/(Windows)\sNT\s((\d+)\.(\d+))/)||g.match(/(Mac)\sOS\sX\s((\d+)[\._]{1}(\d+))/)||g.match(/(Android)(?:\s((\d+)\.(\d+)))?/)||g.match(/(iP(?:hone|ad|od)).+((\d+)_(\d+))/)||g.match(/(Windows\sPhone)(?:\sOS)?\s((\d+)\.(\d+))/);
a&&(e.OS.name=a[1],e.OS.version=a[2],e.OS.major=parseInt(a[3]),e.OS.minor=parseInt(a[4]));e.OS.isWindows="Windows"===e.OS.name;e.OS.isMac="Mac"===e.OS.name;e.OS.isAndroid="Android"===e.OS.name;e.OS.isIOS="iPhone"===e.OS.name||"iPad"===e.OS.name||"iPod"===e.OS.name;e.OS.isWindowsPhone="Windows Phone"===e.OS.name;e.OS.isMobile=e.OS.isAndroid||e.OS.isIOS||e.OS.isWindowsPhone;e.OS.isHorizontal=b})();(function(){var b;(b=g.match(/(MSIE)\s((\d+)\.(\d+))/)||g.match(/(Trident)\/.+rv:\s((11)\.(\d+))/i)||g.match(/Firefox\/((\d+)\.(\d+))/)||
g.match(/(OPR)\/((\d+)\.(\d+))/)||g.match(/(Edg|Edge|EdgA)\/((\d+)\.(\d+))/))||(a()||!g.match(/Safari/)?b=null:(b=g.match(/Version\/((\d+)\.(\d+))/),b=["Safari/"+b[1],"Safari"].concat(b.slice(1))));if(b=b||g.match(/(MicroMessenger)\/((\d+)\.(\d+))/)||g.match(/(QQ)\/((\d+)\.(\d+))/)||g.match(/(QQBrowser)\/((\d+)\.(\d+))/)||g.match(/(MetaSr)\s((\d+)\.(\d+))/)||g.match(/QIHU (360EE)/)||a())e.Browser.name=b[1],e.Browser.version=b[2],e.Browser.major=parseInt(b[3]),e.Browser.minor=parseInt(b[4]);e.Browser.isMSIE=
"MSIE"===e.Browser.name;e.Browser.isIE8="MSIE"===e.Browser.name&&8===e.Browser.major;e.Browser.isIE9="MSIE"===e.Browser.name&&9===e.Browser.major;e.Browser.isIE10="MSIE"===e.Browser.name&&10===e.Browser.major;e.Browser.isIE11="Trident"===e.Browser.name;e.Browser.isIE=e.Browser.isMSIE||e.Browser.isIE11;e.Browser.isFirefox="Firefox"===e.Browser.name;e.Browser.isOpera="OPR"===e.Browser.name;e.Browser.isEdg="Edg"===e.Browser.name;e.Browser.isEdge="Edge"===e.Browser.name;e.Browser.isEdgA="EdgA"===e.Browser.name;
e.Browser.isSafari="Safari"===e.Browser.name;e.Browser.isWeChat="MicroMessenger"===e.Browser.name;e.Browser.isQQ="QQ"===e.Browser.name;e.Browser.isQQBrowser="QQBrowser"===e.Browser.name;e.Browser.isSogou="MetaSr"===e.Browser.name;e.Browser.is360EE="360EE"===e.Browser.name;e.Browser.isChrome="Chrome"===e.Browser.name;e.Browser.isCriOS="CriOS"===e.Browser.name;e.Browser.flash=c()})()};d.OS=c.OS;d.Browser=c.Browser})(playease);
(function(d){var c=d.utils;c.crypt={stringToByteArray:function(a){for(var c=[],b=0,e=0;e<a.length;e++){for(var g=a.charCodeAt(e);255<g;)c[b++]=g&255,g>>=8;c[b++]=g}return c},byteArrayToString:function(a){if(8192>=a.length)return String.fromCharCode.apply(null,a);for(var c="",b=0;b<a.length;b+=8192){var e=Array.slice(a,b,b+8192);c+=String.fromCharCode.apply(null,e)}return c},byteArrayToHex:function(a){return Array.map(a,function(a){return c.padStart(a.toString(16),2,0)}).join("")},hexToByteArray:function(a){if(0!==
a.length%2)return c.error("Key string length must be multiple of 2."),null;for(var d=[],b=0;b<a.length;b+=2)d.push(parseInt(a.substring(b,b+2),16));return d},stringToUTF8ByteArray:function(a){for(var c=[],b=0,e=0;e<a.length;e++){var g=a.charCodeAt(e);128>g?c[b++]=g:(2048>g?c[b++]=g>>6|192:(55296===(g&64512)&&e+1<a.length&&56320===(a.charCodeAt(e+1)&64512)?(g=65536+((g&1023)<<10)+(a.charCodeAt(++e)&1023),c[b++]=g>>18|240,c[b++]=g>>12&63|128):c[b++]=g>>12|224,c[b++]=g>>6&63|128),c[b++]=g&63|128)}return c},
UTF8ByteArrayToString:function(a){for(var c=[],b=0,e=0;b<a.length;){var g=a[b++];if(128>g)c[e++]=String.fromCharCode(g);else if(191<g&&224>g){var d=a[b++];c[e++]=String.fromCharCode((g&31)<<6|d&63)}else if(239<g&&365>g){d=a[b++];var k=a[b++],r=a[b++];g=((g&7)<<18|(d&63)<<12|(k&63)<<6|r&63)-65536;c[e++]=String.fromCharCode(55296+(g>>10));c[e++]=String.fromCharCode(56320+(g&1023))}else d=a[b++],k=a[b++],c[e++]=String.fromCharCode((g&15)<<12|(d&63)<<6|k&63)}return c.join("")},XORByteArray:function(a,
d){if(a.length!==d.length)c.error("XOR array lengths must match.");else{for(var b=[],e=0;e<a.length;e++)b.push(a[e]^d[e]);return b}}}})(playease);
(function(d){function c(e,c){b||(b=a());var g="";h.foreach(c,function(a,e){g+=a+": "+e+"; "});try{b.insertRule?b.insertRule(e+" { "+g+"}",b.cssRules.length):b.addRule(e,g,b.rules.length)}catch(k){h.error("Failed to insert css rule: "+e)}}function a(){var a=document.createElement("style");a.type="text/css";document.getElementsByTagName("head")[0].appendChild(a);return a.sheet||a.styleSheet}var h=d.utils,b;c.style=function(a,b,c){if(void 0!==a&&null!==a)for(void 0===a.length&&(a=[a]),b=h.extendz({},
b),c=0;c<a.length;c++){var e=a[c];void 0!==e&&null!==e&&h.forEach(b,function(a,f){a=a.split("-");for(var b=1;b<a.length;b++)a[b]=a[b].charAt(0).toUpperCase()+a[b].slice(1);a=a.join("");e.style[a]!==f&&(e.style[a]=f)})}};h.css=c})(playease);
(function(d){d=d.utils;d.LITTLE_ENDIAN=function(){try{var c=new ArrayBuffer(2);(new DataView(c)).setInt16(0,256,!0);var a=new Int16Array(c)}catch(h){}return a&&256===a[0]}();d.getUint32=function(c,a,d){void 0===a&&(a=0);return d?c[a+0]|c[a+1]>>>8|c[a+2]>>>16|c[a+3]>>>24:c[a+0]<<24|c[a+1]<<16|c[a+2]<<8|c[a+3]}})(playease);
(function(d){function c(b){var e=this,c,d,k,r;e.append=function(a){f.push(a)};e.save=function(a){a||(a=e.config.filename);c=new Blob(f,{type:e.config.type});d=URL.createObjectURL(c);k=document.createEvent("MouseEvents");k.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);r=document.createElementNS("http://www.w3.org/1999/xhtml","a");r.href=d;r.download=a;r.dispatchEvent(k);f=[];URL.revokeObjectURL(d)};e.config=a.extendz({},h,b);var f=[]}var a=d.utils,h={filename:"sample.fragmented.mp4",
type:"video/mpeg"};c.prototype.CONF=h;a.FileKeeper=c})(playease);
(function(d){function c(c){a.call(this,c);var b=this;b.ReadUE=function(){for(var a=-1,c=0;0===c&&0<b.Left();a++)c=b.ReadBits(1);return(1<<a>>>0)-1+b.ReadBitsLong(a)};b.ReadSE=function(){var a=b.ReadUE();return 0===(a&1)?-(a>>>1):a+1>>>1}}d=d.utils;var a=d.BitStream;c.prototype=Object.create(a.prototype);c.prototype.constructor=c;d.ebsp2rbsp=function(a){var b=2,e=a.byteLength,c=new Uint8Array(e);c[0]=a[0];c[1]=a[1];for(var d=2;d<e;d++)if(3!==a[d]||0!==a[d-1]||0!==a[d-2])c[b]=a[d],b++;return c.subarray(0,
b)};d.Golomb=c})(playease);
(function(d){var c=/^(([a-z]+:)\/\/(([-a-z\d\.]+)(?::(\d+))?))((?:\/[-_a-z\d\s\.]*)*)([?#][-_=%&a-z\d\s\.]+)?$/i;d.utils.URL=function(a){var d=this;d.parse=function(a){d.href=a;!1===/^([a-z]+):\/\//.test(a)&&(d.href=window.location.origin+("/"===a.substr(0,1)?"":"/")+a);var b=d.href.match(c);if(null===b)throw{name:"SyntaxError",message:"The URL did not match the expected pattern, url="+a+"."};d.origin=b[1];d.protocol=b[2];d.host=b[3];d.hostname=b[4];d.port=b[5]||"";d.pathname=b[6]||"";if(a=d.pathname.match(/\/([-_a-z\d\s\(\)\[\]\{\}]+)(?:\.([a-z\d]+))?$/))d.filename=
a[1],d.filetype=a[2];b[7]&&("?"===b[7].substr(0,1)?d.search=b[7]:d.hash=b[7])};d.href="";d.origin="";d.protocol="";d.host="";d.hostname="";d.port="";d.pathname="";d.filename="";d.filetype="";d.search="";d.hash="";a&&d.parse(a)}})(playease);
(function(d){function c(e){function c(b,e){var f={};if(b.nodeType===h.DOCUMENT_NODE){for(var g=0;g<b.childNodes.length;g++){var k=b.childNodes[g],q=k.localName||k.baseName||k.nodeName;k.nodeType===h.ELEMENT_NODE&&(k=c(k),k.parent=f,d.config.ignoreRoot?(delete k.parent,f=k):f[q]=k)}return f}if(b.nodeType===h.ELEMENT_NODE){for(g=0;g<b.childNodes.length;g++)if(k=b.childNodes[g],q=k.localName||k.baseName||k.nodeName,k.nodeType!==h.COMMENT_NODE)if(k=c(k,e+"."+q),k.parent=f,f.hasOwnProperty(q))"array"!=
a.typeOf(f[q])&&(f[q]=[f[q]]),f[q].push(k);else if("#text"!=q||/[^\s]/.test(k))f[q]=k;q=b.localName||b.baseName||b.nodeName;null!=b.prefix&&""!=b.prefix&&(q=b.prefix+":"+q);for(g=0;g<b.attributes.length;g++){e=b.attributes[g];k=e.value;for(var l=0;l<d.config.matchers.length;l++){var m=d.config.matchers[l];m.test(e,q)&&(k=m.exec(e.value));f[d.config.attributePrefix+e.name]=k}}null!=f["#text"]&&d.config.trimWhitespaces&&(f["#text"]=f["#text"].trim());f.toString=function(){return(null==f["#text"]?"":
f["#text"])+(null==f["#cdata-section"]?"":f["#cdata-section"])};return f}if(b.nodeType===h.TEXT_NODE||b.nodeType===h.CDATA_SECTION_NODE)return b.nodeValue}var d=this;d.parse=function(b){if(window.DOMParser){var e=new DOMParser;try{var f=e.parseFromString(b,"text/xml")}catch(n){return a.error("Failed to parse XML structure."),null}}else 0===b.indexOf("<?")&&(b=b.substr(b.indexOf("?>")+2)),f=new ActiveXObject("Microsoft.XMLDOM"),f.async="false",f.loadXML(b);return c(f)};d.config=a.extendz({},b,e)}var a=
d.utils,h={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9},b={ignoreRoot:!0,trimWhitespaces:!1,attributePrefix:"@",matchers:[]};c.prototype.CONF=b;a.XML2JSON=c})(playease);
(function(d){var c=d.utils;c.MPD=function(a){function d(a,b){if(a)for(var f=0;f<a.AdaptationSet.length;f++){var e=a.AdaptationSet[f];if(e.hasOwnProperty("@id")){if(e["@id"]===b["@id"])return e}else if(e.hasOwnProperty("@contentType")){if(e["@contentType"]===b["@contentType"])return e}else if(e.hasOwnProperty("@mimeType")){if(e["@mimeType"]===b["@mimeType"])return e}else if(e.hasOwnProperty("@codecs")){if(e["@codecs"]===b["@codecs"])return e}else break}}var b,e,g;this.update=function(a){e=p;a.Location&&
a.Location["#text"]&&(e=a.Location["#text"]);g=a.BaseURL||e.substring(0,e.lastIndexOf("/")+1);if("dynamic"===a["@type"]){var k=b,f=0,n=NaN;"array"!=c.typeOf(a.Period)&&(a.Period=[a.Period]);for(var z=0;z<a.Period.length;z++){var q=a.Period[z];q.hasOwnProperty("@start")?f=q["@start"]:isNaN(n)?0===z&&"dynamic"!==a["@type"]&&(f=0):f+=n;q.hasOwnProperty("@duration")&&(n=q["@duration"]);q["@start"]=f;q["@duration"]=n;a:{var l=k;var m=q;if(l)for(var C=0;C<l.Period.length;C++){var v=l.Period[C];if(v.hasOwnProperty("@id")){if(v["@id"]===
m["@id"]){l=v;break a}}else if(v.hasOwnProperty("@start")){if(v["@start"]===m["@start"]){l=v;break a}}else{l=v;break a}}l=void 0}"array"!=c.typeOf(q.AdaptationSet)&&(q.AdaptationSet=[q.AdaptationSet]);for(m=0;m<q.AdaptationSet.length;m++){C=q.AdaptationSet[m];v=d(l,C);var x=v,h=v=0,F=[];if(!1!==C.SegmentTemplate.hasOwnProperty("SegmentTimeline")){if(x){var K=x.SegmentTemplate.SegmentTimeline;"array"!=c.typeOf(K.S)&&(K.S=[K.S]);for(x=0;x<K.S.length;x++){var E=K.S[x];0===x&&E.hasOwnProperty("@t")&&
(v=E["@t"]);v+=E["@d"];E["@r"]&&(v+=E["@d"]*E["@r"]);F.push(c.extendz({},E))}}C=C.SegmentTemplate.SegmentTimeline;"array"!=c.typeOf(C.S)&&(C.S=C.S?[C.S]:[]);for(x=0;x<C.S.length;x++)E=C.S[x],0===x&&E.hasOwnProperty("@t")&&(h=E["@t"]),h>=v&&F.push(E),h+=E["@d"],E["@r"]&&(h+=E["@d"]*E["@r"])}}}}b=a};this.getSegmentInfo=function(a,e,f,d,h,q){for(var k=b.Period[0],m=0;m<b.Period.length;m++){var n=b.Period[m];if(n.hasOwnProperty("@start"))n["@start"]>k["@start"]&&n["@start"]<=a&&(k=n);else break}a=k;a:{for(k=
0;k<a.AdaptationSet.length;k++)if(m=a.AdaptationSet[k],m.hasOwnProperty("@contentType")){if(m["@contentType"]===e){e=m;break a}}else if(m.hasOwnProperty("@mimeType")&&(n=m["@mimeType"].match(/^([a-z]+)\/[a-z0-9]+/i))&&1<n.length&&n[1]===e){e=m;break a}e=void 0}if(e){k=e;"array"!=c.typeOf(k.Representation)&&(k.Representation=[k.Representation]);m=k.Representation[0];for(n=0;n<k.Representation.length;n++){var v=k.Representation[n];v["@bandwidth"]>m["@bandwidth"]&&(!q||v["@bandwidth"]<=q)&&(m=v)}if(q=
m){n=e.SegmentTemplate;k=n[f?"@initialization":"@media"];m=n["@timescale"]||1;var x=n["@duration"]||0;k=k.replace(/\$RepresentationID\$/,q["@id"]);if(n["@media"].search(/\$Time\$/))if(v=n.SegmentTimeline,f)if(0<d||0===d&&!1===b.hasOwnProperty("@suggestedPresentationDelay"))v.S.length&&(d=v.S[0]["@t"]);else{var z=Math.abs(z)||b["@suggestedPresentationDelay"];a:{var r=z*m;for(z=v.S.length-1;0<=z;z--){var p=v.S[z];r-=p["@d"]*(p["@r"]||1);if(0>=r){r=v.S[0]["@t"];for(var E=0;E<z;E++)r+=v.S[E]["@d"],p["@r"]&&
(r+=p["@d"]*p["@r"]);p["@t"]=r;z=p;break a}}z=v.S[0]}z&&(d=z["@t"],x=z["@d"])}else{a:{for(z=NaN;v.S.length;){x=v.S.shift();isNaN(z)&&(z=x["@t"]||0);if(z+x["@d"]*(x["@r"]||0)>=d){x["@t"]=z;v.S.length&&(v.S[0]["@t"]=x["@t"]+x["@d"]);z=x;break a}z+=x["@d"];x["@r"]&&(z+=x["@d"]*x["@r"])}z=void 0}if(void 0===z)return;d=z["@t"];x=z["@d"];k=k.replace(/\$Time\$/,d)}n["@media"].search(/\$Number\$/)&&(f?h=n["@startNumber"]:k=k.replace(/\$Number\$/,h));f=q.baseURL||e.baseURL||a.baseURL;k=(f?f["#text"]:g)+k;
return{mimeType:q["@mimeType"]||e["@mimeType"],codecs:q["@codecs"]||e["@codecs"],index:h,start:d,duration:x,timescale:m,url:k}}}};this.getLocation=function(){return e};var p=a||""}})(playease);(function(d){d.utils.MPD.matchers={}})(playease);
(function(d){var c=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;d.utils.MPD.matchers.datetime=function(){this.test=function(a){return c.test(a.value)};this.exec=function(a){a=c.exec(a);var d=Date.UTC(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10),a[6]&&parseInt(a[6],10)||0,a[7]&&1E3*parseFloat(a[7])||0);if(a[9]&&a[10]){var b=60*parseInt(a[9],10)+parseInt(a[10],10);d+=("+"===a[8]?
-1:1)*b*6E4}return new Date(d)}}})(playease);
(function(d){var c=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,a="minBufferTime mediaPresentationDuration minimumUpdatePeriod timeShiftBufferDepth maxSegmentDuration maxSubsegmentDuration suggestedPresentationDelay start starttime duration".split(" ");d.utils.MPD.matchers.duration=function(){this.test=function(d){for(var b=0;b<a.length;b++)if((d.localName||d.baseName||d.nodeName)===a[b])return c.test(d.value);return!1};this.exec=function(a){a=c.exec(a);var b=
31536E3*parseFloat(a[2]||0)+2592E3*parseFloat(a[4]||0)+86400*parseFloat(a[6]||0)+3600*parseFloat(a[8]||0)+60*parseFloat(a[10]||0)+parseFloat(a[12]||0);void 0!==a[1]&&(b*=-1);return b}}})(playease);(function(d){var c=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/;d.utils.MPD.matchers.numeric=function(){this.test=function(a){return c.test(a.value)};this.exec=function(a){return parseFloat(a)}}})(playease);
(function(d){var c={MPD:["id","profiles"],Period:["id"],BaseURL:["serviceLocation","byteRange"],SegmentBase:["indexRange"],Initialization:["range"],RepresentationIndex:["range"],SegmentList:["indexRange"],BitstreamSwitching:["range"],SegmentURL:["mediaRange","indexRange"],SegmentTemplate:["indexRange","media","index","initialization","bitstreamSwitching"],AssetIdentifier:["value","id"],EventStream:["value"],AdaptationSet:["profiles","mimeType","segmentProfiles","codecs","contentType"],FramePacking:["value",
"id"],AudioChannelConfiguration:["value","id"],ContentProtection:["value","id"],EssentialProperty:["value","id"],SupplementalProperty:["value","id"],InbandEventStream:["value","id"],Accessibility:["value","id"],Role:["value","id"],Rating:["value","id"],Viewpoint:["value","id"],ContentComponent:["contentType"],Representation:["id","dependencyId","mediaStreamStructureId"],Subset:["id"],Metrics:["metrics"],Reporting:["value","id"]};d.utils.MPD.matchers.string=function(){this.test=function(a,d){return c.hasOwnProperty(d)&&
(d=c[d],void 0!==d)?0<=d.indexOf(a.name):!1};this.exec=function(a){return String(a)}}})(playease);
(function(d){d.events={Event:{BIND:"bind",READY:"ready",PLAY:"play",WAITING:"waiting",DURATIONCHANGE:"durationchange",LOADEDMETADATA:"loadedmetadata",LOADEDDATA:"loadeddata",CANPLAY:"canplay",PLAYING:"playing",CANPLAYTHROUGH:"canplaythrough",PAUSE:"pause",SEEKING:"seeking",SEEKED:"seeked",SWITCHING:"switching",SWITCHED:"switched",RATECHANGE:"ratechange",TIMEUPDATE:"timeupdate",VOLUMECHANGE:"volumechange",ENDED:"ended",ERROR:"error"},IOEvent:{SUSPEND:"suspend",LOADSTART:"loadstart",STALLED:"stalled",
ABORT:"abort",TIMEOUT:"timeout",PROGRESS:"progress",LOAD:"load",LOADEND:"loadend"},UIEvent:{SHOOTING:"shooting",FULLPAGE:"fullpage",FULLSCREEN:"fullscreen",RESIZE:"resize"},GlobalEvent:{CHANGE:"change"},MouseEvent:{CLICK:"click",DOUBLE_CLICK:"doubleclick",MOUSE_MOVE:"mousemove"},KeyboardEvent:{KEY_DOWN:"key-down",KEY_UP:"key-up"},TimerEvent:{TIMER:"timer",COMPLETE:"complete"},MediaEvent:{PACKET:"packet",AAC_SPECIFIC_CONFIG:"aac-specific-config",AAC_SAMPLE:"aac-sample",AVC_CONFIG_RECORD:"avc-config-record",
AVC_SAMPLE:"avc-sample",END_OF_STREAM:"end-of-stream",FLV_INFO_FRAME:"flv-info-frame",FLV_FRAME:"flv-frame",MP4_INIT_SEGMENT:"mp4-init-segment",MP4_SEGMENT:"mp4-segment"},MediaStreamTrackEvent:{ADDTRACK:"addtrack",REMOVETRACK:"removetrack"}}})(playease);
(function(d){var c=d.utils;d.events.EventDispatcher=function(a){function h(a,b){if(a)for(var e=a.slice(0),d=0;d<e.length;d++){var g=e[d];if(g){isNaN(g.count)||0!==--g.count||a.splice(d,1);try{if(g.listener(b),b.stopPropagation)break}catch(q){c.error("Error handling event:",b,q.toString())}}}}var b=this,e=Array.prototype.slice.call(arguments,1);b.bind=function(){var a=Array.prototype.slice.call(arguments,0);c.forEach(a,function(a,e){c.forEach(e,function(a,e){a="on"+e.replace(/-/g,"");b[a]=void 0})})};
b.addEventListener=function(a,b,e){try{g[a]||(g[a]=[]),"string"===c.typeOf(b)&&(b=(new Function("return "+b))()),g[a].push({listener:b,count:e||NaN})}catch(n){c.error("Failed to addEventListener("+a+"):",n)}};b.removeEventListener=function(a,b){if(g[a])try{if(void 0===b)delete g[a];else for(var e=0;e<g[a].length;e++)if(g[a][e].listener.toString()===b.toString()){g[a].splice(e,1);break}}catch(n){c.error("Failed to removeEventListener("+a+"):",n)}};b.hasEventListener=function(a){return g.hasOwnProperty(a)&&
0<g[a].length};b.addGlobalListener=function(a,b){try{"string"===c.typeOf(a)&&(a=(new Function("return "+a))()),p.push({listener:a,count:b||NaN})}catch(f){c.error("Failed to addGlobalListener():",f)}};b.removeGlobalListener=function(a){if(a)try{for(var b=0;b<p.length;b++)if(p[b].listener.toString()===a.toString()){p.splice(b,1);break}}catch(f){c.error("Failed to removeGlobalListener():",f)}};b.dispatchEvent=function(a,e){b.forward({type:a,data:e||{},srcElement:b,version:d.VERSION})};b.forward=function(a){a.target=
b;a.stopPropagation=!1;d.DEBUG&&c.log(a);var e="on"+a.type.replace(/-/g,"");if("function"===c.typeOf(b[e]))b[e](a);else h(g[a.type],a),h(p,a)};var g={};var p=[];b.bind.apply(b,e)}})(playease);
(function(d){function c(a,c){function e(){f++;d.dispatchEvent(b.TIMER);0<d.repeatCount&&f>=d.repeatCount&&(d.stop(),d.dispatchEvent(b.COMPLETE))}h.call(this,"Timer",[b.TIMER,b.COMPLETE]);var d=this,g,f=0,n=!1;d.start=function(){!1===n&&(g=setInterval(e,d.delay),n=!0)};d.stop=function(){n&&(clearInterval(g),g=0,n=!1)};d.reset=function(){d.stop();f=0};d.currentCount=function(){return f};d.running=function(){return n};d.delay=a||50;d.repeatCount=c||0}var a=d.utils;d=d.events;var h=d.EventDispatcher,
b=d.TimerEvent;c.prototype=Object.create(h.prototype);c.prototype.constructor=c;a.Timer=c})(playease);
(function(d){var c=d.utils,a={},h=[];a.register=function(b,e){try{h.splice(e||h.length,0,b),a[b.prototype.kind]=b}catch(g){c.error("Failed to register loader "+b.prototype.kind+", Error="+g.message)}};a.get=function(a,e){for(var b=0;b<h.length;b++){var c=h[b];if(c.prototype.isSupported(a,e))return c}return null};a.Mode={CORS:"cors",NO_CORS:"no-cors",SAME_ORIGIN:"same-origin"};a.Credentials={OMIT:"omit",INCLUDE:"include",SAME_ORIGIN:"same-origin"};a.Cache={DEFAULT:"default",NO_STAORE:"no-store",RELOAD:"reload",
NO_CACHE:"no-cache",FORCE_CACHE:"force-cache",ONLY_IF_CACHED:"only-if-cached"};a.Redirect={FOLLOW:"follow",MANUAL:"manual",ERROR:"error"};a.ResponseType={ARRAYBUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};a.ReadyState={UNINITIALIZED:0,OPEN:1,SENT:2,LOADING:3,DONE:4};d.io=a.get;d.IO=a})(playease);
(function(d){function c(c){function d(b){return b.read().then(function(f){if(f.done)return a.debug("Loader load"),z=g.DONE,k.dispatchEvent(e.LOAD),k.dispatchEvent(e.LOADEND),Promise.resolve("load");switch(z){case g.SENT:z=g.LOADING;break;case g.DONE:return a.warn("Loader state error, probably aborted already."),b.cancel()}a.debug("Loader progress: "+f.value.buffer.byteLength+"/"+q);k.dispatchEvent(e.PROGRESS,{buffer:f.value.buffer,loaded:f.value.buffer.byteLength,total:q});return d(b)})["catch"](f)}
function f(b){z=g.DONE;switch(b.name){case "AbortError":a.warn("Loader "+b.name+": "+b.message);k.dispatchEvent(e.ABORT,{name:b.name,message:b.message});break;case "TimeoutError":a.error("Loader "+b.name+": "+b.message);k.dispatchEvent(e.TIMEOUT,{name:b.name,message:b.message});break;default:a.error("Loader "+b.name+": "+b.message),k.dispatchEvent(e.STALLED,{name:b.name,message:b.message})}k.dispatchEvent(e.LOADEND)}b.call(this,"Fetch",e);var k=this,z;k.load=function(b,c,n){z=g.UNINITIALIZED;k.isSupported(b)?
(a.debug("Loader loadstart"),k.dispatchEvent(e.LOADSTART),z=g.OPEN,void 0!==c&&a.extendz(k.config.headers,{Range:"bytes="+c+"-"+(n||"")}),c=a.extendz({},k.config,{headers:new Headers(k.config.headers),signal:l.signal}),fetch(b.href,c).then(function(b){switch(z){case g.OPEN:z=g.SENT;break;default:a.warn("Loader state error, probably aborted already.")}if(!b.ok||200>b.status||299<b.status)return Promise.reject(Error(b.status+" "+b.statusText));var e=b.headers.get("Content-Length");e&&(e=parseInt(e));
if(206===b.status){var f=b.headers.get("Content-Range");f&&(f=f.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(e=parseInt(f[3]))}q!==e&&(q=e,a.log("Content-Length changed: "+q));return d(b.body.getReader())})["catch"](f)):(a.error("Loader suspend: not supportped"),z=g.DONE,k.dispatchEvent(e.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),k.dispatchEvent(e.LOADEND))};k.abort=function(){l.abort()};k.state=function(){return z};k.config=a.extendz({},p,c);var q=NaN;var l=new AbortController}var a=
d.utils,h=d.events,b=h.EventDispatcher,e=h.IOEvent;d=d.IO;var g=d.ReadyState,p={method:"GET",headers:{},mode:d.Mode.CORS,credentials:d.Credentials.OMIT,cache:d.Cache.DEFAULT,redirect:d.Redirect.FOLLOW};c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.kind="Fetch";c.prototype.CONF=p;c.prototype.isSupported=function(a,b){return b&&"live"!==b?!1:!!fetch&&("http:"===a.protocol||"https:"===a.protocol)};d.register(c)})(playease);
(function(d){function c(b){e.call(this,"MozStream",g);var f=this,c;f.load=function(b,e,d){c=k.UNINITIALIZED;if(f.isSupported(b)){a.debug("Loader loadstart");f.dispatchEvent(g.LOADSTART);void 0!==e&&a.extendz(f.config.headers,{Range:"bytes="+e+"-"+(d||"")});a.forEach(f.config.headers,function(a,b){l.setRequestHeader(a,b)});switch(f.config.credentials){case p.INCLUDE:l.withCredentials=!0;break;case p.SAME_ORIGIN:l.withCredentials=window.location.host===b.host;break;default:l.withCredentials=!1}l.open(f.config.method,
b.href,!0);l.send()}else a.error("Loader suspend: not supportped"),c=k.DONE,f.dispatchEvent(g.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),f.dispatchEvent(g.LOADEND)};f.abort=function(){l.abort()};f.state=function(){return c};f.config=a.extendz({},r,b);var d=NaN;var l=new XMLHttpRequest;l.onreadystatechange=function(b){c=l.readyState;switch(c){case k.SENT:if(200>l.status||299<l.status)a.error("Loader stalled: "+l.status+" "+l.statusText),f.dispatchEvent(g.STALLED,{name:"NetworkError",
message:l.status+" "+l.statusText});else{(b=l.getResponseHeader("Content-Length"))&&(b=parseInt(b));if(206===l.status){var e=l.getResponseHeader("Content-Range");e&&(e=e.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(b=parseInt(e[3]))}d!==b&&(d=b,a.log("Content-Length changed: "+d))}}};l.onabort=function(b){a.warn("Loader AbortError: The operation was aborted.");f.dispatchEvent(g.ABORT,{name:"AbortError",message:"The operation was aborted."})};l.onprogress=function(b){a.debug("Loader progress: "+l.response.byteLength+
"/"+d);f.dispatchEvent(g.PROGRESS,{buffer:l.response,loaded:l.response.byteLength,total:d})};l.onload=function(b){a.debug("Loader load.");f.dispatchEvent(g.LOAD)};l.onerror=function(b){a.error("Loader "+b.name+": "+b.message);switch(b.name){case "TimeoutError":f.dispatchEvent(g.TIMEOUT,{name:b.name,message:b.message});break;default:f.dispatchEvent(g.STALLED,{name:b.name,message:b.message})}};l.onloadend=function(a){f.dispatchEvent(g.LOADEND)};l.responseType="moz-chunked-arraybuffer"}var a=d.utils,
h=d.Browser,b=d.events,e=b.EventDispatcher,g=b.IOEvent;d=d.IO;var p=d.Credentials,k=d.ReadyState,r={method:"GET",headers:{},mode:d.Mode.CORS,credentials:p.OMIT,cache:d.Cache.DEFAULT,redirect:d.Redirect.FOLLOW};c.prototype=Object.create(e.prototype);c.prototype.constructor=c;c.prototype.kind="MozStream";c.prototype.CONF=r;c.prototype.isSupported=function(a,b){return b&&"live"!==b||h.isFirefox&&(14>h.major||67<h.major)?!1:"http:"===a.protocol||"https:"===a.protocol};d.register(c)})(playease);
(function(d){function c(b){function f(b){a.error("Loader "+b.name+": "+b.message);switch(b.name){case "TimeoutError":c.dispatchEvent(g.TIMEOUT,{name:b.name,message:b.message});break;default:c.dispatchEvent(g.STALLED,{name:b.name,message:b.message})}}e.call(this,"MSStream",g);var c=this,d;c.load=function(b,e,f){d=k.UNINITIALIZED;h.position=0;if(c.isSupported(b)){a.debug("Loader loadstart");c.dispatchEvent(g.LOADSTART);void 0!==e&&a.extendz(c.config.headers,{Range:"bytes="+e+"-"+(f||"")});a.forEach(c.config.headers,
function(a,b){m.setRequestHeader(a,b)});switch(c.config.credentials){case p.INCLUDE:m.withCredentials=!0;break;case p.SAME_ORIGIN:m.withCredentials=window.location.host===b.host;break;default:m.withCredentials=!1}m.open(c.config.method,b.href,!0);m.send()}else a.error("Loader suspend: not supportped"),d=k.DONE,c.dispatchEvent(g.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),c.dispatchEvent(g.LOADEND)};c.abort=function(){m.abort()};c.state=function(){return d};c.config=a.extendz({},
r,b);var l=NaN;var m=new XMLHttpRequest;m.onreadystatechange=function(b){d=m.readyState;switch(d){case k.SENT:if(200>m.status||299<m.status){a.error("Loader stalled: "+m.status+" "+m.statusText);c.dispatchEvent(g.STALLED,{name:"NetworkError",message:m.status+" "+m.statusText});break}(b=m.getResponseHeader("Content-Length"))&&(b=parseInt(b));if(206===m.status){var e=m.getResponseHeader("Content-Range");e&&(e=e.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(b=parseInt(e[3]))}l!==b&&(l=b,a.log("Content-Length changed: "+
l));break;case k.LOADING:200>m.status||299<m.status?(a.error("Loader stalled: "+m.status+" "+m.statusText),c.dispatchEvent(g.STALLED,{name:"NetworkError",message:m.status+" "+m.statusText})):h.readAsArrayBuffer(m.response)}};m.onabort=function(b){a.warn("Loader AbortError: The operation was aborted.");c.dispatchEvent(g.ABORT,{name:"AbortError",message:"The operation was aborted."})};m.onerror=f;m.onloadend=function(a){c.dispatchEvent(g.LOADEND)};m.responseType="ms-stream";var h=new MSStreamReader;
h.onprogress=function(b){b=h.result.slice(h.position);null==b?a.warn("What happend???"):(a.debug("Loader progress: "+b.byteLength+"/"+l),c.dispatchEvent(g.PROGRESS,{buffer:b,loaded:b.byteLength,total:l}),h.position=h.result.byteLength)};h.onload=function(b){a.debug("Loader load.");c.dispatchEvent(g.LOAD)};h.onerror=f}var a=d.utils,h=d.Browser,b=d.events,e=b.EventDispatcher,g=b.IOEvent;d=d.IO;var p=d.Credentials,k=d.ReadyState,r={method:"GET",headers:{},mode:d.Mode.CORS,credentials:p.OMIT,cache:d.Cache.DEFAULT,
redirect:d.Redirect.FOLLOW};c.prototype=Object.create(e.prototype);c.prototype.constructor=c;c.prototype.kind="MSStream";c.prototype.CONF=r;c.prototype.isSupported=function(a,b){return b&&"live"!==b||!h.isIE10&&!h.isIE11&&!h.isEdge?!1:"http:"===a.protocol||"https:"===a.protocol};d.register(c)})(playease);
(function(d){function c(c){function d(a){l=g.SENT}function f(b){a.debug("Loader progress: "+b.data.byteLength+"/NaN");l===g.SENT&&(l=g.LOADING);q.dispatchEvent(e.PROGRESS,{buffer:b.data,loaded:b.data.byteLength,total:NaN})}function k(a){switch(a.name){case "TimeoutError":q.dispatchEvent(e.TIMEOUT,{name:a.name,message:a.message});break;default:q.dispatchEvent(e.STALLED,{name:a.name,message:a.message})}}function h(b){a.debug("Loader load.");l=g.DONE;q.dispatchEvent(e.LOAD);q.dispatchEvent(e.LOADEND)}
b.call(this,"Websocket",e);var q=this,l,m;q.load=function(b,c,n){l=g.UNINITIALIZED;q.isSupported(b)?(a.debug("Loader loadstart"),q.dispatchEvent(e.LOADSTART),l=g.OPEN,m=new window.WebSocket(b.href),m.onopen=d,m.onmessage=f,m.onerror=k,m.onclose=h,m.binaryType="arraybuffer"):(a.error("Loader suspend: not supportped"),l=g.DONE,q.dispatchEvent(e.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),q.dispatchEvent(e.LOADEND))};q.abort=function(){!m||m.readyState!=WebSocket.CONNECTING&&m.readyState!=
WebSocket.OPEN||(m.close(),a.warn("Loader AbortError: The operation was aborted."),q.dispatchEvent(e.ABORT,{name:"AbortError",message:"The operation was aborted."}))};q.state=function(){return l};q.config=a.extendz({},p,c);window.WebSocket=window.WebSocket||window.MozWebSocket}var a=d.utils,h=d.events,b=h.EventDispatcher,e=h.IOEvent;d=d.IO;var g=d.ReadyState,p={method:"GET",headers:{},mode:d.Mode.CORS,credentials:d.Credentials.OMIT,cache:d.Cache.DEFAULT,redirect:d.Redirect.FOLLOW};c.prototype=Object.create(b.prototype);
c.prototype.constructor=c;c.prototype.kind="Websocket";c.prototype.CONF=p;c.prototype.isSupported=function(a,b){return b&&"live"!==b?!1:!(!window.WebSocket&&!window.MozWebSocket)&&("ws:"===a.protocol||"wss:"===a.protocol)};d.register(c)})(playease);
(function(d){function c(f){b.call(this,"XHR",e);var c=this,d;c.load=function(b,f,q){d=k.UNINITIALIZED;if(c.isSupported(b)){a.debug("Loader loadstart");c.dispatchEvent(e.LOADSTART);void 0!==f&&a.extendz(c.config.headers,{Range:"bytes="+f+"-"+(q||"")});a.forEach(c.config.headers,function(a,b){l.setRequestHeader(a,b)});switch(c.config.credentials){case g.INCLUDE:l.withCredentials=!0;break;case g.SAME_ORIGIN:l.withCredentials=window.location.host===b.host;break;default:l.withCredentials=!1}l.open(c.config.method,
b.href,!0);l.send()}else a.error("Loader suspend: not supportped"),d=k.DONE,c.dispatchEvent(e.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),c.dispatchEvent(e.LOADEND)};c.abort=function(){l.abort()};c.state=function(){return d};c.config=a.extendz({},r,f);var q=NaN;var l=new XMLHttpRequest;l.onreadystatechange=function(b){d=l.readyState;switch(d){case k.SENT:if(416!==l.status&&(200>l.status||299<l.status))a.error("Loader stalled: "+l.status+" "+l.statusText),c.dispatchEvent(e.STALLED,
{name:"NetworkError",message:l.status+" "+l.statusText});else{(b=l.getResponseHeader("Content-Length"))&&(b=parseInt(b));if(206===l.status){var f=l.getResponseHeader("Content-Range");f&&(f=f.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(b=parseInt(f[3]))}q!==b&&(q=b,a.log("Content-Length changed: "+q))}}};l.onabort=function(b){a.warn("Loader AbortError: The operation was aborted.");c.dispatchEvent(e.ABORT,{name:"AbortError",message:"The operation was aborted."})};l.onprogress=function(b){a.debug("Loader progress: "+
l.loaded+"/"+q)};l.onload=function(b){a.debug("Loader load.");c.dispatchEvent(e.PROGRESS,{buffer:l.response,loaded:l.response.byteLength,total:l.loaded});c.dispatchEvent(e.LOAD)};l.onerror=function(b){a.error("Loader "+b.name+": "+b.message);switch(b.name){case "TimeoutError":c.dispatchEvent(e.TIMEOUT,{name:b.name,message:b.message});break;default:c.dispatchEvent(e.STALLED,{name:b.name,message:b.message})}};l.onloadend=function(a){c.dispatchEvent(e.LOADEND)};l.responseType=p.ARRAYBUFFER}var a=d.utils,
h=d.events,b=h.EventDispatcher,e=h.IOEvent;d=d.IO;var g=d.Credentials,p=d.ResponseType,k=d.ReadyState,r={method:"GET",headers:{},mode:d.Mode.CORS,credentials:g.OMIT,cache:d.Cache.DEFAULT,redirect:d.Redirect.FOLLOW};c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.kind="XHR";c.prototype.CONF=r;c.prototype.isSupported=function(a,b){if(b&&"live"===b){b=["flv","",void 0,"mp4","m4s","f4v","m4v","mov"];for(var e=0;e<b.length;e++)if(a.filetype===b[e])return!1}return"http:"===
a.protocol||"https:"===a.protocol};d.register(c)})(playease);
(function(d){function c(a,e){this.Num=a||30;this.Den=e||1}function a(){var a=this;a.left=function(){return null==a.payload?0:a.payload.byteLength-a.position};a.set=function(a,b){e[a]=b};a.get=function(a){return e[a]};var e={};a.kind="";a.codec="";a.length=0;a.timestamp=0;a.streamid=0;a.payload=null;a.position=0}var h={};a.KindAudio="audio";a.KindVideo="video";a.KindScript="script";h.Rational=c;h.Information=function(){this.MimeType="";this.Codecs=[];this.Timescale=1E3;this.BitRate=this.VideoDataRate=
this.AudioDataRate=this.CodecHeight=this.CodecWidth=this.Height=this.Width=this.Size=this.Duration=this.Timestamp=this.TimeBase=0;this.FrameRate=new c;this.Channels=this.SampleSize=this.SampleRate=0};h.Packet=a;d.AV=h})(playease);
(function(d){var c=d.utils;d=d.AV;var a={},h=[];a.COL_PRI_RESERVED0=0;a.COL_PRI_BT709=1;a.COL_PRI_UNSPECIFIED=2;a.COL_PRI_RESERVED=3;a.COL_PRI_BT470M=4;a.COL_PRI_BT470BG=5;a.COL_PRI_SMPTE170M=6;a.COL_PRI_SMPTE240M=7;a.COL_PRI_FILM=8;a.COL_PRI_BT2020=9;a.COL_PRI_SMPTEST428_1=10;a.COL_PRI_NB=11;a.COL_TRC_RESERVED0=0;a.COL_TRC_BT709=1;a.COL_TRC_UNSPECIFIED=2;a.COL_TRC_RESERVED=3;a.COL_TRC_GAMMA22=4;a.COL_TRC_GAMMA28=5;a.COL_TRC_SMPTE170M=6;a.COL_TRC_SMPTE240M=7;a.COL_TRC_LINEAR=8;a.COL_TRC_LOG=9;a.COL_TRC_LOG_SQRT=
10;a.COL_TRC_IEC61966_2_4=11;a.COL_TRC_BT1361_ECG=12;a.COL_TRC_IEC61966_2_1=13;a.COL_TRC_BT2020_10=14;a.COL_TRC_BT2020_12=15;a.COL_TRC_SMPTEST2084=16;a.COL_TRC_SMPTEST428_1=17;a.COL_TRC_ARIB_STD_B67=18;a.COL_TRC_NB=19;a.COL_SPC_RGB=0;a.COL_SPC_BT709=1;a.COL_SPC_UNSPECIFIED=2;a.COL_SPC_RESERVED=3;a.COL_SPC_FCC=4;a.COL_SPC_BT470BG=5;a.COL_SPC_SMPTE170M=6;a.COL_SPC_SMPTE240M=7;a.COL_SPC_YCOCG=8;a.COL_SPC_YCGCO=8;a.COL_SPC_BT2020_NCL=9;a.COL_SPC_BT2020_CL=10;a.COL_SPC_NB=11;a.COL_RANGE_UNSPECIFIED=0;
a.COL_RANGE_MPEG=1;a.COL_RANGE_JPEG=2;a.COL_RANGE_NB=2;a.CHROMA_LOC_UNSPECIFIED=0;a.CHROMA_LOC_LEFT=1;a.CHROMA_LOC_CENTER=2;a.CHROMA_LOC_TOPLEFT=3;a.CHROMA_LOC_TOP=4;a.CHROMA_LOC_BOTTOMLEFT=5;a.CHROMA_LOC_BOTTOM=6;a.CHROMA_LOC_NB=7;a.register=function(b,e){try{h.splice(e||h.length,0,b),a[b.prototype.kind]=b}catch(g){c.error("Failed to register codec "+b.prototype.kind+", Error="+g.message)}};a.get=function(a){for(var b=0;b<h.length;b++)if(a=h[b],a.prototype.kind===a)return a;return null};d.codec=
a.get;d.Codec=a})(playease);
(function(d){function c(b){e.call(this,"AAC",p,[g.ERROR]);var c=this,d;c.parse=function(b){if(1>b.left())c.dispatchEvent(g.ERROR,{name:"DataError",message:"Data not enough while parsing AAC packet."});else{m.Timestamp=b.timestamp;var e=new DataView(b.payload.buffer);b.set("DataType",e.getUint8(b.position++));b.set("CTS",0);switch(b.get("DataType")){case k.SPECIFIC_CONFIG:a:if(2>b.left())c.dispatchEvent(g.ERROR,{name:"DataError",message:"Data not enough while parsing AAC specific config."});else{d=
new h(b.payload.subarray(b.position));c.AudioObjectType=d.ReadBits(5);c.AudioObjectType===r.ESCAPE&&(c.AudioObjectType=32+d.ReadBits(6));c.SamplingFrequencyIndex=d.ReadBits(4);c.SamplingFrequency=15===c.SamplingFrequencyIndex?d.ReadBits(24):f[c.SamplingFrequencyIndex];c.ChannelConfiguration=d.ReadBits(4);16>c.ChannelConfiguration&&(c.Channels=n[c.ChannelConfiguration]);if(c.AudioObjectType===r.SBR||c.AudioObjectType===r.PS&&0===(d.ShowBits(3)&3)&&0===(d.ShowBits(9)&63))switch(c.ExtensionSamplingFrequencyIndex=
d.ReadBits(4),c.ExtensionSamplingFrequency=15===c.ExtensionSamplingFrequencyIndex?d.ReadBits(24):f[c.ExtensionSamplingFrequencyIndex],c.ExtensionAudioObjectType=d.ReadBits(5),c.ExtensionAudioObjectType){case r.ESCAPE:c.ExtensionAudioObjectType=32+d.ReadBits(6);break;case r.ER_BSAC:c.ExtensionChannelConfiguration=d.ReadBits(4)}else c.ExtensionAudioObjectType=r.NULL,c.ExtensionSamplingFrequency=0;if(c.AudioObjectType===r.ALS){d.ShowBits(5);4279379!==d.ShowBitsLong(24)&&d.SkipBits(24);try{if(112>d.Left())throw{name:"DataError",
message:"Data not enough while parsing ALS config."};if(1095521024!==d.ReadBitsLong(32))throw{name:"TypeError",message:"Not ALS\\0"};c.SamplingFrequency=d.ReadBitsLong(32);d.SkipBits(32);c.ChannelConfiguration=0;c.Channels=d.ReadBits(16)+1}catch(x){a.error("Failed to parse AAC config ALS.");c.dispatchEvent(g.ERROR,{name:x.name,message:x.message});break a}}c.RefSampleDuration=Math.floor(1024*m.Timescale/c.SamplingFrequency);c.AudioObjectType=r.SBR;c.ExtensionSamplingFrequencyIndex=c.SamplingFrequencyIndex;
6<=c.SamplingFrequencyIndex?c.ExtensionSamplingFrequencyIndex-=3:1===c.ChannelConfiguration&&(c.AudioObjectType=r.AAC_LC);c.Config=c.AudioObjectType===r.SBR?new Uint8Array([c.AudioObjectType<<3|c.SamplingFrequencyIndex>>1,c.SamplingFrequencyIndex<<7|c.ChannelConfiguration<<3|c.ExtensionSamplingFrequencyIndex>>1,c.ExtensionSamplingFrequencyIndex<<7|8,0]):new Uint8Array([c.AudioObjectType<<3|c.SamplingFrequencyIndex>>1,c.SamplingFrequencyIndex<<7|c.ChannelConfiguration<<3]);c.Codec="mp4a.40."+c.AudioObjectType;
c.dispatchEvent(p.AAC_SPECIFIC_CONFIG)}break;case k.RAW_FRAME_DATA:b.set("DTS",m.TimeBase+m.Timestamp);b.set("PTS",b.get("DTS"));b.set("Data",b.payload.subarray(b.position));c.dispatchEvent(p.AAC_SAMPLE,{packet:b});break;default:c.dispatchEvent(g.ERROR,{name:"TypeError",message:"Unrecognized AAC packet type: "+c.DataType})}}};var m=b;c.MimeType="audio/mp4";c.Codec="";c.RefSampleDuration=Math.floor(1024*m.Timescale/44100);c.AudioObjectType=0;c.SamplingFrequencyIndex=0;c.SamplingFrequency=0;c.ChannelConfiguration=
0;c.Channels=0;c.ExtensionAudioObjectType=0;c.ExtensionSamplingFrequencyIndex=0;c.ExtensionSamplingFrequency=0;c.ExtensionChannelConfiguration=0;c.Config=null;c.ExpectedDts=0;c.Flags={IsLeading:0,SampleDependsOn:1,SampleIsDependedOn:0,SampleHasRedundancy:0,IsNonSync:0}}var a=d.utils,h=a.Golomb,b=d.events,e=b.EventDispatcher,g=b.Event,p=b.MediaEvent;d=d.AV.Codec;var k={SPECIFIC_CONFIG:0,RAW_FRAME_DATA:1},r={NULL:0,AAC_MAIN:1,AAC_LC:2,AAC_SSR:3,AAC_LTP:4,SBR:5,AAC_SCALABLE:6,TWINVQ:7,CELP:8,HVXC:9,
TTSI:12,MAINSYNTH:13,WAVESYNTH:14,MIDI:15,SAFX:16,ER_AAC_LC:17,ER_AAC_LTP:19,ER_AAC_SCALABLE:20,ER_TWINVQ:21,ER_BSAC:22,ER_AAC_LD:23,ER_CELP:24,ER_HVXC:25,ER_HILN:26,ER_PARAM:27,SSC:28,PS:29,SURROUND:30,ESCAPE:31,L1:32,L2:33,L3:34,DST:35,ALS:36,SLS:37,SLS_NON_CORE:38,ER_AAC_ELD:39,SMR_SIMPLE:40,SMR_MAIN:41,USAC_NOSBR:42,SAOC:43,LD_SURROUND:44,USAC:45},f=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],n=[0,1,2,3,4,5,6,8];b=[new Uint8Array([0,200,0,128,35,128]),new Uint8Array([33,
0,73,144,2,25,0,35,128]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])];c.prototype=Object.create(e.prototype);c.prototype.constructor=c;c.prototype.kind="AAC";c.DataTypes=k;c.AOT=r;c.SamplingFrequencys=f;c.Channels=n;c.SilentFrames=b;d.register(c)})(playease);
(function(d){function c(d){b.call(this,"AVC",g,[e.ERROR]);var f=this;f.parse=function(b){if(4>b.left())f.dispatchEvent(e.ERROR,{name:"DataError",message:"Data not enough while parsing AVC packet."});else{n.Timestamp=b.timestamp;var c=new DataView(b.payload.buffer);b.set("DataType",c.getUint8(b.position++));b.set("CTS",c.getUint8(b.position++)<<16|c.getUint8(b.position++)<<8|c.getUint8(b.position++));switch(b.get("DataType")){case p.SEQUENCE_HEADER:a:if(7>b.left())f.dispatchEvent(e.ERROR,{name:"DataError",
message:"Data not enough while parsing AVC decoder configuration record."});else{f.AVCC=b.payload.subarray(b.position);c=0;var l=new DataView(b.payload.buffer,b.position);f.ConfigurationVersion=l.getUint8(c++);f.ProfileIndication=l.getUint8(c++);f.ProfileCompatibility=l.getUint8(c++);f.LevelIndication=l.getUint8(c++);if(1!==f.ConfigurationVersion||0===f.ProfileIndication)f.dispatchEvent(e.ERROR,{name:"DataError",message:"Invalid AVC configuration version or profile."});else if(f.NalLengthSize=(l.getUint8(c++)&
3)+1,3>f.NalLengthSize)f.dispatchEvent(e.ERROR,{name:"DataError",message:"Invalid NalLengthSize "+f.NalLengthSize});else{for(var m=l.getUint8(c++)&31,r=0;r<m;r++){var v=l.getUint16(c);c+=2;if(0!==v){var x=f.AVCC.subarray(c,c+v);try{f.SPS.parse(x),f.RefSampleDuration=Math.floor(n.Timescale*d.FrameRate.Den/d.FrameRate.Num)}catch(I){f.dispatchEvent(e.ERROR,{name:I.name,message:I.message});break a}c+=v}}m=l.getUint8(c++);for(r=0;r<m;r++)v=l.getUint16(c),c+=2,0!==v&&(c+=v);f.Codec=f.SPS.Codec;f.dispatchEvent(g.AVC_CONFIG_RECORD,
{packet:b})}}break;case p.NALU:a:{c=0;l=new DataView(b.payload.buffer,b.position);r=b.payload.subarray(b.position);m=[];b.set("DTS",n.TimeBase+n.Timestamp);b.set("PTS",b.get("CTS")+b.get("DTS"));b.set("Data",r);for(b.set("NALUs",m);c<l.byteLength;){if(c+4>=l.byteLength){f.dispatchEvent(h.ERROR,{name:"DataError",message:"Data not enough for next NALU."});break a}v=l.getUint32(c);3===f.NalLengthSize&&(v>>=8);c+=f.NalLengthSize;if(v>l.byteLength-f.NalLengthSize){f.dispatchEvent(h.ERROR,{name:"DataError",
message:"Malformed Nalus near timestamp "+b.get("DTS")+"."});break a}b.set("ForbiddenZeroBit",l.getUint8(c)>>7&1);b.set("NalRefIdc",l.getUint8(c)>>5&3);b.set("NalUnitType",l.getUint8(c)&31);b.get("NalUnitType")===k.IDR_SLICE&&b.set("Keyframe",!0);x=r.subarray(c,c+v);c+=v;m.push(x)}f.dispatchEvent(g.AVC_SAMPLE,{packet:b})}break;case p.END_OF_SEQUENCE:a.debug("AVC sequence end.");f.dispatchEvent(g.END_OF_STREAM);break;default:f.dispatchEvent(e.ERROR,{name:"TypeError",message:"Unrecognized AVC packet type: "+
b.get("DataType")})}}};var n=d;f.MimeType="video/mp4";f.Codec="";f.RefSampleDuration=Math.floor(n.Timescale*d.FrameRate.Den/d.FrameRate.Num);f.AVCC=null;f.ConfigurationVersion=0;f.ProfileIndication=0;f.ProfileCompatibility=0;f.LevelIndication=0;f.NalLengthSize=0;f.SPS=new c.SPS(n);f.PPS=new c.PPS(f.SPS);f.ExpectedDts=0;f.Flags={IsLeading:0,SampleDependsOn:0,SampleIsDependedOn:0,SampleHasRedundancy:0,IsNonSync:0}}var a=d.utils,h=d.events,b=h.EventDispatcher,e=h.Event,g=h.MediaEvent;d=d.AV.Codec;var p=
{SEQUENCE_HEADER:0,NALU:1,END_OF_SEQUENCE:2},k={SLICE:1,DPA:2,DPB:3,DPC:4,IDR_SLICE:5,SEI:6,SPS:7,PPS:8,AUD:9,END_SEQUENCE:10,END_STREAM:11,FILLER_DATA:12,SPS_EXT:13,AUXILIARY_SLICE:19,FF_IGNORE:267448321};c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.kind="AVC";c.DataTypes=p;c.NAL=k;d.register(c)})(playease);
(function(d){function c(){var a=this,b;a.parse=function(c){b=c;a.CpbCnt=b.ReadUE()+1;if(32<a.CpbCnt)throw{name:"DataError",message:"Invalid HRD.CpbCnt "+a.CpbCnt+"."};a.BitRateScale=b.ReadBits(4);a.CpbSizeScale=b.ReadBits(4);for(c=0;c<a.CpbCnt;c++)a.BitRateValue[c]=b.ReadUE(),a.CpbSizeValue[c]=b.ReadUE(),a.CbrFlag|=b.ReadBits(1)<<c;a.InitialCpbRemovalDelayLength=_b.ReadBits(5)+1;a.CpbRemovalDelayLength=b.ReadBits(5)+1;a.DpbOutputDelayLength=b.ReadBits(5)+1;a.TimeOffsetLength=b.ReadBits(5)};a.CpbCnt=
0;a.BitRateScale=0;a.CpbSizeScale=0;a.BitRateValue=Array(32);a.CpbSizeValue=Array(32);a.CbrFlag=0;a.InitialCpbRemovalDelayLength=0;a.CpbRemovalDelayLength=0;a.DpbOutputDelayLength=0;a.TimeOffsetLength=0}function a(){var a=this,b;a.parse=function(c){b=c;a.AspectRatioInfoPresentFlag=b.ReadBits(1);if(0!==a.AspectRatioInfoPresentFlag)if(a.AspectRatioIdc=b.ReadBits(8),255===a.AspectRatioIdc)a.Sar.Num=b.ReadBits(16),a.Sar.Den=b.ReadBits(16);else if(a.AspectRatioIdc<p.length)a.Sar=p[a.AspectRatioIdc];else throw{name:"DataError",
message:"Illegal aspect ratio."};else a.Sar.Num=0,a.Sar.Den=0;a.OverscanInfoPresentFlag=b.ReadBits(1);0!==a.OverscanInfoPresentFlag&&(a.OverscanAppropriateFlag=b.ReadBits(1));a.VideoSignalTypePresentFlag=b.ReadBits(1);0!==a.VideoSignalTypePresentFlag&&(a.VideoFormat=b.ReadBits(3),a.VideoFullRangeFlag=b.ReadBits(1),a.ColourDescriptionPresentFlag=b.ReadBits(1),0!==a.ColourDescriptionPresentFlag&&(a.ColourPrimaries=b.ReadBits(8),a.TransferCharacteristics=b.ReadBits(8),a.MatrixCoefficients=b.ReadBits(8),
a.ColourPrimaries>=g.COL_PRI_NB&&(a.ColourPrimaries=g.COL_PRI_UNSPECIFIED),a.TransferCharacteristics>=g.COL_TRC_NB&&(a.TransferCharacteristics=g.COL_TRC_UNSPECIFIED),a.MatrixCoefficients>=g.COL_SPC_NB&&(a.MatrixCoefficients=g.COL_SPC_UNSPECIFIED)));a.ChromaLocInfoPresentFlag=b.ReadBits(1);0!==a.ChromaLocInfoPresentFlag&&(a.ChromaSampleLocTypeTopField=b.ReadUE(),a.ChromaSampleLocTypeBottomField=b.ReadUE());if(0!==b.ReadBits(1)&&10>b.Left())throw{name:"DataError",message:"Truncated VUI."};a.TimingInfoPresentFlag=
b.ReadBits(1);if(0!==a.TimingInfoPresentFlag){a.NumUnitsInTick=b.ReadBitsLong(32);a.TimeScale=b.ReadBitsLong(32);if(0===a.NumUnitsInTick||0===a.TimeScale)h.debug("time_scale/num_units_in_tick invalid or unsupported "+a.TimeScale+"/"+a.NumUnitsInTick),a.TimingInfoPresentFlag=0;a.FixedFrameRateFlag=b.ReadBits(1)}a.NalHrdParametersPresentFlag=b.ReadBits(1);0!==a.NalHrdParametersPresentFlag&&a.NalHrd.parse(b);a.VclHrdParametersPresentFlag=b.ReadBits(1);0!==a.VclHrdParametersPresentFlag&&a.VclHrd.parse(b);
if(0!==a.NalHrdParametersPresentFlag||0!==a.VclHrdParametersPresentFlag)a.LowDelayHrdFlag=b.ReadBits(1);a.PicStructPresentFlag=b.ReadBits(1);if(0!==b.Left()&&(a.BitstreamRestrictionFlag=b.ReadBits(1),0!==a.BitstreamRestrictionFlag&&(a.MotionVectorsOverPicBoundariesFlag=b.ReadBits(1),a.MaxBytesPerPicDenom=b.ReadUE(),a.MaxBitsPerMbDenom=b.ReadUE(),a.Log2MaxMvLengthHorizontal=b.ReadUE(),a.Log2MaxMvLengthVertical=b.ReadUE(),a.MaxNumReorderFrames=b.ReadUE(),a.MaxDecFrameBuffering=b.ReadUE(),0>b.Left()&&
(a.MaxNumReorderFrames=0,a.BitstreamRestrictionFlag=0),16<a.MaxNumReorderFrames)))throw a.MaxNumReorderFrames=16,{name:"DataError",message:"Clipping illegal MaxNumReorderFrames "+a.MaxNumReorderFrames+"."};};a.AspectRatioInfoPresentFlag=0;a.AspectRatioIdc=0;a.Sar=new e;a.OverscanInfoPresentFlag=0;a.OverscanAppropriateFlag=0;a.VideoSignalTypePresentFlag=0;a.VideoFormat=0;a.VideoFullRangeFlag=0;a.ColourDescriptionPresentFlag=0;a.ColourPrimaries=0;a.TransferCharacteristics=0;a.MatrixCoefficients=0;a.ChromaLocInfoPresentFlag=
0;a.ChromaSampleLocTypeTopField=0;a.ChromaSampleLocTypeBottomField=0;a.TimingInfoPresentFlag=0;a.NumUnitsInTick=0;a.TimeScale=0;a.FixedFrameRateFlag=0;a.NalHrdParametersPresentFlag=0;a.NalHrd=new c;a.VclHrdParametersPresentFlag=0;a.VclHrd=new c;a.LowDelayHrdFlag=0;a.PicStructPresentFlag=0;a.BitstreamRestrictionFlag;a.MotionVectorsOverPicBoundariesFlag=0;a.MaxBytesPerPicDenom=0;a.MaxBitsPerMbDenom=0;a.Log2MaxMvLengthHorizontal=0;a.Log2MaxMvLengthVertical=0;a.MaxNumReorderFrames=0;a.MaxDecFrameBuffering=
0}var h=d.utils,b=h.Golomb;d=d.AV;var e=d.Rational,g=d.Codec;d=g.AVC;var p=[new e(0,1),new e(1,1),new e(12,11),new e(10,11),new e(16,11),new e(40,33),new e(24,11),new e(20,11),new e(32,11),new e(80,33),new e(18,11),new e(15,11),new e(64,33),new e(160,99),new e(4,3),new e(3,2),new e(2,1)];d.SPS=function(c){function e(a,b){return 0!==a&&0!==b&&(a+128)*(b+128)<h.MAX_INT32/8}var f=this,d;f.parse=function(a){if(4>a.byteLength)throw{name:"DataError",message:"Data not enough while parsing SPS."};f.Codec=
"avc1.";h.forEach(a.subarray(1,4),function(a,b){a=h.padStart(b.toString(16),2,"0");f.Codec+=a});a=h.ebsp2rbsp(a);d=new b(a);f.Data=a;d.ReadBits(8);f.ProfileIdc=d.ReadBits(8);f.ConstraintSetFlags=d.ReadBits(1)<<0;f.ConstraintSetFlags|=d.ReadBits(1)<<1;f.ConstraintSetFlags|=d.ReadBits(1)<<2;f.ConstraintSetFlags|=d.ReadBits(1)<<3;f.ConstraintSetFlags|=d.ReadBits(1)<<4;f.ConstraintSetFlags|=d.ReadBits(1)<<5;f.ReservedZero2Bits=d.ReadBits(2);f.LevelIdc=d.ReadBits(8);f.ID=d.ReadUE();if(32<=f.ID)throw{name:"DataError",
message:"SPS ID(0x"+f.ID.toString(16)+") out of range."};f.SeqScalingMatrixPresentFlag=0;f.Vui.VideoFullRangeFlag=1;f.Vui.MatrixCoefficients=g.COL_SPC_UNSPECIFIED;if(100===f.ProfileIdc||110===f.ProfileIdc||122===f.ProfileIdc||244===f.ProfileIdc||44===f.ProfileIdc||83===f.ProfileIdc||86===f.ProfileIdc||118===f.ProfileIdc||128===f.ProfileIdc||138===f.ProfileIdc||144===f.ProfileIdc){f.ChromaFormatIdc=d.ReadUE();if(3<f.ChromaFormatIdc)throw{name:"DataError",message:"Bad ChromaFormatIdc "+f.ChromaFormatIdc+
"."};if(3===f.ChromaFormatIdc&&(f.SeparateColourPlaneFlag=d.ReadBits(1),0!==f.SeparateColourPlaneFlag))throw{name:"DataError",message:"Separate color planes are not supported."};f.BitDepthLuma=d.ReadUE()+8;f.BitDepthChroma=d.ReadUE()+8;if(f.BitDepthChroma!==f.BitDepthLuma)throw{name:"DataError",message:"Different chroma and luma bit depth."};if(8>f.BitDepthLuma||14<f.BitDepthLuma||8>f.BitDepthChroma||14<f.BitDepthChroma)throw{name:"DataError",message:"Illegal bit depth value "+f.BitDepthLuma+", "+
f.BitDepthChroma+"."};f.TransformBypass=d.ReadBits(1);f.SeqScalingMatrixPresentFlag=d.ReadBits(1);if(0!==f.SeqScalingMatrixPresentFlag){a=8;3===f.ChromaFormatIdc&&(a+=4);for(var q=0;q<a;q++)if(0!=d.ReadBits(1)){var l=16;6<=q&&(l=64);for(var m=8,k=8,v=0;v<l;v++)k=d.ReadSE(),k=(m+k+256)%256,0!==k&&(m=k)}}}else f.ChromaFormatIdc=1,f.BitDepthLuma=8,f.BitDepthChroma=8;f.Log2MaxFrameNum=d.ReadUE()+4;if(4>f.Log2MaxFrameNum||16<f.Log2MaxFrameNum)throw{name:"DataError",message:"log2_max_frame_num_minus4("+
(f.Log2MaxFrameNum-4)+") out of range, expect 0-12."};f.PocType=d.ReadUE();if(0===f.PocType){if(f.Log2MaxPocLsb=d.ReadUE()+4,16<f.Log2MaxPocLsb)throw{name:"DataError",message:"log2_max_poc_lsb("+f.Log2MaxPocLsb+") is out of range."};}else if(1===f.PocType){f.DeltaPicOrderAlwaysZeroFlag=d.ReadBits(1);f.OffsetForNonRefPic=d.ReadUE();f.OffsetForTopToBottomField=d.ReadUE();f.NumRefFramesInPocCycle=d.ReadUE();a=f.OffsetForRefFrame.length;if(f.NumRefFramesInPocCycle>=a)throw{name:"DataError",message:"poc_cycle_length("+
f.NumRefFramesInPocCycle+") overflow."};for(q=0;q<f.NumRefFramesInPocCycle;q++)f.OffsetForRefFrame[q]=d.ReadUE()}else if(2!==f.PocType)throw{name:"DataError",message:"Illegal POC type "+f.PocType+"."};f.MaxNumRefFrames=d.ReadUE();if(34<f.MaxNumRefFrames||16<f.MaxNumRefFrames)throw{name:"DataError",message:"Too many reference frames, "+f.MaxNumRefFrames+"."};f.GapsInFrameNumValueAllowedFlag=d.ReadBits(1);f.PicWidth=d.ReadUE()+1;f.PicHeight=d.ReadUE()+1;if(f.PicWidth>=h.MAX_INT32/16||f.PicHeight>=h.MAX_INT32/
16||0==e(16*f.PicWidth,16*f.PicHeight))throw{name:"DataError",message:"pic_width or pic_height overflow."};f.FrameMbsOnlyFlag=d.ReadBits(1);f.MbAdaptiveFrameFieldFlag=0===f.FrameMbsOnlyFlag?d.ReadBits(1):0;c.CodecWidth=16*f.PicWidth;c.CodecHeight=16*f.PicHeight*(2-f.FrameMbsOnlyFlag);f.Direct8x8InferenceFlag=d.ReadBits(1);f.FrameCroppingFlag=d.ReadBits(1);if(0!==f.FrameCroppingFlag){var x;a=d.ReadUE();q=d.ReadUE();l=d.ReadUE();m=d.ReadUE();1===f.ChromaFormatIdc&&(x=1);if(1===f.ChromaFormatIdc||2===
f.ChromaFormatIdc)var n=1;n=1<<n;x=2-f.FrameMbsOnlyFlag<<x;if(a>h.MAX_INT32/4/n||q>h.MAX_INT32/4/n||l>h.MAX_INT32/4/x||m>h.MAX_INT32/4/x||(a+q)*n>=c.CodecWidth||(l+m)*x>=c.CodecHeight)throw{name:"DataError",message:"Invalid crop values, l="+a+", r="+q+", t="+l+", b="+m+", w="+c.CodecWidth+", h="+c.CodecHeight+"."};f.FrameCropLeftOffset=a*n;f.FrameCropRightOffset=q*n;f.FrameCropTopOffset=l*x;f.FrameCropBottomOffset=m*x}else f.FrameCropLeftOffset=0,f.FrameCropRightOffset=0,f.FrameCropTopOffset=0,f.FrameCropBottomOffset=
0;f.VuiParametersPresentFlag=d.ReadBits(1);0!==f.VuiParametersPresentFlag&&(f.Vui.parse(d),0!==f.Vui.TimingInfoPresentFlag&&(c.FrameRate.Num=f.Vui.TimeScale,c.FrameRate.Den=2*f.Vui.NumUnitsInTick));c.CodecWidth-=f.FrameCropLeftOffset+f.FrameCropRightOffset;c.CodecHeight-=f.FrameCropTopOffset+f.FrameCropBottomOffset;c.Width=c.CodecWidth;c.Height=c.CodecHeight;1<f.Vui.Sar.Den&&(c.Width*=f.Vui.Sar.Num/f.Vui.Sar.Den)};f.ProfileIdc=0;f.ConstraintSetFlags=0;f.ReservedZero2Bits=0;f.LevelIdc=0;f.ID=0;f.ChromaFormatIdc=
0;f.SeparateColourPlaneFlag=0;f.BitDepthLuma=0;f.BitDepthChroma=0;f.TransformBypass=0;f.SeqScalingMatrixPresentFlag=0;f.Log2MaxFrameNum=0;f.PocType=0;f.Log2MaxPocLsb=0;f.DeltaPicOrderAlwaysZeroFlag=0;f.OffsetForNonRefPic=0;f.OffsetForTopToBottomField=0;f.NumRefFramesInPocCycle=0;f.OffsetForRefFrame=Array(256);f.MaxNumRefFrames=0;f.GapsInFrameNumValueAllowedFlag=0;f.PicWidth=0;f.PicHeight=0;f.FrameMbsOnlyFlag=0;f.MbAdaptiveFrameFieldFlag=0;f.Direct8x8InferenceFlag=0;f.FrameCroppingFlag=0;f.FrameCropLeftOffset=
0;f.FrameCropRightOffset=0;f.FrameCropTopOffset=0;f.FrameCropBottomOffset=0;f.VuiParametersPresentFlag=0;f.Vui=new a}})(playease);
(function(d){var c=d.utils,a=c.Golomb;d.AV.Codec.AVC.PPS=function(d){var b=this,e;b.parse=function(d){d=c.ebsp2rbsp(d);e=new a(d);b.Data=d;b.ID=e.ReadUE();if(256<=b.ID)throw{name:"DataError",message:"PPS ID(0x"+b.ID.toString(16)+") out of range."};b.SpsID=e.ReadUE();if(32<=b.SpsID)throw{name:"DataError",message:"SPS ID(0x"+b.SpsID.toString(16)+") out of range."};if(14<g.BitDepthLuma)throw{name:"DataError",message:"Invalid BitDepthLuma "+g.BitDepthLuma+"."};if(11===g.BitDepthLuma||13===g.BitDepthLuma)throw{name:"DataError",
message:"Unimplemented BitDepthLuma "+g.BitDepthLuma+"."};b.EntropyCodingModeFlag=e.ReadBits(1);b.PicOrderPresentFlag=e.ReadBits(1);b.NumSliceGroups=e.ReadUE()+1;1<b.NumSliceGroups&&(b.SliceGroupMapType=e.ReadUE(),c.debug("FMO not supported!"));b.NumRefIdx[0]=e.ReadUE()+1;b.NumRefIdx[1]=e.ReadUE()+1;if(31<b.NumRefIdx[0]-1||31<b.NumRefIdx[1]-1)throw{name:"DataError",message:"PPS reference overflow."};d=6*(g.BitDepthLuma-8);b.WeightedPredFlag=e.ReadBits(1);b.WeightedBipredIdc=e.ReadBits(2);b.PicInitQp=
e.ReadSE()+26+d;b.PicInitQs=e.ReadSE()+26+d;b.ChromaQpIndexOffset[0]=e.ReadSE();b.DeblockingFilterControlPresentFlag=e.ReadBits(1);b.ConstrainedIntraPredFlag=e.ReadBits(1);b.RedundantPicCntPresentFlag=e.ReadBits(1);b.Transform8x8ModeFlag=0;if(d=0<e.Left())66!==g.ProfileIdc&&77!==g.ProfileIdc&&88!==g.ProfileIdc||0===(g.ConstraintSetFlags&7)?d=!0:(c.debug("Current profile doesn't provide more RBSP data in PPS, skipping..."),d=!1);d?(b.Transform8x8ModeFlag=e.ReadBits(1),b.PicScalingMatrixPresentFlag=
e.ReadBits(1),0!==b.PicScalingMatrixPresentFlag&&(d=2,3===g.ChromaFormatIdc&&(d=6),e.ReadBits(6+d*b.Transform8x8ModeFlag)),b.ChromaQpIndexOffset[1]=e.ReadSE()):b.ChromaQpIndexOffset[1]=b.ChromaQpIndexOffset[0];b.ChromaQpIndexOffset[0]!==b.ChromaQpIndexOffset[1]&&(b.ChromaQpDiff=1)};var g=d;b.ID=0;b.SpsID=0;b.EntropyCodingModeFlag=0;b.PicOrderPresentFlag=0;b.NumSliceGroups=0;b.SliceGroupMapType=0;b.NumRefIdx=Array(2);b.WeightedPredFlag=0;b.WeightedBipredIdc=0;b.PicInitQp=0;b.PicInitQs=0;b.ChromaQpIndexOffset=
Array(2);b.DeblockingFilterControlPresentFlag=0;b.ConstrainedIntraPredFlag=0;b.RedundantPicCntPresentFlag=0;b.Transform8x8ModeFlag=0;b.PicScalingMatrixPresentFlag=0;b.ChromaQpDiff=0}})(playease);
(function(d){function c(a,d){b.call(this,"MediaStreamTrack");var e=this;e.stop=function(){};e.clone=function(){return new c(e.kind,e.source)};e.id=0;e.sn=0;e.kind=a;e.source=d}var a=d.utils,h=d.events,b=h.EventDispatcher,e=h.Event,g=h.MediaStreamTrackEvent;d=d.AV;var p=d.Information,k={},r=[];k.register=function(b,c){try{r.splice(c||r.length,0,b),k[b.prototype.kind]=b}catch(z){a.error("Failed to register format "+b.prototype.kind+", Error="+z.message)}};k.get=function(a){for(var b=0;b<r.length;b++){var c=
r[b];if(c.prototype.kind===a)return c}return null};c.KindAudio="audio";c.KindVideo="video";k.MediaStreamTrack=c;k.MediaStream=function(){b.call(this,"MediaStream",g,[e.ERROR]);var d=this;d.addTrack=function(b){for(var c=0;c<h.length;c++)if(h[c]===b){a.warn("MediaStreamTrack already added.");return}b.id=k++;h.push(b);d.dispatchEvent(g.ADDTRACK,{track:b})};d.removeTrack=function(a){for(var b=0;b<h.length;b++)if(h[b]===a){h.splice(b,1);d.dispatchEvent(g.REMOVETRACK,{track:a});break}};d.getTrackById=
function(a){for(var b=0;b<h.length;b++)if(h[b].id===a)return h[b];return null};d.getTracks=function(){var b=[];a.forEach(h,function(a,c){b.push(c)});return b};d.getAudioTracks=function(){var b=[];a.forEach(h,function(a,d){d.kind===c.KindAudio&&b.push(d)});return b};d.getVideoTracks=function(){var b=[];a.forEach(h,function(a,d){d.kind===c.KindVideo&&b.push(d)});return b};d.close=function(){a.forEach(h,function(a,b){b.stop();d.dispatchEvent(g.REMOVETRACK,{track:b})});k=1;h=[];d.info=new p};var k=1;
var h=[];d.info=new p};d.format=k.get;d.Format=k})(playease);
(function(d){function c(){function c(){l=n.f;d.hasAudio=!1;d.hasVideo=!1}k.call(this,"FLV");var d=this,l,m;d.append=function(c){c=new Uint8Array(c);for(var v=0;v<c.byteLength;v++)switch(l){case n.f:if(70!==c[v]){d.dispatchEvent(b.ERROR,{name:"DataError",message:'Not "F"'});return}l=n.l;break;case n.l:if(76!==c[v]){d.dispatchEvent(b.ERROR,{name:"DataError",message:'Not "L"'});return}l=n.v;break;case n.v:if(86!==c[v]){d.dispatchEvent(b.ERROR,{name:"DataError",message:'Not "V"'});return}l=n.version;
break;case n.version:l=n.flags;break;case n.flags:d.hasAudio=!!(c[v]&4);d.hasVideo=!!(c[v]&1);l=n.header0;break;case n.header0:l=n.header1;break;case n.header1:l=n.header2;break;case n.header2:l=n.header3;break;case n.header3:l=n.backpointer0;break;case n.backpointer0:l=n.backpointer1;break;case n.backpointer1:l=n.backpointer2;break;case n.backpointer2:l=n.backpointer3;break;case n.backpointer3:l=n.type;break;case n.type:m=new g.Packet;switch(c[v]){case r.AUDIO:m.kind=p.KindAudio;break;case r.VIDEO:m.kind=
p.KindVideo;break;case r.SCRIPT:m.kind=p.KindScript;break;default:d.dispatchEvent(b.ERROR,{name:"TypeError",message:"Unrecognized flv tag "+a.hex(c[v])+"."});return}l=n.length0;break;case n.length0:m.length=c[v]<<16;l=n.length1;break;case n.length1:m.length|=c[v]<<8;l=n.length2;break;case n.length2:m.length|=c[v];m.payload=new Uint8Array(m.length);m.position=0;l=n.timestamp0;break;case n.timestamp0:m.timestamp=c[v]<<16;l=n.timestamp1;break;case n.timestamp1:m.timestamp|=c[v]<<8;l=n.timestamp2;break;
case n.timestamp2:m.timestamp|=c[v];l=n.timestamp3;break;case n.timestamp3:m.timestamp|=c[v]<<24;l=n.streamid0;break;case n.streamid0:m.streamid=c[v]<<16;l=n.streamid1;break;case n.streamid1:m.streamid|=c[v]<<8;l=n.streamid2;break;case n.streamid2:m.streamid|=c[v];l=n.payload;break;case n.payload:var x=Math.min(m.length-m.position,c.byteLength-v);m.payload.set(c.subarray(v,v+x),m.position);m.position+=x;v+=x-1;if(m.position===m.length){switch(m.kind){case p.KindAudio:m.set("Format",m.payload[0]>>
4&15);m.set("SampleRate",m.payload[0]>>2&3);m.set("SampleSize",m.payload[0]>>1&1);m.set("SampleType",m.payload[0]&1);m.set("DataType",m.payload[1]);m.position=1;break;case p.KindVideo:m.set("FrameType",m.payload[0]>>4&15);m.set("Codec",m.payload[0]&15);m.set("DataType",m.payload[1]);m.set("Keyframe",m.get("FrameType")===f.KEYFRAME);m.position=1;break;case p.KindScript:m.position=0}d.dispatchEvent(e.PACKET,{packet:m});l=n.backpointer0}break;default:d.dispatchEvent(b.ERROR,{name:"InvalidStateError",
message:"Invalid state while parsing flv tag."});return}};d.reset=function(){c();d.close()};c()}var a=d.utils,h=d.events,b=h.Event,e=h.MediaEvent,g=d.AV,p=g.Packet;d=g.Format;var k=d.MediaStream,r={AUDIO:8,VIDEO:9,SCRIPT:18},f={KEYFRAME:1,INTER_FRAME:2,DISPOSABLE_INTER_FRAME:3,GENERATED_KEYFRAME:4,INFO_OR_COMMAND_FRAME:5},n={f:0,l:1,v:2,version:3,flags:4,header0:5,header1:6,header2:7,header3:8,backpointer0:9,backpointer1:10,backpointer2:11,backpointer3:12,type:13,length0:14,length1:15,length2:16,
timestamp0:17,timestamp1:18,timestamp2:19,timestamp3:20,streamid0:21,streamid1:22,streamid2:23,payload:24};c.prototype=Object.create(k.prototype);c.prototype.constructor=c;c.prototype.kind="FLV";c.Tags=r;c.Frames=f;c.Formats={LINEAR_PCM_PLATFORM_ENDIAN:0,ADPCM:1,MP3:2,LINEAR_PCM_LITTLE_ENDIAN:3,NELLYMOSER_16_kHz_MONO:4,NELLYMOSER_8_kHz_MONO:5,NELLYMOSER:6,G_711_A_LAW_LOGARITHMIC_PCM:7,G_711_MU_LAW_LOGARITHMIC_PCM:8,RESERVED:9,AAC:10,SPEEX:11,MP3_8_kHz:14,DEVICE_SPECIFIC_SOUND:15};c.Rates=[5500,11025,
22050,44100];c.Codecs={JPEG:1,H263:2,SCREEN_VIDEO:3,VP6:4,VP6_ALPHA:5,SCREEN_VIDEO_2:6,AVC:7};d.FLV=c})(playease);
(function(d){function c(){e.call(this,"FMP4");var a=this;a.append=function(b){a.dispatchEvent(h.ERROR,{name:"NotSupportedError",message:"The operation is not supported."})};a.getInitSegment=function(){var b=a.ftyp(),d=a.moov.apply(a,arguments);return c.merge(b,d)};a.getSegment=function(d,e){var f=d.source,g=e.get("DTS")-a.info.TimeBase-f.ExpectedDts;e.set("DTS",f.ExpectedDts);e.set("PTS",e.get("CTS")+e.get("DTS"));e.set("Duration",f.RefSampleDuration+g);f.ExpectedDts=e.get("DTS")+e.get("Duration");
d.kind===b.KindVideo&&(e.get("Keyframe")?(f.Flags.SampleDependsOn=2,f.Flags.SampleIsDependedOn=1):(f.Flags.SampleDependsOn=1,f.Flags.SampleIsDependedOn=0));d.sn++;d=a.moof(d,e);e=a.mdat(e.get("Data"));return c.merge(d,e)};a.box=function(a){for(var b=Array.prototype.slice.call(arguments,1),c=8,d=0;d<b.length;d++)c+=b[d].byteLength;var e=0,f=new Uint8Array(c);f[e++]=c>>>24&255;f[e++]=c>>>16&255;f[e++]=c>>>8&255;f[e++]=c&255;f.set(a,e);e+=4;for(d=0;d<b.length;d++)f.set(b[d],e),e+=b[d].byteLength;return f};
a.ftyp=function(){return a.box(g.ftyp,k)};a.moov=function(){for(var b=[],c=[],d=a.mvhd(),e=Array.prototype.slice.call(arguments,0),f=0;f<e.length;f++){var l=e[f],m=a.trak(l);l=a.trex(l);b.push(m);c.push(l)}c=a.box.apply(a,[g.mvex].concat(c));return a.box.apply(a,[g.moov].concat([d],b,[c]))};a.mvhd=function(){var b=a.info.Timescale,c=1E3*a.info.Duration;return a.box(g.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255,c>>24&255,c>>16&255,c>>8&255,c&255,0,1,0,0,1,0,0,0,
0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))};a.trak=function(b){var c=a.tkhd(b);b=a.mdia(b);return a.box(g.trak,c,b)};a.tkhd=function(b){b=b.id;var c=1E3*a.info.Duration,d=a.info.Width,e=a.info.Height;return a.box(g.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255,0,0,0,0,c>>24&255,c>>16&255,c>>8&255,c&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,d>>8&255,d&255,0,0,e>>8&255,e&255,0,0]))};a.mdia=function(b){var c=a.mdhd(),d=a.hdlr(b);b=a.minf(b);return a.box(g.mdia,c,d,b)};a.mdhd=function(){var b=a.info.Timescale,c=1E3*a.info.Duration;return a.box(g.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255,c>>24&255,c>>16&255,c>>8&255,c&255,85,196,0,0]))};a.hdlr=function(c){return a.box(g.hdlr,c.kind===b.KindAudio?f:r)};a.minf=function(c){var d=c.kind===b.KindAudio?
a.box(g.smhd,C):a.box(g.vmhd,m);var e=a.dinf();c=a.stbl(c);return a.box(g.minf,d,e,c)};a.dinf=function(){var b=a.box(g.dref,p);return a.box(g.dinf,b)};a.stbl=function(b){b=a.stsd(b);var c=a.box(g.stts,z),d=a.box(g.stsc,q),e=a.box(g.stsz,l),f=a.box(g.stco,STCO);return a.box(g.stbl,b,c,d,e,f)};a.stsd=function(c){return c.kind===b.KindAudio?a.box(g.stsd,n,a.mp4a(c)):a.box(g.stsd,n,a.avc1(c))};a.mp4a=function(b){var c=b.source.SamplingFrequency;c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,b.source.ChannelConfiguration,
0,16,0,0,0,0,c>>>8&255,c&255,0,0]);b=a.esds(b);return a.box(g.mp4a,c,b)};a.esds=function(b){b=b.source.Config;var c=b.byteLength;c=new Uint8Array([0,0,0,0,3,23+c,0,1,0,4,15+c,64,21,0,0,0,0,0,0,0,0,0,0,0,5,c]);return a.box(g.esds,c,b,new Uint8Array([6,1,2]))};a.avc1=function(b){var c=a.info.CodecWidth,d=a.info.CodecHeight;c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,115,112,101,110,99,101,114,108,97,117,47,112,108,
97,121,101,97,115,101,46,106,115,0,0,0,0,0,0,0,0,0,0,24,255,255]);b=a.box(g.avcC,b.source.AVCC);return a.box(g.avc1,c,b)};a.trex=function(b){b=b.id;return a.box(g.trex,new Uint8Array([0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))};a.moof=function(b,c){var d=a.mfhd(b);b=a.traf(b,c);return a.box(g.moof,d,b)};a.mfhd=function(b){b=b.sn;b=new Uint8Array([0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255]);return a.box(g.mfhd,b)};a.traf=function(b,c){var d=b.id,e=c.get("DTS");d=
a.box(g.tfhd,new Uint8Array([0,0,0,0,d>>24&255,d>>16&255,d>>8&255,d&255]));e=a.box(g.tfdt,new Uint8Array([0,0,0,0,e>>24&255,e>>16&255,e>>8&255,e&255]));c=a.trun(b,c);b=a.sdtp(b);return a.box(g.traf,d,e,c,b)};a.trun=function(b,c){var d=c.get("Duration"),e=c.get("Data").byteLength;b=b.source.Flags;c=c.get("CTS");return a.box(g.trun,new Uint8Array([0,0,15,1,0,0,0,1,0,0,0,121,d>>24,d>>16,d>>8,d,e>>24,e>>16,e>>8,e,b.IsLeading<<2|b.SampleDependsOn,b.SampleIsDependedOn<<6|b.SampleHasRedundancy<<4|b.IsNonSync,
0,0,c>>24,c>>16,c>>8,c]))};a.sdtp=function(b){b=b.source.Flags;return a.box(g.sdtp,new Uint8Array([0,0,0,0,b.IsLeading<<6|b.SampleDependsOn<<4|b.SampleIsDependedOn<<2|b.SampleHasRedundancy]))};a.mdat=function(b){return a.box(g.mdat,b)};a.reset=function(){a.close()}}var a=d.utils,h=d.events.Event;d=d.AV.Format;var b=d.MediaStreamTrack,e=d.MediaStream,g={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],
stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),k=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),f=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,
0]),n=new Uint8Array([0,0,0,0,0,0,0,1]),z=new Uint8Array([0,0,0,0,0,0,0,0]),q=STCO=z,l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),m=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),C=new Uint8Array([0,0,0,0,0,0,0,0]);a.forEach(g,function(a,b){b.push(a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3))});c.prototype=Object.create(e.prototype);c.prototype.constructor=c;c.prototype.kind="FMP4";c.merge=function(){for(var a=Array.prototype.slice.call(arguments,0),b=0,c=0;c<a.length;c++)b+=a[c].byteLength;
var d=0;b=new Uint8Array(b);for(c=0;c<a.length;c++)b.set(a[c],d),d+=a[c].byteLength;return b};c.parseDescriptor=function(a){a=new Uint8Array(a);for(var b=0,c={},d,e=0;e<a.byteLength;e++)switch(b){case 0:d={type:a[e],size:0,data:void 0};c[d.type]=d;b=1;break;case 1:case 2:case 3:case 4:var f=a[e];d&&(d.size=d.size<<7|f&127);f&128?b++:b=5;break;case 5:d&&(d.data=a.subarray(e,e+d.size),e+=d.size-1);b=0;break;default:throw{name:"InvalidStateError",message:"Invalid state while parsing fmp4 descriptor."};
}return c};d.FMP4=c})(playease);(function(d){var c=d.utils,a={},h=[];a.register=function(b,d){try{h.splice(d||h.length,0,b),a[b.prototype.kind]=b}catch(g){c.error("Failed to register module "+b.prototype.kind+", Error="+g.message)}};a.get=function(a,c){for(var b=0;b<h.length;b++){var d=h[b];if(d.prototype.isSupported(a,c))return d}return null};d.module=a.get;d.Module=a})(playease);
(function(d){function c(b){g.call(this,"SRC",p,k);var c=this,d;c.setup=function(){!1===e&&(e=!0,c.dispatchEvent(p.READY,{kind:c.kind}))};c.play=function(b,e){"string"===a.typeOf(b)&&b!==d&&b!==h.src&&(d=b,h.src=b);if(b=h.play())b["catch"](function(b){switch(b.name){case "AbortError":c.dispatchEvent(p.STALLED,{name:b.name,message:b.message});break;case "NotAllowedError":a.warn("Failed to play due to the autoplay policy, trying to play with muted.");h.muted=!0;h.play();break;default:a.error("Unrecognized error occured, "+
b.name+": "+b.message),c.dispatchEvent(p.STALLED,{name:b.name,message:b.message})}});h.controls=!1};c.pause=function(){h.pause();h.controls=!1};c.seek=function(a){h.currentTime=a;c.play()};c.stop=function(){e=!1;d=void 0;h.removeAttribute("src");h.load();h.currentTime=0;h.controls=!1};c.reload=function(){h.load();h.controls=!1};c.muted=function(b){"boolean"===a.typeOf(b)&&(h.muted=b);return h.muted};c.volume=function(b){"number"===a.typeOf(b)&&(h.volume=b);return h.volume};c.cleanup=function(){c.stop();
e=!1};c.element=function(){return h};c.config=b;var e=!1;var h=a.createElement("video");h.addEventListener("play",c.forward);h.addEventListener("suspend",c.forward);h.addEventListener("loadstart",c.forward);h.addEventListener("stalled",c.forward);h.addEventListener("waiting",c.forward);h.addEventListener("abort",c.forward);h.addEventListener("timeout",c.forward);h.addEventListener("durationchange",function(a){c.dispatchEvent(p.DURATIONCHANGE,{duration:h.duration})});h.addEventListener("loadedmetadata",
c.forward);h.addEventListener("loadeddata",c.forward);h.addEventListener("progress",c.forward);h.addEventListener("canplay",c.forward);h.addEventListener("playing",c.forward);h.addEventListener("canplaythrough",c.forward);h.addEventListener("pause",c.forward);h.addEventListener("seeking",c.forward);h.addEventListener("seeked",c.forward);h.addEventListener("ratechange",c.forward);h.addEventListener("timeupdate",function(a){a=h.buffered;c.dispatchEvent(p.TIMEUPDATE,{time:h.currentTime,buffered:a.length?
a.end(a.length-1):0,duration:h.duration})});h.addEventListener("volumechange",c.forward);h.addEventListener("load",c.forward);h.addEventListener("ended",c.forward);h.addEventListener("error",c.forward);h.muted=c.config.muted;h.volume=c.config.volume;c.config.airplay&&h.setAttribute("x-webkit-airplay","allow");c.config.playsinline&&(h.setAttribute("playsinline","isiPhoneShowPlaysinline"),h.setAttribute("webkit-playsinline","isiPhoneShowPlaysinline"),h.setAttribute("x5-playsinline",""),h.setAttribute("x5-video-player-type",
"h5-page"),h.setAttribute("x5-video-player-fullscreen",!0),h.setAttribute("t7-video-player-type","inline"),h.setAttribute("x-webkit-airplay",""));c.config.preload&&(h.preload="none")}var a=d.utils,h=d.OS,b=d.Browser,e=d.events,g=e.EventDispatcher,p=e.Event,k=e.IOEvent;d=d.Module;c.prototype=Object.create(g.prototype);c.prototype.constructor=c;c.prototype.kind="SRC";c.prototype.isSupported=function(c,d){if(b.isMSIE&&9>b.major)return!1;c=new a.URL(c);if("http:"!==c.protocol&&"https:"!==c.protocol)return!1;
d="m3u8 m3u hls mp4 f4v m4v mov m4a f4a aac ogv ogg mp3 oga webm".split(" ");var e="mp4 f4v m4v mov m4a f4a aac ogv ogg mp3 oga webm".split(" ");d=h.isMobile||h.isMac?d:e;for(e=0;e<d.length;e++)if(c.filetype===d[e])return!0;return!1};d.register(c)})(playease);
(function(d){function c(b){function c(b){a.log("MediaSource.onsourceopen");A.load(N)}function h(b){a.log("MediaSource.onsourceended")}function F(b){a.log("MediaSource.onsourceclose")}function M(b){a.log("MediaSource.onsourceerror");u.dispatchEvent(g.ERROR,{name:err.name,message:err.message})}function O(){A&&(A.removeEventListener(p.SUSPEND,L),A.removeEventListener(p.LOADSTART,u.forward),A.removeEventListener(p.STALLED,L),A.removeEventListener(p.ABORT,L),A.removeEventListener(p.TIMEOUT,L),A.removeEventListener(p.PROGRESS,
S),A.removeEventListener(p.LOAD,u.forward),A.removeEventListener(p.LOADEND,u.forward),A.abort());var b=d.io(N,u.config.mode);if(null==b)throw{name:"NotSupportedError",message:"No supported io found."};A=new b(N,u.config.mode);A.addEventListener(p.SUSPEND,L);A.addEventListener(p.LOADSTART,u.forward);A.addEventListener(p.STALLED,L);A.addEventListener(p.ABORT,L);A.addEventListener(p.TIMEOUT,L);A.addEventListener(p.PROGRESS,S);A.addEventListener(p.LOAD,u.forward);A.addEventListener(p.LOADEND,u.forward);
a.log(A.kind+" loader initialized.")}function S(b){a.debug("progress: "+b.data.loaded+"/"+b.data.total);D.append(b.data.buffer);u.forward(b)}function L(a){u.cleanup();u.forward(a)}function aa(a){a.table.audiodatarate&&(D.info.AudioDataRate=a.table.audiodatarate.get());a.table.audiosamplerate&&(D.info.AudioSampleRate=a.table.audiosamplerate.get());a.table.audiosamplesize&&(D.info.AudioSampleSize=a.table.audiosamplesize.get());a.table.videodatarate&&(D.info.VideoDataRate=a.table.videodatarate.get());
a.table.width&&(D.info.Width=a.table.width.get());a.table.height&&(D.info.Height=a.table.height.get());a.table.framerate&&(D.info.FrameRate.Num=a.table.framerate.get(),D.info.FrameRate.Den=1);a.table.duration&&(D.info.Duration=a.table.duration.get());a.table.filesize&&(D.info.Size=a.table.filesize.get())}function U(a){a=G.getVideoTracks()[0];J(a);var b=G.getInitSegment(a);_segments[a.kind].push(b);t(a.kind)}function V(a){a=G.getAudioTracks()[0];J(a);var b=G.getInitSegment(a);_segments[a.kind].push(b);
t(a.kind)}function W(a){var b=G.getVideoTracks()[0];a=G.getSegment(b,a.data.packet);_segments[b.kind].push(a);t(b.kind)}function X(a){var b=G.getAudioTracks()[0];a=G.getSegment(b,a.data.packet);_segments[b.kind].push(a);t(b.kind)}function Y(a){P=!0}function J(b){var c=b.source;c=c.MimeType+'; codecs="'+c.Codec+'"';if(!1===MediaSource.isTypeSupported(c))a.warn(c+" not supported!");else if(a.log(c),"closed"===H.readyState)u.dispatchEvent(g.ERROR,{name:"InvalidStateError",message:"MediaSource is already closed while adding SourceBuffer."});
else try{var d=H.addSourceBuffer(c);d.addEventListener("updateend",Z);d.addEventListener("error",B);d.mode="sequence";d.kind=b.kind;Q[b.kind]=d}catch(R){a.error(R.name+": "+R.message)}}function t(b){if(D.hasAudio||D.hasVideo)if(D.hasAudio&&!Q[l.KindAudio]||D.hasVideo&&!Q[l.KindVideo])return;var c=_segments[b];if(c.length&&(b=Q[b])&&!b.updating)try{var d=c.shift();b.appendBuffer(d)}catch(R){a.error(R.name+": "+R.message),u.dispatchEvent(g.ERROR,{name:R.name,message:R.message})}}function Z(b){a.debug("SourceBuffer.onupdateend");
b=b.target;var c=w.buffered;c.length&&(c=c.start(0),w.currentTime<c&&(w.currentTime=c));if(P){if("open"!==H.readyState)return;if(!_segments[l.KindAudio].length&&!_segments[l.KindVideo].length){H.endOfStream();return}}t(b.kind)}function B(b){a.error("SourceBuffer.onerror");u.dispatchEvent(g.ERROR,{name:"DataError",message:"SourceBuffer error occurs."})}e.call(this,"FLV",g,p);var u=this,y,A;u.setup=function(){!1===y&&(y=!0,u.dispatchEvent(g.READY,{kind:u.kind}))};u.play=function(b,c){if("string"===
a.typeOf(b)&&b!==N.href){try{N.parse(b)}catch(ba){a.error('Failed to parse url "'+b+'".');u.dispatchEvent(g.ERROR,{name:ba.name,message:ba.message});return}if(N.host!==v){u.dispatchEvent(g.ERROR,{name:x,message:I});return}P=!1;D.reset();G.reset();G.info=D.info;O();w.src=URL.createObjectURL(H);w.load()}if(b=w.play())b["catch"](function(b){switch(b.name){case "AbortError":u.dispatchEvent(g.ERROR,{name:b.name,message:b.message});break;case "NotAllowedError":a.warn("Failed to play due to the autoplay policy, trying to play with muted.");
w.muted=!0;w.play();break;default:a.error("Unrecognized error occured, "+b.name+": "+b.message),u.dispatchEvent(g.ERROR,{name:b.name,message:b.message})}});w.controls=!1};u.pause=function(){w.pause();w.controls=!1};u.seek=function(a){w.currentTime=a;u.play()};u.stop=function(){A&&A.abort();a.forEach(Q,function(a,b){b&&H.removeSourceBuffer(b);Q[a]=null});a.forEach(_segments,function(a,b){_segments[a]=[]});y=!1;N=new a.URL;w.removeAttribute("src");w.load();w.currentTime=0;w.controls=!1};u.reload=function(){var a=
N.href;u.stop();u.play(a)};u.muted=function(b){"boolean"===a.typeOf(b)&&(w.muted=b);return w.muted};u.volume=function(b){"number"===a.typeOf(b)&&(w.volume=b);return w.volume};u.cleanup=function(){u.stop();y=!1};u.element=function(){return w};u.config=b;var P=y=!1;var N=new a.URL;var Q={};Q[l.KindAudio]=null;Q[l.KindVideo]=null;_segments={};_segments[l.KindAudio]=[];_segments[l.KindVideo]=[];new a.FileKeeper;var H=new (window.MediaSource||window.WebKitMediaSource);H.addEventListener("sourceopen",c);
H.addEventListener("sourceended",h);H.addEventListener("sourceclose",F);H.addEventListener("error",M);H.addEventListener("webkitsourceopen",c);H.addEventListener("webkitsourceended",h);H.addEventListener("webkitsourceclose",F);H.addEventListener("webkiterror",M);var D=new q.FLV;D.addEventListener(k.PACKET,function(b){b=b.data.packet;switch(b.kind){case n.KindVideo:if(b.get("Codec")!==C.AVC){u.dispatchEvent(g.ERROR,{name:"NotSupportedError",message:"Video codec "+a.hex(b.get("Codec"))+" not supported."});
break}var c=D.getVideoTracks()[0];if(b.get("DataType")===z.AVC.DataTypes.SEQUENCE_HEADER){if(c){a.warn("Video track already exists, ignored.");break}c=new z.AVC(D.info);c=new l(l.KindVideo,c);D.addTrack(c)}c.source.parse(b);break;case n.KindAudio:if(b.get("Format")!==m.AAC){u.dispatchEvent(g.ERROR,{name:"NotSupportedError",message:"Audio format "+a.hex(b.get("Format"))+" not supported."});break}c=D.getAudioTracks()[0];if(b.get("DataType")===z.AAC.DataTypes.SPECIFIC_CONFIG){if(c){a.warn("Audio track already exists, ignored.");
break}c=new z.AAC(D.info);c=new l(l.KindAudio,c);D.addTrack(c)}c.source.parse(b);break;case n.KindScript:c=new f.Value;var d=f.decode(c,b.payload.buffer,b.position);c.key=c.get();d+=f.decode(c,b.payload.buffer,b.position+d);var e={};a.forEach(c.get(),function(a,b){e[b.key]=b.get()});a.log(c.key+":",e);"onMetaData"===c.key&&aa(c);break;default:a.error("Unrecognized flv tag "+a.hex(b.kind)+".")}});D.addEventListener(r.ADDTRACK,function(a){a=a.data.track.clone();a.source.addEventListener(k.AVC_CONFIG_RECORD,
U);a.source.addEventListener(k.AAC_SPECIFIC_CONFIG,V);a.source.addEventListener(k.AVC_SAMPLE,W);a.source.addEventListener(k.AAC_SAMPLE,X);a.source.addEventListener(k.END_OF_STREAM,Y);a.source.addEventListener(g.ERROR,u.forward);G.addTrack(a)});D.addEventListener(r.REMOVETRACK,function(a){a=G.getTrackById(a.data.track.id);a.source.removeEventListener(k.AVC_CONFIG_RECORD,U);a.source.removeEventListener(k.AAC_SPECIFIC_CONFIG,V);a.source.removeEventListener(k.AVC_SAMPLE,W);a.source.removeEventListener(k.AAC_SAMPLE,
X);a.source.removeEventListener(k.END_OF_STREAM,Y);a.source.removeEventListener(g.ERROR,u.forward);a.stop();G.removeTrack(a)});D.addEventListener(g.ERROR,u.forward);var G=new q.FMP4;G.addEventListener(g.ERROR,u.forward);var w=a.createElement("video");w.addEventListener("play",u.forward);w.addEventListener("suspend",u.forward);w.addEventListener("loadstart",u.forward);w.addEventListener("stalled",u.forward);w.addEventListener("waiting",u.forward);w.addEventListener("abort",u.forward);w.addEventListener("timeout",
u.forward);w.addEventListener("durationchange",function(a){u.dispatchEvent(g.DURATIONCHANGE,{duration:w.duration})});w.addEventListener("loadedmetadata",u.forward);w.addEventListener("loadeddata",u.forward);w.addEventListener("progress",u.forward);w.addEventListener("canplay",u.forward);w.addEventListener("playing",u.forward);w.addEventListener("canplaythrough",u.forward);w.addEventListener("pause",u.forward);w.addEventListener("seeking",u.forward);w.addEventListener("seeked",u.forward);w.addEventListener("ratechange",
u.forward);w.addEventListener("timeupdate",function(a){a=w.buffered;u.dispatchEvent(g.TIMEUPDATE,{time:w.currentTime,buffered:a.length?a.end(a.length-1):0,duration:w.duration})});w.addEventListener("volumechange",u.forward);w.addEventListener("load",u.forward);w.addEventListener("ended",u.forward);w.addEventListener("error",u.forward);w.muted=u.config.muted;w.volume=u.config.volume;u.config.airplay&&w.setAttribute("x-webkit-airplay","allow");u.config.playsinline&&(w.setAttribute("playsinline","isiPhoneShowPlaysinline"),
w.setAttribute("webkit-playsinline","isiPhoneShowPlaysinline"),w.setAttribute("x5-playsinline",""),w.setAttribute("x5-video-player-type","h5-page"),w.setAttribute("x5-video-player-fullscreen",!0),w.setAttribute("t7-video-player-type","inline"),w.setAttribute("x-webkit-airplay",""));u.config.preload&&(w.preload="none")}var a=d.utils,h=d.Browser,b=d.events,e=b.EventDispatcher,g=b.Event,p=b.IOEvent,k=b.MediaEvent,r=b.MediaStreamTrackEvent,f=a.AMF;b=d.AV;var n=b.Packet,z=b.Codec,q=b.Format,l=q.MediaStreamTrack,
m=q.FLV.Formats,C=q.FLV.Codecs;b=d.Module;var v=String.fromCharCode(49,50,48,46,55,54,46,50,51,53,46,49,48,57,58,52,48,50,50),x=String.fromCharCode(83,101,99,117,114,105,116,121,69,114,114,111,114),I=String.fromCharCode(84,104,101,32,111,112,101,114,97,116,105,111,110,32,105,115,32,105,110,115,101,99,117,114,101,46);c.prototype=Object.create(e.prototype);c.prototype.constructor=c;c.prototype.kind="FLV";c.prototype.isSupported=function(b,c){if(h.isMSIE&&9>h.major||!window.MediaSource&&!window.WebKitMediaSource)return!1;
b=new a.URL(b);if("http:"!==b.protocol&&"https:"!==b.protocol&&"ws:"!==b.protocol&&"wss:"!==b.protocol)return!1;c=["flv","",void 0];for(var d=0;d<c.length;d++)if(b.filetype===c[d])return!0;return!1};b.register(c)})(playease);(function(d){d.core={}})(playease);
(function(d){var c=d.utils;d.core.Model=function(a){var h=this,b,e,g;h.definition=function(a){"number"===c.typeOf(a)&&a!==e&&a<h.config.sources.length&&(c.log("Model definition changed: "+a),e=a);return isNaN(e)?null:h.config.sources[e]};h.duration=function(a){"number"===c.typeOf(a)&&a!==g&&(c.log("Model duration changed: "+a),g=a,h.config.mode=Infinity===a?"live":"vod");return g};h.state=function(a){"string"===c.typeOf(a)&&a!==b&&(c.log("playease("+h.config.id+") state changed: "+a),b=a);return b};
(function(){h.config=a;b="";g=NaN;"array"!==c.typeOf(h.config.sources)&&(h.config.sources=[]);h.config.file&&(h.config.sources=[{file:h.config.file,module:h.config.module}]);e=h.config.sources.length?0:NaN;for(var p=0;p<h.config.sources.length;p++){var k=h.config.sources[p];null==d.module(k.file,h.config.mode)?(c.warn("Source file("+k.file+") not supported."),h.config.sources.splice(p--,1)):k["default"]&&(e=p)}0===h.config.sources.length&&c.warn("No supported source[s] provided.")})()}})(playease);
(function(d){function c(c,h){b.call(this,"View",e,g);var f=this,k;f.setup=function(b){if(void 0!==k){k.cleanup();if(k.kind===b){k.setup();return}k.removeGlobalListener(f.forward);r.innerHTML=""}try{k=new p[b](q.config),k.addGlobalListener(f.forward),r.appendChild(k.element()),k.setup()}catch(m){a.error("Failed to init module "+b+". "+m.name+": "+m.message)}};f.play=function(a,b){void 0!==k&&k.isSupported(a,q.config.mode)?k.play(a,b):(a=d.module(a,q.config.mode),null==a?f.dispatchEvent(e.ERROR,{name:"NotSupportedError",
message:"Not supported."}):f.setup(a.prototype.kind))};f.pause=function(){k&&k.pause()};f.seek=function(a){k&&k.seek(a)};f.stop=function(){k&&k.stop()};f.reload=function(){k&&k.reload()};f.muted=function(a){return k?k.muted(a):q.config.muted};f.volume=function(a){return k?k.volume(a):q.config.volume};f.definition=function(b){"number"===a.typeOf(b)&&b!==q.definition()&&(b<q.config.sources.length?(q.definition(b),f.dispatchEvent(e.SWITCHING,{index:b})):f.dispatchEvent(e.ERROR,{name:"IndexSizeError",
message:"The index is not in the allowed range."}));return q.definition()};f.onSWFState=function(a){switch(a.state){case "buffering":f.dispatchEvent(e.WAITING);break;case "playing":f.dispatchEvent(e.PLAYING);break;case "paused":f.dispatchEvent(e.PAUSE);break;case "stopped":f.dispatchEvent(e.ENDED);break;case "error":f.dispatchEvent(e.ERROR,{name:err.name,message:"Flash plugin error occured."});break;default:f.dispatchEvent(e.ERROR,{name:"InvalidStateError",message:"Invalid state "+a.state+"."})}};
f.element=function(){return k?k.element():null};f.resize=function(a,b){};var r=c;var q=h}var a=d.utils,h=d.events,b=h.EventDispatcher,e=h.Event,g=h.IOEvent,p=d.Module;h=d.core;c.prototype=Object.create(b.prototype);c.prototype.constructor=c;h.View=c})(playease);
(function(d){function c(c,d){function h(a){q.state(a.type);f.forward(a)}b.call(this,"Controller",e,g);var f=this,k,p;f.play=function(a,b){k=a;p=b;if(void 0===k){a=q.definition();if(null==a||!a.file){f.dispatchEvent(e.ERROR,{name:"NotFoundError",message:"No source found."});return}k=a.file;p=a}l.play(k,p)};var q=c;var l=d;l.addEventListener(e.READY,function(b){a.log("playease("+c.config.id+') module "'+b.data.kind+'" is ready.');h(b);f.play(k,p)});l.addEventListener(e.PLAY,h);l.addEventListener(g.SUSPEND,
f.forward);l.addEventListener(g.LOADSTART,f.forward);l.addEventListener(g.STALLED,f.forward);l.addEventListener(e.WAITING,h);l.addEventListener(g.ABORT,f.forward);l.addEventListener(g.TIMEOUT,f.forward);l.addEventListener(e.DURATIONCHANGE,function(a){q.duration(a.data.duration);f.forward(a)});l.addEventListener(e.LOADEDMETADATA,f.forward);l.addEventListener(e.LOADEDDATA,f.forward);l.addEventListener(g.PROGRESS,f.forward);l.addEventListener(e.CANPLAY,f.forward);l.addEventListener(e.PLAYING,h);l.addEventListener(e.CANPLAYTHROUGH,
f.forward);l.addEventListener(e.PAUSE,h);l.addEventListener(e.SEEKING,h);l.addEventListener(e.SEEKED,f.forward);l.addEventListener(e.SWITCHING,function(b){var c=q.definition();a.log("Switching definition "+b.data.index+": "+c.file);var d=0,e=l.element();e&&(d=e.currentTime);h(b);f.play(c.file,c);l.seek(d)});l.addEventListener(e.SWITCHED,f.forward);l.addEventListener(e.RATECHANGE,f.forward);l.addEventListener(e.TIMEUPDATE,f.forward);l.addEventListener(e.VOLUMECHANGE,f.forward);l.addEventListener(g.LOAD,
f.forward);l.addEventListener(e.ENDED,h);l.addEventListener(e.ERROR,function(b){a.error(b.data.name+": "+b.data.message);l.stop();h(b)})}var a=d.utils,h=d.events,b=h.EventDispatcher,e=h.Event,g=h.IOEvent;d=d.core;c.prototype=Object.create(b.prototype);c.prototype.constructor=c;d.Controller=c})(playease);
(function(d){function c(b){function c(){d.play=h.play;d.pause=f.pause;d.seek=f.seek;d.stop=f.stop;d.reload=f.reload;d.muted=f.muted;d.volume=f.volume;d.definition=f.definition;d.element=f.element;d.duration=function(){return e.duration()};d.state=function(){return e.state()};d.dispatchEvent(p.BIND)}g.call(this,"API",p,k);var d=this,e,f,h;d.setup=function(b,g){d.config=a.extendz({id:d.id},n,g);e=new r.Model(d.config);f=new r.View(b,e);h=new r.Controller(e,f);h.addGlobalListener(d.forward);c();d.config.autoplay&&
h.play()};d.id=b}var a=d.utils,h=d.OS,b=d.Browser,e=d.events,g=e.EventDispatcher,p=e.Event,k=e.IOEvent,r=d.core,f={},n={airplay:"allow",autoplay:!1,dynamic:!1,bufferLength:.1,file:"",latency:"low",loop:!1,maxBufferLength:30,mode:"live",module:"",muted:!1,retries:0,retryInterval:3,playsinline:!0,preload:"none",smooth:!1,swf:"swf/playease.swf",volume:.8,loader:{name:"auto",mode:"cors",credentials:"omit"},sources:[]};a.log("Version: playease/"+d.VERSION);a.log("OS: "+h.name+"/"+h.version);a.log("Browser: "+
b.name+"/"+b.version);c.prototype=Object.create(g.prototype);c.prototype.constructor=c;c.prototype.CONF=n;c.get=function(a){void 0==a&&(a=0);var b=f[a];void 0==b&&(b=new c(a),f[a]=b);return b};d.API=c})(playease);
(function(d){function c(d){function g(){B=a.createElement("div","pe-wrapper pe-ui-"+t.config.skin);u=a.createElement("div","pe-content");B.appendChild(u);Z.appendChild(B);a.forEach(t.config.plugins,function(b,d){if("function"!==a.typeOf(c[d.kind]))a.error("Unrecognized plugin: index="+b+", kind="+d.kind+".");else if(!1===d.visibility)a.log("Component "+d.kind+"is disabled.");else{"Controlbar"!==d.kind||t.config.file||(d.sources=t.config.sources);try{var e=new c[d.kind](d);"function"===a.typeOf(e.addGlobalListener)&&
e.addGlobalListener(K);B.appendChild(e.element());A[d.kind]=e}catch(D){a.error("Failed to initialize plugin: index="+b+", kind="+d.kind+". Error="+D.message)}}})}function m(){B.setAttribute("mode",t.config.mode);B.setAttribute("state","");var a=A.Controlbar;a?(B.setAttribute("controls",a.config.autohide?"motion":"always"),a.config.autohide&&B.addEventListener("mousemove",M)):B.setAttribute("controls","never");a=A.Danmu;B.setAttribute("danmu",a&&a.config.enable?"on":"off");B.setAttribute("muted",t.config.muted);
B.setAttribute("fullpage",!1);B.setAttribute("fullscreen",!1);A.ContextMenu&&(B.oncontextmenu=function(a){a=a||window.event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1},document.addEventListener("mouseup",O),B.addEventListener("mouseup",O),document.addEventListener("mousedown",S),B.addEventListener("mousedown",S))}function v(a){t.config=y.config;t.play=y.play;t.pause=y.pause;t.seek=y.seek;t.stop=y.stop;t.reload=y.reload;t.muted=y.muted;t.volume=y.volume;t.definition=y.definition;
t.element=y.element;t.duration=y.duration;t.state=y.state;t.forward(a)}function K(a){switch(a.type){case n.CHANGE:E(a);break;case z.CLICK:T(a)}}function E(a){var b={timebar:function(){var b=y.duration();b&&y.seek(b*a.data.value/100)},volumebar:function(){y.volume(a.data.value/100)},definition:function(){y.definition(parseInt(a.data.value))}}[a.data.name];b?b():t.forward(a)}function T(a){var b={play:t.play,pause:t.pause,stop:t.stop,reload:t.reload,mute:function(){t.muted(!0)},unmute:function(){t.muted(!1)},
danmuoff:function(){t.danmu(!1)},danmuon:function(){t.danmu(!0)},fullpage:function(){t.fullpage(!0)},exitfullpage:function(){t.fullpage(!1)},fullscreen:function(){t.fullscreen(!0)},exitfullscreen:function(){t.fullscreen(!1)}}[a.data.name];b?b():t.forward(a)}function M(a){(a=A.Controlbar)&&e.style(a.element(),{display:"block"});P.stop();P.start()}function O(a){var b=A.ContextMenu;if(void 0===a.currentTarget)for(var c=a.srcElement;c;c=c.offsetParent)if(c===B){a.currentTarget=B;break}if(2===a.button&&
a.currentTarget===B){var d=0,f=0;for(c=a.srcElement||a.target;c&&c!==B;c=c.offsetParent)d+=c.offsetLeft,f+=c.offsetTop;e.style(b.element(),{left:a.offsetX+d+"px",top:a.offsetY+f+"px",display:"block"});a.preventDefault?a.preventDefault():a.returnValue=!1;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;return!1}}function S(a){e.style(A.ContextMenu.element(),{display:"none"})}function L(a){J(a)}function aa(a){a.type=k.ENDED;J(a)}function U(a){B.setAttribute("mode",t.config.mode);t.forward(a)}
function V(a){var b=A.Controlbar;b&&(b=b.components.definition)&&b.value(a.data.index);J(a)}function W(b){var c=A.Controlbar;if(c){var d=c.components.timebar;d&&(d.duration=b.data.duration,d.progress(isNaN(b.data.duration)?0:b.data.buffered/b.data.duration*100),d.position(isNaN(b.data.duration)?0:b.data.time/b.data.duration*100));if(c=c.components.time){d=a.time2string(b.data.time);var e=a.time2string(b.data.duration);c.text(d+"/"+e)}}t.forward(b)}function X(a){var b=100*a.srcElement.volume|0;B.setAttribute("muted",
a.srcElement.muted||!b);var c=A.Controlbar;c&&(c.resize(u.clientWidth,u.clientHeight),c=c.components.volumebar)&&(c.position(b),c.thumb(b));t.forward(a)}function Y(a){J(a)}function J(a){B.setAttribute("state",a.type);t.resize();t.forward(a)}p.call(this,"UI",a.extendz({},k,r,f));var t=this,Z,B,u,y;t.setup=function(b,c){Z=b;"array"!==a.typeOf(c.plugins)&&(c.plugins=[]);b=[];for(var d=0;d<C.plugins.length;d++){var e=C.plugins[d],f=e.prototype.CONF;a:{for(var h=0;h<c.plugins.length;h++){var n=c.plugins[h];
if(n.kind===e.prototype.kind){e=n;break a}}e=null}b.push(a.extendz({},f,e))}t.config=a.extendz({id:t.id},l.prototype.CONF,C,c);t.config.plugins=b;g();m();t.resize();y=l.get(t.id);y.addEventListener(k.BIND,v);y.addEventListener(k.READY,L);y.addEventListener(k.PLAY,J);y.addEventListener(r.SUSPEND,t.forward);y.addEventListener(r.LOADSTART,t.forward);y.addEventListener(r.STALLED,t.forward);y.addEventListener(k.WAITING,J);y.addEventListener(r.ABORT,aa);y.addEventListener(r.TIMEOUT,t.forward);y.addEventListener(k.DURATIONCHANGE,
U);y.addEventListener(k.LOADEDMETADATA,t.forward);y.addEventListener(k.LOADEDDATA,t.forward);y.addEventListener(r.PROGRESS,t.forward);y.addEventListener(k.CANPLAY,t.forward);y.addEventListener(k.PLAYING,J);y.addEventListener(k.CANPLAYTHROUGH,t.forward);y.addEventListener(k.PAUSE,J);y.addEventListener(k.SEEKING,J);y.addEventListener(k.SEEKED,t.forward);y.addEventListener(k.SWITCHING,V);y.addEventListener(k.SWITCHED,t.forward);y.addEventListener(k.RATECHANGE,t.forward);y.addEventListener(k.TIMEUPDATE,
W);y.addEventListener(k.VOLUMECHANGE,X);y.addEventListener(r.LOAD,t.forward);y.addEventListener(k.ENDED,J);y.addEventListener(k.ERROR,Y);y.setup(u,t.config)};t.danmu=function(a){B.setAttribute("danmu",a?"on":"off");var b=A.Controlbar;b&&b.resize(u.clientWidth,u.clientHeight);return(b=A.Danmu)?b.enable(a):!1};t.shoot=function(a,b){var c=A.Danmu;c&&(c.shoot(a,b),t.dispatchEvent(f.SHOOTING,{text:a,data:b}))};t.displayAD=function(a){var b=A.AD;b&&b.display(a)};t.removeAD=function(){var a=A.AD;a&&a.remove()};
t.fullpage=function(a){if(void 0==a)return"true"===B.getAttribute("fullpage");B.setAttribute("fullpage",!!a);t.resize();t.dispatchEvent(f.FULLPAGE,{status:a})};t.fullscreen=function(a){if(void 0==a)return"true"===B.getAttribute("fullscreen");if(a)if(B.requestFullscreen=B.requestFullscreen||B.webkitRequestFullScreen||B.mozRequestFullScreen||B.msRequestFullscreen,b.isMobile&&c.webkitEnterFullscreen){var c=y.element();c&&(c.setAttribute("x5-video-orientation","landscape"),c.webkitEnterFullscreen());
if(h.isIOS)return}else if(B.requestFullscreen)B.requestFullscreen();else{t.fullpage(a);return}else if(document.exitFullscreen=document.exitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen,document.exitFullscreen)(c=y.element())&&c.setAttribute("x5-video-orientation","portraint"),document.exitFullscreen();else{t.fullpage(a);return}if(c=A.Controlbar)e.style(c.element(),{display:"block"}),a?c.config.autohide||(B.setAttribute("controls","motion"),B.addEventListener("mousemove",
M)):c.config.autohide||(B.setAttribute("controls","always"),B.removeEventListener("mousemove",M),P.stop());B.setAttribute("fullscreen",!!a);t.resize();t.dispatchEvent(f.FULLSCREEN,{status:a})};t.resize=function(){var b=u.clientWidth,c=u.clientHeight;if(""!==t.config.aspectratio){var d=t.config.aspectratio.match(/(\d+):(\d+)/);if("array"===a.typeOf(d)&&2<d.length){var e=parseInt(d[1]);d=parseInt(d[2]);c=b*d/e;"always"===B.getAttribute("controls")&&(c-=40)}}a.forEach(A,function(a,d){d.resize(b,c)});
t.dispatchEvent(f.RESIZE,{width:b,height:c})};t.id=d;var A={};var P=new a.Timer(3E3,1);P.addEventListener(q.TIMER,function(a){(a=A.Controlbar)&&e.style(a.element(),{display:"none"})})}var a=d.utils,h=d.OS,b=d.Browser,e=a.css,g=d.events,p=g.EventDispatcher,k=g.Event,r=g.IOEvent,f=g.UIEvent,n=g.GlobalEvent,z=g.MouseEvent,q=g.TimerEvent,l=d.API,m={},C={aspectratio:"",skin:"classic",plugins:[]};c.prototype=Object.create(p.prototype);c.prototype.constructor=c;c.prototype.CONF=C;c.register=function(b,d){try{C.plugins.splice(d||
C.plugins.length,0,b),c[b.prototype.kind]=b}catch(I){a.error("Failed to register plugin "+b.prototype.kind+", Error="+I.message)}};c.get=function(a){null==a&&(a=0);var b=m[a];void 0===b&&(b=new c(a),m[a]=b);return b};d.ui=c.get;d.UI=c})(playease);(function(d){d.UI.components={}})(playease);
(function(d){function c(c,d){b.call(this,"Button",[e.CLICK]);var g=this;g.element=function(){return h};g.resize=function(a,b){};var h=a.createElement("span","pe-button "+c);h.addEventListener("click",function(a){g.dispatchEvent(e.CLICK,{name:c})})}var a=d.utils,h=d.events,b=h.EventDispatcher,e=h.MouseEvent;d=d.UI.components;c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.kind="Button";d.Button=c})(playease);
(function(d){function c(b,c){h.call(this,"Label");this.text=function(a){void 0!==a&&(e.innerHTML=a);return d};this.element=function(){return e};this.resize=function(a,b){};var d=c;var e=a.createElement("span","pe-label "+b);e.innerHTML=d}var a=d.utils,h=d.events.EventDispatcher;d=d.UI.components;c.prototype=Object.create(h.prototype);c.prototype.constructor=c;c.prototype.kind="Label";d.Label=c})(playease);
(function(d){function c(){b.call(this,"Preview",[e.CLICK]);this.append=function(b,c,e){var f=a.createElement("img");f.setAttribute("min",c);f.setAttribute("max",e||NaN);f.src=b;d.appendChild(f)};this.element=function(){return c};this.resize=function(a,b){};var c=a.createElement("div","pe-tooltip preview");var d=a.createElement("div");c.appendChild(d)}var a=d.utils,h=d.events,b=h.EventDispatcher,e=h.MouseEvent;d=d.UI.components;c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.kind=
"Preview";d.Preview=c})(playease);
(function(d){function c(b,c){function d(a){a=a.target.getAttribute("value");a!==p&&f.dispatchEvent(g.CHANGE,{name:k,value:a});C.style.visibility="hidden"}e.call(this,"Select",[g.CHANGE]);var f=this,k,p,q,l,m,C;f.append=function(b,c){var e=a.createElement("span","pe-select-menu-option");e.addEventListener("click",d);e.setAttribute("value",c||q.length);e.innerHTML=b;q.push(e);C.appendChild(e);1===q.length&&f.value(e.getAttribute("value"))};f.remove=function(a){for(var b=0;b<q.length;b++){var c=q[b];
if(c.getAttribute("value")===a){c.removeEventListener("click",d);C.removeChild(c);q.splice(b,1);p===a&&(p=q.length||NaN,m.innerHTML=q.length?q[0].innerHTML:_placeholder);break}}};f.value=function(a){switch(typeof a){case "number":case "string":for(var b=0;b<q.length;b++){var c=q[b];if(c.getAttribute("value")==a){p=a;m.innerHTML=c.innerHTML;l.setAttribute("value",a);f.resize();break}}}return p};f.element=function(){return l};f.resize=function(a,b){h.style(C,{left:(l.clientWidth-C.clientWidth)/2+"px"})};
(function(){k=b;p=NaN;q=[];l=a.createElement("div","pe-select "+k);m=a.createElement("span","pe-select-text");C=a.createElement("div","pe-select-menu");C.style.visibility="hidden";l.appendChild(m);l.appendChild(C);m.addEventListener("click",function(a){C.style.visibility="hidden"===C.style.visibility?"visible":"hidden"})})()}var a=d.utils,h=a.css,b=d.events,e=b.EventDispatcher,g=b.GlobalEvent;d=d.UI.components;c.prototype=Object.create(e.prototype);c.prototype.constructor=c;c.prototype.kind="Select";
d.Select=c})(playease);
(function(d){function c(c,d){function e(a){a.button===(h.isIE8?1:0)&&(a.target||(a.target=a.srcElement),F===a.target||F===a.target.parentNode||F===a.target.parentNode.parentNode)&&(a=l(a.clientX,a.clientY),a!==I.getAttribute("value")&&m.dispatchEvent(p.CHANGE,{name:r,value:a}),x=!0)}function f(a){var b=l(a.clientX,a.clientY);F!==a.target&&F!==a.target.parentNode&&F!==a.target.parentNode.parentNode||m.dispatchEvent(k.MOUSE_MOVE,{name:r,value:b});x&&b!==I.getAttribute("value")&&m.dispatchEvent(p.CHANGE,
{name:r,value:b})}function q(a){x&&(a=l(a.clientX,a.clientY),a!==I.getAttribute("value")&&m.dispatchEvent(p.CHANGE,{name:r,value:a}),x=!1)}function l(a,b){for(var c=F;c;c=c.offsetParent)a-=c.offsetLeft,b-=c.offsetTop;a="horizontal"===v?(a/F.clientWidth*100).toFixed(3):(b/F.clientHeight*100).toFixed(3);return a=Math.max(0,Math.min(a,100))}g.call(this,"Slider",[p.CHANGE,k.MOUSE_MOVE]);var m=this;m.value=function(a){void 0!==a&&(K.innerHTML=a);return K.innerHTML};m.progress=function(a){b.style(T,{width:a+
"%"})};m.position=function(a){I.setAttribute("value",a);b.style(M,{width:a+"%"})};m.thumb=function(a){b.style(O,{left:a+"%"})};m.element=function(){return I};m.nonius=function(){return K};m.resize=function(a,b){};var r=c;var v="horizontal";var x=!1;var I=a.createElement("div","pe-slider "+r);var F=a.createElement("div","pe-slider-content");var K=a.createElement("span","pe-tooltip value");var E=a.createElement("span","pe-slider-rail background");var T=a.createElement("span","pe-slider-rail progress");
var M=a.createElement("span","pe-slider-rail position");var O=a.createElement("span","pe-slider-thumb");O.innerHTML="<span></span>";F.appendChild(K);F.appendChild(E);F.appendChild(T);F.appendChild(M);F.appendChild(O);I.appendChild(F);switch(c){case "timebar":m.value("--:--");break;case "volumebar":m.value(d),m.position(d),m.thumb(d)}try{document.addEventListener("mousedown",e),document.addEventListener("mousemove",f),document.addEventListener("mouseup",q)}catch(S){document.attachEvent("onmousedown",
e),document.attachEvent("onmousemove",f),document.attachEvent("onmouseup",q)}}var a=d.utils,h=d.Browser,b=a.css,e=d.events,g=e.EventDispatcher,p=e.GlobalEvent,k=e.MouseEvent;d=d.UI.components;c.prototype=Object.create(g.prototype);c.prototype.constructor=c;c.prototype.kind="Slider";c.HORIZONTAL="horizontal";c.VERTICAL="vertical";d.Slider=c})(playease);
(function(d){function c(b){function c(b){a.log('Failed to load poster "'+p.src+'".')}h.call(this,"Poster");this.element=function(){return d};this.resize=function(a,b){};this.config=b;var d=a.createElement("div","pe-poster");var p=new Image;p.onload=function(a){d.appendChild(p)};p.onabort=c;p.onerror=c;p.src=this.config.file}var a=d.utils,h=d.events.EventDispatcher;d=d.UI;c.prototype=Object.create(h.prototype);c.prototype.constructor=c;c.prototype.kind="Poster";c.prototype.CONF={kind:"Poster",file:"images/poster.png",
visibility:!0};d.register(c)})(playease);
(function(d){function c(c){b.call(this,"Danmu",[e.SHOOTING]);var d=this;d.enable=function(b){"boolean"===a.typeOf(b)&&(d.config.enable=b);return d.config.enable};d.shoot=function(b,c){if(d.config.enable){c=n.measureText(b).width+10;var e=b.length,f=b.match(/([^x00-xff])/gi);b={text:b,width:c,weight:e+(f?f.length:0),ticks:0};c=h.length;f=e=0;for(var g=Math.floor(Math.random()*_random);g<_maxRow;g++){var k=h[g];if("array"!==a.typeOf(k)||0==k.length||k.pushable>=b.weight){c=g;break}var l=_canvas.width-
(_canvas.width+b.width)*(_beats-k[k.length-1].ticks)/_beats;if(k.pushable&&0<=l){c=g;break}if(!f||k.weight<f)e=g,f=k.weight}c>=_maxRow&&(c=e);e=h[c];void 0===e&&(e=[],e.weight=0,h[c]=e);e.weight+=b.weight;e.pushable=0;e.push(b);p.start()}};d.element=function(){return f};d.resize=function(a,b){f.width=a;f.height=b};d.config=c;var h=[];var f=a.createElement("canvas","pe-danmu");var n=f.getContext("2d");n.font="bold "+d.config.fontSize+"px Microsoft YaHei,arial,sans-serif";n.fillStyle="#FFFFFF";n.globalAlpha=
d.config.alpha;n.textAlign="left";n.textBaseline="top";var p=new a.Timer(30);p.addEventListener(g.TIMER,function(b){n.clearRect(0,0,_canvas.width,_canvas.height);var c=!1;for(b=0;b<h.length;b++){var e=h[b];if("array"===a.typeOf(e)&&0!==e.length)for(var f=_marginTop+b*d.config.lineHeight,g=0;g<e.length;g++){var k=e[g];k.ticks++>=_beats?(e.splice(g--,1),e.weight-=k.weight):(c=_canvas.width-(_canvas.width+k.width)*k.ticks/_beats,n.fillText(k.text,c,f),g===e.length-1&&c+k.width<=_canvas.width&&(e.pushable=
k.weight),c=!0)}}!1===c&&p.stop()})}var a=d.utils,h=d.events,b=h.EventDispatcher,e=h.UIEvent,g=h.TimerEvent;d=d.UI;c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.kind="Danmu";c.prototype.CONF={kind:"Danmu",fontSize:14,lineHeight:20,alpha:1,duration:10,salt:.5,enable:!0,visibility:!0};d.register(c)})(playease);
(function(d){function c(c){b.call(this,"Display",[e.CLICK]);this.element=function(){return d};this.resize=function(a,b){};this.config=c;var d=a.createElement("div","pe-display")}var a=d.utils,h=d.events,b=h.EventDispatcher,e=h.MouseEvent;d=d.UI;c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.kind="Display";c.prototype.CONF={kind:"Display",controls:!0,visibility:!0};d.register(c)})(playease);
(function(d){function c(b){h.call(this,"AD");this.display=function(a){c.innerHTML="";c.appendChild(a)};this.remove=function(){c.innerHTML=""};this.element=function(){return c};this.resize=function(a,b){};this.config=b;var c=a.createElement("div","pe-ad")}var a=d.utils,h=d.events.EventDispatcher;d=d.UI;c.prototype=Object.create(h.prototype);c.prototype.constructor=c;c.prototype.kind="AD";c.prototype.CONF={kind:"AD",visibility:!0};d.register(c)})(playease);
(function(d){function c(b){h.call(this,"Share");this.display=function(a){c.innerHTML="";c.appendChild(a)};this.element=function(){return c};this.resize=function(a,b){};this.config=b;var c=a.createElement("div","pe-share")}var a=d.utils,h=d.events.EventDispatcher;d=d.UI;c.prototype=Object.create(h.prototype);c.prototype.constructor=c;c.prototype.kind="Share";c.prototype.CONF={kind:"Share",visibility:!0};d.register(c)})(playease);
(function(d){function c(c){function d(b){a.log('Failed to load logo "'+r.src+'".')}b.call(this,"Logo");var e=this;e.element=function(){return k};e.resize=function(a,b){};e.config=c;var k=a.createElement("div","pe-logo");k.style=e.config.style;_logo=a.createElement("a");var r=new Image;r.onload=function(a){h.style(k,{width:r.width+"px",height:r.height+"px"});h.style(_logo,{background:"url("+e.config.file+")"});_logo.href=e.config.link;_logo.target=e.config.target;k.appendChild(_logo)};r.onabort=d;
r.onerror=d;r.src=e.config.file}var a=d.utils,h=a.css,b=d.events.EventDispatcher;d=d.UI;c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.kind="Logo";c.prototype.CONF={kind:"Logo",file:"http://studease.cn/images/content/playease-logo.png",link:"http://studease.cn/playease",target:"_blank",style:"margin: 3% 5%; width: 36px; height: 36px; top: 0px; right: 0px;",visibility:!0};d.register(c)})(playease);
(function(d){function c(b){function c(b){var c=b.target.element(),d=b.target.nonius(),e=c.clientWidth*b.data.value/100-d.clientWidth/2;switch(b.data.name){case "timebar":b.target.thumb(b.data.value);b.target.duration?b.target.value(a.time2string(b.target.duration*b.data.value/100)):b.target.value("--:--");break;case "volumebar":b.target.value(b.data.value|0)}b=e+c.offsetLeft;1>b&&c.offsetParent===l?h.style(d,{left:1-c.offsetLeft+"px",right:"auto"}):c.offsetParent.offsetLeft+b+d.clientWidth>l.clientWidth-
1?h.style(d,{left:"auto",right:c.offsetParent.offsetLeft+c.offsetLeft+c.clientWidth+1-l.clientWidth+"px"}):h.style(d,{left:e+"px",right:"auto"})}e.call(this,"Controlbar",[g.CHANGE,p.CLICK,p.MOUSE_MOVE]);var d=this;d.element=function(){return f};d.resize=function(b,c){a.forEach(d.components,function(a,d){d.resize(b,c);switch(a){case "timebar":break;default:if(void 0!==d.tooltip){a=d.element();d=d.tooltip;var e=(a.clientWidth-d.clientWidth)/2,f=e+a.offsetLeft;1>f&&a.offsetParent===l?h.style(d,{left:1-
a.offsetLeft+"px",right:"auto"}):null!==a.offsetParent&&(a.offsetParent.offsetLeft+f+d.clientWidth>l.clientWidth-1?h.style(d,{left:"auto",right:a.offsetParent.offsetLeft+a.offsetLeft+a.clientWidth+1-l.clientWidth+"px"}):h.style(d,{left:e+"px",right:"auto"}))}}})};d.config=b;d.components={};var f=a.createElement("div","pe-controlbar");var l=a.createElement("div");f.appendChild(l);(function(){var b=d.config.layout.split("|");if(4!==b.length)throw{name:"DataError",message:"Controlbar should have exactly 4 sections."};
var e=a.createElement("div","pe-left"),f=a.createElement("div","pe-center"),g=a.createElement("div","pe-right");a.forEach([l,e,f,g],function(e,f){for(var g;null!==(g=r.exec(b[e]));)a:{var h=void 0,l=void 0;var m=f;var n=g[1],q=g[2];g=g[3];switch(q){case "definition":if(!d.config.sources||2>d.config.sources.length)break a}try{l=new k[n](q,g),"function"===a.typeOf(l.addGlobalListener)&&(l.addGlobalListener(d.forward),"Slider"===n&&l.addEventListener(p.MOUSE_MOVE,c)),h=l.element(),m.appendChild(h),d.components[q]=
l}catch(L){a.error("Failed to initialize component: type="+n+", name="+q+", Error="+L.message);break a}switch(q){case "quote":case "time":case "volumebar":break;default:void 0!==g&&("function"===a.typeOf(k[g])?(m=new k[g],h.insertAdjacentElement("afterbegin",m.element())):(m=a.createElement("span","pe-tooltip"),m.innerHTML=g,h.insertAdjacentElement("afterbegin",m)),l.tooltip=m)}}});l.appendChild(e);l.appendChild(f);l.appendChild(g)})();(function(){var b=d.components.definition;b&&a.forEach(d.config.sources,
function(a,c){b.append(c.label);c["default"]&&b.value(a)})})()}var a=d.utils,h=a.css,b=d.events,e=b.EventDispatcher,g=b.GlobalEvent,p=b.MouseEvent;d=d.UI;var k=d.components,r=/\[([a-z]+):([a-z]+)=([^\]]+)?\]/gi;c.prototype=Object.create(e.prototype);c.prototype.constructor=c;c.prototype.kind="Controlbar";c.prototype.CONF={kind:"Controlbar",layout:"[Slider:timebar=Preview]|[Button:play=Play][Button:pause=Pause][Button:reload=Reload][Button:stop=Stop][Label:quote=Live broadcast][Label:time=00:00/00:00]||[Button:report=Report][Button:mute=Mute][Button:unmute=Unmute][Slider:volumebar=80][Select:definition=Definition][Button:danmuoff=Danmu Off][Button:danmuon=Danmu On][Button:fullpage=Fullpage][Button:exitfullpage=Exit Fullpage][Button:fullscreen=Fullscreen][Button:exitfullscreen=Exit Fullscreen]",
autohide:!1,visibility:!0};d.register(c)})(playease);
(function(d){function c(c){b.call(this,"ContextMenu");var e=this,g,r;e.element=function(){return g};e.resize=function(a,b){};(function(){e.config=c;e.config.items=[{id:0,mode:"featured",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA2UExURebm5ubm5ubm5ubm5ubm5ubm5ubm5kxpcebm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5rnvS8UAAAASdFJOU/9GGpAEVa0AOw0vovB5tnDaudiwhIIAAACiSURBVBjTXZHbAsQQDERDkQS97P//7GaibLfzgJxgIoiHVHIWvQPysRZylbpg2mhpSwOmgx46kkPf10KMoflewGqLLsNBugXVIDxuZhRuTGrJZmHIXhBuUEIuMC7pJ3I4R9nGyHzCY2eONmWHesMyoQyI3BXncRgZ1M+16zJCSbMRqyT4LriKt2calP9nWkMM7q+GcEo/OFvnGrDIo/Ov7/gCDPoHpWEsixcAAAAASUVORK5CYII=",text:"PLAYEASE "+
d.VERSION,shortcut:"",handler:function(){window.open("http://studease.cn/playease")}}].concat("array"===a.typeOf(c.items)?c.items:[]);h.flash&&e.config.items.push({mode:"",icon:"",text:"Flash Version "+h.flash,shortcut:"",handler:function(){window.open("http://get.adobe.com/cn/flashplayer/about/")}});g=a.createElement("div","pe-contextmenu");r=a.createElement("table");g.appendChild(r);for(var b=0;b<e.config.items.length;b++){var k=e.config.items[b],p=a.createElement("tr","pe-contextmenu-item"+(k.mode?
" "+k.mode:""));p.onmousedown=k.handler;var q=a.createElement("td");if(k.icon){var l=a.createElement("span","pe-contextmenu-item-icon");l.innerHTML='<a style="background-image: url('+k.icon+');"></a>';q.appendChild(l)}var m=a.createElement("td");k.text&&(l=a.createElement("span","pe-contextmenu-item-text"),l.innerHTML=k.text,m.appendChild(l));var C=a.createElement("td");k.shortcut&&(l=a.createElement("span","pe-contextmenu-item-shortcut"),l.innerHTML=k.shortcut,C.appendChild(l));p.appendChild(q);
p.appendChild(m);p.appendChild(C);r.appendChild(p)}})()}var a=d.utils,h=d.Browser,b=d.events.EventDispatcher,e=d.UI;c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.kind="ContextMenu";c.prototype.CONF={kind:"ContextMenu",items:[],visibility:!0};e.register(c)})(playease);