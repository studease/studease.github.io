playease=function(){if(playease.API)return playease.API.get.apply(this,arguments)};playease.VERSION="2.0.63";playease.DEBUG=!1;
(function(e){var d={extendz:function(){var a=Array.prototype.slice.call(arguments,0),c=a[0];switch(d.typeof(c)){case "null":case "number":case "string":throw{name:"TypeError",message:"Could not extend to type "+d.typeof(c)+"."};}for(var b=1;b<a.length;b++){var g=a[b];switch(d.typeof(g)){case "null":case "number":case "string":e.DEBUG&&d.warn("Could not extend from type "+d.typeof(g));break;case "array":d.forEach(g,function(b,g){switch(d.typeof(g)){case "object":c.push(d.extendz({},g));break;case "array":c.push(d.extendz([],
g));break;default:"array"===d.typeof(c)?c.push(g):c[b]=g}});break;default:d.forEach(g,function(b,g){switch(d.typeof(g)){case "object":switch(d.typeof(c[b])){case "null":case "number":case "string":c[b]={}}c[b]=d.extendz(c[b],g);break;case "array":c[b]=d.extendz([],g);break;default:c[b]=g}})}}return c},forEach:function(a,c){for(var b in a)a.hasOwnProperty&&"function"===d.typeof(a.hasOwnProperty)?a.hasOwnProperty(b)&&c(b,a[b]):c(b,a[b])},getCookie:function(a){var c;return(c=document.cookie.match(new RegExp("(^| )"+
a+"=([^;]*)(;|$)")))?unescape(c[2]):null},padStart:function(a,c,b){for(a+="";a.length<c;)a=b+a;return a},padEnd:function(a,c,b){for(a+="";a.length<c;)a+=b;return a},hex:function(a){return"0x"+d.padStart(a.toString(16),2,"0")},time2string:function(a){var c="",b=a/3600|0,g=a%3600/60|0;a=a%60|0;b&&(c+=d.padStart(b,2,"0")+":");return c+=d.padStart(g,2,"0")+":"+d.padStart(a,2,"0")},typeof:function(a){if(null===a||void 0===a)return"null";var c=typeof a;if("object"===c)try{var b=Object.prototype.toString.call(a).match(/^\[object ([a-z]+)\]$/i);
if(b&&1<b.length&&b[1])return b[1].toLowerCase()}catch(g){}return c},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},indexOf:function(a,c){if("array"===d.typeof(a))for(var b=0;b<a.length;b++)if(a[b]===c)return b;return-1},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=16*Math.random()|0;return("x"===a?c:c&3|8).toString(16)})}};void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.MAX_SAFE_INTEGER&&(Number.MAX_SAFE_INTEGER=Math.pow(2,
53)-1);void 0===Number.MIN_SAFE_INTEGER&&(Number.MIN_SAFE_INTEGER=-1*Number.MAX_SAFE_INTEGER);d.equal=function(a,c){return Math.abs(a-c)<Number.EPSILON};d.createElement=function(a,c){a=document.createElement(a);c&&(a.className=c);return a};d.addClass=function(a,c){var b="string"===d.typeof(a.className)?a.className.split(" "):[];c="array"===d.typeof(c)?c:c.split(" ");d.forEach(c,function(g,a){-1===d.indexOf(b,a)&&b.push(a)});a.className=d.trim(b.join(" "))};d.hasClass=function(a,c){a=a.className||
"";c="array"===d.typeof(c)?c:c.split(" ");for(var b=0;b<c.length;b++)if(-1===a.search(new RegExp("\\b"+c[b]+"\\b","i")))return!1;return!0};d.removeClass=function(a,c){var b="string"===d.typeof(a.className)?a.className.split(" "):[];c="array"===d.typeof(c)?c:c.split(" ");d.foreach(c,function(g,a){g=d.indexOf(b,a);0<=g&&b.splice(g,1)});a.className=d.trim(b.join(" "))};d.emptyElement=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};var a=window.console=window.console||{log:function(){},warn:function(){},
error:function(){}};d.debug=function(){e.DEBUG&&d.log.apply(d,arguments)};d.log=function(){var h=Array.prototype.slice.call(arguments,0);"object"===d.typeof(a)?a.log.apply(a,h):a.log(h)};d.warn=function(){var h=Array.prototype.slice.call(arguments,0);"object"===d.typeof(a)?a.warn.apply(a,h):a.warn(h)};d.error=function(){var h=Array.prototype.slice.call(arguments,0);"object"===d.typeof(a)?a.error.apply(a,h):a.error(h)};e.utils=d})(playease);
(function(e){function d(b){var a=this;a.set=function(b,g,d){switch(a.type){case c.DOUBLE:if("number"!==h.typeof(g))throw{name:"TypeError",message:"Value should be number."};break;case c.BOOLEAN:if("boolean"!==h.typeof(g))throw{name:"TypeError",message:"Value should be boolean."};case c.STRING:case c.LONG_STRING:if("string"!==h.typeof(g))throw{name:"TypeError",message:"Value should be string."};break;case c.OBJECT:case c.ECMA_ARRAY:if("array"!==h.typeof(g))throw{name:"TypeError",message:"Value should be array."};
for(d=0;d<g.length;d++){var f=g[d];a.table[f.key]=f}break;case c.STRICT_ARRAY:if("array"!==h.typeof(g))throw{name:"TypeError",message:"Value should be array."};break;case c.DATE:if("number"!==h.typeof(g))throw{name:"TypeError",message:"Value should be number."};if("number"!==h.typeof(d))throw{name:"TypeError",message:"Offset not presented."};a.offset=d;break;case c.NULL:case c.UNDEFINED:if("null"!==h.typeof(g))throw{name:"TypeError",message:"Value should be null."};break;default:throw{name:"TypeError",
message:"Unrecognized amf type "+a.type+"."};}a.key=b;a.value=g;return a};a.get=function(){switch(a.type){case c.DATE:return new Date(a.value+6E4*a.offset);default:return a.value}};a.type=b;a.key="";a.value=null;a.table={};a.offset=0;a.ended=!1}function a(b,a){for(var g=0,m=0;m<a.value.length;m++){var d=a.value[m];d.key&&(d=crypt.stringToByteArray(d.key),b.WriteUint16(d.length,!1),b.Write(d),g+=2+d.length);g+=c.encode(b,a)}return g}var h=e.utils,c={DOUBLE:0,BOOLEAN:1,STRING:2,OBJECT:3,MOVIE_CLIP:4,
NULL:5,UNDEFINED:6,REFERENCE:7,ECMA_ARRAY:8,END_OF_OBJECT:9,STRICT_ARRAY:10,DATE:11,LONG_STRING:12,UNSUPPORTED:13,RECORD_SET:14,XML:15,TYPED_OBJECT:16,AMF3_DATA:17,decode:function(b,a,d){if(1>a.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf Value."};var g=0,p=new DataView(a,d);b.type=p.getUint8(g);g+=1;p={0:c.decodeDouble,1:c.decodeBoolean,2:c.decodeString,3:c.decodeObject,5:c.decodeNull,6:c.decodeUndefined,8:c.decodeECMAArray,9:c.decodeEndOfObject,10:c.decodeStrictArray,
11:c.decodeDate,12:c.decodeLongString}[b.type];if(!p)throw{name:"TypeError",message:"Unrecognized amf type "+b.type+"."};return g+=p(b,a,d+g)},decodeDouble:function(b,a,c){if(8>a.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf double."};a=new DataView(a,c);b.value=a.getFloat64(0);return 8},decodeBoolean:function(b,a,c){if(1>a.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf boolean."};a=new DataView(a,c);b.value=!!a.getUint8(0);return 1},
decodeString:function(b,a,c){if(2>a.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf string."};var g=0,d=(new DataView(a,c)).getUint16(g);g+=2;0<d?(b.value=String.fromCharCode.apply(String,new Uint8Array(a,c+g,d)),g+=d):b.value="";return g},decodeObject:function(b,a,h){if(3>a.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf object."};var g=0,p=a.byteLength-h;for(b.value=[];g<p;){var f=new d;g+=c.decodeString(f,a,h+g);f.key=f.get();g+=c.decode(f,
a,h+g);if(f.type===c.END_OF_OBJECT)break;b.value.push(f);b.table[f.key]=f}return g},decodeNull:function(b,a,c){b.value=null;return 0},decodeUndefined:function(b,a,c){b.value=void 0;return 0},decodeECMAArray:function(b,a,d){if(4>a.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf ecma array."};var g=4;new DataView(a,d);return g+=c.decodeObject(b,a,d+g)},decodeEndOfObject:function(b,a,c){b.ended=!0;return 0},decodeStrictArray:function(b,a,h){if(4>a.byteLength)throw{name:"DataError",
message:"Data not enough while decoding amf strict array."};var g=0,p=new DataView(a,h),f=p.getUint32(g);g+=4;var l=a.byteLength-h;b.value=[];for(var e=0;e<f&&g<l;e++){var n=new d;g+=c.decode(n,a,h+g);b.value.push(n)}g+3<=l&&0===p.getUint8(g)&&0===p.getUint8(g+1)&&p.getUint8(g+2)===c.END_OF_OBJECT&&(b.ended=!0,g+=3);return g},decodeDate:function(a,g,c){if(10>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf date."};var b=0;g=new DataView(g,c);a.Timestamp=g.getFloat64(b);
b+=8;a.Timeoffset=g.getInt16(b);return b+2},decodeLongString:function(a,g,c){if(4>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf long string."};var b=0,d=(new DataView(g,c)).getUint32(b);b+=4;0<d&&(a.value=String.fromCharCode.apply(String,new Uint8Array(g,c+b,d)),b+=d);return b},appendBytes:function(a,g){a.Write(g)},appendInt8:function(a,g){a.writeInt8(g)},appendInt16:function(a,g,c){a.WriteInt16(g,c)},appendInt32:function(a,g,c){a.WriteInt32(g,c)},appendUint8:function(a,
g){a.writeUint8(g)},appendUint16:function(a,g,c){a.WriteUint16(g,c)},appendUint32:function(a,g,c){a.WriteUint32(g,c)},encode:function(a,g){var b={0:c.encodeDouble,1:c.encodeBoolean,2:c.encodeString,3:c.encodeObject,5:c.encodeNull,6:c.encodeUndefined,8:c.encodeECMAArray,10:c.encodeStrictArray,11:c.encodeDate,12:c.encodeLongString}[g.type];if(!b)throw{name:"TypeError",message:"Unrecognized amf type "+g.type+"."};return b(a,g)},encodeNumber:function(a,g){a.WriteUint8(c.DOUBLE);a.WriteFloat64(g.value,
!1);return 9},encodeBoolean:function(a,g){a.WriteUint8(c.BOOLEAN);a.WriteUint8(g.value?1:0);return 2},encodeString:function(a,g){if(!g.value)return 0;if(65535<=g.value.length)return c.encodeLongString(a,g);g=crypt.stringToByteArray(g.value);a.WriteUint8(c.STRING);a.WriteUint16(g.length,!1);a.Write(g);return 3+g.length},encodeObject:function(b,g){var d=1;b.WriteUint8(c.OBJECT);d+=a(g);g.ended&&(b.WriteUint16(0),b.WriteUint8(c.END_OF_OBJECT),d+=3);return d},encodeNull:function(a,g){a.WriteUint8(c.NULL);
return 1},encodeUndefined:function(a,g){a.WriteUint8(c.UNDEFINED);return 1},encodeECMAArray:function(b,g){var d=3;b.WriteUint8(c.ECMA_ARRAY);b.WriteUint32(g.value.length,!1);return d+=a(b,g)},encodeStrictArray:function(b,g){var d=3;b.WriteUint8(c.STRICT_ARRAY);b.WriteUint32(g.value.length,!1);return d+=a(b,g)},encodeDate:function(a,g){a.WriteUint8(c.DATE);a.WriteFloat64(g.value,!1);a.WriteUint16(g.offset,!1);return 11},encodeLongString:function(a,g){if(!g.value)return 0;g=crypt.stringToByteArray(g.value);
a.WriteUint8(c.LONG_STRING);a.WriteUint32(g.length,!1);a.Write(g);return 5+g.length}};c.Value=d;h.AMF=c})(playease);
(function(e){e=e.utils;e.MIN_UINT32=0;e.MAX_UINT32=4294967295;e.MAX_INT32=2147483647;e.MIN_INT32=-2147483648;e.MIN_CACHE_BITS=25;e.BitStream=function(d){var a=this;a.ShowBits=function(a){if(0===a)return 0;var g=b>>>3,m=0;b<c&&(m=h.getUint8(g)<<24);b+8<c&&(m|=h.getUint8(g+1)<<16);b+16<c&&(m|=h.getUint8(g+2)<<8);b+24<c&&(m|=h.getUint8(g+3));return m<<(b&7)>>>32-a};a.ShowBitsLong=function(b){return 25>=b?a.ShowBits(b):a.ShowBits(16)<<b-16|a.ShowBits(b-16)};a.ReadBits=function(g){var c=a.ShowBits(g);
b+=g;return c};a.ReadBitsLong=function(g){var c=a.ShowBitsLong(g);b+=g;return c};a.SkipBits=function(a){b+=a};a.Left=function(){return c-b};var h=new DataView(d.buffer,d.byteOffset,d.byteLength);var c=8*d.byteLength;var b=0}})(playease);
(function(e){var d=new function(){function a(a){return g.match(/(Chrome|CriOS)\/((\d+)\.(\d+))/)}function d(){if(!b.isWindows)return 0;var a=navigator.plugins;if(a){var g=a["Shockwave Flash"];if(g&&g.description){var c=g.description.replace(/\D+(\d+\.?\d*).*/,"$1");return parseFloat(c)}}if("undefined"!==typeof window.ActiveXObject)try{return g=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),c=g.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."),parseFloat(c)}catch(f){}return 0}
function c(){return void 0!==window.orientation?90===window.orientation||-90===window.orientation:window.innerWidth>window.innerHeight}var b=this;var g=navigator.userAgent;b.OS={name:"",version:"",major:NaN,minor:NaN};b.Browser={name:"",version:"",major:NaN,minor:NaN};(function(){var a=g.match(/(Windows)\sNT\s((\d+)\.(\d+))/)||g.match(/(Mac)\sOS\sX\s((\d+)[\._]{1}(\d+))/)||g.match(/(Android)(?:\s((\d+)\.(\d+)))?/)||g.match(/(iP(?:hone|ad|od)).+((\d+)_(\d+))/)||g.match(/(Windows\sPhone)(?:\sOS)?\s((\d+)\.(\d+))/);
a&&(b.OS.name=a[1],b.OS.version=a[2],b.OS.major=parseInt(a[3]),b.OS.minor=parseInt(a[4]));b.OS.isWindows="Windows"===b.OS.name;b.OS.isMac="Mac"===b.OS.name;b.OS.isAndroid="Android"===b.OS.name;b.OS.isIOS="iPhone"===b.OS.name||"iPad"===b.OS.name||"iPod"===b.OS.name;b.OS.isWindowsPhone="Windows Phone"===b.OS.name;b.OS.isMobile=b.OS.isAndroid||b.OS.isIOS||b.OS.isWindowsPhone;b.OS.isHorizontal=c})();(function(){var c;(c=g.match(/(MSIE)\s((\d+)\.(\d+))/)||g.match(/(Trident)\/.+rv:\s((11)\.(\d+))/i)||g.match(/Firefox\/((\d+)\.(\d+))/)||
g.match(/(OPR)\/((\d+)\.(\d+))/)||g.match(/(Edg|Edge|EdgA)\/((\d+)\.(\d+))/))||(a()||!g.match(/Safari/)?c=null:(c=g.match(/Version\/((\d+)\.(\d+))/),c=["Safari/"+c[1],"Safari"].concat(c.slice(1))));if(c=c||g.match(/(MicroMessenger)\/((\d+)\.(\d+))/)||g.match(/(QQ)\/((\d+)\.(\d+))/)||g.match(/(QQBrowser)\/((\d+)\.(\d+))/)||g.match(/(MetaSr)\s((\d+)\.(\d+))/)||g.match(/QIHU (360EE)/)||a())b.Browser.name=c[1],b.Browser.version=c[2],b.Browser.major=parseInt(c[3]),b.Browser.minor=parseInt(c[4]);b.Browser.isMSIE=
"MSIE"===b.Browser.name;b.Browser.isIE8="MSIE"===b.Browser.name&&8===b.Browser.major;b.Browser.isIE9="MSIE"===b.Browser.name&&9===b.Browser.major;b.Browser.isIE10="MSIE"===b.Browser.name&&10===b.Browser.major;b.Browser.isIE11="Trident"===b.Browser.name;b.Browser.isIE=b.Browser.isMSIE||b.Browser.isIE11;b.Browser.isFirefox="Firefox"===b.Browser.name;b.Browser.isOpera="OPR"===b.Browser.name;b.Browser.isEdg="Edg"===b.Browser.name;b.Browser.isEdge="Edge"===b.Browser.name;b.Browser.isEdgA="EdgA"===b.Browser.name;
b.Browser.isSafari="Safari"===b.Browser.name;b.Browser.isWeChat="MicroMessenger"===b.Browser.name;b.Browser.isQQ="QQ"===b.Browser.name;b.Browser.isQQBrowser="QQBrowser"===b.Browser.name;b.Browser.isSogou="MetaSr"===b.Browser.name;b.Browser.is360EE="360EE"===b.Browser.name;b.Browser.isChrome="Chrome"===b.Browser.name;b.Browser.isCriOS="CriOS"===b.Browser.name;b.Browser.flash=d()})()};e.OS=d.OS;e.Browser=d.Browser})(playease);
(function(e){var d=e.utils;d.crypt={stringToByteArray:function(a){for(var d=[],c=0,b=0;b<a.length;b++){for(var g=a.charCodeAt(b);255<g;)d[c++]=g&255,g>>=8;d[c++]=g}return d},byteArrayToString:function(a){if(8192>=a.length)return String.fromCharCode.apply(null,a);for(var d="",c=0;c<a.length;c+=8192){var b=Array.slice(a,c,c+8192);d+=String.fromCharCode.apply(null,b)}return d},byteArrayToHex:function(a){return Array.map(a,function(a){return d.padStart(a.toString(16),2,0)}).join("")},hexToByteArray:function(a){if(0!==
a.length%2)return d.error("Key string length must be multiple of 2."),null;for(var h=[],c=0;c<a.length;c+=2)h.push(parseInt(a.substring(c,c+2),16));return h},stringToUTF8ByteArray:function(a){for(var d=[],c=0,b=0;b<a.length;b++){var g=a.charCodeAt(b);128>g?d[c++]=g:(2048>g?d[c++]=g>>6|192:(55296===(g&64512)&&b+1<a.length&&56320===(a.charCodeAt(b+1)&64512)?(g=65536+((g&1023)<<10)+(a.charCodeAt(++b)&1023),d[c++]=g>>18|240,d[c++]=g>>12&63|128):d[c++]=g>>12|224,d[c++]=g>>6&63|128),d[c++]=g&63|128)}return d},
UTF8ByteArrayToString:function(a){for(var d=[],c=0,b=0;c<a.length;){var g=a[c++];if(128>g)d[b++]=String.fromCharCode(g);else if(191<g&&224>g){var e=a[c++];d[b++]=String.fromCharCode((g&31)<<6|e&63)}else if(239<g&&365>g){e=a[c++];var m=a[c++],p=a[c++];g=((g&7)<<18|(e&63)<<12|(m&63)<<6|p&63)-65536;d[b++]=String.fromCharCode(55296+(g>>10));d[b++]=String.fromCharCode(56320+(g&1023))}else e=a[c++],m=a[c++],d[b++]=String.fromCharCode((g&15)<<12|(e&63)<<6|m&63)}return d.join("")},XORByteArray:function(a,
e){if(a.length!==e.length)d.error("XOR array lengths must match.");else{for(var c=[],b=0;b<a.length;b++)c.push(a[b]^e[b]);return c}}}})(playease);
(function(e){function d(b,g){c||(c=a());var d="";h.foreach(g,function(a,b){d+=a+": "+b+"; "});try{c.insertRule?c.insertRule(b+" { "+d+"}",c.cssRules.length):c.addRule(b,d,c.rules.length)}catch(m){h.error("Failed to insert css rule: "+b)}}function a(){var a=document.createElement("style");a.type="text/css";document.getElementsByTagName("head")[0].appendChild(a);return a.sheet||a.styleSheet}var h=e.utils,c;d.style=function(a,c,d){if(void 0!==a&&null!==a)for(void 0===a.length&&(a=[a]),c=h.extendz({},
c),d=0;d<a.length;d++){var b=a[d];void 0!==b&&null!==b&&h.forEach(c,function(a,f){a=a.split("-");for(var c=1;c<a.length;c++)a[c]=a[c].charAt(0).toUpperCase()+a[c].slice(1);a=a.join("");b.style[a]!==f&&(b.style[a]=f)})}};h.css=d})(playease);
(function(e){e=e.utils;e.LITTLE_ENDIAN=function(){try{var d=new ArrayBuffer(2);(new DataView(d)).setInt16(0,256,!0);var a=new Int16Array(d)}catch(h){}return a&&256===a[0]}();e.getUint32=function(d,a,e){void 0===a&&(a=0);return e?d[a+0]|d[a+1]>>>8|d[a+2]>>>16|d[a+3]>>>24:d[a+0]<<24|d[a+1]<<16|d[a+2]<<8|d[a+3]}})(playease);
(function(e){function d(c){var b=this,g,d,m,e;b.append=function(a){f.push(a)};b.save=function(a){a||(a=b.config.filename);g=new Blob(f,{type:b.config.type});d=URL.createObjectURL(g);m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);e=document.createElementNS("http://www.w3.org/1999/xhtml","a");e.href=d;e.download=a;e.dispatchEvent(m);f=[];URL.revokeObjectURL(d)};b.config=a.extendz({},h,c);var f=[]}var a=e.utils,h={filename:"sample.fragmented.mp4",
type:"video/mpeg"};d.prototype.CONF=h;a.FileKeeper=d})(playease);
(function(e){function d(d){a.call(this,d);var c=this;c.ReadUE=function(){for(var a=-1,g=0;0===g&&0<c.Left();a++)g=c.ReadBits(1);return(1<<a>>>0)-1+c.ReadBitsLong(a)};c.ReadSE=function(){var a=c.ReadUE();return 0===(a&1)?-(a>>>1):a+1>>>1}}e=e.utils;var a=e.BitStream;d.prototype=Object.create(a.prototype);d.prototype.constructor=d;e.ebsp2rbsp=function(a){var c=2,b=a.byteLength,g=new Uint8Array(b);g[0]=a[0];g[1]=a[1];for(var d=2;d<b;d++)if(3!==a[d]||0!==a[d-1]||0!==a[d-2])g[c]=a[d],c++;return g.subarray(0,
c)};e.Golomb=d})(playease);
(function(e){var d=/^(([a-z]+:)\/\/(([-a-z\d\.]+)(?::(\d+))?))((?:\/[-_a-z\d\s\.]*)*)([?#][-_=%&a-z\d\s\.]+)?$/i;e.utils.URL=function(a){var e=this;e.parse=function(a){e.href=a;!1===/^([a-z]+):\/\//.test(a)&&(e.href=window.location.origin+("/"===a.substr(0,1)?"":"/")+a);var b=e.href.match(d);if(null===b)throw{name:"SyntaxError",message:"The URL did not match the expected pattern, url="+a+"."};e.origin=b[1];e.protocol=b[2];e.host=b[3];e.hostname=b[4];e.port=b[5]||"";e.pathname=b[6]||"";if(a=e.pathname.match(/\/([-_a-z\d\s\(\)\[\]\{\}]+)(?:\.([a-z\d]+))?$/))e.filename=
a[1],e.filetype=a[2];b[7]&&("?"===b[7].substr(0,1)?e.search=b[7]:e.hash=b[7])};e.href="";e.origin="";e.protocol="";e.host="";e.hostname="";e.port="";e.pathname="";e.filename="";e.filetype="";e.search="";e.hash="";a&&e.parse(a)}})(playease);
(function(e){function d(b){function g(b,c){var f={};if(b.nodeType===h.DOCUMENT_NODE){for(var m=0;m<b.childNodes.length;m++){var e=b.childNodes[m],n=e.localName||e.baseName||e.nodeName;e.nodeType===h.ELEMENT_NODE&&(e=g(e),e.parent=f,d.config.ignoreRoot?(delete e.parent,f=e):f[n]=e)}return f}if(b.nodeType===h.ELEMENT_NODE){for(m=0;m<b.childNodes.length;m++)if(e=b.childNodes[m],n=e.localName||e.baseName||e.nodeName,e.nodeType!==h.COMMENT_NODE)if(e=g(e,c+"."+n),e.parent=f,f.hasOwnProperty(n))"array"!=
a.typeof(f[n])&&(f[n]=[f[n]]),f[n].push(e);else if("#text"!=n||/[^\s]/.test(e))f[n]=e;n=b.localName||b.baseName||b.nodeName;null!=b.prefix&&""!=b.prefix&&(n=b.prefix+":"+n);for(m=0;m<b.attributes.length;m++){c=b.attributes[m];e=c.value;for(var k=0;k<d.config.matchers.length;k++){var t=d.config.matchers[k];t.test(c,n)&&(e=t.exec(c.value));f[d.config.attributePrefix+c.name]=e}}null!=f["#text"]&&d.config.trimWhitespaces&&(f["#text"]=f["#text"].trim());f.toString=function(){return(null==f["#text"]?"":
f["#text"])+(null==f["#cdata-section"]?"":f["#cdata-section"])};return f}if(b.nodeType===h.TEXT_NODE||b.nodeType===h.CDATA_SECTION_NODE)return b.nodeValue}var d=this;d.parse=function(b){if(window.DOMParser){var c=new DOMParser;try{var f=c.parseFromString(b,"text/xml")}catch(l){return a.error("Failed to parse XML structure."),null}}else 0===b.indexOf("<?")&&(b=b.substr(b.indexOf("?>")+2)),f=new ActiveXObject("Microsoft.XMLDOM"),f.async="false",f.loadXML(b);return g(f)};d.config=a.extendz({},c,b)}var a=
e.utils,h={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9},c={ignoreRoot:!0,trimWhitespaces:!1,attributePrefix:"@",matchers:[]};d.prototype.CONF=c;a.XML2JSON=d})(playease);
(function(e){var d=e.utils;d.MPD=function(a){function e(a,b){if(a)for(var f=0;f<a.AdaptationSet.length;f++){var c=a.AdaptationSet[f];if(c.hasOwnProperty("@id")){if(c["@id"]===b["@id"])return c}else if(c.hasOwnProperty("@contentType")){if(c["@contentType"]===b["@contentType"])return c}else if(c.hasOwnProperty("@mimeType")){if(c["@mimeType"]===b["@mimeType"])return c}else if(c.hasOwnProperty("@codecs")){if(c["@codecs"]===b["@codecs"])return c}else break}}var c,b,g;this.update=function(a){b=q;a.Location&&
a.Location["#text"]&&(b=a.Location["#text"]);g=a.BaseURL||b.substring(0,b.lastIndexOf("/")+1);if("dynamic"===a["@type"]){var m=c,f=0,l=NaN;"array"!=d.typeof(a.Period)&&(a.Period=[a.Period]);for(var z=0;z<a.Period.length;z++){var n=a.Period[z];n.hasOwnProperty("@start")?f=n["@start"]:isNaN(l)?0===z&&"dynamic"!==a["@type"]&&(f=0):f+=l;n.hasOwnProperty("@duration")&&(l=n["@duration"]);n["@start"]=f;n["@duration"]=l;a:{var k=m;var t=n;if(k)for(var h=0;h<k.Period.length;h++){var r=k.Period[h];if(r.hasOwnProperty("@id")){if(r["@id"]===
t["@id"]){k=r;break a}}else if(r.hasOwnProperty("@start")){if(r["@start"]===t["@start"]){k=r;break a}}else{k=r;break a}}k=void 0}"array"!=d.typeof(n.AdaptationSet)&&(n.AdaptationSet=[n.AdaptationSet]);for(t=0;t<n.AdaptationSet.length;t++){h=n.AdaptationSet[t];r=e(k,h);var w=r,G=r=0,N=[];if(!1!==h.SegmentTemplate.hasOwnProperty("SegmentTimeline")){if(w){var D=w.SegmentTemplate.SegmentTimeline;"array"!=d.typeof(D.S)&&(D.S=[D.S]);for(w=0;w<D.S.length;w++){var A=D.S[w];0===w&&A.hasOwnProperty("@t")&&
(r=A["@t"]);r+=A["@d"];A["@r"]&&(r+=A["@d"]*A["@r"]);N.push(d.extendz({},A))}}h=h.SegmentTemplate.SegmentTimeline;"array"!=d.typeof(h.S)&&(h.S=h.S?[h.S]:[]);for(w=0;w<h.S.length;w++)A=h.S[w],0===w&&A.hasOwnProperty("@t")&&(G=A["@t"]),G>=r&&N.push(A),G+=A["@d"],A["@r"]&&(G+=A["@d"]*A["@r"])}}}}c=a};this.getSegmentInfo=function(a,b,f,e,h,n){for(var k=c.Period[0],m=0;m<c.Period.length;m++){var l=c.Period[m];if(l.hasOwnProperty("@start"))l["@start"]>k["@start"]&&l["@start"]<=a&&(k=l);else break}a=k;a:{for(k=
0;k<a.AdaptationSet.length;k++)if(m=a.AdaptationSet[k],m.hasOwnProperty("@contentType")){if(m["@contentType"]===b){b=m;break a}}else if(m.hasOwnProperty("@mimeType")&&(l=m["@mimeType"].match(/^([a-z]+)\/[a-z0-9]+/i))&&1<l.length&&l[1]===b){b=m;break a}b=void 0}if(b){k=b;"array"!=d.typeof(k.Representation)&&(k.Representation=[k.Representation]);m=k.Representation[0];for(l=0;l<k.Representation.length;l++){var r=k.Representation[l];r["@bandwidth"]>m["@bandwidth"]&&(!n||r["@bandwidth"]<=n)&&(m=r)}if(n=
m){l=b.SegmentTemplate;k=l[f?"@initialization":"@media"];m=l["@timescale"]||1;var w=l["@duration"]||0;k=k.replace(/\$RepresentationID\$/,n["@id"]);if(l["@media"].search(/\$Time\$/))if(r=l.SegmentTimeline,f)if(0<e||0===e&&!1===c.hasOwnProperty("@suggestedPresentationDelay"))r.S.length&&(e=r.S[0]["@t"]);else{var p=Math.abs(p)||c["@suggestedPresentationDelay"];a:{var z=p*m;for(p=r.S.length-1;0<=p;p--){var q=r.S[p];z-=q["@d"]*(q["@r"]||1);if(0>=z){z=r.S[0]["@t"];for(var A=0;A<p;A++)z+=r.S[A]["@d"],q["@r"]&&
(z+=q["@d"]*q["@r"]);q["@t"]=z;p=q;break a}}p=r.S[0]}p&&(e=p["@t"],w=p["@d"])}else{a:{for(p=NaN;r.S.length;){w=r.S.shift();isNaN(p)&&(p=w["@t"]||0);if(p+w["@d"]*(w["@r"]||0)>=e){w["@t"]=p;r.S.length&&(r.S[0]["@t"]=w["@t"]+w["@d"]);p=w;break a}p+=w["@d"];w["@r"]&&(p+=w["@d"]*w["@r"])}p=void 0}if(void 0===p)return;e=p["@t"];w=p["@d"];k=k.replace(/\$Time\$/,e)}l["@media"].search(/\$Number\$/)&&(f?h=l["@startNumber"]:k=k.replace(/\$Number\$/,h));f=n.baseURL||b.baseURL||a.baseURL;k=(f?f["#text"]:g)+k;
return{mimeType:n["@mimeType"]||b["@mimeType"],codecs:n["@codecs"]||b["@codecs"],index:h,start:e,duration:w,timescale:m,url:k}}}};this.getLocation=function(){return b};var q=a||""}})(playease);(function(e){e.utils.MPD.matchers={}})(playease);
(function(e){var d=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;e.utils.MPD.matchers.datetime=function(){this.test=function(a){return d.test(a.value)};this.exec=function(a){a=d.exec(a);var e=Date.UTC(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10),a[6]&&parseInt(a[6],10)||0,a[7]&&1E3*parseFloat(a[7])||0);if(a[9]&&a[10]){var c=60*parseInt(a[9],10)+parseInt(a[10],10);e+=("+"===a[8]?
-1:1)*c*6E4}return new Date(e)}}})(playease);
(function(e){var d=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,a="minBufferTime mediaPresentationDuration minimumUpdatePeriod timeShiftBufferDepth maxSegmentDuration maxSubsegmentDuration suggestedPresentationDelay start starttime duration".split(" ");e.utils.MPD.matchers.duration=function(){this.test=function(e){for(var c=0;c<a.length;c++)if((e.localName||e.baseName||e.nodeName)===a[c])return d.test(e.value);return!1};this.exec=function(a){a=d.exec(a);var c=
31536E3*parseFloat(a[2]||0)+2592E3*parseFloat(a[4]||0)+86400*parseFloat(a[6]||0)+3600*parseFloat(a[8]||0)+60*parseFloat(a[10]||0)+parseFloat(a[12]||0);void 0!==a[1]&&(c*=-1);return c}}})(playease);(function(e){var d=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/;e.utils.MPD.matchers.numeric=function(){this.test=function(a){return d.test(a.value)};this.exec=function(a){return parseFloat(a)}}})(playease);
(function(e){var d={MPD:["id","profiles"],Period:["id"],BaseURL:["serviceLocation","byteRange"],SegmentBase:["indexRange"],Initialization:["range"],RepresentationIndex:["range"],SegmentList:["indexRange"],BitstreamSwitching:["range"],SegmentURL:["mediaRange","indexRange"],SegmentTemplate:["indexRange","media","index","initialization","bitstreamSwitching"],AssetIdentifier:["value","id"],EventStream:["value"],AdaptationSet:["profiles","mimeType","segmentProfiles","codecs","contentType"],FramePacking:["value",
"id"],AudioChannelConfiguration:["value","id"],ContentProtection:["value","id"],EssentialProperty:["value","id"],SupplementalProperty:["value","id"],InbandEventStream:["value","id"],Accessibility:["value","id"],Role:["value","id"],Rating:["value","id"],Viewpoint:["value","id"],ContentComponent:["contentType"],Representation:["id","dependencyId","mediaStreamStructureId"],Subset:["id"],Metrics:["metrics"],Reporting:["value","id"]};e.utils.MPD.matchers.string=function(){this.test=function(a,e){return d.hasOwnProperty(e)&&
(e=d[e],void 0!==e)?0<=e.indexOf(a.name):!1};this.exec=function(a){return String(a)}}})(playease);
(function(e){e.events={Event:{BIND:"bind",READY:"ready",PLAY:"play",WAITING:"waiting",DURATIONCHANGE:"durationchange",LOADEDMETADATA:"loadedmetadata",LOADEDDATA:"loadeddata",CANPLAY:"canplay",PLAYING:"playing",CANPLAYTHROUGH:"canplaythrough",PAUSE:"pause",SEEKING:"seeking",SEEKED:"seeked",SWITCHING:"switching",SWITCHED:"switched",RATECHANGE:"ratechange",TIMEUPDATE:"timeupdate",VOLUMECHANGE:"volumechange",ENDED:"ended",ERROR:"error"},IOEvent:{SUSPEND:"suspend",LOADSTART:"loadstart",STALLED:"stalled",
ABORT:"abort",TIMEOUT:"timeout",PROGRESS:"progress",LOAD:"load",LOADEND:"loadend"},UIEvent:{SHOOTING:"shooting",FULLPAGE:"fullpage",FULLSCREEN:"fullscreen",RESIZE:"resize"},GlobalEvent:{CHANGE:"change"},MouseEvent:{CLICK:"click",DOUBLE_CLICK:"doubleclick",MOUSE_MOVE:"mousemove"},KeyboardEvent:{KEY_DOWN:"key-down",KEY_UP:"key-up"},TimerEvent:{TIMER:"timer",COMPLETE:"complete"},MediaEvent:{PACKET:"packet",AAC_SPECIFIC_CONFIG:"aac-specific-config",AAC_SAMPLE:"aac-sample",AVC_CONFIG_RECORD:"avc-config-record",
AVC_SAMPLE:"avc-sample",END_OF_STREAM:"end-of-stream",FLV_INFO_FRAME:"flv-info-frame",FLV_FRAME:"flv-frame",MP4_INIT_SEGMENT:"mp4-init-segment",MP4_SEGMENT:"mp4-segment"},MediaStreamTrackEvent:{ADDTRACK:"addtrack",REMOVETRACK:"removetrack"}}})(playease);
(function(e){var d=e.utils;e.events.EventDispatcher=function(a){function h(a,b){if(a)for(var f=a.slice(0),c=0;c<f.length;c++){var g=f[c];if(g){isNaN(g.count)||0!==--g.count||a.splice(c,1);try{if(g.listener(b),b.stopPropagation)break}catch(n){d.error("Error handling event:",b,n.toString())}}}}var c=this,b=Array.prototype.slice.call(arguments,1);c.bind=function(){var a=Array.prototype.slice.call(arguments,0);d.forEach(a,function(a,b){d.forEach(b,function(a,b){a="on"+b.replace(/-/g,"");c[a]=void 0})})};
c.addEventListener=function(a,b,f){try{g[a]||(g[a]=[]),"string"===d.typeof(b)&&(b=(new Function("return "+b))()),g[a].push({listener:b,count:f||NaN})}catch(l){d.error("Failed to addEventListener("+a+"):",l)}};c.removeEventListener=function(a,b){if(g[a])try{if(void 0===b)delete g[a];else for(var f=0;f<g[a].length;f++)if(g[a][f].listener.toString()===b.toString()){g[a].splice(f,1);break}}catch(l){d.error("Failed to removeEventListener("+a+"):",l)}};c.hasEventListener=function(a){return g.hasOwnProperty(a)&&
0<g[a].length};c.addGlobalListener=function(a,b){try{"string"===d.typeof(a)&&(a=(new Function("return "+a))()),q.push({listener:a,count:b||NaN})}catch(f){d.error("Failed to addGlobalListener():",f)}};c.removeGlobalListener=function(a){if(a)try{for(var b=0;b<q.length;b++)if(q[b].listener.toString()===a.toString()){q.splice(b,1);break}}catch(f){d.error("Failed to removeGlobalListener():",f)}};c.dispatchEvent=function(a,b){c.forward({type:a,data:b||{},srcElement:c,version:e.VERSION})};c.forward=function(a){a.target=
c;a.stopPropagation=!1;e.DEBUG&&d.log(a);var b="on"+a.type.replace(/-/g,"");if("function"===d.typeof(c[b]))c[b](a);else h(g[a.type],a),h(q,a)};var g={};var q=[];c.bind.apply(c,b)}})(playease);
(function(e){function d(a,g){function b(){f++;d.dispatchEvent(c.TIMER);0<d.repeatCount&&f>=d.repeatCount&&(d.stop(),d.dispatchEvent(c.COMPLETE))}h.call(this,"Timer",[c.TIMER,c.COMPLETE]);var d=this,e,f=0,l=!1;d.start=function(){!1===l&&(e=setInterval(b,d.delay),l=!0)};d.stop=function(){l&&(clearInterval(e),e=0,l=!1)};d.reset=function(){d.stop();f=0};d.currentCount=function(){return f};d.running=function(){return l};d.delay=a||50;d.repeatCount=g||0}var a=e.utils;e=e.events;var h=e.EventDispatcher,
c=e.TimerEvent;d.prototype=Object.create(h.prototype);d.prototype.constructor=d;a.Timer=d})(playease);
(function(e){var d=e.utils,a={},h=[];a.register=function(c,b){try{h.splice(b||h.length,0,c),a[c.prototype.kind]=c}catch(g){d.error("Failed to register loader "+c.prototype.kind+", Error="+g.message)}};a.get=function(a,b){for(var c=0;c<h.length;c++){var d=h[c];if(d.prototype.isSupported(a,b))return d}return null};a.Mode={CORS:"cors",NO_CORS:"no-cors",SAME_ORIGIN:"same-origin"};a.Credentials={OMIT:"omit",INCLUDE:"include",SAME_ORIGIN:"same-origin"};a.Cache={DEFAULT:"default",NO_STAORE:"no-store",RELOAD:"reload",
NO_CACHE:"no-cache",FORCE_CACHE:"force-cache",ONLY_IF_CACHED:"only-if-cached"};a.Redirect={FOLLOW:"follow",MANUAL:"manual",ERROR:"error"};a.ResponseType={ARRAYBUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};a.ReadyState={UNINITIALIZED:0,OPEN:1,SENT:2,LOADING:3,DONE:4};e.io=a.get;e.IO=a})(playease);
(function(e){function d(d){function e(c){return c.read().then(function(f){if(f.done)return a.debug("Loader load"),m=g.DONE,l.dispatchEvent(b.LOAD),l.dispatchEvent(b.LOADEND),Promise.resolve("load");switch(m){case g.SENT:m=g.LOADING;break;case g.DONE:return a.warn("Loader state error, probably aborted already."),c.cancel()}a.debug("Loader progress: "+f.value.buffer.byteLength+"/"+n);l.dispatchEvent(b.PROGRESS,{buffer:f.value.buffer,loaded:f.value.buffer.byteLength,total:n});return e(c)})["catch"](f)}
function f(c){m=g.DONE;switch(c.name){case "AbortError":a.warn("Loader "+c.name+": "+c.message);l.dispatchEvent(b.ABORT,{name:c.name,message:c.message});break;case "TimeoutError":a.error("Loader "+c.name+": "+c.message);l.dispatchEvent(b.TIMEOUT,{name:c.name,message:c.message});break;default:a.error("Loader "+c.name+": "+c.message),l.dispatchEvent(b.STALLED,{name:c.name,message:c.message})}l.dispatchEvent(b.LOADEND)}c.call(this,"Fetch",b);var l=this,m;l.load=function(c,d,r){m=g.UNINITIALIZED;l.isSupported(c)?
(a.debug("Loader loadstart"),l.dispatchEvent(b.LOADSTART),m=g.OPEN,void 0!==d&&a.extendz(l.config.headers,{Range:"bytes="+d+"-"+(r||"")}),d=a.extendz({},l.config,{headers:new Headers(l.config.headers),signal:k.signal}),fetch(c.href,d).then(function(b){switch(m){case g.OPEN:m=g.SENT;break;default:a.warn("Loader state error, probably aborted already.")}if(!b.ok||200>b.status||299<b.status)return Promise.reject(Error(b.status+" "+b.statusText));var c=b.headers.get("Content-Length");c&&(c=parseInt(c));
if(206===b.status){var f=b.headers.get("Content-Range");f&&(f=f.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(c=parseInt(f[3]))}n!==c&&(n=c,a.log("Content-Length changed: "+n));return e(b.body.getReader())})["catch"](f)):(a.error("Loader suspend: not supportped"),m=g.DONE,l.dispatchEvent(b.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),l.dispatchEvent(b.LOADEND))};l.abort=function(){k.abort()};l.state=function(){return m};l.config=a.extendz({},q,d);var n=NaN;var k=new AbortController}var a=
e.utils,h=e.events,c=h.EventDispatcher,b=h.IOEvent;e=e.IO;var g=e.ReadyState,q={method:"GET",headers:{},mode:e.Mode.CORS,credentials:e.Credentials.OMIT,cache:e.Cache.DEFAULT,redirect:e.Redirect.FOLLOW};d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="Fetch";d.prototype.CONF=q;d.prototype.isSupported=function(a,b){return b&&"live"!==b?!1:!!fetch&&("http:"===a.protocol||"https:"===a.protocol)};e.register(d)})(playease);
(function(e){function d(c){b.call(this,"MozStream",g);var f=this,d;f.load=function(b,c,e){d=m.UNINITIALIZED;if(f.isSupported(b)){a.debug("Loader loadstart");f.dispatchEvent(g.LOADSTART);void 0!==c&&a.extendz(f.config.headers,{Range:"bytes="+c+"-"+(e||"")});a.forEach(f.config.headers,function(a,b){k.setRequestHeader(a,b)});switch(f.config.credentials){case q.INCLUDE:k.withCredentials=!0;break;case q.SAME_ORIGIN:k.withCredentials=window.location.host===b.host;break;default:k.withCredentials=!1}k.open(f.config.method,
b.href,!0);k.send()}else a.error("Loader suspend: not supportped"),d=m.DONE,f.dispatchEvent(g.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),f.dispatchEvent(g.LOADEND)};f.abort=function(){k.abort()};f.state=function(){return d};f.config=a.extendz({},p,c);var e=NaN;var k=new XMLHttpRequest;k.onreadystatechange=function(b){d=k.readyState;switch(d){case m.SENT:if(200>k.status||299<k.status)a.error("Loader stalled: "+k.status+" "+k.statusText),f.dispatchEvent(g.STALLED,{name:"NetworkError",
message:k.status+" "+k.statusText});else{(b=k.getResponseHeader("Content-Length"))&&(b=parseInt(b));if(206===k.status){var c=k.getResponseHeader("Content-Range");c&&(c=c.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(b=parseInt(c[3]))}e!==b&&(e=b,a.log("Content-Length changed: "+e))}}};k.onabort=function(b){a.warn("Loader AbortError: The operation was aborted.");f.dispatchEvent(g.ABORT,{name:"AbortError",message:"The operation was aborted."})};k.onprogress=function(b){a.debug("Loader progress: "+k.response.byteLength+
"/"+e);f.dispatchEvent(g.PROGRESS,{buffer:k.response,loaded:k.response.byteLength,total:e})};k.onload=function(b){a.debug("Loader load.");f.dispatchEvent(g.LOAD)};k.onerror=function(b){a.error("Loader "+b.name+": "+b.message);switch(b.name){case "TimeoutError":f.dispatchEvent(g.TIMEOUT,{name:b.name,message:b.message});break;default:f.dispatchEvent(g.STALLED,{name:b.name,message:b.message})}};k.onloadend=function(a){f.dispatchEvent(g.LOADEND)};k.responseType="moz-chunked-arraybuffer"}var a=e.utils,
h=e.Browser,c=e.events,b=c.EventDispatcher,g=c.IOEvent;e=e.IO;var q=e.Credentials,m=e.ReadyState,p={method:"GET",headers:{},mode:e.Mode.CORS,credentials:q.OMIT,cache:e.Cache.DEFAULT,redirect:e.Redirect.FOLLOW};d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="MozStream";d.prototype.CONF=p;d.prototype.isSupported=function(a,b){return b&&"live"!==b||h.isFirefox&&(14>h.major||67<h.major)?!1:"http:"===a.protocol||"https:"===a.protocol};e.register(d)})(playease);
(function(e){function d(c){function f(b){a.error("Loader "+b.name+": "+b.message);switch(b.name){case "TimeoutError":d.dispatchEvent(g.TIMEOUT,{name:b.name,message:b.message});break;default:d.dispatchEvent(g.STALLED,{name:b.name,message:b.message})}}b.call(this,"MSStream",g);var d=this,e;d.load=function(b,c,f){e=m.UNINITIALIZED;h.position=0;if(d.isSupported(b)){a.debug("Loader loadstart");d.dispatchEvent(g.LOADSTART);void 0!==c&&a.extendz(d.config.headers,{Range:"bytes="+c+"-"+(f||"")});a.forEach(d.config.headers,
function(a,b){t.setRequestHeader(a,b)});switch(d.config.credentials){case q.INCLUDE:t.withCredentials=!0;break;case q.SAME_ORIGIN:t.withCredentials=window.location.host===b.host;break;default:t.withCredentials=!1}t.open(d.config.method,b.href,!0);t.send()}else a.error("Loader suspend: not supportped"),e=m.DONE,d.dispatchEvent(g.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),d.dispatchEvent(g.LOADEND)};d.abort=function(){t.abort()};d.state=function(){return e};d.config=a.extendz({},
p,c);var k=NaN;var t=new XMLHttpRequest;t.onreadystatechange=function(b){e=t.readyState;switch(e){case m.SENT:if(200>t.status||299<t.status){a.error("Loader stalled: "+t.status+" "+t.statusText);d.dispatchEvent(g.STALLED,{name:"NetworkError",message:t.status+" "+t.statusText});break}(b=t.getResponseHeader("Content-Length"))&&(b=parseInt(b));if(206===t.status){var c=t.getResponseHeader("Content-Range");c&&(c=c.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(b=parseInt(c[3]))}k!==b&&(k=b,a.log("Content-Length changed: "+
k));break;case m.LOADING:200>t.status||299<t.status?(a.error("Loader stalled: "+t.status+" "+t.statusText),d.dispatchEvent(g.STALLED,{name:"NetworkError",message:t.status+" "+t.statusText})):h.readAsArrayBuffer(t.response)}};t.onabort=function(b){a.warn("Loader AbortError: The operation was aborted.");d.dispatchEvent(g.ABORT,{name:"AbortError",message:"The operation was aborted."})};t.onerror=f;t.onloadend=function(a){d.dispatchEvent(g.LOADEND)};t.responseType="ms-stream";var h=new MSStreamReader;
h.onprogress=function(b){b=h.result.slice(h.position);null==b?a.warn("What happend???"):(a.debug("Loader progress: "+b.byteLength+"/"+k),d.dispatchEvent(g.PROGRESS,{buffer:b,loaded:b.byteLength,total:k}),h.position=h.result.byteLength)};h.onload=function(b){a.debug("Loader load.");d.dispatchEvent(g.LOAD)};h.onerror=f}var a=e.utils,h=e.Browser,c=e.events,b=c.EventDispatcher,g=c.IOEvent;e=e.IO;var q=e.Credentials,m=e.ReadyState,p={method:"GET",headers:{},mode:e.Mode.CORS,credentials:q.OMIT,cache:e.Cache.DEFAULT,
redirect:e.Redirect.FOLLOW};d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="MSStream";d.prototype.CONF=p;d.prototype.isSupported=function(a,b){return b&&"live"!==b||!h.isIE10&&!h.isIE11&&!h.isEdge?!1:"http:"===a.protocol||"https:"===a.protocol};e.register(d)})(playease);
(function(e){function d(d){function e(a){k=g.SENT}function f(c){a.debug("Loader progress: "+c.data.byteLength+"/NaN");k===g.SENT&&(k=g.LOADING);n.dispatchEvent(b.PROGRESS,{buffer:c.data,loaded:c.data.byteLength,total:NaN})}function m(a){switch(a.name){case "TimeoutError":n.dispatchEvent(b.TIMEOUT,{name:a.name,message:a.message});break;default:n.dispatchEvent(b.STALLED,{name:a.name,message:a.message})}}function h(c){a.debug("Loader load.");k=g.DONE;n.dispatchEvent(b.LOAD);n.dispatchEvent(b.LOADEND)}
c.call(this,"Websocket",b);var n=this,k,t;n.load=function(c,d,l){k=g.UNINITIALIZED;n.isSupported(c)?(a.debug("Loader loadstart"),n.dispatchEvent(b.LOADSTART),k=g.OPEN,t=new window.WebSocket(c.href),t.onopen=e,t.onmessage=f,t.onerror=m,t.onclose=h,t.binaryType="arraybuffer"):(a.error("Loader suspend: not supportped"),k=g.DONE,n.dispatchEvent(b.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),n.dispatchEvent(b.LOADEND))};n.abort=function(){!t||t.readyState!=WebSocket.CONNECTING&&t.readyState!=
WebSocket.OPEN||(t.close(),a.warn("Loader AbortError: The operation was aborted."),n.dispatchEvent(b.ABORT,{name:"AbortError",message:"The operation was aborted."}))};n.state=function(){return k};n.config=a.extendz({},q,d);window.WebSocket=window.WebSocket||window.MozWebSocket}var a=e.utils,h=e.events,c=h.EventDispatcher,b=h.IOEvent;e=e.IO;var g=e.ReadyState,q={method:"GET",headers:{},mode:e.Mode.CORS,credentials:e.Credentials.OMIT,cache:e.Cache.DEFAULT,redirect:e.Redirect.FOLLOW};d.prototype=Object.create(c.prototype);
d.prototype.constructor=d;d.prototype.kind="Websocket";d.prototype.CONF=q;d.prototype.isSupported=function(a,b){return b&&"live"!==b?!1:!(!window.WebSocket&&!window.MozWebSocket)&&("ws:"===a.protocol||"wss:"===a.protocol)};e.register(d)})(playease);
(function(e){function d(f){c.call(this,"XHR",b);var d=this,e;d.load=function(c,f,n){e=m.UNINITIALIZED;if(d.isSupported(c)){a.debug("Loader loadstart");d.dispatchEvent(b.LOADSTART);void 0!==f&&a.extendz(d.config.headers,{Range:"bytes="+f+"-"+(n||"")});a.forEach(d.config.headers,function(a,b){k.setRequestHeader(a,b)});switch(d.config.credentials){case g.INCLUDE:k.withCredentials=!0;break;case g.SAME_ORIGIN:k.withCredentials=window.location.host===c.host;break;default:k.withCredentials=!1}k.open(d.config.method,
c.href,!0);k.send()}else a.error("Loader suspend: not supportped"),e=m.DONE,d.dispatchEvent(b.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),d.dispatchEvent(b.LOADEND)};d.abort=function(){k.abort()};d.state=function(){return e};d.config=a.extendz({},p,f);var n=NaN;var k=new XMLHttpRequest;k.onreadystatechange=function(c){e=k.readyState;switch(e){case m.SENT:if(416!==k.status&&(200>k.status||299<k.status))a.error("Loader stalled: "+k.status+" "+k.statusText),d.dispatchEvent(b.STALLED,
{name:"NetworkError",message:k.status+" "+k.statusText});else{(c=k.getResponseHeader("Content-Length"))&&(c=parseInt(c));if(206===k.status){var f=k.getResponseHeader("Content-Range");f&&(f=f.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(c=parseInt(f[3]))}n!==c&&(n=c,a.log("Content-Length changed: "+n))}}};k.onabort=function(c){a.warn("Loader AbortError: The operation was aborted.");d.dispatchEvent(b.ABORT,{name:"AbortError",message:"The operation was aborted."})};k.onprogress=function(b){a.debug("Loader progress: "+
k.loaded+"/"+n)};k.onload=function(c){a.debug("Loader load.");d.dispatchEvent(b.PROGRESS,{buffer:k.response,loaded:k.response.byteLength,total:k.loaded});d.dispatchEvent(b.LOAD)};k.onerror=function(c){a.error("Loader "+c.name+": "+c.message);switch(c.name){case "TimeoutError":d.dispatchEvent(b.TIMEOUT,{name:c.name,message:c.message});break;default:d.dispatchEvent(b.STALLED,{name:c.name,message:c.message})}};k.onloadend=function(a){d.dispatchEvent(b.LOADEND)};k.responseType=q.ARRAYBUFFER}var a=e.utils,
h=e.events,c=h.EventDispatcher,b=h.IOEvent;e=e.IO;var g=e.Credentials,q=e.ResponseType,m=e.ReadyState,p={method:"GET",headers:{},mode:e.Mode.CORS,credentials:g.OMIT,cache:e.Cache.DEFAULT,redirect:e.Redirect.FOLLOW};d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="XHR";d.prototype.CONF=p;d.prototype.isSupported=function(a,b){if(b&&"live"===b){b=["flv","",void 0,"mp4","m4s","f4v","m4v","mov"];for(var c=0;c<b.length;c++)if(a.filetype===b[c])return!1}return"http:"===
a.protocol||"https:"===a.protocol};e.register(d)})(playease);
(function(e){function d(a,b){this.Num=a||30;this.Den=b||1}function a(){var a=this;a.left=function(){return null==a.payload?0:a.payload.byteLength-a.position};a.set=function(a,c){b[a]=c};a.get=function(a){return b[a]};var b={};a.kind="";a.codec="";a.length=0;a.timestamp=0;a.streamid=0;a.payload=null;a.position=0}var h={};a.KindAudio="audio";a.KindVideo="video";a.KindScript="script";h.Rational=d;h.Information=function(){this.MimeType="";this.Codecs=[];this.Timescale=1E3;this.BitRate=this.VideoDataRate=
this.AudioDataRate=this.CodecHeight=this.CodecWidth=this.Height=this.Width=this.Size=this.Duration=this.Timestamp=this.TimeBase=0;this.FrameRate=new d;this.Channels=this.SampleSize=this.SampleRate=0};h.Packet=a;e.AV=h})(playease);
(function(e){var d=e.utils;e=e.AV;var a={},h=[];a.COL_PRI_RESERVED0=0;a.COL_PRI_BT709=1;a.COL_PRI_UNSPECIFIED=2;a.COL_PRI_RESERVED=3;a.COL_PRI_BT470M=4;a.COL_PRI_BT470BG=5;a.COL_PRI_SMPTE170M=6;a.COL_PRI_SMPTE240M=7;a.COL_PRI_FILM=8;a.COL_PRI_BT2020=9;a.COL_PRI_SMPTEST428_1=10;a.COL_PRI_NB=11;a.COL_TRC_RESERVED0=0;a.COL_TRC_BT709=1;a.COL_TRC_UNSPECIFIED=2;a.COL_TRC_RESERVED=3;a.COL_TRC_GAMMA22=4;a.COL_TRC_GAMMA28=5;a.COL_TRC_SMPTE170M=6;a.COL_TRC_SMPTE240M=7;a.COL_TRC_LINEAR=8;a.COL_TRC_LOG=9;a.COL_TRC_LOG_SQRT=
10;a.COL_TRC_IEC61966_2_4=11;a.COL_TRC_BT1361_ECG=12;a.COL_TRC_IEC61966_2_1=13;a.COL_TRC_BT2020_10=14;a.COL_TRC_BT2020_12=15;a.COL_TRC_SMPTEST2084=16;a.COL_TRC_SMPTEST428_1=17;a.COL_TRC_ARIB_STD_B67=18;a.COL_TRC_NB=19;a.COL_SPC_RGB=0;a.COL_SPC_BT709=1;a.COL_SPC_UNSPECIFIED=2;a.COL_SPC_RESERVED=3;a.COL_SPC_FCC=4;a.COL_SPC_BT470BG=5;a.COL_SPC_SMPTE170M=6;a.COL_SPC_SMPTE240M=7;a.COL_SPC_YCOCG=8;a.COL_SPC_YCGCO=8;a.COL_SPC_BT2020_NCL=9;a.COL_SPC_BT2020_CL=10;a.COL_SPC_NB=11;a.COL_RANGE_UNSPECIFIED=0;
a.COL_RANGE_MPEG=1;a.COL_RANGE_JPEG=2;a.COL_RANGE_NB=2;a.CHROMA_LOC_UNSPECIFIED=0;a.CHROMA_LOC_LEFT=1;a.CHROMA_LOC_CENTER=2;a.CHROMA_LOC_TOPLEFT=3;a.CHROMA_LOC_TOP=4;a.CHROMA_LOC_BOTTOMLEFT=5;a.CHROMA_LOC_BOTTOM=6;a.CHROMA_LOC_NB=7;a.register=function(c,b){try{h.splice(b||h.length,0,c),a[c.prototype.kind]=c}catch(g){d.error("Failed to register codec "+c.prototype.kind+", Error="+g.message)}};a.get=function(a){for(var b=0;b<h.length;b++)if(a=h[b],a.prototype.kind===a)return a;return null};e.codec=
a.get;e.Codec=a})(playease);
(function(e){function d(c){b.call(this,"AAC",q,[g.ERROR]);var d=this,e;d.parse=function(b){if(1>b.left())d.dispatchEvent(g.ERROR,{name:"DataError",message:"Data not enough while parsing AAC packet."});else{t.Timestamp=b.timestamp;var c=new DataView(b.payload.buffer);b.set("DataType",c.getUint8(b.position++));b.set("CTS",0);switch(b.get("DataType")){case m.SPECIFIC_CONFIG:a:if(2>b.left())d.dispatchEvent(g.ERROR,{name:"DataError",message:"Data not enough while parsing AAC specific config."});else{e=
new h(b.payload.subarray(b.position));d.AudioObjectType=e.ReadBits(5);d.AudioObjectType===p.ESCAPE&&(d.AudioObjectType=32+e.ReadBits(6));d.SamplingFrequencyIndex=e.ReadBits(4);d.SamplingFrequency=15===d.SamplingFrequencyIndex?e.ReadBits(24):f[d.SamplingFrequencyIndex];d.ChannelConfiguration=e.ReadBits(4);16>d.ChannelConfiguration&&(d.Channels=l[d.ChannelConfiguration]);if(d.AudioObjectType===p.SBR||d.AudioObjectType===p.PS&&0===(e.ShowBits(3)&3)&&0===(e.ShowBits(9)&63))switch(d.ExtensionSamplingFrequencyIndex=
e.ReadBits(4),d.ExtensionSamplingFrequency=15===d.ExtensionSamplingFrequencyIndex?e.ReadBits(24):f[d.ExtensionSamplingFrequencyIndex],d.ExtensionAudioObjectType=e.ReadBits(5),d.ExtensionAudioObjectType){case p.ESCAPE:d.ExtensionAudioObjectType=32+e.ReadBits(6);break;case p.ER_BSAC:d.ExtensionChannelConfiguration=e.ReadBits(4)}else d.ExtensionAudioObjectType=p.NULL,d.ExtensionSamplingFrequency=0;if(d.AudioObjectType===p.ALS){e.ShowBits(5);4279379!==e.ShowBitsLong(24)&&e.SkipBits(24);try{if(112>e.Left())throw{name:"DataError",
message:"Data not enough while parsing ALS config."};if(1095521024!==e.ReadBitsLong(32))throw{name:"TypeError",message:"Not ALS\\0"};d.SamplingFrequency=e.ReadBitsLong(32);e.SkipBits(32);d.ChannelConfiguration=0;d.Channels=e.ReadBits(16)+1}catch(w){a.error("Failed to parse AAC config ALS.");d.dispatchEvent(g.ERROR,{name:w.name,message:w.message});break a}}d.RefSampleDuration=Math.floor(1024*t.Timescale/d.SamplingFrequency);d.AudioObjectType=p.SBR;d.ExtensionSamplingFrequencyIndex=d.SamplingFrequencyIndex;
6<=d.SamplingFrequencyIndex?d.ExtensionSamplingFrequencyIndex-=3:1===d.ChannelConfiguration&&(d.AudioObjectType=p.AAC_LC);d.Config=d.AudioObjectType===p.SBR?new Uint8Array([d.AudioObjectType<<3|d.SamplingFrequencyIndex>>1,d.SamplingFrequencyIndex<<7|d.ChannelConfiguration<<3|d.ExtensionSamplingFrequencyIndex>>1,d.ExtensionSamplingFrequencyIndex<<7|8,0]):new Uint8Array([d.AudioObjectType<<3|d.SamplingFrequencyIndex>>1,d.SamplingFrequencyIndex<<7|d.ChannelConfiguration<<3]);d.Codec="mp4a.40."+d.AudioObjectType;
d.dispatchEvent(q.AAC_SPECIFIC_CONFIG)}break;case m.RAW_FRAME_DATA:b.set("DTS",t.TimeBase+t.Timestamp);b.set("PTS",b.get("DTS"));b.set("Data",b.payload.subarray(b.position));d.dispatchEvent(q.AAC_SAMPLE,{packet:b});break;default:d.dispatchEvent(g.ERROR,{name:"TypeError",message:"Unrecognized AAC packet type: "+d.DataType})}}};var t=c;d.MimeType="audio/mp4";d.Codec="";d.RefSampleDuration=Math.floor(1024*t.Timescale/44100);d.AudioObjectType=0;d.SamplingFrequencyIndex=0;d.SamplingFrequency=0;d.ChannelConfiguration=
0;d.Channels=0;d.ExtensionAudioObjectType=0;d.ExtensionSamplingFrequencyIndex=0;d.ExtensionSamplingFrequency=0;d.ExtensionChannelConfiguration=0;d.Config=null;d.ExpectedDts=0;d.Flags={IsLeading:0,SampleDependsOn:1,SampleIsDependedOn:0,SampleHasRedundancy:0,IsNonSync:0}}var a=e.utils,h=a.Golomb,c=e.events,b=c.EventDispatcher,g=c.Event,q=c.MediaEvent;e=e.AV.Codec;var m={SPECIFIC_CONFIG:0,RAW_FRAME_DATA:1},p={NULL:0,AAC_MAIN:1,AAC_LC:2,AAC_SSR:3,AAC_LTP:4,SBR:5,AAC_SCALABLE:6,TWINVQ:7,CELP:8,HVXC:9,
TTSI:12,MAINSYNTH:13,WAVESYNTH:14,MIDI:15,SAFX:16,ER_AAC_LC:17,ER_AAC_LTP:19,ER_AAC_SCALABLE:20,ER_TWINVQ:21,ER_BSAC:22,ER_AAC_LD:23,ER_CELP:24,ER_HVXC:25,ER_HILN:26,ER_PARAM:27,SSC:28,PS:29,SURROUND:30,ESCAPE:31,L1:32,L2:33,L3:34,DST:35,ALS:36,SLS:37,SLS_NON_CORE:38,ER_AAC_ELD:39,SMR_SIMPLE:40,SMR_MAIN:41,USAC_NOSBR:42,SAOC:43,LD_SURROUND:44,USAC:45},f=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],l=[0,1,2,3,4,5,6,8];c=[new Uint8Array([0,200,0,128,35,128]),new Uint8Array([33,
0,73,144,2,25,0,35,128]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])];d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="AAC";d.DataTypes=m;d.AOT=p;d.SamplingFrequencys=f;d.Channels=l;d.SilentFrames=c;e.register(d)})(playease);
(function(e){function d(e){c.call(this,"AVC",g,[b.ERROR]);var f=this;f.parse=function(c){if(4>c.left())f.dispatchEvent(b.ERROR,{name:"DataError",message:"Data not enough while parsing AVC packet."});else{l.Timestamp=c.timestamp;var d=new DataView(c.payload.buffer);c.set("DataType",d.getUint8(c.position++));c.set("CTS",d.getUint8(c.position++)<<16|d.getUint8(c.position++)<<8|d.getUint8(c.position++));switch(c.get("DataType")){case q.SEQUENCE_HEADER:a:if(7>c.left())f.dispatchEvent(b.ERROR,{name:"DataError",
message:"Data not enough while parsing AVC decoder configuration record."});else{f.AVCC=c.payload.subarray(c.position);d=0;var k=new DataView(c.payload.buffer,c.position);f.ConfigurationVersion=k.getUint8(d++);f.ProfileIndication=k.getUint8(d++);f.ProfileCompatibility=k.getUint8(d++);f.LevelIndication=k.getUint8(d++);if(1!==f.ConfigurationVersion||0===f.ProfileIndication)f.dispatchEvent(b.ERROR,{name:"DataError",message:"Invalid AVC configuration version or profile."});else if(f.NalLengthSize=(k.getUint8(d++)&
3)+1,3>f.NalLengthSize)f.dispatchEvent(b.ERROR,{name:"DataError",message:"Invalid NalLengthSize "+f.NalLengthSize});else{for(var t=k.getUint8(d++)&31,p=0;p<t;p++){var r=k.getUint16(d);d+=2;if(0!==r){var w=f.AVCC.subarray(d,d+r);try{f.SPS.parse(w),f.RefSampleDuration=Math.floor(l.Timescale*e.FrameRate.Den/e.FrameRate.Num)}catch(G){f.dispatchEvent(b.ERROR,{name:G.name,message:G.message});break a}d+=r}}t=k.getUint8(d++);for(p=0;p<t;p++)r=k.getUint16(d),d+=2,0!==r&&(d+=r);f.Codec=f.SPS.Codec;f.dispatchEvent(g.AVC_CONFIG_RECORD,
{packet:c})}}break;case q.NALU:a:{d=0;k=new DataView(c.payload.buffer,c.position);p=c.payload.subarray(c.position);t=[];c.set("DTS",l.TimeBase+l.Timestamp);c.set("PTS",c.get("CTS")+c.get("DTS"));c.set("Data",p);for(c.set("NALUs",t);d<k.byteLength;){if(d+4>=k.byteLength){f.dispatchEvent(h.ERROR,{name:"DataError",message:"Data not enough for next NALU."});break a}r=k.getUint32(d);3===f.NalLengthSize&&(r>>=8);d+=f.NalLengthSize;if(r>k.byteLength-f.NalLengthSize){f.dispatchEvent(h.ERROR,{name:"DataError",
message:"Malformed Nalus near timestamp "+c.get("DTS")+"."});break a}c.set("ForbiddenZeroBit",k.getUint8(d)>>7&1);c.set("NalRefIdc",k.getUint8(d)>>5&3);c.set("NalUnitType",k.getUint8(d)&31);c.get("NalUnitType")===m.IDR_SLICE&&c.set("Keyframe",!0);w=p.subarray(d,d+r);d+=r;t.push(w)}f.dispatchEvent(g.AVC_SAMPLE,{packet:c})}break;case q.END_OF_SEQUENCE:a.debug("AVC sequence end.");f.dispatchEvent(g.END_OF_STREAM);break;default:f.dispatchEvent(b.ERROR,{name:"TypeError",message:"Unrecognized AVC packet type: "+
c.get("DataType")})}}};var l=e;f.MimeType="video/mp4";f.Codec="";f.RefSampleDuration=Math.floor(l.Timescale*e.FrameRate.Den/e.FrameRate.Num);f.AVCC=null;f.ConfigurationVersion=0;f.ProfileIndication=0;f.ProfileCompatibility=0;f.LevelIndication=0;f.NalLengthSize=0;f.SPS=new d.SPS(l);f.PPS=new d.PPS(f.SPS);f.ExpectedDts=0;f.Flags={IsLeading:0,SampleDependsOn:0,SampleIsDependedOn:0,SampleHasRedundancy:0,IsNonSync:0}}var a=e.utils,h=e.events,c=h.EventDispatcher,b=h.Event,g=h.MediaEvent;e=e.AV.Codec;var q=
{SEQUENCE_HEADER:0,NALU:1,END_OF_SEQUENCE:2},m={SLICE:1,DPA:2,DPB:3,DPC:4,IDR_SLICE:5,SEI:6,SPS:7,PPS:8,AUD:9,END_SEQUENCE:10,END_STREAM:11,FILLER_DATA:12,SPS_EXT:13,AUXILIARY_SLICE:19,FF_IGNORE:267448321};d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="AVC";d.DataTypes=q;d.NAL=m;e.register(d)})(playease);
(function(e){function d(){var a=this,b;a.parse=function(c){b=c;a.CpbCnt=b.ReadUE()+1;if(32<a.CpbCnt)throw{name:"DataError",message:"Invalid HRD.CpbCnt "+a.CpbCnt+"."};a.BitRateScale=b.ReadBits(4);a.CpbSizeScale=b.ReadBits(4);for(c=0;c<a.CpbCnt;c++)a.BitRateValue[c]=b.ReadUE(),a.CpbSizeValue[c]=b.ReadUE(),a.CbrFlag|=b.ReadBits(1)<<c;a.InitialCpbRemovalDelayLength=_b.ReadBits(5)+1;a.CpbRemovalDelayLength=b.ReadBits(5)+1;a.DpbOutputDelayLength=b.ReadBits(5)+1;a.TimeOffsetLength=b.ReadBits(5)};a.CpbCnt=
0;a.BitRateScale=0;a.CpbSizeScale=0;a.BitRateValue=Array(32);a.CpbSizeValue=Array(32);a.CbrFlag=0;a.InitialCpbRemovalDelayLength=0;a.CpbRemovalDelayLength=0;a.DpbOutputDelayLength=0;a.TimeOffsetLength=0}function a(){var a=this,c;a.parse=function(b){c=b;a.AspectRatioInfoPresentFlag=c.ReadBits(1);if(0!==a.AspectRatioInfoPresentFlag)if(a.AspectRatioIdc=c.ReadBits(8),255===a.AspectRatioIdc)a.Sar.Num=c.ReadBits(16),a.Sar.Den=c.ReadBits(16);else if(a.AspectRatioIdc<q.length)a.Sar=q[a.AspectRatioIdc];else throw{name:"DataError",
message:"Illegal aspect ratio."};else a.Sar.Num=0,a.Sar.Den=0;a.OverscanInfoPresentFlag=c.ReadBits(1);0!==a.OverscanInfoPresentFlag&&(a.OverscanAppropriateFlag=c.ReadBits(1));a.VideoSignalTypePresentFlag=c.ReadBits(1);0!==a.VideoSignalTypePresentFlag&&(a.VideoFormat=c.ReadBits(3),a.VideoFullRangeFlag=c.ReadBits(1),a.ColourDescriptionPresentFlag=c.ReadBits(1),0!==a.ColourDescriptionPresentFlag&&(a.ColourPrimaries=c.ReadBits(8),a.TransferCharacteristics=c.ReadBits(8),a.MatrixCoefficients=c.ReadBits(8),
a.ColourPrimaries>=g.COL_PRI_NB&&(a.ColourPrimaries=g.COL_PRI_UNSPECIFIED),a.TransferCharacteristics>=g.COL_TRC_NB&&(a.TransferCharacteristics=g.COL_TRC_UNSPECIFIED),a.MatrixCoefficients>=g.COL_SPC_NB&&(a.MatrixCoefficients=g.COL_SPC_UNSPECIFIED)));a.ChromaLocInfoPresentFlag=c.ReadBits(1);0!==a.ChromaLocInfoPresentFlag&&(a.ChromaSampleLocTypeTopField=c.ReadUE(),a.ChromaSampleLocTypeBottomField=c.ReadUE());if(0!==c.ReadBits(1)&&10>c.Left())throw{name:"DataError",message:"Truncated VUI."};a.TimingInfoPresentFlag=
c.ReadBits(1);if(0!==a.TimingInfoPresentFlag){a.NumUnitsInTick=c.ReadBitsLong(32);a.TimeScale=c.ReadBitsLong(32);if(0===a.NumUnitsInTick||0===a.TimeScale)h.debug("time_scale/num_units_in_tick invalid or unsupported "+a.TimeScale+"/"+a.NumUnitsInTick),a.TimingInfoPresentFlag=0;a.FixedFrameRateFlag=c.ReadBits(1)}a.NalHrdParametersPresentFlag=c.ReadBits(1);0!==a.NalHrdParametersPresentFlag&&a.NalHrd.parse(c);a.VclHrdParametersPresentFlag=c.ReadBits(1);0!==a.VclHrdParametersPresentFlag&&a.VclHrd.parse(c);
if(0!==a.NalHrdParametersPresentFlag||0!==a.VclHrdParametersPresentFlag)a.LowDelayHrdFlag=c.ReadBits(1);a.PicStructPresentFlag=c.ReadBits(1);if(0!==c.Left()&&(a.BitstreamRestrictionFlag=c.ReadBits(1),0!==a.BitstreamRestrictionFlag&&(a.MotionVectorsOverPicBoundariesFlag=c.ReadBits(1),a.MaxBytesPerPicDenom=c.ReadUE(),a.MaxBitsPerMbDenom=c.ReadUE(),a.Log2MaxMvLengthHorizontal=c.ReadUE(),a.Log2MaxMvLengthVertical=c.ReadUE(),a.MaxNumReorderFrames=c.ReadUE(),a.MaxDecFrameBuffering=c.ReadUE(),0>c.Left()&&
(a.MaxNumReorderFrames=0,a.BitstreamRestrictionFlag=0),16<a.MaxNumReorderFrames)))throw a.MaxNumReorderFrames=16,{name:"DataError",message:"Clipping illegal MaxNumReorderFrames "+a.MaxNumReorderFrames+"."};};a.AspectRatioInfoPresentFlag=0;a.AspectRatioIdc=0;a.Sar=new b;a.OverscanInfoPresentFlag=0;a.OverscanAppropriateFlag=0;a.VideoSignalTypePresentFlag=0;a.VideoFormat=0;a.VideoFullRangeFlag=0;a.ColourDescriptionPresentFlag=0;a.ColourPrimaries=0;a.TransferCharacteristics=0;a.MatrixCoefficients=0;a.ChromaLocInfoPresentFlag=
0;a.ChromaSampleLocTypeTopField=0;a.ChromaSampleLocTypeBottomField=0;a.TimingInfoPresentFlag=0;a.NumUnitsInTick=0;a.TimeScale=0;a.FixedFrameRateFlag=0;a.NalHrdParametersPresentFlag=0;a.NalHrd=new d;a.VclHrdParametersPresentFlag=0;a.VclHrd=new d;a.LowDelayHrdFlag=0;a.PicStructPresentFlag=0;a.BitstreamRestrictionFlag;a.MotionVectorsOverPicBoundariesFlag=0;a.MaxBytesPerPicDenom=0;a.MaxBitsPerMbDenom=0;a.Log2MaxMvLengthHorizontal=0;a.Log2MaxMvLengthVertical=0;a.MaxNumReorderFrames=0;a.MaxDecFrameBuffering=
0}var h=e.utils,c=h.Golomb;e=e.AV;var b=e.Rational,g=e.Codec;e=g.AVC;var q=[new b(0,1),new b(1,1),new b(12,11),new b(10,11),new b(16,11),new b(40,33),new b(24,11),new b(20,11),new b(32,11),new b(80,33),new b(18,11),new b(15,11),new b(64,33),new b(160,99),new b(4,3),new b(3,2),new b(2,1)];e.SPS=function(b){function d(a,b){return 0!==a&&0!==b&&(a+128)*(b+128)<h.MAX_INT32/8}var f=this,e;f.parse=function(a){if(4>a.byteLength)throw{name:"DataError",message:"Data not enough while parsing SPS."};f.Codec=
"avc1.";h.forEach(a.subarray(1,4),function(a,b){a=h.padStart(b.toString(16),2,"0");f.Codec+=a});a=h.ebsp2rbsp(a);e=new c(a);f.Data=a;e.ReadBits(8);f.ProfileIdc=e.ReadBits(8);f.ConstraintSetFlags=e.ReadBits(1)<<0;f.ConstraintSetFlags|=e.ReadBits(1)<<1;f.ConstraintSetFlags|=e.ReadBits(1)<<2;f.ConstraintSetFlags|=e.ReadBits(1)<<3;f.ConstraintSetFlags|=e.ReadBits(1)<<4;f.ConstraintSetFlags|=e.ReadBits(1)<<5;f.ReservedZero2Bits=e.ReadBits(2);f.LevelIdc=e.ReadBits(8);f.ID=e.ReadUE();if(32<=f.ID)throw{name:"DataError",
message:"SPS ID(0x"+f.ID.toString(16)+") out of range."};f.SeqScalingMatrixPresentFlag=0;f.Vui.VideoFullRangeFlag=1;f.Vui.MatrixCoefficients=g.COL_SPC_UNSPECIFIED;if(100===f.ProfileIdc||110===f.ProfileIdc||122===f.ProfileIdc||244===f.ProfileIdc||44===f.ProfileIdc||83===f.ProfileIdc||86===f.ProfileIdc||118===f.ProfileIdc||128===f.ProfileIdc||138===f.ProfileIdc||144===f.ProfileIdc){f.ChromaFormatIdc=e.ReadUE();if(3<f.ChromaFormatIdc)throw{name:"DataError",message:"Bad ChromaFormatIdc "+f.ChromaFormatIdc+
"."};if(3===f.ChromaFormatIdc&&(f.SeparateColourPlaneFlag=e.ReadBits(1),0!==f.SeparateColourPlaneFlag))throw{name:"DataError",message:"Separate color planes are not supported."};f.BitDepthLuma=e.ReadUE()+8;f.BitDepthChroma=e.ReadUE()+8;if(f.BitDepthChroma!==f.BitDepthLuma)throw{name:"DataError",message:"Different chroma and luma bit depth."};if(8>f.BitDepthLuma||14<f.BitDepthLuma||8>f.BitDepthChroma||14<f.BitDepthChroma)throw{name:"DataError",message:"Illegal bit depth value "+f.BitDepthLuma+", "+
f.BitDepthChroma+"."};f.TransformBypass=e.ReadBits(1);f.SeqScalingMatrixPresentFlag=e.ReadBits(1);if(0!==f.SeqScalingMatrixPresentFlag){a=8;3===f.ChromaFormatIdc&&(a+=4);for(var n=0;n<a;n++)if(0!=e.ReadBits(1)){var k=16;6<=n&&(k=64);for(var l=8,p=8,r=0;r<k;r++)p=e.ReadSE(),p=(l+p+256)%256,0!==p&&(l=p)}}}else f.ChromaFormatIdc=1,f.BitDepthLuma=8,f.BitDepthChroma=8;f.Log2MaxFrameNum=e.ReadUE()+4;if(4>f.Log2MaxFrameNum||16<f.Log2MaxFrameNum)throw{name:"DataError",message:"log2_max_frame_num_minus4("+
(f.Log2MaxFrameNum-4)+") out of range, expect 0-12."};f.PocType=e.ReadUE();if(0===f.PocType){if(f.Log2MaxPocLsb=e.ReadUE()+4,16<f.Log2MaxPocLsb)throw{name:"DataError",message:"log2_max_poc_lsb("+f.Log2MaxPocLsb+") is out of range."};}else if(1===f.PocType){f.DeltaPicOrderAlwaysZeroFlag=e.ReadBits(1);f.OffsetForNonRefPic=e.ReadUE();f.OffsetForTopToBottomField=e.ReadUE();f.NumRefFramesInPocCycle=e.ReadUE();a=f.OffsetForRefFrame.length;if(f.NumRefFramesInPocCycle>=a)throw{name:"DataError",message:"poc_cycle_length("+
f.NumRefFramesInPocCycle+") overflow."};for(n=0;n<f.NumRefFramesInPocCycle;n++)f.OffsetForRefFrame[n]=e.ReadUE()}else if(2!==f.PocType)throw{name:"DataError",message:"Illegal POC type "+f.PocType+"."};f.MaxNumRefFrames=e.ReadUE();if(34<f.MaxNumRefFrames||16<f.MaxNumRefFrames)throw{name:"DataError",message:"Too many reference frames, "+f.MaxNumRefFrames+"."};f.GapsInFrameNumValueAllowedFlag=e.ReadBits(1);f.PicWidth=e.ReadUE()+1;f.PicHeight=e.ReadUE()+1;if(f.PicWidth>=h.MAX_INT32/16||f.PicHeight>=h.MAX_INT32/
16||0==d(16*f.PicWidth,16*f.PicHeight))throw{name:"DataError",message:"pic_width or pic_height overflow."};f.FrameMbsOnlyFlag=e.ReadBits(1);f.MbAdaptiveFrameFieldFlag=0===f.FrameMbsOnlyFlag?e.ReadBits(1):0;b.CodecWidth=16*f.PicWidth;b.CodecHeight=16*f.PicHeight*(2-f.FrameMbsOnlyFlag);f.Direct8x8InferenceFlag=e.ReadBits(1);f.FrameCroppingFlag=e.ReadBits(1);if(0!==f.FrameCroppingFlag){var w;a=e.ReadUE();n=e.ReadUE();k=e.ReadUE();l=e.ReadUE();1===f.ChromaFormatIdc&&(w=1);if(1===f.ChromaFormatIdc||2===
f.ChromaFormatIdc)var m=1;m=1<<m;w=2-f.FrameMbsOnlyFlag<<w;if(a>h.MAX_INT32/4/m||n>h.MAX_INT32/4/m||k>h.MAX_INT32/4/w||l>h.MAX_INT32/4/w||(a+n)*m>=b.CodecWidth||(k+l)*w>=b.CodecHeight)throw{name:"DataError",message:"Invalid crop values, l="+a+", r="+n+", t="+k+", b="+l+", w="+b.CodecWidth+", h="+b.CodecHeight+"."};f.FrameCropLeftOffset=a*m;f.FrameCropRightOffset=n*m;f.FrameCropTopOffset=k*w;f.FrameCropBottomOffset=l*w}else f.FrameCropLeftOffset=0,f.FrameCropRightOffset=0,f.FrameCropTopOffset=0,f.FrameCropBottomOffset=
0;f.VuiParametersPresentFlag=e.ReadBits(1);0!==f.VuiParametersPresentFlag&&(f.Vui.parse(e),0!==f.Vui.TimingInfoPresentFlag&&(b.FrameRate.Num=f.Vui.TimeScale,b.FrameRate.Den=2*f.Vui.NumUnitsInTick));b.CodecWidth-=f.FrameCropLeftOffset+f.FrameCropRightOffset;b.CodecHeight-=f.FrameCropTopOffset+f.FrameCropBottomOffset;b.Width=b.CodecWidth;b.Height=b.CodecHeight;1<f.Vui.Sar.Den&&(b.Width*=f.Vui.Sar.Num/f.Vui.Sar.Den)};f.ProfileIdc=0;f.ConstraintSetFlags=0;f.ReservedZero2Bits=0;f.LevelIdc=0;f.ID=0;f.ChromaFormatIdc=
0;f.SeparateColourPlaneFlag=0;f.BitDepthLuma=0;f.BitDepthChroma=0;f.TransformBypass=0;f.SeqScalingMatrixPresentFlag=0;f.Log2MaxFrameNum=0;f.PocType=0;f.Log2MaxPocLsb=0;f.DeltaPicOrderAlwaysZeroFlag=0;f.OffsetForNonRefPic=0;f.OffsetForTopToBottomField=0;f.NumRefFramesInPocCycle=0;f.OffsetForRefFrame=Array(256);f.MaxNumRefFrames=0;f.GapsInFrameNumValueAllowedFlag=0;f.PicWidth=0;f.PicHeight=0;f.FrameMbsOnlyFlag=0;f.MbAdaptiveFrameFieldFlag=0;f.Direct8x8InferenceFlag=0;f.FrameCroppingFlag=0;f.FrameCropLeftOffset=
0;f.FrameCropRightOffset=0;f.FrameCropTopOffset=0;f.FrameCropBottomOffset=0;f.VuiParametersPresentFlag=0;f.Vui=new a}})(playease);
(function(e){var d=e.utils,a=d.Golomb;e.AV.Codec.AVC.PPS=function(e){var c=this,b;c.parse=function(e){e=d.ebsp2rbsp(e);b=new a(e);c.Data=e;c.ID=b.ReadUE();if(256<=c.ID)throw{name:"DataError",message:"PPS ID(0x"+c.ID.toString(16)+") out of range."};c.SpsID=b.ReadUE();if(32<=c.SpsID)throw{name:"DataError",message:"SPS ID(0x"+c.SpsID.toString(16)+") out of range."};if(14<g.BitDepthLuma)throw{name:"DataError",message:"Invalid BitDepthLuma "+g.BitDepthLuma+"."};if(11===g.BitDepthLuma||13===g.BitDepthLuma)throw{name:"DataError",
message:"Unimplemented BitDepthLuma "+g.BitDepthLuma+"."};c.EntropyCodingModeFlag=b.ReadBits(1);c.PicOrderPresentFlag=b.ReadBits(1);c.NumSliceGroups=b.ReadUE()+1;1<c.NumSliceGroups&&(c.SliceGroupMapType=b.ReadUE(),d.debug("FMO not supported!"));c.NumRefIdx[0]=b.ReadUE()+1;c.NumRefIdx[1]=b.ReadUE()+1;if(31<c.NumRefIdx[0]-1||31<c.NumRefIdx[1]-1)throw{name:"DataError",message:"PPS reference overflow."};e=6*(g.BitDepthLuma-8);c.WeightedPredFlag=b.ReadBits(1);c.WeightedBipredIdc=b.ReadBits(2);c.PicInitQp=
b.ReadSE()+26+e;c.PicInitQs=b.ReadSE()+26+e;c.ChromaQpIndexOffset[0]=b.ReadSE();c.DeblockingFilterControlPresentFlag=b.ReadBits(1);c.ConstrainedIntraPredFlag=b.ReadBits(1);c.RedundantPicCntPresentFlag=b.ReadBits(1);c.Transform8x8ModeFlag=0;if(e=0<b.Left())66!==g.ProfileIdc&&77!==g.ProfileIdc&&88!==g.ProfileIdc||0===(g.ConstraintSetFlags&7)?e=!0:(d.debug("Current profile doesn't provide more RBSP data in PPS, skipping..."),e=!1);e?(c.Transform8x8ModeFlag=b.ReadBits(1),c.PicScalingMatrixPresentFlag=
b.ReadBits(1),0!==c.PicScalingMatrixPresentFlag&&(e=2,3===g.ChromaFormatIdc&&(e=6),b.ReadBits(6+e*c.Transform8x8ModeFlag)),c.ChromaQpIndexOffset[1]=b.ReadSE()):c.ChromaQpIndexOffset[1]=c.ChromaQpIndexOffset[0];c.ChromaQpIndexOffset[0]!==c.ChromaQpIndexOffset[1]&&(c.ChromaQpDiff=1)};var g=e;c.ID=0;c.SpsID=0;c.EntropyCodingModeFlag=0;c.PicOrderPresentFlag=0;c.NumSliceGroups=0;c.SliceGroupMapType=0;c.NumRefIdx=Array(2);c.WeightedPredFlag=0;c.WeightedBipredIdc=0;c.PicInitQp=0;c.PicInitQs=0;c.ChromaQpIndexOffset=
Array(2);c.DeblockingFilterControlPresentFlag=0;c.ConstrainedIntraPredFlag=0;c.RedundantPicCntPresentFlag=0;c.Transform8x8ModeFlag=0;c.PicScalingMatrixPresentFlag=0;c.ChromaQpDiff=0}})(playease);
(function(e){function d(a,b){c.call(this,"MediaStreamTrack");var f=this;f.stop=function(){};f.clone=function(){return new d(f.kind,f.source)};f.id=0;f.sn=0;f.kind=a;f.source=b}var a=e.utils,h=e.events,c=h.EventDispatcher,b=h.Event,g=h.MediaStreamTrackEvent;e=e.AV;var q=e.Information,m={},p=[];m.register=function(b,c){try{p.splice(c||p.length,0,b),m[b.prototype.kind]=b}catch(z){a.error("Failed to register format "+b.prototype.kind+", Error="+z.message)}};m.get=function(a){for(var b=0;b<p.length;b++){var c=
p[b];if(c.prototype.kind===a)return c}return null};d.KindAudio="audio";d.KindVideo="video";m.MediaStreamTrack=d;m.MediaStream=function(){c.call(this,"MediaStream",g,[b.ERROR]);var f=this;f.addTrack=function(b){for(var c=0;c<h.length;c++)if(h[c]===b){a.warn("MediaStreamTrack already added.");return}b.id=e++;h.push(b);f.dispatchEvent(g.ADDTRACK,{track:b})};f.removeTrack=function(a){for(var b=0;b<h.length;b++)if(h[b]===a){h.splice(b,1);f.dispatchEvent(g.REMOVETRACK,{track:a});break}};f.getTrackById=
function(a){for(var b=0;b<h.length;b++)if(h[b].id===a)return h[b];return null};f.getTracks=function(){var b=[];a.forEach(h,function(a,c){b.push(c)});return b};f.getAudioTracks=function(){var b=[];a.forEach(h,function(a,c){c.kind===d.KindAudio&&b.push(c)});return b};f.getVideoTracks=function(){var b=[];a.forEach(h,function(a,c){c.kind===d.KindVideo&&b.push(c)});return b};f.close=function(){a.forEach(h,function(a,b){b.stop();f.dispatchEvent(g.REMOVETRACK,{track:b})});e=1;h=[];f.info=new q};var e=1;
var h=[];f.info=new q};e.format=m.get;e.Format=m})(playease);
(function(e){function d(){function d(){k=l.f;e.hasAudio=!1;e.hasVideo=!1}m.call(this,"FLV");var e=this,k,h;e.append=function(d){d=new Uint8Array(d);for(var r=0;r<d.byteLength;r++)switch(k){case l.f:if(70!==d[r]){e.dispatchEvent(c.ERROR,{name:"DataError",message:'Not "F"'});return}k=l.l;break;case l.l:if(76!==d[r]){e.dispatchEvent(c.ERROR,{name:"DataError",message:'Not "L"'});return}k=l.v;break;case l.v:if(86!==d[r]){e.dispatchEvent(c.ERROR,{name:"DataError",message:'Not "V"'});return}k=l.version;
break;case l.version:k=l.flags;break;case l.flags:e.hasAudio=!!(d[r]&4);e.hasVideo=!!(d[r]&1);k=l.header0;break;case l.header0:k=l.header1;break;case l.header1:k=l.header2;break;case l.header2:k=l.header3;break;case l.header3:k=l.backpointer0;break;case l.backpointer0:k=l.backpointer1;break;case l.backpointer1:k=l.backpointer2;break;case l.backpointer2:k=l.backpointer3;break;case l.backpointer3:k=l.type;break;case l.type:h=new g.Packet;switch(d[r]){case p.AUDIO:h.kind=q.KindAudio;break;case p.VIDEO:h.kind=
q.KindVideo;break;case p.SCRIPT:h.kind=q.KindScript;break;default:e.dispatchEvent(c.ERROR,{name:"TypeError",message:"Unrecognized flv tag "+a.hex(d[r])+"."});return}k=l.length0;break;case l.length0:h.length=d[r]<<16;k=l.length1;break;case l.length1:h.length|=d[r]<<8;k=l.length2;break;case l.length2:h.length|=d[r];h.payload=new Uint8Array(h.length);h.position=0;k=l.timestamp0;break;case l.timestamp0:h.timestamp=d[r]<<16;k=l.timestamp1;break;case l.timestamp1:h.timestamp|=d[r]<<8;k=l.timestamp2;break;
case l.timestamp2:h.timestamp|=d[r];k=l.timestamp3;break;case l.timestamp3:h.timestamp|=d[r]<<24;k=l.streamid0;break;case l.streamid0:h.streamid=d[r]<<16;k=l.streamid1;break;case l.streamid1:h.streamid|=d[r]<<8;k=l.streamid2;break;case l.streamid2:h.streamid|=d[r];k=l.payload;break;case l.payload:var w=Math.min(h.length-h.position,d.byteLength-r);h.payload.set(d.subarray(r,r+w),h.position);h.position+=w;r+=w-1;if(h.position===h.length){switch(h.kind){case q.KindAudio:h.set("Format",h.payload[0]>>
4&15);h.set("SampleRate",h.payload[0]>>2&3);h.set("SampleSize",h.payload[0]>>1&1);h.set("SampleType",h.payload[0]&1);h.set("DataType",h.payload[1]);h.position=1;break;case q.KindVideo:h.set("FrameType",h.payload[0]>>4&15);h.set("Codec",h.payload[0]&15);h.set("DataType",h.payload[1]);h.set("Keyframe",h.get("FrameType")===f.KEYFRAME);h.position=1;break;case q.KindScript:h.position=0}e.dispatchEvent(b.PACKET,{packet:h});k=l.backpointer0}break;default:e.dispatchEvent(c.ERROR,{name:"InvalidStateError",
message:"Invalid state while parsing flv tag."});return}};e.reset=function(){d();e.close()};d()}var a=e.utils,h=e.events,c=h.Event,b=h.MediaEvent,g=e.AV,q=g.Packet;e=g.Format;var m=e.MediaStream,p={AUDIO:8,VIDEO:9,SCRIPT:18},f={KEYFRAME:1,INTER_FRAME:2,DISPOSABLE_INTER_FRAME:3,GENERATED_KEYFRAME:4,INFO_OR_COMMAND_FRAME:5},l={f:0,l:1,v:2,version:3,flags:4,header0:5,header1:6,header2:7,header3:8,backpointer0:9,backpointer1:10,backpointer2:11,backpointer3:12,type:13,length0:14,length1:15,length2:16,
timestamp0:17,timestamp1:18,timestamp2:19,timestamp3:20,streamid0:21,streamid1:22,streamid2:23,payload:24};d.prototype=Object.create(m.prototype);d.prototype.constructor=d;d.prototype.kind="FLV";d.Tags=p;d.Frames=f;d.Formats={LINEAR_PCM_PLATFORM_ENDIAN:0,ADPCM:1,MP3:2,LINEAR_PCM_LITTLE_ENDIAN:3,NELLYMOSER_16_kHz_MONO:4,NELLYMOSER_8_kHz_MONO:5,NELLYMOSER:6,G_711_A_LAW_LOGARITHMIC_PCM:7,G_711_MU_LAW_LOGARITHMIC_PCM:8,RESERVED:9,AAC:10,SPEEX:11,MP3_8_kHz:14,DEVICE_SPECIFIC_SOUND:15};d.Rates=[5500,11025,
22050,44100];d.Codecs={JPEG:1,H263:2,SCREEN_VIDEO:3,VP6:4,VP6_ALPHA:5,SCREEN_VIDEO_2:6,AVC:7};e.FLV=d})(playease);
(function(e){function d(){b.call(this,"FMP4");var a=this;a.append=function(b){a.dispatchEvent(h.ERROR,{name:"NotSupportedError",message:"The operation is not supported."})};a.getInitSegment=function(){var b=a.ftyp(),c=a.moov.apply(a,arguments);return d.merge(b,c)};a.getSegment=function(b,f){var e=b.source,g=f.get("DTS")-a.info.TimeBase-e.ExpectedDts;f.set("DTS",e.ExpectedDts);f.set("PTS",f.get("CTS")+f.get("DTS"));f.set("Duration",e.RefSampleDuration+g);e.ExpectedDts=f.get("DTS")+f.get("Duration");
b.kind===c.KindVideo&&(f.get("Keyframe")?(e.Flags.SampleDependsOn=2,e.Flags.SampleIsDependedOn=1):(e.Flags.SampleDependsOn=1,e.Flags.SampleIsDependedOn=0));b.sn++;b=a.moof(b,f);f=a.mdat(f.get("Data"));return d.merge(b,f)};a.box=function(a){for(var b=Array.prototype.slice.call(arguments,1),c=8,d=0;d<b.length;d++)c+=b[d].byteLength;var f=0,e=new Uint8Array(c);e[f++]=c>>>24&255;e[f++]=c>>>16&255;e[f++]=c>>>8&255;e[f++]=c&255;e.set(a,f);f+=4;for(d=0;d<b.length;d++)e.set(b[d],f),f+=b[d].byteLength;return e};
a.ftyp=function(){return a.box(g.ftyp,m)};a.moov=function(){for(var b=[],c=[],d=a.mvhd(),f=Array.prototype.slice.call(arguments,0),e=0;e<f.length;e++){var k=f[e],h=a.trak(k);k=a.trex(k);b.push(h);c.push(k)}c=a.box.apply(a,[g.mvex].concat(c));return a.box.apply(a,[g.moov].concat([d],b,[c]))};a.mvhd=function(){var b=a.info.Timescale,c=1E3*a.info.Duration;return a.box(g.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255,c>>24&255,c>>16&255,c>>8&255,c&255,0,1,0,0,1,0,0,0,
0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))};a.trak=function(b){var c=a.tkhd(b);b=a.mdia(b);return a.box(g.trak,c,b)};a.tkhd=function(b){b=b.id;var c=1E3*a.info.Duration,d=a.info.Width,f=a.info.Height;return a.box(g.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255,0,0,0,0,c>>24&255,c>>16&255,c>>8&255,c&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,d>>8&255,d&255,0,0,f>>8&255,f&255,0,0]))};a.mdia=function(b){var c=a.mdhd(),d=a.hdlr(b);b=a.minf(b);return a.box(g.mdia,c,d,b)};a.mdhd=function(){var b=a.info.Timescale,c=1E3*a.info.Duration;return a.box(g.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255,c>>24&255,c>>16&255,c>>8&255,c&255,85,196,0,0]))};a.hdlr=function(b){return a.box(g.hdlr,b.kind===c.KindAudio?f:p)};a.minf=function(b){var d=b.kind===c.KindAudio?
a.box(g.smhd,L):a.box(g.vmhd,t);var f=a.dinf();b=a.stbl(b);return a.box(g.minf,d,f,b)};a.dinf=function(){var b=a.box(g.dref,q);return a.box(g.dinf,b)};a.stbl=function(b){b=a.stsd(b);var c=a.box(g.stts,z),d=a.box(g.stsc,n),f=a.box(g.stsz,k),e=a.box(g.stco,STCO);return a.box(g.stbl,b,c,d,f,e)};a.stsd=function(b){return b.kind===c.KindAudio?a.box(g.stsd,l,a.mp4a(b)):a.box(g.stsd,l,a.avc1(b))};a.mp4a=function(b){var c=b.source.SamplingFrequency;c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,b.source.ChannelConfiguration,
0,16,0,0,0,0,c>>>8&255,c&255,0,0]);b=a.esds(b);return a.box(g.mp4a,c,b)};a.esds=function(b){b=b.source.Config;var c=b.byteLength;c=new Uint8Array([0,0,0,0,3,23+c,0,1,0,4,15+c,64,21,0,0,0,0,0,0,0,0,0,0,0,5,c]);return a.box(g.esds,c,b,new Uint8Array([6,1,2]))};a.avc1=function(b){var c=a.info.CodecWidth,d=a.info.CodecHeight;c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,115,112,101,110,99,101,114,108,97,117,47,112,108,
97,121,101,97,115,101,46,106,115,0,0,0,0,0,0,0,0,0,0,24,255,255]);b=a.box(g.avcC,b.source.AVCC);return a.box(g.avc1,c,b)};a.trex=function(b){b=b.id;return a.box(g.trex,new Uint8Array([0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))};a.moof=function(b,c){var d=a.mfhd(b);b=a.traf(b,c);return a.box(g.moof,d,b)};a.mfhd=function(b){b=b.sn;b=new Uint8Array([0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255]);return a.box(g.mfhd,b)};a.traf=function(b,c){var d=b.id,f=c.get("DTS");d=
a.box(g.tfhd,new Uint8Array([0,0,0,0,d>>24&255,d>>16&255,d>>8&255,d&255]));f=a.box(g.tfdt,new Uint8Array([0,0,0,0,f>>24&255,f>>16&255,f>>8&255,f&255]));c=a.trun(b,c);b=a.sdtp(b);return a.box(g.traf,d,f,c,b)};a.trun=function(b,c){var d=c.get("Duration"),f=c.get("Data").byteLength;b=b.source.Flags;c=c.get("CTS");return a.box(g.trun,new Uint8Array([0,0,15,1,0,0,0,1,0,0,0,121,d>>24,d>>16,d>>8,d,f>>24,f>>16,f>>8,f,b.IsLeading<<2|b.SampleDependsOn,b.SampleIsDependedOn<<6|b.SampleHasRedundancy<<4|b.IsNonSync,
0,0,c>>24,c>>16,c>>8,c]))};a.sdtp=function(b){b=b.source.Flags;return a.box(g.sdtp,new Uint8Array([0,0,0,0,b.IsLeading<<6|b.SampleDependsOn<<4|b.SampleIsDependedOn<<2|b.SampleHasRedundancy]))};a.mdat=function(b){return a.box(g.mdat,b)};a.reset=function(){a.close()}}var a=e.utils,h=e.events.Event;e=e.AV.Format;var c=e.MediaStreamTrack,b=e.MediaStream,g={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],
stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},q=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),m=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),p=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),f=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,
0]),l=new Uint8Array([0,0,0,0,0,0,0,1]),z=new Uint8Array([0,0,0,0,0,0,0,0]),n=STCO=z,k=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),L=new Uint8Array([0,0,0,0,0,0,0,0]);a.forEach(g,function(a,b){b.push(a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3))});d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="FMP4";d.merge=function(){for(var a=Array.prototype.slice.call(arguments,0),b=0,c=0;c<a.length;c++)b+=a[c].byteLength;
var d=0;b=new Uint8Array(b);for(c=0;c<a.length;c++)b.set(a[c],d),d+=a[c].byteLength;return b};d.parseDescriptor=function(a){a=new Uint8Array(a);for(var b=0,c={},d,f=0;f<a.byteLength;f++)switch(b){case 0:d={type:a[f],size:0,data:void 0};c[d.type]=d;b=1;break;case 1:case 2:case 3:case 4:var e=a[f];d&&(d.size=d.size<<7|e&127);e&128?b++:b=5;break;case 5:d&&(d.data=a.subarray(f,f+d.size),f+=d.size-1);b=0;break;default:throw{name:"InvalidStateError",message:"Invalid state while parsing fmp4 descriptor."};
}return c};e.FMP4=d})(playease);(function(e){var d=e.utils,a={},h=[];a.register=function(c,b){try{h.splice(b||h.length,0,c),a[c.prototype.kind]=c}catch(g){d.error("Failed to register module "+c.prototype.kind+", Error="+g.message)}};a.get=function(a,b){for(var c=0;c<h.length;c++){var d=h[c];if(d.prototype.isSupported(a,b))return d}return null};e.module=a.get;e.Module=a})(playease);
(function(e){function d(b){g.call(this,"SRC",q,m);var c=this,d;c.setup=function(){!1===e&&(e=!0,c.dispatchEvent(q.READY,{kind:c.kind}))};c.play=function(b,e){"string"===a.typeof(b)&&b!==d&&b!==h.src&&(d=b,h.src=b);if(b=h.play())b["catch"](function(b){switch(b.name){case "AbortError":c.dispatchEvent(q.STALLED,{name:b.name,message:b.message});break;case "NotAllowedError":a.warn("Failed to play due to the autoplay policy, trying to play with muted.");h.muted=!0;h.play();break;default:a.error("Unrecognized error occured, "+
b.name+": "+b.message),c.dispatchEvent(q.STALLED,{name:b.name,message:b.message})}});h.controls=!1};c.pause=function(){h.pause();h.controls=!1};c.seek=function(a){h.currentTime=a;c.play()};c.stop=function(){e=!1;d=void 0;h.removeAttribute("src");h.load();h.currentTime=0;h.controls=!1};c.reload=function(){h.load();h.controls=!1};c.muted=function(b){"boolean"===a.typeof(b)&&(h.muted=b);return h.muted};c.volume=function(b){"number"===a.typeof(b)&&(h.volume=b);return h.volume};c.cleanup=function(){c.stop();
e=!1};c.element=function(){return h};c.config=b;var e=!1;var h=a.createElement("video");h.addEventListener("play",c.forward);h.addEventListener("suspend",c.forward);h.addEventListener("loadstart",c.forward);h.addEventListener("stalled",c.forward);h.addEventListener("waiting",c.forward);h.addEventListener("abort",c.forward);h.addEventListener("timeout",c.forward);h.addEventListener("durationchange",function(a){c.dispatchEvent(q.DURATIONCHANGE,{duration:h.duration})});h.addEventListener("loadedmetadata",
c.forward);h.addEventListener("loadeddata",c.forward);h.addEventListener("progress",c.forward);h.addEventListener("canplay",c.forward);h.addEventListener("playing",c.forward);h.addEventListener("canplaythrough",c.forward);h.addEventListener("pause",c.forward);h.addEventListener("seeking",c.forward);h.addEventListener("seeked",c.forward);h.addEventListener("ratechange",c.forward);h.addEventListener("timeupdate",function(a){a=h.buffered;c.dispatchEvent(q.TIMEUPDATE,{time:h.currentTime,buffered:a.length?
a.end(a.length-1):0,duration:h.duration})});h.addEventListener("volumechange",c.forward);h.addEventListener("load",c.forward);h.addEventListener("ended",c.forward);h.addEventListener("error",c.forward);h.muted=c.config.muted;h.volume=c.config.volume;c.config.airplay&&h.setAttribute("x-webkit-airplay","allow");c.config.playsinline&&(h.setAttribute("playsinline","isiPhoneShowPlaysinline"),h.setAttribute("webkit-playsinline","isiPhoneShowPlaysinline"),h.setAttribute("x5-playsinline",""),h.setAttribute("x5-video-player-type",
"h5-page"),h.setAttribute("x5-video-player-fullscreen",!0),h.setAttribute("t7-video-player-type","inline"),h.setAttribute("x-webkit-airplay",""));c.config.preload&&(h.preload="none")}var a=e.utils,h=e.OS,c=e.Browser,b=e.events,g=b.EventDispatcher,q=b.Event,m=b.IOEvent;e=e.Module;d.prototype=Object.create(g.prototype);d.prototype.constructor=d;d.prototype.kind="SRC";d.prototype.isSupported=function(b,d){if(c.isMSIE&&9>c.major)return!1;b=new a.URL(b);if("http:"!==b.protocol&&"https:"!==b.protocol)return!1;
d="m3u8 m3u hls mp4 f4v m4v mov m4a f4a aac ogv ogg mp3 oga webm".split(" ");var e="mp4 f4v m4v mov m4a f4a aac ogv ogg mp3 oga webm".split(" ");d=h.isMobile||h.isMac?d:e;for(e=0;e<d.length;e++)if(b.filetype===d[e])return!0;return!1};e.register(d)})(playease);
(function(e){function d(c){function d(b){a.log("MediaSource.onsourceopen");y.load(H)}function h(b){a.log("MediaSource.onsourceended")}function r(b){a.log("MediaSource.onsourceclose")}function D(b){a.log("MediaSource.onsourceerror");u.dispatchEvent(g.ERROR,{name:err.name,message:err.message})}function A(){y&&(y.removeEventListener(q.SUSPEND,E),y.removeEventListener(q.LOADSTART,u.forward),y.removeEventListener(q.STALLED,E),y.removeEventListener(q.ABORT,E),y.removeEventListener(q.TIMEOUT,E),y.removeEventListener(q.PROGRESS,
O),y.removeEventListener(q.LOAD,u.forward),y.removeEventListener(q.LOADEND,u.forward),y.abort());var b=e.io(H,u.config.mode);if(null==b)throw{name:"NotSupportedError",message:"No supported io found."};y=new b(H,u.config.mode);y.addEventListener(q.SUSPEND,E);y.addEventListener(q.LOADSTART,u.forward);y.addEventListener(q.STALLED,E);y.addEventListener(q.ABORT,E);y.addEventListener(q.TIMEOUT,E);y.addEventListener(q.PROGRESS,O);y.addEventListener(q.LOAD,u.forward);y.addEventListener(q.LOADEND,u.forward);
a.log(y.kind+" loader initialized.")}function O(b){a.debug("progress: "+b.data.loaded+"/"+b.data.total);x.append(b.data.buffer);u.forward(b)}function E(a){u.cleanup();u.forward(a)}function W(a){a.table.audiodatarate&&(x.info.AudioDataRate=a.table.audiodatarate.get());a.table.audiosamplerate&&(x.info.AudioSampleRate=a.table.audiosamplerate.get());a.table.audiosamplesize&&(x.info.AudioSampleSize=a.table.audiosamplesize.get());a.table.videodatarate&&(x.info.VideoDataRate=a.table.videodatarate.get());
a.table.width&&(x.info.Width=a.table.width.get());a.table.height&&(x.info.Height=a.table.height.get());a.table.framerate&&(x.info.FrameRate.Num=a.table.framerate.get(),x.info.FrameRate.Den=1);a.table.duration&&(x.info.Duration=a.table.duration.get());a.table.filesize&&(x.info.Size=a.table.filesize.get())}function P(a){a=B.getVideoTracks()[0];Q(a);var b=B.getInitSegment(a);_segments[a.kind].push(b);J(a.kind)}function R(a){a=B.getAudioTracks()[0];Q(a);var b=B.getInitSegment(a);_segments[a.kind].push(b);
J(a.kind)}function S(a){var b=B.getVideoTracks()[0];a=B.getSegment(b,a.data.packet);_segments[b.kind].push(a);J(b.kind)}function T(a){var b=B.getAudioTracks()[0];a=B.getSegment(b,a.data.packet);_segments[b.kind].push(a);J(b.kind)}function U(a){M=!0}function Q(b){var c=b.source;c=c.MimeType+'; codecs="'+c.Codec+'"';if(!1===MediaSource.isTypeSupported(c))a.warn(c+" not supported!");else if(a.log(c),"closed"===C.readyState)u.dispatchEvent(g.ERROR,{name:"InvalidStateError",message:"MediaSource is already closed while adding SourceBuffer."});
else try{var d=C.addSourceBuffer(c);d.addEventListener("updateend",X);d.addEventListener("error",Y);d.mode="sequence";d.kind=b.kind;F[b.kind]=d}catch(I){a.error(I.name+": "+I.message)}}function J(b){if(x.hasAudio||x.hasVideo)if(x.hasAudio&&!F[k.KindAudio]||x.hasVideo&&!F[k.KindVideo])return;var c=_segments[b];if(c.length&&(b=F[b])&&!b.updating)try{var d=c.shift();b.appendBuffer(d)}catch(I){a.error(I.name+": "+I.message),u.dispatchEvent(g.ERROR,{name:I.name,message:I.message})}}function X(b){a.debug("SourceBuffer.onupdateend");
b=b.target;var c=v.buffered;c.length&&(c=c.start(0),v.currentTime<c&&(v.currentTime=c));if(M){if("open"!==C.readyState)return;if(!_segments[k.KindAudio].length&&!_segments[k.KindVideo].length){C.endOfStream();return}}J(b.kind)}function Y(b){a.error("SourceBuffer.onerror");u.dispatchEvent(g.ERROR,{name:"DataError",message:"SourceBuffer error occurs."})}b.call(this,"FLV",g,q);var u=this,K,y;u.setup=function(){!1===K&&(K=!0,u.dispatchEvent(g.READY,{kind:u.kind}))};u.play=function(b,c){if("string"===
a.typeof(b)&&b!==H.href){try{H.parse(b)}catch(V){a.error('Failed to parse url "'+b+'".');u.dispatchEvent(g.ERROR,{name:V.name,message:V.message});return}M=!1;x.reset();B.reset();B.info=x.info;A();v.src=URL.createObjectURL(C);v.load()}if(b=v.play())b["catch"](function(b){switch(b.name){case "AbortError":u.dispatchEvent(g.ERROR,{name:b.name,message:b.message});break;case "NotAllowedError":a.warn("Failed to play due to the autoplay policy, trying to play with muted.");v.muted=!0;v.play();break;default:a.error("Unrecognized error occured, "+
b.name+": "+b.message),u.dispatchEvent(g.ERROR,{name:b.name,message:b.message})}});v.controls=!1};u.pause=function(){v.pause();v.controls=!1};u.seek=function(a){v.currentTime=a;u.play()};u.stop=function(){y&&y.abort();a.forEach(F,function(a,b){b&&C.removeSourceBuffer(b);F[a]=null});a.forEach(_segments,function(a,b){_segments[a]=[]});K=!1;H=new a.URL;v.removeAttribute("src");v.load();v.currentTime=0;v.controls=!1};u.reload=function(){var a=H.href;u.stop();u.play(a)};u.muted=function(b){"boolean"===
a.typeof(b)&&(v.muted=b);return v.muted};u.volume=function(b){"number"===a.typeof(b)&&(v.volume=b);return v.volume};u.cleanup=function(){u.stop();K=!1};u.element=function(){return v};u.config=c;var M=K=!1;var H=new a.URL;var F={};F[k.KindAudio]=null;F[k.KindVideo]=null;_segments={};_segments[k.KindAudio]=[];_segments[k.KindVideo]=[];new a.FileKeeper;var C=new (window.MediaSource||window.WebKitMediaSource);C.addEventListener("sourceopen",d);C.addEventListener("sourceended",h);C.addEventListener("sourceclose",
r);C.addEventListener("error",D);C.addEventListener("webkitsourceopen",d);C.addEventListener("webkitsourceended",h);C.addEventListener("webkitsourceclose",r);C.addEventListener("webkiterror",D);var x=new n.FLV;x.addEventListener(m.PACKET,function(b){b=b.data.packet;switch(b.kind){case l.KindVideo:if(b.get("Codec")!==L.AVC){u.dispatchEvent(g.ERROR,{name:"NotSupportedError",message:"Video codec "+a.hex(b.get("Codec"))+" not supported."});break}var c=x.getVideoTracks()[0];if(b.get("DataType")===z.AVC.DataTypes.SEQUENCE_HEADER){if(c){a.warn("Video track already exists, ignored.");
break}c=new z.AVC(x.info);c=new k(k.KindVideo,c);x.addTrack(c)}c.source.parse(b);break;case l.KindAudio:if(b.get("Format")!==t.AAC){u.dispatchEvent(g.ERROR,{name:"NotSupportedError",message:"Audio format "+a.hex(b.get("Format"))+" not supported."});break}c=x.getAudioTracks()[0];if(b.get("DataType")===z.AAC.DataTypes.SPECIFIC_CONFIG){if(c){a.warn("Audio track already exists, ignored.");break}c=new z.AAC(x.info);c=new k(k.KindAudio,c);x.addTrack(c)}c.source.parse(b);break;case l.KindScript:c=new f.Value;
var d=f.decode(c,b.payload.buffer,b.position);c.key=c.get();d+=f.decode(c,b.payload.buffer,b.position+d);var e={};a.forEach(c.get(),function(a,b){e[b.key]=b.get()});a.log(c.key+":",e);"onMetaData"===c.key&&W(c);break;default:a.error("Unrecognized flv tag "+a.hex(b.kind)+".")}});x.addEventListener(p.ADDTRACK,function(a){a=a.data.track.clone();a.source.addEventListener(m.AVC_CONFIG_RECORD,P);a.source.addEventListener(m.AAC_SPECIFIC_CONFIG,R);a.source.addEventListener(m.AVC_SAMPLE,S);a.source.addEventListener(m.AAC_SAMPLE,
T);a.source.addEventListener(m.END_OF_STREAM,U);a.source.addEventListener(g.ERROR,u.forward);B.addTrack(a)});x.addEventListener(p.REMOVETRACK,function(a){a=B.getTrackById(a.data.track.id);a.source.removeEventListener(m.AVC_CONFIG_RECORD,P);a.source.removeEventListener(m.AAC_SPECIFIC_CONFIG,R);a.source.removeEventListener(m.AVC_SAMPLE,S);a.source.removeEventListener(m.AAC_SAMPLE,T);a.source.removeEventListener(m.END_OF_STREAM,U);a.source.removeEventListener(g.ERROR,u.forward);a.stop();B.removeTrack(a)});
x.addEventListener(g.ERROR,u.forward);var B=new n.FMP4;B.addEventListener(g.ERROR,u.forward);var v=a.createElement("video");v.addEventListener("play",u.forward);v.addEventListener("suspend",u.forward);v.addEventListener("loadstart",u.forward);v.addEventListener("stalled",u.forward);v.addEventListener("waiting",u.forward);v.addEventListener("abort",u.forward);v.addEventListener("timeout",u.forward);v.addEventListener("durationchange",function(a){u.dispatchEvent(g.DURATIONCHANGE,{duration:v.duration})});
v.addEventListener("loadedmetadata",u.forward);v.addEventListener("loadeddata",u.forward);v.addEventListener("progress",u.forward);v.addEventListener("canplay",u.forward);v.addEventListener("playing",u.forward);v.addEventListener("canplaythrough",u.forward);v.addEventListener("pause",u.forward);v.addEventListener("seeking",u.forward);v.addEventListener("seeked",u.forward);v.addEventListener("ratechange",u.forward);v.addEventListener("timeupdate",function(a){a=v.buffered;u.dispatchEvent(g.TIMEUPDATE,
{time:v.currentTime,buffered:a.length?a.end(a.length-1):0,duration:v.duration})});v.addEventListener("volumechange",u.forward);v.addEventListener("load",u.forward);v.addEventListener("ended",u.forward);v.addEventListener("error",u.forward);v.muted=u.config.muted;v.volume=u.config.volume;u.config.airplay&&v.setAttribute("x-webkit-airplay","allow");u.config.playsinline&&(v.setAttribute("playsinline","isiPhoneShowPlaysinline"),v.setAttribute("webkit-playsinline","isiPhoneShowPlaysinline"),v.setAttribute("x5-playsinline",
""),v.setAttribute("x5-video-player-type","h5-page"),v.setAttribute("x5-video-player-fullscreen",!0),v.setAttribute("t7-video-player-type","inline"),v.setAttribute("x-webkit-airplay",""));u.config.preload&&(v.preload="none")}var a=e.utils,h=e.Browser,c=e.events,b=c.EventDispatcher,g=c.Event,q=c.IOEvent,m=c.MediaEvent,p=c.MediaStreamTrackEvent,f=a.AMF;c=e.AV;var l=c.Packet,z=c.Codec,n=c.Format,k=n.MediaStreamTrack,t=n.FLV.Formats,L=n.FLV.Codecs;c=e.Module;d.prototype=Object.create(b.prototype);d.prototype.constructor=
d;d.prototype.kind="FLV";d.prototype.isSupported=function(b,c){if(h.isMSIE&&9>h.major||!window.MediaSource&&!window.WebKitMediaSource)return!1;b=new a.URL(b);if("http:"!==b.protocol&&"https:"!==b.protocol&&"ws:"!==b.protocol&&"wss:"!==b.protocol)return!1;c=["flv","",void 0];for(var d=0;d<c.length;d++)if(b.filetype===c[d])return!0;return!1};c.register(d)})(playease);(function(e){e.core={}})(playease);
(function(e){function d(c){var b=this,d,h,m;b.definition=function(c){"number"===a.typeof(c)&&c!==h&&c<b.config.sources.length&&(a.log("Model definition changed: "+c),h=c);return isNaN(h)?null:b.config.sources[h]};b.duration=function(c){"number"===a.typeof(c)&&c!==m&&(a.log("Model duration changed: "+c),m=c,b.config.mode=Infinity===c?"live":"vod");return m};b.state=function(c){"string"===a.typeof(c)&&c!==d&&(a.log("playease("+b.config.id+") state changed: "+c),d=c);return d};(function(){b.config=c;
d="";m=NaN;"array"!==a.typeof(b.config.sources)&&(b.config.sources=[]);b.config.file&&(b.config.sources=[{file:b.config.file,module:b.config.module}]);h=b.config.sources.length?0:NaN;for(var g=0;g<b.config.sources.length;g++){var f=b.config.sources[g];null==e.module(f.file,b.config.mode)?(a.warn("Source file("+f.file+") not supported."),b.config.sources.splice(g--,1)):f.default&&(h=g)}0===b.config.sources.length&&a.warn("No supported source[s] provided.")})()}var a=e.utils,h=e.core;d.prototype.constructor=
d;h.Model=d})(playease);
(function(e){function d(d,h){c.call(this,"View",b,g);var f=this,l;f.setup=function(b){if(void 0!==l){l.cleanup();if(l.kind===b){l.setup();return}l.removeGlobalListener(f.forward);m.innerHTML=""}try{l=new q[b](n.config),l.addGlobalListener(f.forward),m.appendChild(l.element()),l.setup()}catch(t){a.error("Failed to init module "+b+". "+t.name+": "+t.message)}};f.play=function(a,c){void 0!==l&&l.isSupported(a,n.config.mode)?l.play(a,c):(a=e.module(a,n.config.mode),null==a?f.dispatchEvent(b.ERROR,{name:"NotSupportedError",
message:"Not supported."}):f.setup(a.prototype.kind))};f.pause=function(){l&&l.pause()};f.seek=function(a){l&&l.seek(a)};f.stop=function(){l&&l.stop()};f.reload=function(){l&&l.reload()};f.muted=function(a){return l?l.muted(a):n.config.muted};f.volume=function(a){return l?l.volume(a):n.config.volume};f.definition=function(c){"number"===a.typeof(c)&&c!==n.definition()&&(c<n.config.sources.length?(n.definition(c),f.dispatchEvent(b.SWITCHING,{index:c})):f.dispatchEvent(b.ERROR,{name:"IndexSizeError",
message:"The index is not in the allowed range."}));return n.definition()};f.onSWFState=function(a){switch(a.state){case "buffering":f.dispatchEvent(b.WAITING);break;case "playing":f.dispatchEvent(b.PLAYING);break;case "paused":f.dispatchEvent(b.PAUSE);break;case "stopped":f.dispatchEvent(b.ENDED);break;case "error":f.dispatchEvent(b.ERROR,{name:err.name,message:"Flash plugin error occured."});break;default:f.dispatchEvent(b.ERROR,{name:"InvalidStateError",message:"Invalid state "+a.state+"."})}};
f.element=function(){return l?l.element():null};f.resize=function(a,b){};var m=d;var n=h}var a=e.utils,h=e.events,c=h.EventDispatcher,b=h.Event,g=h.IOEvent,q=e.Module;h=e.core;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;h.View=d})(playease);
(function(e){function d(d,e){function h(a){n.state(a.type);f.forward(a)}c.call(this,"Controller",b,g);var f=this,l,m;f.play=function(a,c){l=a;m=c;if(void 0===l){a=n.definition();if(null==a||!a.file){f.dispatchEvent(b.ERROR,{name:"NotFoundError",message:"No source found."});return}l=a.file;m=a}k.play(l,m)};var n=d;var k=e;k.addEventListener(b.READY,function(b){a.log("playease("+d.config.id+') module "'+b.data.kind+'" is ready.');h(b);f.play(l,m)});k.addEventListener(b.PLAY,h);k.addEventListener(g.SUSPEND,
f.forward);k.addEventListener(g.LOADSTART,f.forward);k.addEventListener(g.STALLED,f.forward);k.addEventListener(b.WAITING,h);k.addEventListener(g.ABORT,f.forward);k.addEventListener(g.TIMEOUT,f.forward);k.addEventListener(b.DURATIONCHANGE,function(a){n.duration(a.data.duration);f.forward(a)});k.addEventListener(b.LOADEDMETADATA,f.forward);k.addEventListener(b.LOADEDDATA,f.forward);k.addEventListener(g.PROGRESS,f.forward);k.addEventListener(b.CANPLAY,f.forward);k.addEventListener(b.PLAYING,h);k.addEventListener(b.CANPLAYTHROUGH,
f.forward);k.addEventListener(b.PAUSE,h);k.addEventListener(b.SEEKING,h);k.addEventListener(b.SEEKED,f.forward);k.addEventListener(b.SWITCHING,function(b){var c=n.definition();a.log("Switching definition "+b.data.index+": "+c.file);var d=0,e=k.element();e&&(d=e.currentTime);h(b);f.play(c.file,c);k.seek(d)});k.addEventListener(b.SWITCHED,f.forward);k.addEventListener(b.RATECHANGE,f.forward);k.addEventListener(b.TIMEUPDATE,f.forward);k.addEventListener(b.VOLUMECHANGE,f.forward);k.addEventListener(g.LOAD,
f.forward);k.addEventListener(b.ENDED,h);k.addEventListener(b.ERROR,function(b){a.error(b.data.name+": "+b.data.message);k.stop();h(b)})}var a=e.utils,h=e.events,c=h.EventDispatcher,b=h.Event,g=h.IOEvent;e=e.core;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;e.Controller=d})(playease);
(function(e){function d(b){function c(){d.play=h.play;d.pause=f.pause;d.seek=f.seek;d.stop=f.stop;d.reload=f.reload;d.muted=f.muted;d.volume=f.volume;d.definition=f.definition;d.element=f.element;d.duration=function(){return e.duration()};d.state=function(){return e.state()};d.dispatchEvent(q.BIND)}g.call(this,"API",q,m);var d=this,e,f,h;d.setup=function(b,g){d.config=a.extendz({id:d.id},l,g);e=new p.Model(d.config);f=new p.View(b,e);h=new p.Controller(e,f);h.addGlobalListener(d.forward);c();d.config.autoplay&&
h.play()};d.id=b}var a=e.utils,h=e.OS,c=e.Browser,b=e.events,g=b.EventDispatcher,q=b.Event,m=b.IOEvent,p=e.core,f={},l={airplay:"allow",autoplay:!1,dynamic:!1,bufferLength:.1,file:"",latency:"low",loop:!1,maxBufferLength:30,mode:"live",module:"",muted:!1,retries:0,retryInterval:3,playsinline:!0,preload:"none",smooth:!1,swf:"swf/playease.swf",volume:.8,loader:{name:"auto",mode:"cors",credentials:"omit"},sources:[]};a.log("Version: playease/"+e.VERSION);a.log("OS: "+h.name+"/"+h.version);a.log("Browser: "+
c.name+"/"+c.version);d.prototype=Object.create(g.prototype);d.prototype.constructor=d;d.prototype.CONF=l;d.get=function(a){void 0==a&&(a=0);var b=f[a];void 0==b&&(b=new d(a),f[a]=b);return b};e.API=d})(playease);