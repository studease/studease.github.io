playease=function(){if(playease.API)return playease.API.get.apply(this,arguments)};playease.VERSION="2.0.77";playease.DEBUG=!1;
(function(e){var d={extendz:function(){var a=Array.prototype.slice.call(arguments,0),c=a[0];switch(d.typeOf(c)){case "null":case "number":case "string":throw{name:"TypeError",message:"Could not extend to type "+d.typeOf(c)+"."};}for(var b=1;b<a.length;b++){var g=a[b];switch(d.typeOf(g)){case "null":case "number":case "string":e.DEBUG&&d.warn("Could not extend from type "+d.typeOf(g));break;case "array":d.forEach(g,function(b,h){switch(d.typeOf(h)){case "object":c.push(d.extendz({},h));break;case "array":c.push(d.extendz([],
h));break;default:"array"===d.typeOf(c)?c.push(h):c[b]=h}});break;default:d.forEach(g,function(b,h){switch(d.typeOf(h)){case "object":switch(d.typeOf(c[b])){case "null":case "number":case "string":c[b]={}}c[b]=d.extendz(c[b],h);break;case "array":c[b]=d.extendz([],h);break;default:c[b]=h}})}}return c},forEach:function(a,c){for(var b in a)a.hasOwnProperty&&"function"===d.typeOf(a.hasOwnProperty)?a.hasOwnProperty(b)&&c(b,a[b]):c(b,a[b])},getCookie:function(a){var c;return(c=document.cookie.match(new RegExp("(^| )"+
a+"=([^;]*)(;|$)")))?unescape(c[2]):null},padStart:function(a,c,b){for(a+="";a.length<c;)a=b+a;return a},padEnd:function(a,c,b){for(a+="";a.length<c;)a+=b;return a},hex:function(a){return"0x"+d.padStart(a.toString(16),2,"0")},time2string:function(a){var c="",b=a/3600|0,g=a%3600/60|0;a=a%60|0;b&&(c+=d.padStart(b,2,"0")+":");return c+=d.padStart(g,2,"0")+":"+d.padStart(a,2,"0")},typeOf:function(a){if(null===a||void 0===a)return"null";var c=typeof a;if("object"===c)try{var b=Object.prototype.toString.call(a).match(/^\[object ([a-z]+)\]$/i);
if(b&&1<b.length&&b[1])return b[1].toLowerCase()}catch(g){}return c},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},indexOf:function(a,c){if("array"===d.typeOf(a))for(var b=0;b<a.length;b++)if(a[b]===c)return b;return-1},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=16*Math.random()|0;return("x"===a?c:c&3|8).toString(16)})}};void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.MAX_SAFE_INTEGER&&(Number.MAX_SAFE_INTEGER=Math.pow(2,
53)-1);void 0===Number.MIN_SAFE_INTEGER&&(Number.MIN_SAFE_INTEGER=-1*Number.MAX_SAFE_INTEGER);d.equal=function(a,c){return Math.abs(a-c)<Number.EPSILON};d.createElement=function(a,c){a=document.createElement(a);c&&(a.className=c);return a};d.addClass=function(a,c){var b="string"===d.typeOf(a.className)?a.className.split(" "):[];c="array"===d.typeOf(c)?c:c.split(" ");d.forEach(c,function(a,c){-1===d.indexOf(b,c)&&b.push(c)});a.className=d.trim(b.join(" "))};d.hasClass=function(a,c){a=a.className||
"";c="array"===d.typeOf(c)?c:c.split(" ");for(var b=0;b<c.length;b++)if(-1===a.search(new RegExp("\\b"+c[b]+"\\b","i")))return!1;return!0};d.removeClass=function(a,c){var b="string"===d.typeOf(a.className)?a.className.split(" "):[];c="array"===d.typeOf(c)?c:c.split(" ");d.foreach(c,function(a,c){a=d.indexOf(b,c);0<=a&&b.splice(a,1)});a.className=d.trim(b.join(" "))};d.emptyElement=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};var a=window.console=window.console||{log:function(){},warn:function(){},
error:function(){}};d.debug=function(){e.DEBUG&&d.log.apply(d,arguments)};d.log=function(){var e=Array.prototype.slice.call(arguments,0);"object"===d.typeOf(a)?a.log.apply(a,e):a.log(e)};d.warn=function(){var e=Array.prototype.slice.call(arguments,0);"object"===d.typeOf(a)?a.warn.apply(a,e):a.warn(e)};d.error=function(){var e=Array.prototype.slice.call(arguments,0);"object"===d.typeOf(a)?a.error.apply(a,e):a.error(e)};e.utils=d})(playease);
(function(e){function d(a){var b=this;b.set=function(a,h,g){switch(b.type){case c.DOUBLE:if("number"!==k.typeOf(h))throw{name:"TypeError",message:"Value should be number."};break;case c.BOOLEAN:if("boolean"!==k.typeOf(h))throw{name:"TypeError",message:"Value should be boolean."};case c.STRING:case c.LONG_STRING:if("string"!==k.typeOf(h))throw{name:"TypeError",message:"Value should be string."};break;case c.OBJECT:case c.ECMA_ARRAY:if("array"!==k.typeOf(h))throw{name:"TypeError",message:"Value should be array."};
for(g=0;g<h.length;g++){var f=h[g];b.table[f.key]=f}break;case c.STRICT_ARRAY:if("array"!==k.typeOf(h))throw{name:"TypeError",message:"Value should be array."};break;case c.DATE:if("number"!==k.typeOf(h))throw{name:"TypeError",message:"Value should be number."};if("number"!==k.typeOf(g))throw{name:"TypeError",message:"Offset not presented."};b.offset=g;break;case c.NULL:case c.UNDEFINED:if("null"!==k.typeOf(h))throw{name:"TypeError",message:"Value should be null."};break;default:throw{name:"TypeError",
message:"Unrecognized amf type "+b.type+"."};}b.key=a;b.value=h;return b};b.get=function(){switch(b.type){case c.DATE:return new Date(b.value+6E4*b.offset);default:return b.value}};b.type=a;b.key="";b.value=null;b.table={};b.offset=0;b.ended=!1}function a(b,a){for(var g=0,h=0;h<a.value.length;h++){var d=a.value[h];d.key&&(d=crypt.stringToByteArray(d.key),b.WriteUint16(d.length,!1),b.Write(d),g+=2+d.length);g+=c.encode(b,a)}return g}var k=e.utils,c={DOUBLE:0,BOOLEAN:1,STRING:2,OBJECT:3,MOVIE_CLIP:4,
NULL:5,UNDEFINED:6,REFERENCE:7,ECMA_ARRAY:8,END_OF_OBJECT:9,STRICT_ARRAY:10,DATE:11,LONG_STRING:12,UNSUPPORTED:13,RECORD_SET:14,XML:15,TYPED_OBJECT:16,AMF3_DATA:17,decode:function(b,a,d){if(1>a.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf Value."};var h=0,g=new DataView(a,d);b.type=g.getUint8(h);h+=1;g={0:c.decodeDouble,1:c.decodeBoolean,2:c.decodeString,3:c.decodeObject,5:c.decodeNull,6:c.decodeUndefined,8:c.decodeECMAArray,9:c.decodeEndOfObject,10:c.decodeStrictArray,
11:c.decodeDate,12:c.decodeLongString}[b.type];if(!g)throw{name:"TypeError",message:"Unrecognized amf type "+b.type+"."};return h+=g(b,a,d+h)},decodeDouble:function(b,a,c){if(8>a.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf double."};a=new DataView(a,c);b.value=a.getFloat64(0);return 8},decodeBoolean:function(b,a,c){if(1>a.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf boolean."};a=new DataView(a,c);b.value=!!a.getUint8(0);return 1},
decodeString:function(a,g,c){if(2>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf string."};var b=0,d=(new DataView(g,c)).getUint16(b);b+=2;0<d?(a.value=String.fromCharCode.apply(String,new Uint8Array(g,c+b,d)),b+=d):a.value="";return b},decodeObject:function(a,g,e){if(3>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf object."};var b=0,k=g.byteLength-e;for(a.value=[];b<k;){var f=new d;b+=c.decodeString(f,g,e+b);f.key=f.get();b+=c.decode(f,
g,e+b);if(f.type===c.END_OF_OBJECT)break;a.value.push(f);a.table[f.key]=f}return b},decodeNull:function(a,c,d){a.value=null;return 0},decodeUndefined:function(a,c,d){a.value=void 0;return 0},decodeECMAArray:function(a,g,d){if(4>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf ecma array."};var b=4;new DataView(g,d);return b+=c.decodeObject(a,g,d+b)},decodeEndOfObject:function(a,c,d){a.ended=!0;return 0},decodeStrictArray:function(a,g,e){if(4>g.byteLength)throw{name:"DataError",
message:"Data not enough while decoding amf strict array."};var b=0,k=new DataView(g,e),f=k.getUint32(b);b+=4;var q=g.byteLength-e;a.value=[];for(var r=0;r<f&&b<q;r++){var l=new d;b+=c.decode(l,g,e+b);a.value.push(l)}b+3<=q&&0===k.getUint8(b)&&0===k.getUint8(b+1)&&k.getUint8(b+2)===c.END_OF_OBJECT&&(a.ended=!0,b+=3);return b},decodeDate:function(a,c,d){if(10>c.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf date."};var b=0;c=new DataView(c,d);a.Timestamp=c.getFloat64(b);
b+=8;a.Timeoffset=c.getInt16(b);return b+2},decodeLongString:function(a,c,d){if(4>c.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf long string."};var b=0,g=(new DataView(c,d)).getUint32(b);b+=4;0<g&&(a.value=String.fromCharCode.apply(String,new Uint8Array(c,d+b,g)),b+=g);return b},appendBytes:function(a,c){a.Write(c)},appendInt8:function(a,c){a.writeInt8(c)},appendInt16:function(a,c,d){a.WriteInt16(c,d)},appendInt32:function(a,c,d){a.WriteInt32(c,d)},appendUint8:function(a,
c){a.writeUint8(c)},appendUint16:function(a,c,d){a.WriteUint16(c,d)},appendUint32:function(a,c,d){a.WriteUint32(c,d)},encode:function(a,g){var b={0:c.encodeDouble,1:c.encodeBoolean,2:c.encodeString,3:c.encodeObject,5:c.encodeNull,6:c.encodeUndefined,8:c.encodeECMAArray,10:c.encodeStrictArray,11:c.encodeDate,12:c.encodeLongString}[g.type];if(!b)throw{name:"TypeError",message:"Unrecognized amf type "+g.type+"."};return b(a,g)},encodeNumber:function(a,g){a.WriteUint8(c.DOUBLE);a.WriteFloat64(g.value,
!1);return 9},encodeBoolean:function(a,g){a.WriteUint8(c.BOOLEAN);a.WriteUint8(g.value?1:0);return 2},encodeString:function(a,g){if(!g.value)return 0;if(65535<=g.value.length)return c.encodeLongString(a,g);g=crypt.stringToByteArray(g.value);a.WriteUint8(c.STRING);a.WriteUint16(g.length,!1);a.Write(g);return 3+g.length},encodeObject:function(b,g){var d=1;b.WriteUint8(c.OBJECT);d+=a(g);g.ended&&(b.WriteUint16(0),b.WriteUint8(c.END_OF_OBJECT),d+=3);return d},encodeNull:function(a,g){a.WriteUint8(c.NULL);
return 1},encodeUndefined:function(a,g){a.WriteUint8(c.UNDEFINED);return 1},encodeECMAArray:function(b,g){var d=3;b.WriteUint8(c.ECMA_ARRAY);b.WriteUint32(g.value.length,!1);return d+=a(b,g)},encodeStrictArray:function(b,d){var g=3;b.WriteUint8(c.STRICT_ARRAY);b.WriteUint32(d.value.length,!1);return g+=a(b,d)},encodeDate:function(a,d){a.WriteUint8(c.DATE);a.WriteFloat64(d.value,!1);a.WriteUint16(d.offset,!1);return 11},encodeLongString:function(a,d){if(!d.value)return 0;d=crypt.stringToByteArray(d.value);
a.WriteUint8(c.LONG_STRING);a.WriteUint32(d.length,!1);a.Write(d);return 5+d.length}};c.Value=d;k.AMF=c})(playease);
(function(e){e=e.utils;e.MIN_UINT32=0;e.MAX_UINT32=4294967295;e.MAX_INT32=2147483647;e.MIN_INT32=-2147483648;e.MIN_CACHE_BITS=25;e.BitStream=function(d){var a=this;a.ShowBits=function(a){if(0===a)return 0;var d=b>>>3,h=0;b<c&&(h=e.getUint8(d)<<24);b+8<c&&(h|=e.getUint8(d+1)<<16);b+16<c&&(h|=e.getUint8(d+2)<<8);b+24<c&&(h|=e.getUint8(d+3));return h<<(b&7)>>>32-a};a.ShowBitsLong=function(b){return 25>=b?a.ShowBits(b):a.ShowBits(16)<<b-16|a.ShowBits(b-16)};a.ReadBits=function(c){var d=a.ShowBits(c);
b+=c;return d};a.ReadBitsLong=function(c){var d=a.ShowBitsLong(c);b+=c;return d};a.SkipBits=function(a){b+=a};a.Left=function(){return c-b};var e=new DataView(d.buffer,d.byteOffset,d.byteLength);var c=8*d.byteLength;var b=0}})(playease);
(function(e){var d=new function(){function a(){return g.match(/(Chrome|CriOS)\/((\d+)\.(\d+)(?:\.\d+)*)/)}function d(){if(!b.isWindows)return 0;var a=navigator.plugins;if(a){var c=a["Shockwave Flash"];if(c&&c.description){var d=c.description.replace(/\D+(\d+\.?\d*).*/,"$1");return parseFloat(d)}}if("undefined"!==typeof window.ActiveXObject)try{return c=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),d=c.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."),parseFloat(d)}catch(f){}return 0}
function c(){return void 0!==window.orientation?90===window.orientation||-90===window.orientation:window.innerWidth>window.innerHeight}var b=this;var g=navigator.userAgent;b.OS={name:"",version:"",major:NaN,minor:NaN};b.Browser={name:"",version:"",major:NaN,minor:NaN};(function(){var a=g.match(/(Windows)\sNT\s((\d+)\.(\d+))/)||g.match(/(Mac)\sOS\sX\s((\d+)[\._](\d+)(?:[\._]\d+)*)/)||g.match(/(Android)(?:\s((\d+)\.(\d+)(?:\.\d+)*))?/)||g.match(/(iP(?:hone|ad|od)).+((\d+)_(\d+)(?:_\d+)*)/)||g.match(/(Windows\sPhone)(?:\sOS)?\s((\d+)\.(\d+)(?:\.\d+)*)/);
a&&(b.OS.name=a[1],b.OS.version=a[2],b.OS.major=parseInt(a[3]),b.OS.minor=parseInt(a[4]));b.OS.isWindows="Windows"===b.OS.name;b.OS.isMac="Mac"===b.OS.name;b.OS.isAndroid="Android"===b.OS.name;b.OS.isIOS="iPhone"===b.OS.name||"iPad"===b.OS.name||"iPod"===b.OS.name;b.OS.isWindowsPhone="Windows Phone"===b.OS.name;b.OS.isMobile=b.OS.isAndroid||b.OS.isIOS||b.OS.isWindowsPhone;b.OS.isHorizontal=c})();(function(){var c;(c=g.match(/(MSIE)\s((\d+)\.(\d+))/)||g.match(/(Trident)\/.+rv:\s((11)\.(\d+))/i)||g.match(/Firefox\/((\d+)\.(\d+)(?:\.\d+)*)/)||
g.match(/(OPR)\/((\d+)\.(\d+)(?:\.\d+)*)/)||g.match(/(Edg|Edge|EdgA)\/((\d+)\.(\d+)(?:\.\d+)*)/))||(a()||!g.match(/Safari/)?c=null:(c=g.match(/Version\/((\d+)\.(\d+)(?:\.\d+)*)/),c=["Safari/"+c[1],"Safari"].concat(c.slice(1))));if(c=c||g.match(/(MicroMessenger)\/((\d+)\.(\d+)(?:\.\d+)*)/)||g.match(/(QQ)\/((\d+)\.(\d+)(?:\.\d+)*)/)||g.match(/(QQBrowser)\/((\d+)\.(\d+)(?:\.\d+)*)/)||g.match(/(MetaSr)\s((\d+)\.(\d+)(?:\.\d+)*)/)||g.match(/QIHU (360EE)/)||a())b.Browser.name=c[1],b.Browser.version=c[2],
b.Browser.major=parseInt(c[3]),b.Browser.minor=parseInt(c[4]);if(c=a())b.Browser.likeChrome="Chrome"===c[1],b.Browser.coreVersion=c[2],b.Browser.coreMajor=parseInt(c[3]),b.Browser.coreMinor=parseInt(c[4]);b.Browser.isMSIE="MSIE"===b.Browser.name;b.Browser.isIE8="MSIE"===b.Browser.name&&8===b.Browser.major;b.Browser.isIE9="MSIE"===b.Browser.name&&9===b.Browser.major;b.Browser.isIE10="MSIE"===b.Browser.name&&10===b.Browser.major;b.Browser.isIE11="Trident"===b.Browser.name;b.Browser.isIE=b.Browser.isMSIE||
b.Browser.isIE11;b.Browser.isFirefox="Firefox"===b.Browser.name;b.Browser.isOpera="OPR"===b.Browser.name;b.Browser.isEdg="Edg"===b.Browser.name;b.Browser.isEdge="Edge"===b.Browser.name;b.Browser.isEdgA="EdgA"===b.Browser.name;b.Browser.isSafari="Safari"===b.Browser.name;b.Browser.isWeChat="MicroMessenger"===b.Browser.name;b.Browser.isQQ="QQ"===b.Browser.name;b.Browser.isQQBrowser="QQBrowser"===b.Browser.name;b.Browser.isSogou="MetaSr"===b.Browser.name;b.Browser.is360EE="360EE"===b.Browser.name;b.Browser.isChrome=
"Chrome"===b.Browser.name;b.Browser.isCriOS="CriOS"===b.Browser.name;b.Browser.flash=d()})()};e.OS=d.OS;e.Browser=d.Browser})(playease);
(function(e){var d=e.utils;d.crypt={stringToByteArray:function(a){for(var d=[],c=0,b=0;b<a.length;b++){for(var g=a.charCodeAt(b);255<g;)d[c++]=g&255,g>>=8;d[c++]=g}return d},byteArrayToString:function(a){if(8192>=a.length)return String.fromCharCode.apply(null,a);for(var d="",c=0;c<a.length;c+=8192){var b=Array.slice(a,c,c+8192);d+=String.fromCharCode.apply(null,b)}return d},byteArrayToHex:function(a){return Array.map(a,function(a){return d.padStart(a.toString(16),2,0)}).join("")},hexToByteArray:function(a){if(0!==
a.length%2)return d.error("Key string length must be multiple of 2."),null;for(var e=[],c=0;c<a.length;c+=2)e.push(parseInt(a.substring(c,c+2),16));return e},stringToUTF8ByteArray:function(a){for(var d=[],c=0,b=0;b<a.length;b++){var g=a.charCodeAt(b);128>g?d[c++]=g:(2048>g?d[c++]=g>>6|192:(55296===(g&64512)&&b+1<a.length&&56320===(a.charCodeAt(b+1)&64512)?(g=65536+((g&1023)<<10)+(a.charCodeAt(++b)&1023),d[c++]=g>>18|240,d[c++]=g>>12&63|128):d[c++]=g>>12|224,d[c++]=g>>6&63|128),d[c++]=g&63|128)}return d},
UTF8ByteArrayToString:function(a){for(var d=[],c=0,b=0;c<a.length;){var g=a[c++];if(128>g)d[b++]=String.fromCharCode(g);else if(191<g&&224>g){var e=a[c++];d[b++]=String.fromCharCode((g&31)<<6|e&63)}else if(239<g&&365>g){e=a[c++];var h=a[c++],t=a[c++];g=((g&7)<<18|(e&63)<<12|(h&63)<<6|t&63)-65536;d[b++]=String.fromCharCode(55296+(g>>10));d[b++]=String.fromCharCode(56320+(g&1023))}else e=a[c++],h=a[c++],d[b++]=String.fromCharCode((g&15)<<12|(e&63)<<6|h&63)}return d.join("")},XORByteArray:function(a,
e){if(a.length!==e.length)d.error("XOR array lengths must match.");else{for(var c=[],b=0;b<a.length;b++)c.push(a[b]^e[b]);return c}}}})(playease);
(function(e){function d(b,d){c||(c=a());var g="";k.foreach(d,function(a,b){g+=a+": "+b+"; "});try{c.insertRule?c.insertRule(b+" { "+g+"}",c.cssRules.length):c.addRule(b,g,c.rules.length)}catch(h){k.error("Failed to insert css rule: "+b)}}function a(){var a=document.createElement("style");a.type="text/css";document.getElementsByTagName("head")[0].appendChild(a);return a.sheet||a.styleSheet}var k=e.utils,c;d.style=function(a,c,d){if(void 0!==a&&null!==a)for(void 0===a.length&&(a=[a]),c=k.extendz({},
c),d=0;d<a.length;d++){var b=a[d];void 0!==b&&null!==b&&k.forEach(c,function(a,f){a=a.split("-");for(var c=1;c<a.length;c++)a[c]=a[c].charAt(0).toUpperCase()+a[c].slice(1);a=a.join("");b.style[a]!==f&&(b.style[a]=f)})}};k.css=d})(playease);
(function(e){e=e.utils;e.LITTLE_ENDIAN=function(){try{var d=new ArrayBuffer(2);(new DataView(d)).setInt16(0,256,!0);var a=new Int16Array(d)}catch(k){}return a&&256===a[0]}();e.getUint32=function(d,a,e){void 0===a&&(a=0);return e?d[a+0]|d[a+1]>>>8|d[a+2]>>>16|d[a+3]>>>24:d[a+0]<<24|d[a+1]<<16|d[a+2]<<8|d[a+3]}})(playease);
(function(e){function d(c){var b=this,d,e,h,t;b.append=function(a){f.push(a)};b.save=function(a){a||(a=b.config.filename);d=new Blob(f,{type:b.config.type});e=URL.createObjectURL(d);h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);t=document.createElementNS("http://www.w3.org/1999/xhtml","a");t.href=e;t.download=a;t.dispatchEvent(h);f=[];URL.revokeObjectURL(e)};b.config=a.extendz({},k,c);var f=[]}var a=e.utils,k={filename:"sample.fragmented.mp4",
type:"video/mpeg"};d.prototype.CONF=k;a.FileKeeper=d})(playease);
(function(e){function d(d){a.call(this,d);var c=this;c.ReadUE=function(){for(var a=-1,d=0;0===d&&0<c.Left();a++)d=c.ReadBits(1);return(1<<a>>>0)-1+c.ReadBitsLong(a)};c.ReadSE=function(){var a=c.ReadUE();return 0===(a&1)?-(a>>>1):a+1>>>1}}e=e.utils;var a=e.BitStream;d.prototype=Object.create(a.prototype);d.prototype.constructor=d;e.ebsp2rbsp=function(a){var c=2,b=a.byteLength,d=new Uint8Array(b);d[0]=a[0];d[1]=a[1];for(var e=2;e<b;e++)if(3!==a[e]||0!==a[e-1]||0!==a[e-2])d[c]=a[e],c++;return d.subarray(0,
c)};e.Golomb=d})(playease);
(function(e){var d=/^(([a-z]+:)\/\/(([-a-z\d\.]+)(?::(\d+))?))((?:\/[-_a-z\d\s\.]*)*)([?#][-_=%&a-z\d\s\.]+)?$/i;e.utils.URL=function(a){var e=this;e.parse=function(a){e.href=a;!1===/^([a-z]+):\/\//.test(a)&&(e.href=window.location.origin+("/"===a.substr(0,1)?"":"/")+a);var b=e.href.match(d);if(null===b)throw{name:"SyntaxError",message:"The URL did not match the expected pattern, url="+a+"."};e.origin=b[1];e.protocol=b[2];e.host=b[3];e.hostname=b[4];e.port=b[5]||"";e.pathname=b[6]||"";if(a=e.pathname.match(/\/([-_a-z\d\s\(\)\[\]\{\}]+)(?:\.([a-z\d]+))?$/))e.filename=
a[1],e.filetype=a[2];b[7]&&("?"===b[7].substr(0,1)?e.search=b[7]:e.hash=b[7])};e.href="";e.origin="";e.protocol="";e.host="";e.hostname="";e.port="";e.pathname="";e.filename="";e.filetype="";e.search="";e.hash="";a&&e.parse(a)}})(playease);
(function(e){function d(b){function d(b,c){var f={};if(b.nodeType===k.DOCUMENT_NODE){for(var h=0;h<b.childNodes.length;h++){var g=b.childNodes[h],l=g.localName||g.baseName||g.nodeName;g.nodeType===k.ELEMENT_NODE&&(g=d(g),g.parent=f,e.config.ignoreRoot?(delete g.parent,f=g):f[l]=g)}return f}if(b.nodeType===k.ELEMENT_NODE){for(h=0;h<b.childNodes.length;h++)if(g=b.childNodes[h],l=g.localName||g.baseName||g.nodeName,g.nodeType!==k.COMMENT_NODE)if(g=d(g,c+"."+l),g.parent=f,f.hasOwnProperty(l))"array"!=
a.typeOf(f[l])&&(f[l]=[f[l]]),f[l].push(g);else if("#text"!=l||/[^\s]/.test(g))f[l]=g;l=b.localName||b.baseName||b.nodeName;null!=b.prefix&&""!=b.prefix&&(l=b.prefix+":"+l);for(h=0;h<b.attributes.length;h++){c=b.attributes[h];g=c.value;for(var n=0;n<e.config.matchers.length;n++){var m=e.config.matchers[n];m.test(c,l)&&(g=m.exec(c.value));f[e.config.attributePrefix+c.name]=g}}null!=f["#text"]&&e.config.trimWhitespaces&&(f["#text"]=f["#text"].trim());f.toString=function(){return(null==f["#text"]?"":
f["#text"])+(null==f["#cdata-section"]?"":f["#cdata-section"])};return f}if(b.nodeType===k.TEXT_NODE||b.nodeType===k.CDATA_SECTION_NODE)return b.nodeValue}var e=this;e.parse=function(b){if(window.DOMParser){var c=new DOMParser;try{var f=c.parseFromString(b,"text/xml")}catch(q){return a.error("Failed to parse XML structure."),null}}else 0===b.indexOf("<?")&&(b=b.substr(b.indexOf("?>")+2)),f=new ActiveXObject("Microsoft.XMLDOM"),f.async="false",f.loadXML(b);return d(f)};e.config=a.extendz({},c,b)}var a=
e.utils,k={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9},c={ignoreRoot:!0,trimWhitespaces:!1,attributePrefix:"@",matchers:[]};d.prototype.CONF=c;a.XML2JSON=d})(playease);
(function(e){var d=e.utils;d.MPD=function(a){function e(a,b){if(a)for(var f=0;f<a.AdaptationSet.length;f++){var c=a.AdaptationSet[f];if(c.hasOwnProperty("@id")){if(c["@id"]===b["@id"])return c}else if(c.hasOwnProperty("@contentType")){if(c["@contentType"]===b["@contentType"])return c}else if(c.hasOwnProperty("@mimeType")){if(c["@mimeType"]===b["@mimeType"])return c}else if(c.hasOwnProperty("@codecs")){if(c["@codecs"]===b["@codecs"])return c}else break}}var c,b,g;this.update=function(a){b=r;a.Location&&
a.Location["#text"]&&(b=a.Location["#text"]);g=a.BaseURL||b.substring(0,b.lastIndexOf("/")+1);if("dynamic"===a["@type"]){var h=c,f=0,q=NaN;"array"!=d.typeOf(a.Period)&&(a.Period=[a.Period]);for(var k=0;k<a.Period.length;k++){var l=a.Period[k];l.hasOwnProperty("@start")?f=l["@start"]:isNaN(q)?0===k&&"dynamic"!==a["@type"]&&(f=0):f+=q;l.hasOwnProperty("@duration")&&(q=l["@duration"]);l["@start"]=f;l["@duration"]=q;a:{var n=h;var m=l;if(n)for(var z=0;z<n.Period.length;z++){var u=n.Period[z];if(u.hasOwnProperty("@id")){if(u["@id"]===
m["@id"]){n=u;break a}}else if(u.hasOwnProperty("@start")){if(u["@start"]===m["@start"]){n=u;break a}}else{n=u;break a}}n=void 0}"array"!=d.typeOf(l.AdaptationSet)&&(l.AdaptationSet=[l.AdaptationSet]);for(m=0;m<l.AdaptationSet.length;m++){z=l.AdaptationSet[m];u=e(n,z);var x=u,F=u=0,E=[];if(!1!==z.SegmentTemplate.hasOwnProperty("SegmentTimeline")){if(x){var I=x.SegmentTemplate.SegmentTimeline;"array"!=d.typeOf(I.S)&&(I.S=[I.S]);for(x=0;x<I.S.length;x++){var D=I.S[x];0===x&&D.hasOwnProperty("@t")&&
(u=D["@t"]);u+=D["@d"];D["@r"]&&(u+=D["@d"]*D["@r"]);E.push(d.extendz({},D))}}z=z.SegmentTemplate.SegmentTimeline;"array"!=d.typeOf(z.S)&&(z.S=z.S?[z.S]:[]);for(x=0;x<z.S.length;x++)D=z.S[x],0===x&&D.hasOwnProperty("@t")&&(F=D["@t"]),F>=u&&E.push(D),F+=D["@d"],D["@r"]&&(F+=D["@d"]*D["@r"])}}}}c=a};this.getSegmentInfo=function(a,b,f,e,k,l){for(var h=c.Period[0],m=0;m<c.Period.length;m++){var q=c.Period[m];if(q.hasOwnProperty("@start"))q["@start"]>h["@start"]&&q["@start"]<=a&&(h=q);else break}a=h;a:{for(h=
0;h<a.AdaptationSet.length;h++)if(m=a.AdaptationSet[h],m.hasOwnProperty("@contentType")){if(m["@contentType"]===b){b=m;break a}}else if(m.hasOwnProperty("@mimeType")&&(q=m["@mimeType"].match(/^([a-z]+)\/[a-z0-9]+/i))&&1<q.length&&q[1]===b){b=m;break a}b=void 0}if(b){h=b;"array"!=d.typeOf(h.Representation)&&(h.Representation=[h.Representation]);m=h.Representation[0];for(q=0;q<h.Representation.length;q++){var u=h.Representation[q];u["@bandwidth"]>m["@bandwidth"]&&(!l||u["@bandwidth"]<=l)&&(m=u)}if(l=
m){q=b.SegmentTemplate;h=q[f?"@initialization":"@media"];m=q["@timescale"]||1;var x=q["@duration"]||0;h=h.replace(/\$RepresentationID\$/,l["@id"]);if(q["@media"].search(/\$Time\$/))if(u=q.SegmentTimeline,f)if(0<e||0===e&&!1===c.hasOwnProperty("@suggestedPresentationDelay"))u.S.length&&(e=u.S[0]["@t"]);else{var t=Math.abs(t)||c["@suggestedPresentationDelay"];a:{var A=t*m;for(t=u.S.length-1;0<=t;t--){var r=u.S[t];A-=r["@d"]*(r["@r"]||1);if(0>=A){A=u.S[0]["@t"];for(var D=0;D<t;D++)A+=u.S[D]["@d"],r["@r"]&&
(A+=r["@d"]*r["@r"]);r["@t"]=A;t=r;break a}}t=u.S[0]}t&&(e=t["@t"],x=t["@d"])}else{a:{for(t=NaN;u.S.length;){x=u.S.shift();isNaN(t)&&(t=x["@t"]||0);if(t+x["@d"]*(x["@r"]||0)>=e){x["@t"]=t;u.S.length&&(u.S[0]["@t"]=x["@t"]+x["@d"]);t=x;break a}t+=x["@d"];x["@r"]&&(t+=x["@d"]*x["@r"])}t=void 0}if(void 0===t)return;e=t["@t"];x=t["@d"];h=h.replace(/\$Time\$/,e)}q["@media"].search(/\$Number\$/)&&(f?k=q["@startNumber"]:h=h.replace(/\$Number\$/,k));f=l.baseURL||b.baseURL||a.baseURL;h=(f?f["#text"]:g)+h;
return{mimeType:l["@mimeType"]||b["@mimeType"],codecs:l["@codecs"]||b["@codecs"],index:k,start:e,duration:x,timescale:m,url:h}}}};this.getLocation=function(){return b};var r=a||""}})(playease);(function(e){e.utils.MPD.matchers={}})(playease);
(function(e){var d=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;e.utils.MPD.matchers.datetime=function(){this.test=function(a){return d.test(a.value)};this.exec=function(a){a=d.exec(a);var e=Date.UTC(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10),a[6]&&parseInt(a[6],10)||0,a[7]&&1E3*parseFloat(a[7])||0);if(a[9]&&a[10]){var c=60*parseInt(a[9],10)+parseInt(a[10],10);e+=("+"===a[8]?
-1:1)*c*6E4}return new Date(e)}}})(playease);
(function(e){var d=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,a="minBufferTime mediaPresentationDuration minimumUpdatePeriod timeShiftBufferDepth maxSegmentDuration maxSubsegmentDuration suggestedPresentationDelay start starttime duration".split(" ");e.utils.MPD.matchers.duration=function(){this.test=function(e){for(var c=0;c<a.length;c++)if((e.localName||e.baseName||e.nodeName)===a[c])return d.test(e.value);return!1};this.exec=function(a){a=d.exec(a);var c=
31536E3*parseFloat(a[2]||0)+2592E3*parseFloat(a[4]||0)+86400*parseFloat(a[6]||0)+3600*parseFloat(a[8]||0)+60*parseFloat(a[10]||0)+parseFloat(a[12]||0);void 0!==a[1]&&(c*=-1);return c}}})(playease);(function(e){var d=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/;e.utils.MPD.matchers.numeric=function(){this.test=function(a){return d.test(a.value)};this.exec=function(a){return parseFloat(a)}}})(playease);
(function(e){var d={MPD:["id","profiles"],Period:["id"],BaseURL:["serviceLocation","byteRange"],SegmentBase:["indexRange"],Initialization:["range"],RepresentationIndex:["range"],SegmentList:["indexRange"],BitstreamSwitching:["range"],SegmentURL:["mediaRange","indexRange"],SegmentTemplate:["indexRange","media","index","initialization","bitstreamSwitching"],AssetIdentifier:["value","id"],EventStream:["value"],AdaptationSet:["profiles","mimeType","segmentProfiles","codecs","contentType"],FramePacking:["value",
"id"],AudioChannelConfiguration:["value","id"],ContentProtection:["value","id"],EssentialProperty:["value","id"],SupplementalProperty:["value","id"],InbandEventStream:["value","id"],Accessibility:["value","id"],Role:["value","id"],Rating:["value","id"],Viewpoint:["value","id"],ContentComponent:["contentType"],Representation:["id","dependencyId","mediaStreamStructureId"],Subset:["id"],Metrics:["metrics"],Reporting:["value","id"]};e.utils.MPD.matchers.string=function(){this.test=function(a,e){return d.hasOwnProperty(e)&&
(e=d[e],void 0!==e)?0<=e.indexOf(a.name):!1};this.exec=function(a){return String(a)}}})(playease);
(function(e){e.events={Event:{BIND:"bind",READY:"ready",PLAY:"play",WAITING:"waiting",DURATIONCHANGE:"durationchange",LOADEDMETADATA:"loadedmetadata",LOADEDDATA:"loadeddata",CANPLAY:"canplay",PLAYING:"playing",CANPLAYTHROUGH:"canplaythrough",PAUSE:"pause",SEEKING:"seeking",SEEKED:"seeked",SWITCHING:"switching",SWITCHED:"switched",RATECHANGE:"ratechange",TIMEUPDATE:"timeupdate",VOLUMECHANGE:"volumechange",ENDED:"ended",ERROR:"error"},IOEvent:{SUSPEND:"suspend",LOADSTART:"loadstart",STALLED:"stalled",
ABORT:"abort",TIMEOUT:"timeout",PROGRESS:"progress",LOAD:"load",LOADEND:"loadend"},UIEvent:{SHOOTING:"shooting",FULLPAGE:"fullpage",FULLSCREEN:"fullscreen",RESIZE:"resize"},GlobalEvent:{CHANGE:"change"},MouseEvent:{CLICK:"click",DOUBLE_CLICK:"doubleclick",MOUSE_MOVE:"mousemove"},KeyboardEvent:{KEY_DOWN:"key-down",KEY_UP:"key-up"},TimerEvent:{TIMER:"timer",COMPLETE:"complete"},MediaEvent:{PACKET:"packet",AAC_SPECIFIC_CONFIG:"aac-specific-config",AAC_SAMPLE:"aac-sample",AVC_CONFIG_RECORD:"avc-config-record",
AVC_SAMPLE:"avc-sample",END_OF_STREAM:"end-of-stream",FLV_INFO_FRAME:"flv-info-frame",FLV_FRAME:"flv-frame",MP4_INIT_SEGMENT:"mp4-init-segment",MP4_SEGMENT:"mp4-segment"},MediaStreamTrackEvent:{ADDTRACK:"addtrack",REMOVETRACK:"removetrack"}}})(playease);
(function(e){var d=e.utils;e.events.EventDispatcher=function(a){function k(a,b){if(a)for(var c=a.slice(0),e=0;e<c.length;e++){var h=c[e];if(h){isNaN(h.count)||0!==--h.count||a.splice(e,1);try{if(h.listener(b),b.stopPropagation)break}catch(l){d.error("Error handling event:",b,l.toString())}}}}var c=this,b=Array.prototype.slice.call(arguments,1);c.bind=function(){var a=Array.prototype.slice.call(arguments,0);d.forEach(a,function(a,b){d.forEach(b,function(a,b){a="on"+b.replace(/-/g,"");c[a]=void 0})})};
c.addEventListener=function(a,b,c){try{g[a]||(g[a]=[]),"string"===d.typeOf(b)&&(b=(new Function("return "+b))()),g[a].push({listener:b,count:c||NaN})}catch(q){d.error("Failed to addEventListener("+a+"):",q)}};c.removeEventListener=function(a,b){if(g[a])try{if(void 0===b)delete g[a];else for(var c=0;c<g[a].length;c++)if(g[a][c].listener.toString()===b.toString()){g[a].splice(c,1);break}}catch(q){d.error("Failed to removeEventListener("+a+"):",q)}};c.hasEventListener=function(a){return g.hasOwnProperty(a)&&
0<g[a].length};c.addGlobalListener=function(a,b){try{"string"===d.typeOf(a)&&(a=(new Function("return "+a))()),r.push({listener:a,count:b||NaN})}catch(f){d.error("Failed to addGlobalListener():",f)}};c.removeGlobalListener=function(a){if(a)try{for(var b=0;b<r.length;b++)if(r[b].listener.toString()===a.toString()){r.splice(b,1);break}}catch(f){d.error("Failed to removeGlobalListener():",f)}};c.dispatchEvent=function(a,b){c.forward({type:a,data:b||{},srcElement:c,version:e.VERSION})};c.forward=function(a){a.target=
c;a.stopPropagation=!1;e.DEBUG&&d.log(a);var b="on"+a.type.replace(/-/g,"");if("function"===d.typeOf(c[b]))c[b](a);else k(g[a.type],a),k(r,a)};var g={};var r=[];c.bind.apply(c,b)}})(playease);
(function(e){function d(a,d){function b(){f++;e.dispatchEvent(c.TIMER);0<e.repeatCount&&f>=e.repeatCount&&(e.stop(),e.dispatchEvent(c.COMPLETE))}k.call(this,"Timer",[c.TIMER,c.COMPLETE]);var e=this,g,f=0,q=!1;e.start=function(){!1===q&&(g=setInterval(b,e.delay),q=!0)};e.stop=function(){q&&(clearInterval(g),g=0,q=!1)};e.reset=function(){e.stop();f=0};e.currentCount=function(){return f};e.running=function(){return q};e.delay=a||50;e.repeatCount=d||0}var a=e.utils;e=e.events;var k=e.EventDispatcher,
c=e.TimerEvent;d.prototype=Object.create(k.prototype);d.prototype.constructor=d;a.Timer=d})(playease);
(function(e){var d=e.utils,a={},k=[];a.register=function(c,b){try{k.splice(b||k.length,0,c),a[c.prototype.kind]=c}catch(g){d.error("Failed to register loader "+c.prototype.kind+", Error="+g.message)}};a.get=function(a,b){for(var c=0;c<k.length;c++){var d=k[c];if(d.prototype.isSupported(a,b))return d}return null};a.Mode={CORS:"cors",NO_CORS:"no-cors",SAME_ORIGIN:"same-origin"};a.Credentials={OMIT:"omit",INCLUDE:"include",SAME_ORIGIN:"same-origin"};a.Cache={DEFAULT:"default",NO_STAORE:"no-store",RELOAD:"reload",
NO_CACHE:"no-cache",FORCE_CACHE:"force-cache",ONLY_IF_CACHED:"only-if-cached"};a.Redirect={FOLLOW:"follow",MANUAL:"manual",ERROR:"error"};a.ResponseType={ARRAYBUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};a.ReadyState={UNINITIALIZED:0,OPEN:1,SENT:2,LOADING:3,DONE:4};e.io=a.get;e.IO=a})(playease);
(function(e){function d(d){function e(c){return c.read().then(function(f){if(f.done)return a.debug("Loader load"),A=g.DONE,h.dispatchEvent(b.LOAD),h.dispatchEvent(b.LOADEND),Promise.resolve("load");switch(A){case g.SENT:A=g.LOADING;break;case g.DONE:return a.warn("Loader state error, probably aborted already."),c.cancel()}a.debug("Loader progress: "+f.value.buffer.byteLength+"/"+l);h.dispatchEvent(b.PROGRESS,{buffer:f.value.buffer,loaded:f.value.buffer.byteLength,total:l});return e(c)})["catch"](f)}
function f(c){A=g.DONE;switch(c.name){case "AbortError":a.warn("Loader "+c.name+": "+c.message);h.dispatchEvent(b.ABORT,{name:c.name,message:c.message});break;case "TimeoutError":a.error("Loader "+c.name+": "+c.message);h.dispatchEvent(b.TIMEOUT,{name:c.name,message:c.message});break;default:a.error("Loader "+c.name+": "+c.message),h.dispatchEvent(b.STALLED,{name:c.name,message:c.message})}h.dispatchEvent(b.LOADEND)}c.call(this,"Fetch",b);var h=this,A;h.load=function(c,d,u){A=g.UNINITIALIZED;h.isSupported(c)?
(a.debug("Loader loadstart"),h.dispatchEvent(b.LOADSTART),A=g.OPEN,void 0!==d&&a.extendz(h.config.headers,{Range:"bytes="+d+"-"+(u||"")}),d=a.extendz({},h.config,{headers:new Headers(h.config.headers),signal:n.signal}),fetch(c.href,d).then(function(b){switch(A){case g.OPEN:A=g.SENT;break;default:a.warn("Loader state error, probably aborted already.")}if(!b.ok||200>b.status||299<b.status)return Promise.reject(Error(b.status+" "+b.statusText));var c=b.headers.get("Content-Length");c&&(c=parseInt(c));
if(206===b.status){var f=b.headers.get("Content-Range");f&&(f=f.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(c=parseInt(f[3]))}l!==c&&(l=c||Infinity,a.log("File size changed: "+l));return e(b.body.getReader())})["catch"](f)):(a.error("Loader suspend: not supportped"),A=g.DONE,h.dispatchEvent(b.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),h.dispatchEvent(b.LOADEND))};h.abort=function(){n.abort()};h.state=function(){return A};h.config=a.extendz({},r,d);var l=NaN;var n=new AbortController}
var a=e.utils,k=e.events,c=k.EventDispatcher,b=k.IOEvent;e=e.IO;var g=e.ReadyState,r={method:"GET",headers:{},mode:e.Mode.CORS,credentials:e.Credentials.OMIT,cache:e.Cache.DEFAULT,redirect:e.Redirect.FOLLOW};d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="Fetch";d.prototype.CONF=r;d.prototype.isSupported=function(a,b){return b&&"live"!==b?!1:!!fetch&&("http:"===a.protocol||"https:"===a.protocol)};e.register(d)})(playease);
(function(e){function d(c){b.call(this,"MozStream",g);var f=this,d;f.load=function(b,c,e){d=h.UNINITIALIZED;if(f.isSupported(b)){a.debug("Loader loadstart");f.dispatchEvent(g.LOADSTART);n.open(f.config.method,b.href,!0);void 0!==c&&a.extendz(f.config.headers,{Range:"bytes="+c+"-"+(e||"")});a.forEach(f.config.headers,function(a,b){n.setRequestHeader(a,b)});switch(f.config.credentials){case r.INCLUDE:n.withCredentials=!0;break;case r.SAME_ORIGIN:n.withCredentials=window.location.host===b.host;break;
default:n.withCredentials=!1}n.send()}else a.error("Loader suspend: not supportped"),d=h.DONE,f.dispatchEvent(g.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),f.dispatchEvent(g.LOADEND)};f.abort=function(){n.abort()};f.state=function(){return d};f.config=a.extendz({},t,c);var e=NaN;var n=new XMLHttpRequest;n.onreadystatechange=function(b){d=n.readyState;switch(d){case h.SENT:if(200>n.status||299<n.status)a.error("Loader stalled: "+n.status+" "+n.statusText),f.dispatchEvent(g.STALLED,
{name:"NetworkError",message:n.status+" "+n.statusText});else{(b=n.getResponseHeader("Content-Length"))&&(b=parseInt(b));if(206===n.status){var c=n.getResponseHeader("Content-Range");c&&(c=c.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(b=parseInt(c[3]))}e!==b&&(e=b||Infinity,a.log("File size changed: "+e))}}};n.onabort=function(b){a.warn("Loader AbortError: The operation was aborted.");f.dispatchEvent(g.ABORT,{name:"AbortError",message:"The operation was aborted."})};n.onprogress=function(b){a.debug("Loader progress: "+
n.response.byteLength+"/"+e);f.dispatchEvent(g.PROGRESS,{buffer:n.response,loaded:n.response.byteLength,total:e})};n.onload=function(b){a.debug("Loader load.");f.dispatchEvent(g.LOAD)};n.onerror=function(b){a.error("Loader "+b.name+": "+b.message);switch(b.name){case "TimeoutError":f.dispatchEvent(g.TIMEOUT,{name:b.name,message:b.message});break;default:f.dispatchEvent(g.STALLED,{name:b.name,message:b.message})}};n.onloadend=function(a){f.dispatchEvent(g.LOADEND)};n.responseType="moz-chunked-arraybuffer"}
var a=e.utils,k=e.Browser,c=e.events,b=c.EventDispatcher,g=c.IOEvent;e=e.IO;var r=e.Credentials,h=e.ReadyState,t={method:"GET",headers:{},mode:e.Mode.CORS,credentials:r.OMIT,cache:e.Cache.DEFAULT,redirect:e.Redirect.FOLLOW};d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="MozStream";d.prototype.CONF=t;d.prototype.isSupported=function(a,b){return b&&"live"!==b||k.isFirefox&&(14>k.major||67<k.major)?!1:"http:"===a.protocol||"https:"===a.protocol};e.register(d)})(playease);
(function(e){function d(c){function f(b){a.error("Loader "+b.name+": "+b.message);switch(b.name){case "TimeoutError":d.dispatchEvent(g.TIMEOUT,{name:b.name,message:b.message});break;default:d.dispatchEvent(g.STALLED,{name:b.name,message:b.message})}}b.call(this,"MSStream",g);var d=this,e;d.load=function(b,c,f){e=h.UNINITIALIZED;k.position=0;if(d.isSupported(b)){a.debug("Loader loadstart");d.dispatchEvent(g.LOADSTART);m.open(d.config.method,b.href,!0);void 0!==c&&a.extendz(d.config.headers,{Range:"bytes="+
c+"-"+(f||"")});a.forEach(d.config.headers,function(a,b){m.setRequestHeader(a,b)});switch(d.config.credentials){case r.INCLUDE:m.withCredentials=!0;break;case r.SAME_ORIGIN:m.withCredentials=window.location.host===b.host;break;default:m.withCredentials=!1}m.send()}else a.error("Loader suspend: not supportped"),e=h.DONE,d.dispatchEvent(g.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),d.dispatchEvent(g.LOADEND)};d.abort=function(){m.abort()};d.state=function(){return e};d.config=a.extendz({},
t,c);var n=NaN;var m=new XMLHttpRequest;m.onreadystatechange=function(b){e=m.readyState;switch(e){case h.SENT:if(200>m.status||299<m.status){a.error("Loader stalled: "+m.status+" "+m.statusText);d.dispatchEvent(g.STALLED,{name:"NetworkError",message:m.status+" "+m.statusText});break}(b=m.getResponseHeader("Content-Length"))&&(b=parseInt(b));if(206===m.status){var c=m.getResponseHeader("Content-Range");c&&(c=c.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(b=parseInt(c[3]))}n!==b&&(n=b||Infinity,a.log("File size changed: "+
n));break;case h.LOADING:200>m.status||299<m.status?(a.error("Loader stalled: "+m.status+" "+m.statusText),d.dispatchEvent(g.STALLED,{name:"NetworkError",message:m.status+" "+m.statusText})):k.readAsArrayBuffer(m.response)}};m.onabort=function(b){a.warn("Loader AbortError: The operation was aborted.");d.dispatchEvent(g.ABORT,{name:"AbortError",message:"The operation was aborted."})};m.onerror=f;m.onloadend=function(a){d.dispatchEvent(g.LOADEND)};m.responseType="ms-stream";var k=new MSStreamReader;
k.onprogress=function(b){b=k.result.slice(k.position);null==b?a.warn("What happend???"):(a.debug("Loader progress: "+b.byteLength+"/"+n),d.dispatchEvent(g.PROGRESS,{buffer:b,loaded:b.byteLength,total:n}),k.position=k.result.byteLength)};k.onload=function(b){a.debug("Loader load.");d.dispatchEvent(g.LOAD)};k.onerror=f}var a=e.utils,k=e.Browser,c=e.events,b=c.EventDispatcher,g=c.IOEvent;e=e.IO;var r=e.Credentials,h=e.ReadyState,t={method:"GET",headers:{},mode:e.Mode.CORS,credentials:r.OMIT,cache:e.Cache.DEFAULT,
redirect:e.Redirect.FOLLOW};d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="MSStream";d.prototype.CONF=t;d.prototype.isSupported=function(a,b){return b&&"live"!==b||!k.isIE10&&!k.isIE11&&!k.isEdge?!1:"http:"===a.protocol||"https:"===a.protocol};e.register(d)})(playease);
(function(e){function d(d){function e(b){n=g.SENT;a.log("File size changed: Infinity")}function f(c){a.debug("Loader progress: "+c.data.byteLength+"/Infinity");n===g.SENT&&(n=g.LOADING);l.dispatchEvent(b.PROGRESS,{buffer:c.data,loaded:c.data.byteLength,total:Infinity})}function h(a){switch(a.name){case "TimeoutError":l.dispatchEvent(b.TIMEOUT,{name:a.name,message:a.message});break;default:l.dispatchEvent(b.STALLED,{name:a.name,message:a.message})}}function k(c){a.debug("Loader load.");n=g.DONE;l.dispatchEvent(b.LOAD);
l.dispatchEvent(b.LOADEND)}c.call(this,"Websocket",b);var l=this,n,m;l.load=function(c,d,x){n=g.UNINITIALIZED;l.isSupported(c)?(a.debug("Loader loadstart"),l.dispatchEvent(b.LOADSTART),n=g.OPEN,m=new window.WebSocket(c.href),m.onopen=e,m.onmessage=f,m.onerror=h,m.onclose=k,m.binaryType="arraybuffer"):(a.error("Loader suspend: not supportped"),n=g.DONE,l.dispatchEvent(b.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),l.dispatchEvent(b.LOADEND))};l.abort=function(){!m||m.readyState!=WebSocket.CONNECTING&&
m.readyState!=WebSocket.OPEN||(m.close(),a.warn("Loader AbortError: The operation was aborted."),l.dispatchEvent(b.ABORT,{name:"AbortError",message:"The operation was aborted."}))};l.state=function(){return n};l.config=a.extendz({},r,d);window.WebSocket=window.WebSocket||window.MozWebSocket}var a=e.utils,k=e.events,c=k.EventDispatcher,b=k.IOEvent;e=e.IO;var g=e.ReadyState,r={method:"GET",headers:{},mode:e.Mode.CORS,credentials:e.Credentials.OMIT,cache:e.Cache.DEFAULT,redirect:e.Redirect.FOLLOW};d.prototype=
Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="Websocket";d.prototype.CONF=r;d.prototype.isSupported=function(a,b){return b&&"live"!==b?!1:!(!window.WebSocket&&!window.MozWebSocket)&&("ws:"===a.protocol||"wss:"===a.protocol)};e.register(d)})(playease);
(function(e){function d(d){c.call(this,"XHR",b);var f=this,e;f.load=function(c,d,h){e=r.UNINITIALIZED;if(f.isSupported(c)){a.debug("Loader loadstart");f.dispatchEvent(b.LOADSTART);l.open(f.config.method,c.href,!0);void 0!==d&&a.extendz(f.config.headers,{Range:"bytes="+d+"-"+(h||"")});a.forEach(f.config.headers,function(a,b){l.setRequestHeader(a,b)});switch(f.config.credentials){case g.INCLUDE:l.withCredentials=!0;break;case g.SAME_ORIGIN:l.withCredentials=window.location.host===c.host;break;default:l.withCredentials=
!1}l.send()}else a.error("Loader suspend: not supportped"),e=r.DONE,f.dispatchEvent(b.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),f.dispatchEvent(b.LOADEND)};f.abort=function(){l.abort()};f.state=function(){return e};f.config=a.extendz({},h,d);var k=NaN;var l=new XMLHttpRequest;l.onreadystatechange=function(c){e=l.readyState;switch(e){case r.SENT:if(416!==l.status&&(200>l.status||299<l.status))a.error("Loader stalled: "+l.status+" "+l.statusText),f.dispatchEvent(b.STALLED,{name:"NetworkError",
message:l.status+" "+l.statusText});else{(c=l.getResponseHeader("Content-Length"))&&(c=parseInt(c));if(206===l.status){var d=l.getResponseHeader("Content-Range");d&&(d=d.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(c=parseInt(d[3]))}k!==c&&(k=c||Infinity,a.log("File size changed: "+k))}}};l.onabort=function(c){a.warn("Loader AbortError: The operation was aborted.");f.dispatchEvent(b.ABORT,{name:"AbortError",message:"The operation was aborted."})};l.onprogress=function(b){a.debug("Loader progress: "+l.loaded+
"/"+k)};l.onload=function(c){a.debug("Loader load.");f.dispatchEvent(b.PROGRESS,{buffer:l.response,loaded:l.response.byteLength,total:k});f.dispatchEvent(b.LOAD)};l.onerror=function(c){a.error("Loader "+c.name+": "+c.message);switch(c.name){case "TimeoutError":f.dispatchEvent(b.TIMEOUT,{name:c.name,message:c.message});break;default:f.dispatchEvent(b.STALLED,{name:c.name,message:c.message})}};l.onloadend=function(a){f.dispatchEvent(b.LOADEND)};l.responseType=f.config.responseType}var a=e.utils,k=e.events,
c=k.EventDispatcher,b=k.IOEvent;e=e.IO;var g=e.Credentials,r=e.ReadyState,h={method:"GET",headers:{},mode:e.Mode.CORS,credentials:g.OMIT,cache:e.Cache.DEFAULT,redirect:e.Redirect.FOLLOW,responseType:e.ResponseType.ARRAYBUFFER};d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="XHR";d.prototype.CONF=h;d.prototype.isSupported=function(a,b){if(b&&"live"===b){b=["flv","",void 0,"mp4","m4s","f4v","m4v","mov"];for(var c=0;c<b.length;c++)if(a.filetype===b[c])return!1}return"http:"===
a.protocol||"https:"===a.protocol};e.register(d)})(playease);
(function(e){function d(a,b){this.Num=a||30;this.Den=b||1}function a(){var a=this;a.left=function(){return null==a.payload?0:a.payload.byteLength-a.position};a.set=function(a,c){b[a]=c};a.get=function(a){return b[a]};var b={};a.kind="";a.codec="";a.length=0;a.timestamp=0;a.streamid=0;a.payload=null;a.position=0}var k={};a.KindAudio="audio";a.KindVideo="video";a.KindScript="script";k.Rational=d;k.Information=function(){this.MimeType="";this.Codecs=[];this.Timescale=1E3;this.BitRate=this.VideoDataRate=
this.AudioDataRate=this.CodecHeight=this.CodecWidth=this.Height=this.Width=this.Size=this.Duration=this.Timestamp=this.TimeBase=0;this.FrameRate=new d;this.Channels=this.SampleSize=this.SampleRate=0};k.Packet=a;e.AV=k})(playease);
(function(e){var d=e.utils;e=e.AV;var a={},k=[];a.COL_PRI_RESERVED0=0;a.COL_PRI_BT709=1;a.COL_PRI_UNSPECIFIED=2;a.COL_PRI_RESERVED=3;a.COL_PRI_BT470M=4;a.COL_PRI_BT470BG=5;a.COL_PRI_SMPTE170M=6;a.COL_PRI_SMPTE240M=7;a.COL_PRI_FILM=8;a.COL_PRI_BT2020=9;a.COL_PRI_SMPTEST428_1=10;a.COL_PRI_NB=11;a.COL_TRC_RESERVED0=0;a.COL_TRC_BT709=1;a.COL_TRC_UNSPECIFIED=2;a.COL_TRC_RESERVED=3;a.COL_TRC_GAMMA22=4;a.COL_TRC_GAMMA28=5;a.COL_TRC_SMPTE170M=6;a.COL_TRC_SMPTE240M=7;a.COL_TRC_LINEAR=8;a.COL_TRC_LOG=9;a.COL_TRC_LOG_SQRT=
10;a.COL_TRC_IEC61966_2_4=11;a.COL_TRC_BT1361_ECG=12;a.COL_TRC_IEC61966_2_1=13;a.COL_TRC_BT2020_10=14;a.COL_TRC_BT2020_12=15;a.COL_TRC_SMPTEST2084=16;a.COL_TRC_SMPTEST428_1=17;a.COL_TRC_ARIB_STD_B67=18;a.COL_TRC_NB=19;a.COL_SPC_RGB=0;a.COL_SPC_BT709=1;a.COL_SPC_UNSPECIFIED=2;a.COL_SPC_RESERVED=3;a.COL_SPC_FCC=4;a.COL_SPC_BT470BG=5;a.COL_SPC_SMPTE170M=6;a.COL_SPC_SMPTE240M=7;a.COL_SPC_YCOCG=8;a.COL_SPC_YCGCO=8;a.COL_SPC_BT2020_NCL=9;a.COL_SPC_BT2020_CL=10;a.COL_SPC_NB=11;a.COL_RANGE_UNSPECIFIED=0;
a.COL_RANGE_MPEG=1;a.COL_RANGE_JPEG=2;a.COL_RANGE_NB=2;a.CHROMA_LOC_UNSPECIFIED=0;a.CHROMA_LOC_LEFT=1;a.CHROMA_LOC_CENTER=2;a.CHROMA_LOC_TOPLEFT=3;a.CHROMA_LOC_TOP=4;a.CHROMA_LOC_BOTTOMLEFT=5;a.CHROMA_LOC_BOTTOM=6;a.CHROMA_LOC_NB=7;a.register=function(c,b){try{k.splice(b||k.length,0,c),a[c.prototype.kind]=c}catch(g){d.error("Failed to register codec "+c.prototype.kind+", Error="+g.message)}};a.get=function(a){for(var b=0;b<k.length;b++)if(a=k[b],a.prototype.kind===a)return a;return null};e.codec=
a.get;e.Codec=a})(playease);
(function(e){function d(c){b.call(this,"AAC",r,[g.ERROR]);var d=this,e;d.parse=function(b){if(1>b.left())d.dispatchEvent(g.ERROR,{name:"DataError",message:"Data not enough while parsing AAC packet."});else{m.Timestamp=b.timestamp;var c=new DataView(b.payload.buffer);b.set("DataType",c.getUint8(b.position++));b.set("CTS",0);switch(b.get("DataType")){case h.SPECIFIC_CONFIG:a:if(2>b.left())d.dispatchEvent(g.ERROR,{name:"DataError",message:"Data not enough while parsing AAC specific config."});else{e=
new k(b.payload.subarray(b.position));d.AudioObjectType=e.ReadBits(5);d.AudioObjectType===t.ESCAPE&&(d.AudioObjectType=32+e.ReadBits(6));d.SamplingFrequencyIndex=e.ReadBits(4);d.SamplingFrequency=15===d.SamplingFrequencyIndex?e.ReadBits(24):f[d.SamplingFrequencyIndex];d.ChannelConfiguration=e.ReadBits(4);16>d.ChannelConfiguration&&(d.Channels=q[d.ChannelConfiguration]);if(d.AudioObjectType===t.SBR||d.AudioObjectType===t.PS&&0===(e.ShowBits(3)&3)&&0===(e.ShowBits(9)&63))switch(d.ExtensionSamplingFrequencyIndex=
e.ReadBits(4),d.ExtensionSamplingFrequency=15===d.ExtensionSamplingFrequencyIndex?e.ReadBits(24):f[d.ExtensionSamplingFrequencyIndex],d.ExtensionAudioObjectType=e.ReadBits(5),d.ExtensionAudioObjectType){case t.ESCAPE:d.ExtensionAudioObjectType=32+e.ReadBits(6);break;case t.ER_BSAC:d.ExtensionChannelConfiguration=e.ReadBits(4)}else d.ExtensionAudioObjectType=t.NULL,d.ExtensionSamplingFrequency=0;if(d.AudioObjectType===t.ALS){e.ShowBits(5);4279379!==e.ShowBitsLong(24)&&e.SkipBits(24);try{if(112>e.Left())throw{name:"DataError",
message:"Data not enough while parsing ALS config."};if(1095521024!==e.ReadBitsLong(32))throw{name:"TypeError",message:"Not ALS\\0"};d.SamplingFrequency=e.ReadBitsLong(32);e.SkipBits(32);d.ChannelConfiguration=0;d.Channels=e.ReadBits(16)+1}catch(x){a.error("Failed to parse AAC config ALS.");d.dispatchEvent(g.ERROR,{name:x.name,message:x.message});break a}}d.RefSampleDuration=Math.floor(1024*m.Timescale/d.SamplingFrequency);d.AudioObjectType=t.SBR;d.ExtensionSamplingFrequencyIndex=d.SamplingFrequencyIndex;
6<=d.SamplingFrequencyIndex?d.ExtensionSamplingFrequencyIndex-=3:1===d.ChannelConfiguration&&(d.AudioObjectType=t.AAC_LC);d.Config=d.AudioObjectType===t.SBR?new Uint8Array([d.AudioObjectType<<3|d.SamplingFrequencyIndex>>1,d.SamplingFrequencyIndex<<7|d.ChannelConfiguration<<3|d.ExtensionSamplingFrequencyIndex>>1,d.ExtensionSamplingFrequencyIndex<<7|8,0]):new Uint8Array([d.AudioObjectType<<3|d.SamplingFrequencyIndex>>1,d.SamplingFrequencyIndex<<7|d.ChannelConfiguration<<3]);d.Codec="mp4a.40."+d.AudioObjectType;
d.dispatchEvent(r.AAC_SPECIFIC_CONFIG)}break;case h.RAW_FRAME_DATA:b.set("DTS",m.TimeBase+m.Timestamp);b.set("PTS",b.get("DTS"));b.set("Data",b.payload.subarray(b.position));d.dispatchEvent(r.AAC_SAMPLE,{packet:b});break;default:d.dispatchEvent(g.ERROR,{name:"TypeError",message:"Unrecognized AAC packet type: "+d.DataType})}}};var m=c;d.MimeType="audio/mp4";d.Codec="";d.RefSampleDuration=Math.floor(1024*m.Timescale/44100);d.AudioObjectType=0;d.SamplingFrequencyIndex=0;d.SamplingFrequency=0;d.ChannelConfiguration=
0;d.Channels=0;d.ExtensionAudioObjectType=0;d.ExtensionSamplingFrequencyIndex=0;d.ExtensionSamplingFrequency=0;d.ExtensionChannelConfiguration=0;d.Config=null;d.ExpectedDts=0;d.Flags={IsLeading:0,SampleDependsOn:1,SampleIsDependedOn:0,SampleHasRedundancy:0,IsNonSync:0}}var a=e.utils,k=a.Golomb,c=e.events,b=c.EventDispatcher,g=c.Event,r=c.MediaEvent;e=e.AV.Codec;var h={SPECIFIC_CONFIG:0,RAW_FRAME_DATA:1},t={NULL:0,AAC_MAIN:1,AAC_LC:2,AAC_SSR:3,AAC_LTP:4,SBR:5,AAC_SCALABLE:6,TWINVQ:7,CELP:8,HVXC:9,
TTSI:12,MAINSYNTH:13,WAVESYNTH:14,MIDI:15,SAFX:16,ER_AAC_LC:17,ER_AAC_LTP:19,ER_AAC_SCALABLE:20,ER_TWINVQ:21,ER_BSAC:22,ER_AAC_LD:23,ER_CELP:24,ER_HVXC:25,ER_HILN:26,ER_PARAM:27,SSC:28,PS:29,SURROUND:30,ESCAPE:31,L1:32,L2:33,L3:34,DST:35,ALS:36,SLS:37,SLS_NON_CORE:38,ER_AAC_ELD:39,SMR_SIMPLE:40,SMR_MAIN:41,USAC_NOSBR:42,SAOC:43,LD_SURROUND:44,USAC:45},f=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],q=[0,1,2,3,4,5,6,8];c=[new Uint8Array([0,200,0,128,35,128]),new Uint8Array([33,
0,73,144,2,25,0,35,128]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])];d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="AAC";d.DataTypes=h;d.AOT=t;d.SamplingFrequencys=f;d.Channels=q;d.SilentFrames=c;e.register(d)})(playease);
(function(e){function d(e){c.call(this,"AVC",g,[b.ERROR]);var f=this;f.parse=function(d){if(4>d.left())f.dispatchEvent(b.ERROR,{name:"DataError",message:"Data not enough while parsing AVC packet."});else{q.Timestamp=d.timestamp;var c=new DataView(d.payload.buffer);d.set("DataType",c.getUint8(d.position++));d.set("CTS",c.getUint8(d.position++)<<16|c.getUint8(d.position++)<<8|c.getUint8(d.position++));switch(d.get("DataType")){case r.SEQUENCE_HEADER:a:if(7>d.left())f.dispatchEvent(b.ERROR,{name:"DataError",
message:"Data not enough while parsing AVC decoder configuration record."});else{f.AVCC=d.payload.subarray(d.position);c=0;var n=new DataView(d.payload.buffer,d.position);f.ConfigurationVersion=n.getUint8(c++);f.ProfileIndication=n.getUint8(c++);f.ProfileCompatibility=n.getUint8(c++);f.LevelIndication=n.getUint8(c++);if(1!==f.ConfigurationVersion||0===f.ProfileIndication)f.dispatchEvent(b.ERROR,{name:"DataError",message:"Invalid AVC configuration version or profile."});else if(f.NalLengthSize=(n.getUint8(c++)&
3)+1,3>f.NalLengthSize)f.dispatchEvent(b.ERROR,{name:"DataError",message:"Invalid NalLengthSize "+f.NalLengthSize});else{for(var m=n.getUint8(c++)&31,t=0;t<m;t++){var u=n.getUint16(c);c+=2;if(0!==u){var x=f.AVCC.subarray(c,c+u);try{f.SPS.parse(x),f.RefSampleDuration=Math.floor(q.Timescale*e.FrameRate.Den/e.FrameRate.Num)}catch(F){f.dispatchEvent(b.ERROR,{name:F.name,message:F.message});break a}c+=u}}m=n.getUint8(c++);for(t=0;t<m;t++)u=n.getUint16(c),c+=2,0!==u&&(c+=u);f.Codec=f.SPS.Codec;f.dispatchEvent(g.AVC_CONFIG_RECORD,
{packet:d})}}break;case r.NALU:a:{c=0;n=new DataView(d.payload.buffer,d.position);t=d.payload.subarray(d.position);m=[];d.set("DTS",q.TimeBase+q.Timestamp);d.set("PTS",d.get("CTS")+d.get("DTS"));d.set("Data",t);for(d.set("NALUs",m);c<n.byteLength;){if(c+4>=n.byteLength){f.dispatchEvent(k.ERROR,{name:"DataError",message:"Data not enough for next NALU."});break a}u=n.getUint32(c);3===f.NalLengthSize&&(u>>=8);c+=f.NalLengthSize;if(u>n.byteLength-f.NalLengthSize){f.dispatchEvent(k.ERROR,{name:"DataError",
message:"Malformed Nalus near timestamp "+d.get("DTS")+"."});break a}d.set("ForbiddenZeroBit",n.getUint8(c)>>7&1);d.set("NalRefIdc",n.getUint8(c)>>5&3);d.set("NalUnitType",n.getUint8(c)&31);d.get("NalUnitType")===h.IDR_SLICE&&d.set("Keyframe",!0);x=t.subarray(c,c+u);c+=u;m.push(x)}f.dispatchEvent(g.AVC_SAMPLE,{packet:d})}break;case r.END_OF_SEQUENCE:a.debug("AVC sequence end.");f.dispatchEvent(g.END_OF_STREAM);break;default:f.dispatchEvent(b.ERROR,{name:"TypeError",message:"Unrecognized AVC packet type: "+
d.get("DataType")})}}};var q=e;f.MimeType="video/mp4";f.Codec="";f.RefSampleDuration=Math.floor(q.Timescale*e.FrameRate.Den/e.FrameRate.Num);f.AVCC=null;f.ConfigurationVersion=0;f.ProfileIndication=0;f.ProfileCompatibility=0;f.LevelIndication=0;f.NalLengthSize=0;f.SPS=new d.SPS(q);f.PPS=new d.PPS(f.SPS);f.ExpectedDts=0;f.Flags={IsLeading:0,SampleDependsOn:0,SampleIsDependedOn:0,SampleHasRedundancy:0,IsNonSync:0}}var a=e.utils,k=e.events,c=k.EventDispatcher,b=k.Event,g=k.MediaEvent;e=e.AV.Codec;var r=
{SEQUENCE_HEADER:0,NALU:1,END_OF_SEQUENCE:2},h={SLICE:1,DPA:2,DPB:3,DPC:4,IDR_SLICE:5,SEI:6,SPS:7,PPS:8,AUD:9,END_SEQUENCE:10,END_STREAM:11,FILLER_DATA:12,SPS_EXT:13,AUXILIARY_SLICE:19,FF_IGNORE:267448321};d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="AVC";d.DataTypes=r;d.NAL=h;e.register(d)})(playease);
(function(e){function d(){var a=this,b;a.parse=function(d){b=d;a.CpbCnt=b.ReadUE()+1;if(32<a.CpbCnt)throw{name:"DataError",message:"Invalid HRD.CpbCnt "+a.CpbCnt+"."};a.BitRateScale=b.ReadBits(4);a.CpbSizeScale=b.ReadBits(4);for(d=0;d<a.CpbCnt;d++)a.BitRateValue[d]=b.ReadUE(),a.CpbSizeValue[d]=b.ReadUE(),a.CbrFlag|=b.ReadBits(1)<<d;a.InitialCpbRemovalDelayLength=_b.ReadBits(5)+1;a.CpbRemovalDelayLength=b.ReadBits(5)+1;a.DpbOutputDelayLength=b.ReadBits(5)+1;a.TimeOffsetLength=b.ReadBits(5)};a.CpbCnt=
0;a.BitRateScale=0;a.CpbSizeScale=0;a.BitRateValue=Array(32);a.CpbSizeValue=Array(32);a.CbrFlag=0;a.InitialCpbRemovalDelayLength=0;a.CpbRemovalDelayLength=0;a.DpbOutputDelayLength=0;a.TimeOffsetLength=0}function a(){var a=this,c;a.parse=function(b){c=b;a.AspectRatioInfoPresentFlag=c.ReadBits(1);if(0!==a.AspectRatioInfoPresentFlag)if(a.AspectRatioIdc=c.ReadBits(8),255===a.AspectRatioIdc)a.Sar.Num=c.ReadBits(16),a.Sar.Den=c.ReadBits(16);else if(a.AspectRatioIdc<r.length)a.Sar=r[a.AspectRatioIdc];else throw{name:"DataError",
message:"Illegal aspect ratio."};else a.Sar.Num=0,a.Sar.Den=0;a.OverscanInfoPresentFlag=c.ReadBits(1);0!==a.OverscanInfoPresentFlag&&(a.OverscanAppropriateFlag=c.ReadBits(1));a.VideoSignalTypePresentFlag=c.ReadBits(1);0!==a.VideoSignalTypePresentFlag&&(a.VideoFormat=c.ReadBits(3),a.VideoFullRangeFlag=c.ReadBits(1),a.ColourDescriptionPresentFlag=c.ReadBits(1),0!==a.ColourDescriptionPresentFlag&&(a.ColourPrimaries=c.ReadBits(8),a.TransferCharacteristics=c.ReadBits(8),a.MatrixCoefficients=c.ReadBits(8),
a.ColourPrimaries>=g.COL_PRI_NB&&(a.ColourPrimaries=g.COL_PRI_UNSPECIFIED),a.TransferCharacteristics>=g.COL_TRC_NB&&(a.TransferCharacteristics=g.COL_TRC_UNSPECIFIED),a.MatrixCoefficients>=g.COL_SPC_NB&&(a.MatrixCoefficients=g.COL_SPC_UNSPECIFIED)));a.ChromaLocInfoPresentFlag=c.ReadBits(1);0!==a.ChromaLocInfoPresentFlag&&(a.ChromaSampleLocTypeTopField=c.ReadUE(),a.ChromaSampleLocTypeBottomField=c.ReadUE());if(0!==c.ReadBits(1)&&10>c.Left())throw{name:"DataError",message:"Truncated VUI."};a.TimingInfoPresentFlag=
c.ReadBits(1);if(0!==a.TimingInfoPresentFlag){a.NumUnitsInTick=c.ReadBitsLong(32);a.TimeScale=c.ReadBitsLong(32);if(0===a.NumUnitsInTick||0===a.TimeScale)k.debug("time_scale/num_units_in_tick invalid or unsupported "+a.TimeScale+"/"+a.NumUnitsInTick),a.TimingInfoPresentFlag=0;a.FixedFrameRateFlag=c.ReadBits(1)}a.NalHrdParametersPresentFlag=c.ReadBits(1);0!==a.NalHrdParametersPresentFlag&&a.NalHrd.parse(c);a.VclHrdParametersPresentFlag=c.ReadBits(1);0!==a.VclHrdParametersPresentFlag&&a.VclHrd.parse(c);
if(0!==a.NalHrdParametersPresentFlag||0!==a.VclHrdParametersPresentFlag)a.LowDelayHrdFlag=c.ReadBits(1);a.PicStructPresentFlag=c.ReadBits(1);if(0!==c.Left()&&(a.BitstreamRestrictionFlag=c.ReadBits(1),0!==a.BitstreamRestrictionFlag&&(a.MotionVectorsOverPicBoundariesFlag=c.ReadBits(1),a.MaxBytesPerPicDenom=c.ReadUE(),a.MaxBitsPerMbDenom=c.ReadUE(),a.Log2MaxMvLengthHorizontal=c.ReadUE(),a.Log2MaxMvLengthVertical=c.ReadUE(),a.MaxNumReorderFrames=c.ReadUE(),a.MaxDecFrameBuffering=c.ReadUE(),0>c.Left()&&
(a.MaxNumReorderFrames=0,a.BitstreamRestrictionFlag=0),16<a.MaxNumReorderFrames)))throw a.MaxNumReorderFrames=16,{name:"DataError",message:"Clipping illegal MaxNumReorderFrames "+a.MaxNumReorderFrames+"."};};a.AspectRatioInfoPresentFlag=0;a.AspectRatioIdc=0;a.Sar=new b;a.OverscanInfoPresentFlag=0;a.OverscanAppropriateFlag=0;a.VideoSignalTypePresentFlag=0;a.VideoFormat=0;a.VideoFullRangeFlag=0;a.ColourDescriptionPresentFlag=0;a.ColourPrimaries=0;a.TransferCharacteristics=0;a.MatrixCoefficients=0;a.ChromaLocInfoPresentFlag=
0;a.ChromaSampleLocTypeTopField=0;a.ChromaSampleLocTypeBottomField=0;a.TimingInfoPresentFlag=0;a.NumUnitsInTick=0;a.TimeScale=0;a.FixedFrameRateFlag=0;a.NalHrdParametersPresentFlag=0;a.NalHrd=new d;a.VclHrdParametersPresentFlag=0;a.VclHrd=new d;a.LowDelayHrdFlag=0;a.PicStructPresentFlag=0;a.BitstreamRestrictionFlag;a.MotionVectorsOverPicBoundariesFlag=0;a.MaxBytesPerPicDenom=0;a.MaxBitsPerMbDenom=0;a.Log2MaxMvLengthHorizontal=0;a.Log2MaxMvLengthVertical=0;a.MaxNumReorderFrames=0;a.MaxDecFrameBuffering=
0}var k=e.utils,c=k.Golomb;e=e.AV;var b=e.Rational,g=e.Codec;e=g.AVC;var r=[new b(0,1),new b(1,1),new b(12,11),new b(10,11),new b(16,11),new b(40,33),new b(24,11),new b(20,11),new b(32,11),new b(80,33),new b(18,11),new b(15,11),new b(64,33),new b(160,99),new b(4,3),new b(3,2),new b(2,1)];e.SPS=function(b){function d(a,b){return 0!==a&&0!==b&&(a+128)*(b+128)<k.MAX_INT32/8}var f=this,e;f.parse=function(a){if(4>a.byteLength)throw{name:"DataError",message:"Data not enough while parsing SPS."};f.Codec=
"avc1.";k.forEach(a.subarray(1,4),function(a,b){a=k.padStart(b.toString(16),2,"0");f.Codec+=a});a=k.ebsp2rbsp(a);e=new c(a);f.Data=a;e.ReadBits(8);f.ProfileIdc=e.ReadBits(8);f.ConstraintSetFlags=e.ReadBits(1)<<0;f.ConstraintSetFlags|=e.ReadBits(1)<<1;f.ConstraintSetFlags|=e.ReadBits(1)<<2;f.ConstraintSetFlags|=e.ReadBits(1)<<3;f.ConstraintSetFlags|=e.ReadBits(1)<<4;f.ConstraintSetFlags|=e.ReadBits(1)<<5;f.ReservedZero2Bits=e.ReadBits(2);f.LevelIdc=e.ReadBits(8);f.ID=e.ReadUE();if(32<=f.ID)throw{name:"DataError",
message:"SPS ID(0x"+f.ID.toString(16)+") out of range."};f.SeqScalingMatrixPresentFlag=0;f.Vui.VideoFullRangeFlag=1;f.Vui.MatrixCoefficients=g.COL_SPC_UNSPECIFIED;if(100===f.ProfileIdc||110===f.ProfileIdc||122===f.ProfileIdc||244===f.ProfileIdc||44===f.ProfileIdc||83===f.ProfileIdc||86===f.ProfileIdc||118===f.ProfileIdc||128===f.ProfileIdc||138===f.ProfileIdc||144===f.ProfileIdc){f.ChromaFormatIdc=e.ReadUE();if(3<f.ChromaFormatIdc)throw{name:"DataError",message:"Bad ChromaFormatIdc "+f.ChromaFormatIdc+
"."};if(3===f.ChromaFormatIdc&&(f.SeparateColourPlaneFlag=e.ReadBits(1),0!==f.SeparateColourPlaneFlag))throw{name:"DataError",message:"Separate color planes are not supported."};f.BitDepthLuma=e.ReadUE()+8;f.BitDepthChroma=e.ReadUE()+8;if(f.BitDepthChroma!==f.BitDepthLuma)throw{name:"DataError",message:"Different chroma and luma bit depth."};if(8>f.BitDepthLuma||14<f.BitDepthLuma||8>f.BitDepthChroma||14<f.BitDepthChroma)throw{name:"DataError",message:"Illegal bit depth value "+f.BitDepthLuma+", "+
f.BitDepthChroma+"."};f.TransformBypass=e.ReadBits(1);f.SeqScalingMatrixPresentFlag=e.ReadBits(1);if(0!==f.SeqScalingMatrixPresentFlag){a=8;3===f.ChromaFormatIdc&&(a+=4);for(var l=0;l<a;l++)if(0!=e.ReadBits(1)){var n=16;6<=l&&(n=64);for(var m=8,h=8,u=0;u<n;u++)h=e.ReadSE(),h=(m+h+256)%256,0!==h&&(m=h)}}}else f.ChromaFormatIdc=1,f.BitDepthLuma=8,f.BitDepthChroma=8;f.Log2MaxFrameNum=e.ReadUE()+4;if(4>f.Log2MaxFrameNum||16<f.Log2MaxFrameNum)throw{name:"DataError",message:"log2_max_frame_num_minus4("+
(f.Log2MaxFrameNum-4)+") out of range, expect 0-12."};f.PocType=e.ReadUE();if(0===f.PocType){if(f.Log2MaxPocLsb=e.ReadUE()+4,16<f.Log2MaxPocLsb)throw{name:"DataError",message:"log2_max_poc_lsb("+f.Log2MaxPocLsb+") is out of range."};}else if(1===f.PocType){f.DeltaPicOrderAlwaysZeroFlag=e.ReadBits(1);f.OffsetForNonRefPic=e.ReadUE();f.OffsetForTopToBottomField=e.ReadUE();f.NumRefFramesInPocCycle=e.ReadUE();a=f.OffsetForRefFrame.length;if(f.NumRefFramesInPocCycle>=a)throw{name:"DataError",message:"poc_cycle_length("+
f.NumRefFramesInPocCycle+") overflow."};for(l=0;l<f.NumRefFramesInPocCycle;l++)f.OffsetForRefFrame[l]=e.ReadUE()}else if(2!==f.PocType)throw{name:"DataError",message:"Illegal POC type "+f.PocType+"."};f.MaxNumRefFrames=e.ReadUE();if(34<f.MaxNumRefFrames||16<f.MaxNumRefFrames)throw{name:"DataError",message:"Too many reference frames, "+f.MaxNumRefFrames+"."};f.GapsInFrameNumValueAllowedFlag=e.ReadBits(1);f.PicWidth=e.ReadUE()+1;f.PicHeight=e.ReadUE()+1;if(f.PicWidth>=k.MAX_INT32/16||f.PicHeight>=k.MAX_INT32/
16||0==d(16*f.PicWidth,16*f.PicHeight))throw{name:"DataError",message:"pic_width or pic_height overflow."};f.FrameMbsOnlyFlag=e.ReadBits(1);f.MbAdaptiveFrameFieldFlag=0===f.FrameMbsOnlyFlag?e.ReadBits(1):0;b.CodecWidth=16*f.PicWidth;b.CodecHeight=16*f.PicHeight*(2-f.FrameMbsOnlyFlag);f.Direct8x8InferenceFlag=e.ReadBits(1);f.FrameCroppingFlag=e.ReadBits(1);if(0!==f.FrameCroppingFlag){var x;a=e.ReadUE();l=e.ReadUE();n=e.ReadUE();m=e.ReadUE();1===f.ChromaFormatIdc&&(x=1);if(1===f.ChromaFormatIdc||2===
f.ChromaFormatIdc)var q=1;q=1<<q;x=2-f.FrameMbsOnlyFlag<<x;if(a>k.MAX_INT32/4/q||l>k.MAX_INT32/4/q||n>k.MAX_INT32/4/x||m>k.MAX_INT32/4/x||(a+l)*q>=b.CodecWidth||(n+m)*x>=b.CodecHeight)throw{name:"DataError",message:"Invalid crop values, l="+a+", r="+l+", t="+n+", b="+m+", w="+b.CodecWidth+", h="+b.CodecHeight+"."};f.FrameCropLeftOffset=a*q;f.FrameCropRightOffset=l*q;f.FrameCropTopOffset=n*x;f.FrameCropBottomOffset=m*x}else f.FrameCropLeftOffset=0,f.FrameCropRightOffset=0,f.FrameCropTopOffset=0,f.FrameCropBottomOffset=
0;f.VuiParametersPresentFlag=e.ReadBits(1);0!==f.VuiParametersPresentFlag&&(f.Vui.parse(e),0!==f.Vui.TimingInfoPresentFlag&&(b.FrameRate.Num=f.Vui.TimeScale,b.FrameRate.Den=2*f.Vui.NumUnitsInTick));b.CodecWidth-=f.FrameCropLeftOffset+f.FrameCropRightOffset;b.CodecHeight-=f.FrameCropTopOffset+f.FrameCropBottomOffset;b.Width=b.CodecWidth;b.Height=b.CodecHeight;1<f.Vui.Sar.Den&&(b.Width*=f.Vui.Sar.Num/f.Vui.Sar.Den)};f.ProfileIdc=0;f.ConstraintSetFlags=0;f.ReservedZero2Bits=0;f.LevelIdc=0;f.ID=0;f.ChromaFormatIdc=
0;f.SeparateColourPlaneFlag=0;f.BitDepthLuma=0;f.BitDepthChroma=0;f.TransformBypass=0;f.SeqScalingMatrixPresentFlag=0;f.Log2MaxFrameNum=0;f.PocType=0;f.Log2MaxPocLsb=0;f.DeltaPicOrderAlwaysZeroFlag=0;f.OffsetForNonRefPic=0;f.OffsetForTopToBottomField=0;f.NumRefFramesInPocCycle=0;f.OffsetForRefFrame=Array(256);f.MaxNumRefFrames=0;f.GapsInFrameNumValueAllowedFlag=0;f.PicWidth=0;f.PicHeight=0;f.FrameMbsOnlyFlag=0;f.MbAdaptiveFrameFieldFlag=0;f.Direct8x8InferenceFlag=0;f.FrameCroppingFlag=0;f.FrameCropLeftOffset=
0;f.FrameCropRightOffset=0;f.FrameCropTopOffset=0;f.FrameCropBottomOffset=0;f.VuiParametersPresentFlag=0;f.Vui=new a}})(playease);
(function(e){var d=e.utils,a=d.Golomb;e.AV.Codec.AVC.PPS=function(e){var c=this,b;c.parse=function(e){e=d.ebsp2rbsp(e);b=new a(e);c.Data=e;c.ID=b.ReadUE();if(256<=c.ID)throw{name:"DataError",message:"PPS ID(0x"+c.ID.toString(16)+") out of range."};c.SpsID=b.ReadUE();if(32<=c.SpsID)throw{name:"DataError",message:"SPS ID(0x"+c.SpsID.toString(16)+") out of range."};if(14<g.BitDepthLuma)throw{name:"DataError",message:"Invalid BitDepthLuma "+g.BitDepthLuma+"."};if(11===g.BitDepthLuma||13===g.BitDepthLuma)throw{name:"DataError",
message:"Unimplemented BitDepthLuma "+g.BitDepthLuma+"."};c.EntropyCodingModeFlag=b.ReadBits(1);c.PicOrderPresentFlag=b.ReadBits(1);c.NumSliceGroups=b.ReadUE()+1;1<c.NumSliceGroups&&(c.SliceGroupMapType=b.ReadUE(),d.debug("FMO not supported!"));c.NumRefIdx[0]=b.ReadUE()+1;c.NumRefIdx[1]=b.ReadUE()+1;if(31<c.NumRefIdx[0]-1||31<c.NumRefIdx[1]-1)throw{name:"DataError",message:"PPS reference overflow."};e=6*(g.BitDepthLuma-8);c.WeightedPredFlag=b.ReadBits(1);c.WeightedBipredIdc=b.ReadBits(2);c.PicInitQp=
b.ReadSE()+26+e;c.PicInitQs=b.ReadSE()+26+e;c.ChromaQpIndexOffset[0]=b.ReadSE();c.DeblockingFilterControlPresentFlag=b.ReadBits(1);c.ConstrainedIntraPredFlag=b.ReadBits(1);c.RedundantPicCntPresentFlag=b.ReadBits(1);c.Transform8x8ModeFlag=0;if(e=0<b.Left())66!==g.ProfileIdc&&77!==g.ProfileIdc&&88!==g.ProfileIdc||0===(g.ConstraintSetFlags&7)?e=!0:(d.debug("Current profile doesn't provide more RBSP data in PPS, skipping..."),e=!1);e?(c.Transform8x8ModeFlag=b.ReadBits(1),c.PicScalingMatrixPresentFlag=
b.ReadBits(1),0!==c.PicScalingMatrixPresentFlag&&(e=2,3===g.ChromaFormatIdc&&(e=6),b.ReadBits(6+e*c.Transform8x8ModeFlag)),c.ChromaQpIndexOffset[1]=b.ReadSE()):c.ChromaQpIndexOffset[1]=c.ChromaQpIndexOffset[0];c.ChromaQpIndexOffset[0]!==c.ChromaQpIndexOffset[1]&&(c.ChromaQpDiff=1)};var g=e;c.ID=0;c.SpsID=0;c.EntropyCodingModeFlag=0;c.PicOrderPresentFlag=0;c.NumSliceGroups=0;c.SliceGroupMapType=0;c.NumRefIdx=Array(2);c.WeightedPredFlag=0;c.WeightedBipredIdc=0;c.PicInitQp=0;c.PicInitQs=0;c.ChromaQpIndexOffset=
Array(2);c.DeblockingFilterControlPresentFlag=0;c.ConstrainedIntraPredFlag=0;c.RedundantPicCntPresentFlag=0;c.Transform8x8ModeFlag=0;c.PicScalingMatrixPresentFlag=0;c.ChromaQpDiff=0}})(playease);
(function(e){function d(a,b){c.call(this,"MediaStreamTrack");var e=this;e.stop=function(){};e.clone=function(){return new d(e.kind,e.source)};e.id=0;e.sn=0;e.kind=a;e.source=b}var a=e.utils,k=e.events,c=k.EventDispatcher,b=k.Event,g=k.MediaStreamTrackEvent;e=e.AV;var r=e.Information,h={},t=[];h.register=function(b,c){try{t.splice(c||t.length,0,b),h[b.prototype.kind]=b}catch(A){a.error("Failed to register format "+b.prototype.kind+", Error="+A.message)}};h.get=function(a){for(var b=0;b<t.length;b++){var c=
t[b];if(c.prototype.kind===a)return c}return null};d.KindAudio="audio";d.KindVideo="video";h.MediaStreamTrack=d;h.MediaStream=function(){c.call(this,"MediaStream",g,[b.ERROR]);var e=this;e.addTrack=function(b){for(var c=0;c<k.length;c++)if(k[c]===b){a.warn("MediaStreamTrack already added.");return}b.id=h++;k.push(b);a.log("Added "+b.kind+" track("+b.id+") to "+e.kind+".");e.dispatchEvent(g.ADDTRACK,{track:b})};e.removeTrack=function(b){for(var c=0;c<k.length;c++)if(k[c]===b){k.splice(c,1);a.log("Removed "+
b.kind+" track("+b.id+") to "+e.kind+".");e.dispatchEvent(g.REMOVETRACK,{track:b});break}};e.getTrackById=function(a){for(var b=0;b<k.length;b++)if(k[b].id===a)return k[b];return null};e.getTracks=function(){var b=[];a.forEach(k,function(a,c){b.push(c)});return b};e.getAudioTracks=function(){var b=[];a.forEach(k,function(a,c){c.kind===d.KindAudio&&b.push(c)});return b};e.getVideoTracks=function(){var b=[];a.forEach(k,function(a,c){c.kind===d.KindVideo&&b.push(c)});return b};e.close=function(){a.forEach(k,
function(a,b){b.stop();e.dispatchEvent(g.REMOVETRACK,{track:b})});h=1;k=[];e.info=new r};var h=1;var k=[];e.info=new r};e.format=h.get;e.Format=h})(playease);
(function(e){function d(){function d(){n=q.f;e.hasAudio=!1;e.hasVideo=!1}h.call(this,"FLV");var e=this,n,m;e.append=function(d){d=new Uint8Array(d);for(var u=0;u<d.byteLength;u++)switch(n){case q.f:if(70!==d[u]){e.dispatchEvent(c.ERROR,{name:"DataError",message:'Not "F"'});return}n=q.l;break;case q.l:if(76!==d[u]){e.dispatchEvent(c.ERROR,{name:"DataError",message:'Not "L"'});return}n=q.v;break;case q.v:if(86!==d[u]){e.dispatchEvent(c.ERROR,{name:"DataError",message:'Not "V"'});return}n=q.version;
break;case q.version:n=q.flags;break;case q.flags:e.hasAudio=!!(d[u]&4);e.hasVideo=!!(d[u]&1);n=q.header0;break;case q.header0:n=q.header1;break;case q.header1:n=q.header2;break;case q.header2:n=q.header3;break;case q.header3:n=q.backpointer0;break;case q.backpointer0:n=q.backpointer1;break;case q.backpointer1:n=q.backpointer2;break;case q.backpointer2:n=q.backpointer3;break;case q.backpointer3:n=q.type;break;case q.type:m=new g.Packet;switch(d[u]){case t.AUDIO:m.kind=r.KindAudio;break;case t.VIDEO:m.kind=
r.KindVideo;break;case t.SCRIPT:m.kind=r.KindScript;break;default:e.dispatchEvent(c.ERROR,{name:"TypeError",message:"Unrecognized flv tag "+a.hex(d[u])+"."});return}n=q.length0;break;case q.length0:m.length=d[u]<<16;n=q.length1;break;case q.length1:m.length|=d[u]<<8;n=q.length2;break;case q.length2:m.length|=d[u];m.payload=new Uint8Array(m.length);m.position=0;n=q.timestamp0;break;case q.timestamp0:m.timestamp=d[u]<<16;n=q.timestamp1;break;case q.timestamp1:m.timestamp|=d[u]<<8;n=q.timestamp2;break;
case q.timestamp2:m.timestamp|=d[u];n=q.timestamp3;break;case q.timestamp3:m.timestamp|=d[u]<<24;n=q.streamid0;break;case q.streamid0:m.streamid=d[u]<<16;n=q.streamid1;break;case q.streamid1:m.streamid|=d[u]<<8;n=q.streamid2;break;case q.streamid2:m.streamid|=d[u];n=q.payload;break;case q.payload:var x=Math.min(m.length-m.position,d.byteLength-u);m.payload.set(d.subarray(u,u+x),m.position);m.position+=x;u+=x-1;if(m.position===m.length){switch(m.kind){case r.KindAudio:m.set("Format",m.payload[0]>>
4&15);m.set("SampleRate",m.payload[0]>>2&3);m.set("SampleSize",m.payload[0]>>1&1);m.set("SampleType",m.payload[0]&1);m.set("DataType",m.payload[1]);m.position=1;break;case r.KindVideo:m.set("FrameType",m.payload[0]>>4&15);m.set("Codec",m.payload[0]&15);m.set("DataType",m.payload[1]);m.set("Keyframe",m.get("FrameType")===f.KEYFRAME);m.position=1;break;case r.KindScript:m.position=0}e.dispatchEvent(b.PACKET,{packet:m});n=q.backpointer0}break;default:e.dispatchEvent(c.ERROR,{name:"InvalidStateError",
message:"Invalid state while parsing flv tag."});return}};e.reset=function(){d();e.close()};d()}var a=e.utils,k=e.events,c=k.Event,b=k.MediaEvent,g=e.AV,r=g.Packet;e=g.Format;var h=e.MediaStream,t={AUDIO:8,VIDEO:9,SCRIPT:18},f={KEYFRAME:1,INTER_FRAME:2,DISPOSABLE_INTER_FRAME:3,GENERATED_KEYFRAME:4,INFO_OR_COMMAND_FRAME:5},q={f:0,l:1,v:2,version:3,flags:4,header0:5,header1:6,header2:7,header3:8,backpointer0:9,backpointer1:10,backpointer2:11,backpointer3:12,type:13,length0:14,length1:15,length2:16,
timestamp0:17,timestamp1:18,timestamp2:19,timestamp3:20,streamid0:21,streamid1:22,streamid2:23,payload:24};d.prototype=Object.create(h.prototype);d.prototype.constructor=d;d.prototype.kind="FLV";d.Tags=t;d.Frames=f;d.Formats={LINEAR_PCM_PLATFORM_ENDIAN:0,ADPCM:1,MP3:2,LINEAR_PCM_LITTLE_ENDIAN:3,NELLYMOSER_16_kHz_MONO:4,NELLYMOSER_8_kHz_MONO:5,NELLYMOSER:6,G_711_A_LAW_LOGARITHMIC_PCM:7,G_711_MU_LAW_LOGARITHMIC_PCM:8,RESERVED:9,AAC:10,SPEEX:11,MP3_8_kHz:14,DEVICE_SPECIFIC_SOUND:15};d.Rates=[5500,11025,
22050,44100];d.Codecs={JPEG:1,H263:2,SCREEN_VIDEO:3,VP6:4,VP6_ALPHA:5,SCREEN_VIDEO_2:6,AVC:7};e.FLV=d})(playease);
(function(e){function d(){b.call(this,"FMP4");var a=this;a.append=function(b){a.dispatchEvent(k.ERROR,{name:"NotSupportedError",message:"The operation is not supported."})};a.getInitSegment=function(){var b=a.ftyp(),c=a.moov.apply(a,arguments);return d.merge(b,c)};a.getSegment=function(b,e){var f=b.source,g=e.get("DTS")-a.info.TimeBase-f.ExpectedDts;e.set("DTS",f.ExpectedDts);e.set("PTS",e.get("CTS")+e.get("DTS"));e.set("Duration",f.RefSampleDuration+g);f.ExpectedDts=e.get("DTS")+e.get("Duration");
b.kind===c.KindVideo&&(e.get("Keyframe")?(f.Flags.SampleDependsOn=2,f.Flags.SampleIsDependedOn=1):(f.Flags.SampleDependsOn=1,f.Flags.SampleIsDependedOn=0));b.sn++;b=a.moof(b,e);e=a.mdat(e.get("Data"));return d.merge(b,e)};a.box=function(a){for(var b=Array.prototype.slice.call(arguments,1),c=8,d=0;d<b.length;d++)c+=b[d].byteLength;var e=0,f=new Uint8Array(c);f[e++]=c>>>24&255;f[e++]=c>>>16&255;f[e++]=c>>>8&255;f[e++]=c&255;f.set(a,e);e+=4;for(d=0;d<b.length;d++)f.set(b[d],e),e+=b[d].byteLength;return f};
a.ftyp=function(){return a.box(g.ftyp,h)};a.moov=function(){for(var b=[],c=[],d=a.mvhd(),e=Array.prototype.slice.call(arguments,0),f=0;f<e.length;f++){var n=e[f],m=a.trak(n);n=a.trex(n);b.push(m);c.push(n)}c=a.box.apply(a,[g.mvex].concat(c));return a.box.apply(a,[g.moov].concat([d],b,[c]))};a.mvhd=function(){var b=a.info.Timescale,c=1E3*a.info.Duration;return a.box(g.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255,c>>24&255,c>>16&255,c>>8&255,c&255,0,1,0,0,1,0,0,0,
0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))};a.trak=function(b){var c=a.tkhd(b);b=a.mdia(b);return a.box(g.trak,c,b)};a.tkhd=function(b){b=b.id;var c=1E3*a.info.Duration,d=a.info.Width,e=a.info.Height;return a.box(g.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255,0,0,0,0,c>>24&255,c>>16&255,c>>8&255,c&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,d>>8&255,d&255,0,0,e>>8&255,e&255,0,0]))};a.mdia=function(b){var c=a.mdhd(),d=a.hdlr(b);b=a.minf(b);return a.box(g.mdia,c,d,b)};a.mdhd=function(){var b=a.info.Timescale,c=1E3*a.info.Duration;return a.box(g.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255,c>>24&255,c>>16&255,c>>8&255,c&255,85,196,0,0]))};a.hdlr=function(b){return a.box(g.hdlr,b.kind===c.KindAudio?f:t)};a.minf=function(b){var d=b.kind===c.KindAudio?
a.box(g.smhd,z):a.box(g.vmhd,m);var e=a.dinf();b=a.stbl(b);return a.box(g.minf,d,e,b)};a.dinf=function(){var b=a.box(g.dref,r);return a.box(g.dinf,b)};a.stbl=function(b){b=a.stsd(b);var c=a.box(g.stts,A),d=a.box(g.stsc,l),e=a.box(g.stsz,n),f=a.box(g.stco,STCO);return a.box(g.stbl,b,c,d,e,f)};a.stsd=function(b){return b.kind===c.KindAudio?a.box(g.stsd,q,a.mp4a(b)):a.box(g.stsd,q,a.avc1(b))};a.mp4a=function(b){var c=b.source.SamplingFrequency;c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,b.source.ChannelConfiguration,
0,16,0,0,0,0,c>>>8&255,c&255,0,0]);b=a.esds(b);return a.box(g.mp4a,c,b)};a.esds=function(b){b=b.source.Config;var c=b.byteLength;c=new Uint8Array([0,0,0,0,3,23+c,0,1,0,4,15+c,64,21,0,0,0,0,0,0,0,0,0,0,0,5,c]);return a.box(g.esds,c,b,new Uint8Array([6,1,2]))};a.avc1=function(b){var c=a.info.CodecWidth,d=a.info.CodecHeight;c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,115,112,101,110,99,101,114,108,97,117,47,112,108,
97,121,101,97,115,101,46,106,115,0,0,0,0,0,0,0,0,0,0,24,255,255]);b=a.box(g.avcC,b.source.AVCC);return a.box(g.avc1,c,b)};a.trex=function(b){b=b.id;return a.box(g.trex,new Uint8Array([0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))};a.moof=function(b,c){var d=a.mfhd(b);b=a.traf(b,c);return a.box(g.moof,d,b)};a.mfhd=function(b){b=b.sn;b=new Uint8Array([0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255]);return a.box(g.mfhd,b)};a.traf=function(b,c){var d=b.id,e=c.get("DTS");d=
a.box(g.tfhd,new Uint8Array([0,0,0,0,d>>24&255,d>>16&255,d>>8&255,d&255]));e=a.box(g.tfdt,new Uint8Array([0,0,0,0,e>>24&255,e>>16&255,e>>8&255,e&255]));c=a.trun(b,c);b=a.sdtp(b);return a.box(g.traf,d,e,c,b)};a.trun=function(b,c){var d=c.get("Duration"),e=c.get("Data").byteLength;b=b.source.Flags;c=c.get("CTS");return a.box(g.trun,new Uint8Array([0,0,15,1,0,0,0,1,0,0,0,121,d>>24,d>>16,d>>8,d,e>>24,e>>16,e>>8,e,b.IsLeading<<2|b.SampleDependsOn,b.SampleIsDependedOn<<6|b.SampleHasRedundancy<<4|b.IsNonSync,
0,0,c>>24,c>>16,c>>8,c]))};a.sdtp=function(b){b=b.source.Flags;return a.box(g.sdtp,new Uint8Array([0,0,0,0,b.IsLeading<<6|b.SampleDependsOn<<4|b.SampleIsDependedOn<<2|b.SampleHasRedundancy]))};a.mdat=function(b){return a.box(g.mdat,b)};a.reset=function(){a.close()}}var a=e.utils,k=e.events.Event;e=e.AV.Format;var c=e.MediaStreamTrack,b=e.MediaStream,g={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],
stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),h=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),f=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,
0]),q=new Uint8Array([0,0,0,0,0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0]),l=STCO=A,n=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),m=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),z=new Uint8Array([0,0,0,0,0,0,0,0]);a.forEach(g,function(a,b){b.push(a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3))});d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="FMP4";d.merge=function(){for(var a=Array.prototype.slice.call(arguments,0),b=0,c=0;c<a.length;c++)b+=a[c].byteLength;
var d=0;b=new Uint8Array(b);for(c=0;c<a.length;c++)b.set(a[c],d),d+=a[c].byteLength;return b};d.parseDescriptor=function(a){a=new Uint8Array(a);for(var b=0,c={},d,e=0;e<a.byteLength;e++)switch(b){case 0:d={type:a[e],size:0,data:void 0};c[d.type]=d;b=1;break;case 1:case 2:case 3:case 4:var f=a[e];d&&(d.size=d.size<<7|f&127);f&128?b++:b=5;break;case 5:d&&(d.data=a.subarray(e,e+d.size),e+=d.size-1);b=0;break;default:throw{name:"InvalidStateError",message:"Invalid state while parsing fmp4 descriptor."};
}return c};e.FMP4=d})(playease);(function(e){var d=e.utils,a={},k=[];a.register=function(c,b){try{k.splice(b||k.length,0,c),a[c.prototype.kind]=c}catch(g){d.error("Failed to register module "+c.prototype.kind+", Error="+g.message)}};a.get=function(a,b){for(var c=0;c<k.length;c++){var d=k[c];if(d.prototype.isSupported(a,b))return d}return null};e.module=a.get;e.Module=a})(playease);
(function(e){function d(b){g.call(this,"SRC",r,h);var c=this,d;c.setup=function(){!1===e&&(e=!0,c.dispatchEvent(r.READY,{kind:c.kind}))};c.play=function(b,e){"string"===a.typeOf(b)&&b!==d&&b!==l.src&&(d=b,l.src=b);if(b=l.play())b["catch"](function(b){switch(b.name){case "AbortError":c.dispatchEvent(r.STALLED,{name:b.name,message:b.message});break;case "NotAllowedError":a.warn("Failed to play due to the autoplay policy, trying to play with muted.");l.muted=!0;l.play();break;default:a.error("Unrecognized error occured, "+
b.name+": "+b.message),c.dispatchEvent(r.STALLED,{name:b.name,message:b.message})}});l.controls=!1};c.pause=function(){l.pause();l.controls=!1};c.seek=function(a){l.currentTime=a;c.play()};c.stop=function(){e=!1;d=void 0;l.removeAttribute("src");l.load();l.currentTime=0;l.controls=!1};c.reload=function(){l.load();l.controls=!1};c.muted=function(b){"boolean"===a.typeOf(b)&&(l.muted=b);return l.muted};c.volume=function(b){"number"===a.typeOf(b)&&(l.volume=b);return l.volume};c.cleanup=function(){c.stop();
e=!1};c.element=function(){return l};c.config=b;var e=!1;var l=a.createElement("video");l.addEventListener("play",c.forward);l.addEventListener("suspend",c.forward);l.addEventListener("loadstart",c.forward);l.addEventListener("stalled",c.forward);l.addEventListener("waiting",c.forward);l.addEventListener("abort",c.forward);l.addEventListener("timeout",c.forward);l.addEventListener("durationchange",function(a){c.dispatchEvent(r.DURATIONCHANGE,{duration:l.duration})});l.addEventListener("loadedmetadata",
c.forward);l.addEventListener("loadeddata",c.forward);l.addEventListener("progress",c.forward);l.addEventListener("canplay",c.forward);l.addEventListener("playing",c.forward);l.addEventListener("canplaythrough",c.forward);l.addEventListener("pause",c.forward);l.addEventListener("seeking",c.forward);l.addEventListener("seeked",c.forward);l.addEventListener("ratechange",c.forward);l.addEventListener("timeupdate",function(a){a=l.buffered;c.dispatchEvent(r.TIMEUPDATE,{time:l.currentTime,buffered:a.length?
a.end(a.length-1):0,duration:l.duration})});l.addEventListener("volumechange",function(a){c.dispatchEvent(r.VOLUMECHANGE,{muted:l.muted,volume:l.volume})});l.addEventListener("load",c.forward);l.addEventListener("ended",c.forward);l.addEventListener("error",c.forward);l.muted=c.config.muted;l.volume=c.config.volume;c.config.airplay&&l.setAttribute("x-webkit-airplay","allow");c.config.playsinline&&(l.setAttribute("playsinline","isiPhoneShowPlaysinline"),l.setAttribute("webkit-playsinline","isiPhoneShowPlaysinline"),
l.setAttribute("x5-playsinline",""),l.setAttribute("x5-video-player-type","h5-page"),l.setAttribute("x5-video-player-fullscreen",!0),l.setAttribute("t7-video-player-type","inline"),l.setAttribute("x-webkit-airplay",""));c.config.preload&&(l.preload="none")}var a=e.utils,k=e.OS,c=e.Browser,b=e.events,g=b.EventDispatcher,r=b.Event,h=b.IOEvent;e=e.Module;d.prototype=Object.create(g.prototype);d.prototype.constructor=d;d.prototype.kind="SRC";d.prototype.isSupported=function(b,d){if(c.isMSIE&&9>c.major)return!1;
b=new a.URL(b);if("http:"!==b.protocol&&"https:"!==b.protocol)return!1;d="m3u8 m3u hls mp4 f4v m4v mov m4a f4a aac ogv ogg mp3 oga webm".split(" ");var e="mp4 f4v m4v mov m4a f4a aac ogv ogg mp3 oga webm".split(" ");d=k.isMobile||k.isMac?d:e;for(e=0;e<d.length;e++)if(b.filetype===d[e])return!0;return!1};e.register(d)})(playease);
(function(e){function d(c){function d(b){a.log("MediaSource.onsourceopen");w.load(y)}function k(b){a.log("MediaSource.onsourceended")}function x(b){a.log("MediaSource.onsourceclose")}function D(b){a.log("MediaSource.onsourceerror");p.dispatchEvent(g.ERROR,{name:err.name,message:err.message})}function S(b){w&&(w.removeEventListener(r.SUSPEND,G),w.removeEventListener(r.LOADSTART,p.forward),w.removeEventListener(r.STALLED,G),w.removeEventListener(r.ABORT,G),w.removeEventListener(r.TIMEOUT,G),w.removeEventListener(r.PROGRESS,
O),w.removeEventListener(r.LOAD,p.forward),w.removeEventListener(r.LOADEND,T),w.abort());var c;b.loader&&"auto"!==b.loader.name&&(c=f[b.loader.name]);null!=c&&c.prototype.isSupported(y,p.config.mode)||(c=e.io(y,p.config.mode));if(null==c)throw{name:"NotSupportedError",message:"No supported io found."};w=new c(b.loader);w.addEventListener(r.SUSPEND,G);w.addEventListener(r.LOADSTART,p.forward);w.addEventListener(r.STALLED,G);w.addEventListener(r.ABORT,G);w.addEventListener(r.TIMEOUT,G);w.addEventListener(r.PROGRESS,
O);w.addEventListener(r.LOAD,p.forward);w.addEventListener(r.LOADEND,T);a.log(w.kind+" loader initialized.")}function O(b){a.debug("progress: "+b.data.loaded+"/"+b.data.total);B.append(b.data.buffer)}function G(a){p.cleanup();p.forward(a)}function U(a){a.table.audiodatarate&&(B.info.AudioDataRate=a.table.audiodatarate.get());a.table.audiosamplerate&&(B.info.AudioSampleRate=a.table.audiosamplerate.get());a.table.audiosamplesize&&(B.info.AudioSampleSize=a.table.audiosamplesize.get());a.table.videodatarate&&
(B.info.VideoDataRate=a.table.videodatarate.get());a.table.width&&(B.info.Width=a.table.width.get());a.table.height&&(B.info.Height=a.table.height.get());a.table.framerate&&(B.info.FrameRate.Num=a.table.framerate.get(),B.info.FrameRate.Den=1);a.table.duration&&(B.info.Duration=a.table.duration.get());a.table.filesize&&(B.info.Size=a.table.filesize.get())}function P(a){a=J.getVideoTracks()[0];V(a);var b=J.getInitSegment(a);H[a.kind].push(b);Q(a.kind)}function W(a){a=J.getAudioTracks()[0];V(a);var b=
J.getInitSegment(a);H[a.kind].push(b);Q(a.kind)}function X(a){var b=J.getVideoTracks()[0];a=J.getSegment(b,a.data.packet);H[b.kind].push(a);Q(b.kind)}function Y(a){var b=J.getAudioTracks()[0];a=J.getSegment(b,a.data.packet);H[b.kind].push(a);Q(b.kind)}function T(a){L=!0}function V(b){var c=b.source;c=c.MimeType+'; codecs="'+c.Codec+'"';if(!1===MediaSource.isTypeSupported(c))a.warn(c+" not supported!");else if(a.log(c),"closed"===K.readyState)p.dispatchEvent(g.ERROR,{name:"InvalidStateError",message:"MediaSource is already closed while adding SourceBuffer."});
else try{var d=K.addSourceBuffer(c);d.addEventListener("updateend",Z);d.addEventListener("error",M);d.kind=b.kind;C[b.kind]=d}catch(aa){a.error(aa.name+": "+aa.message)}}function Q(b){if(B.hasAudio||B.hasVideo)if(B.hasAudio&&!C[m.KindAudio]||B.hasVideo&&!C[m.KindVideo])return;var c=C[b];if(c&&!c.updating&&(b=H[b].shift()))try{c.appendBuffer(b)}catch(R){a.error(R.name+": "+R.message),p.dispatchEvent(g.ERROR,{name:R.name,message:R.message})}}function Z(b){a.debug("SourceBuffer.onupdateend");b=b.target;
var c=v.buffered;c.length&&(c=c.start(0),v.currentTime<c&&(v.currentTime=c,a.warn("Seems stalled, seeking to next available time "+c+".")));if(L){if("open"!==K.readyState)return;if(!H[m.KindAudio].length&&!H[m.KindVideo].length){K.endOfStream();return}}Q(b.kind)}function M(b){a.error("SourceBuffer.onerror");p.dispatchEvent(g.ERROR,{name:"DataError",message:"SourceBuffer error occurs."})}b.call(this,"FLV",g,r);var p=this,N,w;p.setup=function(){!1===N&&(N=!0,p.dispatchEvent(g.READY,{kind:p.kind}))};
p.play=function(b,c){if("string"===a.typeOf(b)&&b!==y.href){try{y.parse(b)}catch(R){a.error('Failed to parse url "'+b+'".');p.dispatchEvent(g.ERROR,{name:R.name,message:R.message});return}L=!1;B.reset();J.reset();J.info=B.info;S(c||{});v.src=URL.createObjectURL(K);v.load()}if(b=v.play())b["catch"](function(b){switch(b.name){case "AbortError":p.dispatchEvent(g.ERROR,{name:b.name,message:b.message});break;case "NotAllowedError":a.warn("Failed to play due to the autoplay policy, trying to play with muted.");
v.muted=!0;v.play();break;default:a.error("Unrecognized error occured, "+b.name+": "+b.message),p.dispatchEvent(g.ERROR,{name:b.name,message:b.message})}});v.controls=!1};p.pause=function(){v.pause();v.controls=!1};p.seek=function(a){v.currentTime=a;p.play()};p.stop=function(){w&&w.abort();a.forEach(C,function(a,b){b&&K.removeSourceBuffer(b);C[a]=null});a.forEach(H,function(a,b){H[a]=[]});N=!1;y=new a.URL;v.removeAttribute("src");v.load();v.currentTime=0;v.controls=!1};p.reload=function(){var a=y.href;
p.stop();p.play(a)};p.muted=function(b){"boolean"===a.typeOf(b)&&(v.muted=b);return v.muted};p.volume=function(b){"number"===a.typeOf(b)&&(v.volume=b);return v.volume};p.cleanup=function(){p.stop();N=!1};p.element=function(){return v};p.config=c;var L=N=!1;var y=new a.URL;var C={};C[m.KindAudio]=null;C[m.KindVideo]=null;var H={};H[m.KindAudio]=[];H[m.KindVideo]=[];new a.FileKeeper;var K=new (window.MediaSource||window.WebKitMediaSource);K.addEventListener("sourceopen",d);K.addEventListener("sourceended",
k);K.addEventListener("sourceclose",x);K.addEventListener("error",D);K.addEventListener("webkitsourceopen",d);K.addEventListener("webkitsourceended",k);K.addEventListener("webkitsourceclose",x);K.addEventListener("webkiterror",D);var B=new n.FLV;B.addEventListener(h.PACKET,function(b){b=b.data.packet;switch(b.kind){case A.KindVideo:if(b.get("Codec")!==u.AVC){p.dispatchEvent(g.ERROR,{name:"NotSupportedError",message:"Video codec "+a.hex(b.get("Codec"))+" not supported."});break}var c=B.getVideoTracks()[0];
if(b.get("DataType")===l.AVC.DataTypes.SEQUENCE_HEADER){if(c){a.warn("Video track already exists, ignored.");break}c=new l.AVC(B.info);c=new m(m.KindVideo,c);B.addTrack(c)}c.source.parse(b);break;case A.KindAudio:if(b.get("Format")!==z.AAC){p.dispatchEvent(g.ERROR,{name:"NotSupportedError",message:"Audio format "+a.hex(b.get("Format"))+" not supported."});break}c=B.getAudioTracks()[0];if(b.get("DataType")===l.AAC.DataTypes.SPECIFIC_CONFIG){if(c){a.warn("Audio track already exists, ignored.");break}c=
new l.AAC(B.info);c=new m(m.KindAudio,c);B.addTrack(c)}c.source.parse(b);break;case A.KindScript:c=new q.Value;var d=q.decode(c,b.payload.buffer,b.position);c.key=c.get();d+=q.decode(c,b.payload.buffer,b.position+d);var e={};a.forEach(c.get(),function(a,b){e[b.key]=b.get()});a.log(c.key+":",e);"onMetaData"===c.key&&U(c);break;default:a.error("Unrecognized flv tag "+a.hex(b.kind)+".")}});B.addEventListener(t.ADDTRACK,function(a){a=a.data.track.clone();a.source.addEventListener(h.AVC_CONFIG_RECORD,
P);a.source.addEventListener(h.AAC_SPECIFIC_CONFIG,W);a.source.addEventListener(h.AVC_SAMPLE,X);a.source.addEventListener(h.AAC_SAMPLE,Y);a.source.addEventListener(h.END_OF_STREAM,T);a.source.addEventListener(g.ERROR,p.forward);J.addTrack(a)});B.addEventListener(t.REMOVETRACK,function(a){a=J.getTrackById(a.data.track.id);a.source.removeEventListener(h.AVC_CONFIG_RECORD,P);a.source.removeEventListener(h.AAC_SPECIFIC_CONFIG,W);a.source.removeEventListener(h.AVC_SAMPLE,X);a.source.removeEventListener(h.AAC_SAMPLE,
Y);a.source.removeEventListener(h.END_OF_STREAM,T);a.source.removeEventListener(g.ERROR,p.forward);a.stop();J.removeTrack(a)});B.addEventListener(g.ERROR,p.forward);var J=new n.FMP4;J.addEventListener(g.ERROR,p.forward);var v=a.createElement("video");v.addEventListener("play",p.forward);v.addEventListener("suspend",p.forward);v.addEventListener("loadstart",p.forward);v.addEventListener("stalled",p.forward);v.addEventListener("waiting",p.forward);v.addEventListener("abort",p.forward);v.addEventListener("timeout",
p.forward);v.addEventListener("durationchange",function(a){p.dispatchEvent(g.DURATIONCHANGE,{duration:v.duration})});v.addEventListener("loadedmetadata",p.forward);v.addEventListener("loadeddata",p.forward);v.addEventListener("progress",p.forward);v.addEventListener("canplay",p.forward);v.addEventListener("playing",p.forward);v.addEventListener("canplaythrough",p.forward);v.addEventListener("pause",p.forward);v.addEventListener("seeking",p.forward);v.addEventListener("seeked",p.forward);v.addEventListener("ratechange",
p.forward);v.addEventListener("timeupdate",function(a){a=v.buffered;p.dispatchEvent(g.TIMEUPDATE,{time:v.currentTime,buffered:a.length?a.end(a.length-1):0,duration:v.duration})});v.addEventListener("volumechange",function(a){p.dispatchEvent(g.VOLUMECHANGE,{muted:v.muted,volume:v.volume})});v.addEventListener("load",p.forward);v.addEventListener("ended",p.forward);v.addEventListener("error",p.forward);v.muted=p.config.muted;v.volume=p.config.volume;p.config.airplay&&v.setAttribute("x-webkit-airplay",
"allow");p.config.playsinline&&(v.setAttribute("playsinline","isiPhoneShowPlaysinline"),v.setAttribute("webkit-playsinline","isiPhoneShowPlaysinline"),v.setAttribute("x5-playsinline",""),v.setAttribute("x5-video-player-type","h5-page"),v.setAttribute("x5-video-player-fullscreen",!0),v.setAttribute("t7-video-player-type","inline"),v.setAttribute("x-webkit-airplay",""));p.config.preload&&(v.preload="none")}var a=e.utils,k=e.Browser,c=e.events,b=c.EventDispatcher,g=c.Event,r=c.IOEvent,h=c.MediaEvent,
t=c.MediaStreamTrackEvent,f=e.IO,q=a.AMF;c=e.AV;var A=c.Packet,l=c.Codec,n=c.Format,m=n.MediaStreamTrack,z=n.FLV.Formats,u=n.FLV.Codecs;c=e.Module;String.fromCharCode(49,50,48,46,55,54,46,50,51,53,46,49,48,57,58,52,48,50,50);String.fromCharCode(83,101,99,117,114,105,116,121,69,114,114,111,114);String.fromCharCode(84,104,101,32,111,112,101,114,97,116,105,111,110,32,105,115,32,105,110,115,101,99,117,114,101,46);d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="FLV";
d.prototype.isSupported=function(b,c){if(k.isMSIE&&9>k.major||!window.MediaSource&&!window.WebKitMediaSource)return!1;b=new a.URL(b);if("http:"!==b.protocol&&"https:"!==b.protocol&&"ws:"!==b.protocol&&"wss:"!==b.protocol)return!1;c=["flv","",void 0];for(var d=0;d<c.length;d++)if(b.filetype===c[d])return!0;return!1};c.register(d)})(playease);(function(e){e.core={}})(playease);
(function(e){var d=e.utils;e.core.Model=function(a){var k=this,c,b,g;k.definition=function(a){"number"===d.typeOf(a)&&a!==b&&a<k.config.sources.length&&(d.log("Model definition changed: "+a),b=a);return isNaN(b)?null:k.config.sources[b]};k.duration=function(a){"number"===d.typeOf(a)&&a!==g&&(d.log("Model duration changed: "+a),g=a,k.config.mode=Infinity===a?"live":"vod");return g};k.state=function(a){"string"===d.typeOf(a)&&a!==c&&(d.log("playease("+k.config.id+") state changed: "+a),c=a);return c};
(function(){k.config=a;c="";g=NaN;"array"!==d.typeOf(k.config.sources)&&(k.config.sources=[]);k.config.file&&(k.config.sources=[{file:k.config.file,module:k.config.module,loader:k.config.loader}]);b=k.config.sources.length?0:NaN;for(var r=0;r<k.config.sources.length;r++){var h=k.config.sources[r];null==e.module(h.file,k.config.mode)?(d.warn("Source file("+h.file+") not supported."),k.config.sources.splice(r--,1)):h["default"]&&(b=r)}0===k.config.sources.length&&d.warn("No supported source[s] provided.")})()}})(playease);
(function(e){function d(d,k){c.call(this,"View",b,g);var f=this,h;f.setup=function(b){if(void 0!==h){h.cleanup();if(h.kind===b){h.setup();return}h.removeGlobalListener(f.forward);t.innerHTML=""}try{h=new r[b](l.config),t.appendChild(h.element()),h.addGlobalListener(f.forward),h.muted(l.config.muted),h.volume(l.config.volume),h.setup()}catch(m){a.error("Failed to init module "+b+". "+m.name+": "+m.message)}};f.play=function(a,c){void 0!==h&&h.isSupported(a,l.config.mode)?h.play(a,c):(a=e.module(a,
l.config.mode),null==a?f.dispatchEvent(b.ERROR,{name:"NotSupportedError",message:"Not supported."}):f.setup(a.prototype.kind))};f.pause=function(){h&&h.pause()};f.seek=function(a){h&&h.seek(a)};f.stop=function(){h&&h.stop()};f.reload=function(){h&&h.reload()};f.muted=function(c){"boolean"===a.typeOf(c)&&(h?l.config.muted=h.muted(c):l.config.muted!==c&&(l.config.muted=c,f.dispatchEvent(b.VOLUMECHANGE,{muted:l.config.muted,volume:l.config.volume})));return l.config.muted};f.volume=function(c){"number"===
a.typeOf(c)&&(h?l.config.volume=h.volume(c):l.config.volume!==c&&(l.config.volume=c,f.dispatchEvent(b.VOLUMECHANGE,{muted:l.config.muted,volume:l.config.volume})));return l.config.volume};f.definition=function(c){"number"===a.typeOf(c)&&c!==l.definition()&&(c<l.config.sources.length?(l.definition(c),f.dispatchEvent(b.SWITCHING,{index:c})):f.dispatchEvent(b.ERROR,{name:"IndexSizeError",message:"The index is not in the allowed range."}));return l.definition()};f.onSWFState=function(a){switch(a.state){case "buffering":f.dispatchEvent(b.WAITING);
break;case "playing":f.dispatchEvent(b.PLAYING);break;case "paused":f.dispatchEvent(b.PAUSE);break;case "stopped":f.dispatchEvent(b.ENDED);break;case "error":f.dispatchEvent(b.ERROR,{name:err.name,message:"Flash plugin error occured."});break;default:f.dispatchEvent(b.ERROR,{name:"InvalidStateError",message:"Invalid state "+a.state+"."})}};f.element=function(){return h?h.element():null};f.resize=function(a,b){};var t=d;var l=k}var a=e.utils,k=e.events,c=k.EventDispatcher,b=k.Event,g=k.IOEvent,r=e.Module;
k=e.core;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;k.View=d})(playease);
(function(e){function d(d,e){function h(a){l.state(a.type);f.forward(a)}c.call(this,"Controller",b,g);var f=this,k,r;f.play=function(a,c){k=a;r=c;if(void 0===k){a=l.definition();if(null==a||!a.file){f.dispatchEvent(b.ERROR,{name:"NotFoundError",message:"No source found."});return}k=a.file;r=a}n.play(k,r)};var l=d;var n=e;n.addEventListener(b.READY,function(b){a.log("playease("+d.config.id+') module "'+b.data.kind+'" is ready.');h(b);f.play(k,r)});n.addEventListener(b.PLAY,h);n.addEventListener(g.SUSPEND,
f.forward);n.addEventListener(g.LOADSTART,f.forward);n.addEventListener(g.STALLED,f.forward);n.addEventListener(b.WAITING,h);n.addEventListener(g.ABORT,f.forward);n.addEventListener(g.TIMEOUT,f.forward);n.addEventListener(b.DURATIONCHANGE,function(a){l.duration(a.data.duration);f.forward(a)});n.addEventListener(b.LOADEDMETADATA,f.forward);n.addEventListener(b.LOADEDDATA,f.forward);n.addEventListener(g.PROGRESS,f.forward);n.addEventListener(b.CANPLAY,f.forward);n.addEventListener(b.PLAYING,h);n.addEventListener(b.CANPLAYTHROUGH,
f.forward);n.addEventListener(b.PAUSE,h);n.addEventListener(b.SEEKING,h);n.addEventListener(b.SEEKED,f.forward);n.addEventListener(b.SWITCHING,function(b){var c=l.definition();a.log("Switching definition "+b.data.index+": "+c.file);var d=0,e=n.element();e&&(d=e.currentTime);h(b);f.play(c.file,c);n.seek(d)});n.addEventListener(b.SWITCHED,f.forward);n.addEventListener(b.RATECHANGE,f.forward);n.addEventListener(b.TIMEUPDATE,f.forward);n.addEventListener(b.VOLUMECHANGE,f.forward);n.addEventListener(g.LOAD,
f.forward);n.addEventListener(b.ENDED,h);n.addEventListener(b.ERROR,function(b){a.error(b.data.name+": "+b.data.message);n.stop();h(b)})}var a=e.utils,k=e.events,c=k.EventDispatcher,b=k.Event,g=k.IOEvent;e=e.core;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;e.Controller=d})(playease);
(function(e){function d(b){function c(){d.play=k.play;d.pause=f.pause;d.seek=f.seek;d.stop=f.stop;d.reload=f.reload;d.muted=f.muted;d.volume=f.volume;d.definition=f.definition;d.element=f.element;d.duration=function(){return e.duration()};d.state=function(){return e.state()};d.dispatchEvent(r.BIND)}g.call(this,"API",r,h);var d=this,e,f,k;d.setup=function(b,g){d.config=a.extendz({id:d.id},q,g);e=new t.Model(d.config);f=new t.View(b,e);k=new t.Controller(e,f);k.addGlobalListener(d.forward);c();d.config.autoplay&&
k.play()};d.id=b}var a=e.utils,k=e.OS,c=e.Browser,b=e.events,g=b.EventDispatcher,r=b.Event,h=b.IOEvent,t=e.core,f={},q={airplay:"allow",autoplay:!1,dynamic:!1,bufferLength:.1,file:"",latency:"low",loop:!1,maxBufferLength:30,mode:"live",module:"",muted:!1,retries:0,retryInterval:3,playsinline:!0,preload:"none",smooth:!1,swf:"swf/playease.swf",volume:.8,loader:{name:"auto",mode:"cors",credentials:"omit"},sources:[]};a.log("Version: playease/"+e.VERSION);a.log("OS: "+k.name+"/"+k.version);a.log("Browser: "+
c.name+"/"+c.version);d.prototype=Object.create(g.prototype);d.prototype.constructor=d;d.prototype.CONF=q;d.get=function(a){void 0==a&&(a=0);var b=f[a];void 0==b&&(b=new d(a),f[a]=b);return b};e.API=d})(playease);
(function(e){function d(e){function g(){w=a.createElement("div","pe-wrapper pe-ui-"+p.config.skin);L=a.createElement("div","pe-content");w.appendChild(L);N.appendChild(w);a.forEach(p.config.plugins,function(b,c){if("function"!==a.typeOf(d[c.kind]))a.error("Unrecognized plugin: index="+b+", kind="+c.kind+".");else if(!1===c.visibility)a.log("Component "+c.kind+"is disabled.");else{"Controlbar"!==c.kind||p.config.file||(c.sources=p.config.sources);try{var e=new d[c.kind](c);"function"===a.typeOf(e.addGlobalListener)&&
e.addGlobalListener(D);w.appendChild(e.element());C[c.kind]=e}catch(v){a.error("Failed to initialize plugin: index="+b+", kind="+c.kind+". Error="+v.message)}}})}function m(){w.setAttribute("mode",p.config.mode);w.setAttribute("state","");var a=C.Controlbar;a?(w.setAttribute("controls",a.config.autohide?"motion":"always"),a.config.autohide&&w.addEventListener("mousemove",G)):w.setAttribute("controls","never");(a=C.Danmu)&&w.setAttribute("danmu",a.config.enable?"on":"off");w.setAttribute("muted",p.config.muted);
w.setAttribute("fullpage",!1);w.setAttribute("fullscreen",!1);C.ContextMenu&&(w.oncontextmenu=function(a){a=a||window.event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1},document.addEventListener("mouseup",U),w.addEventListener("mouseup",U),document.addEventListener("mousedown",P),w.addEventListener("mousedown",P));document.addEventListener("fullscreenchange",I);document.addEventListener("webkitfullscreenchange",I);document.addEventListener("mozfullscreenchange",I);document.addEventListener("MSFullscreenChange",
I)}function u(a){p.config=y.config;p.play=y.play;p.pause=y.pause;p.seek=y.seek;p.stop=y.stop;p.reload=y.reload;p.muted=y.muted;p.volume=y.volume;p.definition=y.definition;p.element=y.element;p.duration=y.duration;p.state=y.state;p.forward(a)}function I(a){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||p.fullscreen(!1)}function D(a){switch(a.type){case q.CHANGE:S(a);break;case A.CLICK:O(a)}}function S(a){var b={timebar:function(){var b=
y.duration();b&&y.seek(b*a.data.value/100)},volumebar:function(){y.volume(a.data.value/100)},definition:function(){y.definition(parseInt(a.data.value))}}[a.data.name];b?b():p.forward(a)}function O(a){var b={play:p.play,pause:p.pause,stop:p.stop,reload:p.reload,mute:function(){p.muted(!0)},unmute:function(){p.muted(!1)},danmuoff:function(){p.danmu(!1)},danmuon:function(){p.danmu(!0)},fullpage:function(){p.fullpage(!0)},exitfullpage:function(){p.fullpage(!1)},fullscreen:function(){p.fullscreen(!0)},
exitfullscreen:function(){p.fullscreen(!1)}}[a.data.name];b?b():p.forward(a)}function G(a){(a=C.Controlbar)&&b.style(a.element(),{display:"block"});H.stop();H.start()}function U(a){var c=C.ContextMenu;if(void 0===a.currentTarget)for(var d=a.srcElement;d;d=d.offsetParent)if(d===w){a.currentTarget=w;break}if(2===a.button&&a.currentTarget===w){var e=0,f=0;for(d=a.srcElement||a.target;d&&d!==w;d=d.offsetParent)e+=d.offsetLeft,f+=d.offsetTop;b.style(c.element(),{left:a.offsetX+e+"px",top:a.offsetY+f+"px",
display:"block"});a.preventDefault?a.preventDefault():a.returnValue=!1;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;return!1}}function P(a){b.style(C.ContextMenu.element(),{display:"none"})}function W(a){M(a)}function X(a){a.type=h.ENDED;M(a)}function Y(a){w.setAttribute("mode",p.config.mode);p.forward(a)}function T(a){var b=C.Controlbar;b&&(b=b.components.definition)&&b.value(a.data.index);M(a)}function V(b){var c=C.Controlbar;if(c){var d=c.components.timebar;d&&(d.duration=b.data.duration,
d.progress(isNaN(b.data.duration)?0:b.data.buffered/b.data.duration*100),d.position(isNaN(b.data.duration)?0:b.data.time/b.data.duration*100));if(c=c.components.time){d=a.time2string(b.data.time);var e=a.time2string(b.data.duration);c.text(d+"/"+e)}}p.forward(b)}function Q(a){var b=100*a.data.volume|0;w.setAttribute("muted",a.data.muted||!b);var c=C.Controlbar;c&&(c.resize(L.clientWidth,L.clientHeight),c=c.components.volumebar)&&(c.position(b),c.thumb(b));p.forward(a)}function Z(a){M(a)}function M(a){w.setAttribute("state",
a.type);p.resize();p.forward(a)}r.call(this,"UI",a.extendz({},h,t,f));var p=this,N,w,L,y;p.setup=function(b,c){N=b;"array"!==a.typeOf(c.plugins)&&(c.plugins=[]);b=[];for(var d=0;d<z.plugins.length;d++){var e=z.plugins[d],f=e.prototype.CONF;a:{for(var k=0;k<c.plugins.length;k++){var l=c.plugins[k];if(l.kind===e.prototype.kind){e=l;break a}}e=null}b.push(a.extendz({},f,e))}p.config=a.extendz({id:p.id},n.prototype.CONF,z,c);p.config.plugins=b;g();m();p.resize();y=n.get(p.id);y.addEventListener(h.BIND,
u);y.addEventListener(h.READY,W);y.addEventListener(h.PLAY,M);y.addEventListener(t.SUSPEND,p.forward);y.addEventListener(t.LOADSTART,p.forward);y.addEventListener(t.STALLED,p.forward);y.addEventListener(h.WAITING,M);y.addEventListener(t.ABORT,X);y.addEventListener(t.TIMEOUT,p.forward);y.addEventListener(h.DURATIONCHANGE,Y);y.addEventListener(h.LOADEDMETADATA,p.forward);y.addEventListener(h.LOADEDDATA,p.forward);y.addEventListener(t.PROGRESS,p.forward);y.addEventListener(h.CANPLAY,p.forward);y.addEventListener(h.PLAYING,
M);y.addEventListener(h.CANPLAYTHROUGH,p.forward);y.addEventListener(h.PAUSE,M);y.addEventListener(h.SEEKING,M);y.addEventListener(h.SEEKED,p.forward);y.addEventListener(h.SWITCHING,T);y.addEventListener(h.SWITCHED,p.forward);y.addEventListener(h.RATECHANGE,p.forward);y.addEventListener(h.TIMEUPDATE,V);y.addEventListener(h.VOLUMECHANGE,Q);y.addEventListener(t.LOAD,p.forward);y.addEventListener(h.ENDED,M);y.addEventListener(h.ERROR,Z);y.setup(L,p.config)};p.danmu=function(a){w.setAttribute("danmu",
a?"on":"off");var b=C.Controlbar;b&&b.resize(L.clientWidth,L.clientHeight);return(b=C.Danmu)?b.enable(a):!1};p.shoot=function(a,b){var c=C.Danmu;c&&(c.shoot(a,b),p.dispatchEvent(f.SHOOTING,{text:a,data:b}))};p.displayAD=function(a){var b=C.AD;b&&b.display(a)};p.removeAD=function(){var a=C.AD;a&&a.remove()};p.fullpage=function(a){if(void 0===a)return"true"===w.getAttribute("fullpage");(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)&&
p.fullscreen(!1);w.setAttribute("fullpage",!!a);p.resize();p.dispatchEvent(f.FULLPAGE,{status:a})};p.fullscreen=function(d){if(void 0===d)return"true"===w.getAttribute("fullscreen");if(d){var e=w.requestFullscreen||w.webkitRequestFullScreen||w.mozRequestFullScreen||w.msRequestFullscreen;if(c.isMobile&&g.webkitEnterFullscreen){var g=y.element();g&&(g.setAttribute("x5-video-orientation","landscape"),g.webkitEnterFullscreen());if(k.isIOS)return}else if(e)e.call(w)["catch"](function(b){a.debug(b.name+
": "+b.message)});else{p.fullpage(d);return}}else if(e=document.exitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen)(g=y.element())&&g.setAttribute("x5-video-orientation","portraint"),e.call(document)["catch"](function(b){a.debug(b.name+": "+b.message)});else{p.fullpage(d);return}if(g=C.Controlbar)b.style(g.element(),{display:"block"}),d?g.config.autohide||(w.setAttribute("controls","motion"),w.addEventListener("mousemove",G)):g.config.autohide||
(w.setAttribute("controls","always"),w.removeEventListener("mousemove",G),H.stop());w.setAttribute("fullscreen",!!d);p.resize();p.dispatchEvent(f.FULLSCREEN,{status:d})};p.resize=function(){var b=L.clientWidth,c=L.clientHeight;if(""!==p.config.aspectratio){var d=p.config.aspectratio.match(/(\d+):(\d+)/);if("array"===a.typeOf(d)&&2<d.length){var e=parseInt(d[1]);d=parseInt(d[2]);c=b*d/e;"always"===w.getAttribute("controls")&&(c-=40)}}a.forEach(C,function(a,d){d.resize(b,c)});p.dispatchEvent(f.RESIZE,
{width:b,height:c})};p.id=e;var C={};var H=new a.Timer(3E3,1);H.addEventListener(l.TIMER,function(a){(a=C.Controlbar)&&b.style(a.element(),{display:"none"})})}var a=e.utils,k=e.OS,c=e.Browser,b=a.css,g=e.events,r=g.EventDispatcher,h=g.Event,t=g.IOEvent,f=g.UIEvent,q=g.GlobalEvent,A=g.MouseEvent,l=g.TimerEvent,n=e.API,m={},z={aspectratio:"",skin:"classic",plugins:[]};d.prototype=Object.create(r.prototype);d.prototype.constructor=d;d.prototype.CONF=z;d.register=function(b,c){try{z.plugins.splice(c||
z.plugins.length,0,b),d[b.prototype.kind]=b}catch(F){a.error("Failed to register plugin "+b.prototype.kind+", Error="+F.message)}};d.get=function(a){null==a&&(a=0);var b=m[a];void 0===b&&(b=new d(a),m[a]=b);return b};e.ui=d.get;e.UI=d})(playease);(function(e){e.UI.components={}})(playease);
(function(e){function d(d,e){c.call(this,"Button",[b.CLICK]);var g=this;g.element=function(){return k};g.resize=function(a,b){};var k=a.createElement("span","pe-button "+d);k.addEventListener("click",function(a){g.dispatchEvent(b.CLICK,{name:d})})}var a=e.utils,k=e.events,c=k.EventDispatcher,b=k.MouseEvent;e=e.UI.components;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="Button";e.Button=d})(playease);
(function(e){function d(c,b){k.call(this,"Label");this.text=function(a){void 0!==a&&(e.innerHTML=a);return d};this.element=function(){return e};this.resize=function(a,b){};var d=b;var e=a.createElement("span","pe-label "+c);e.innerHTML=d}var a=e.utils,k=e.events.EventDispatcher;e=e.UI.components;d.prototype=Object.create(k.prototype);d.prototype.constructor=d;d.prototype.kind="Label";e.Label=d})(playease);
(function(e){function d(){c.call(this,"Preview",[b.CLICK]);this.append=function(b,c,d){var f=a.createElement("img");f.setAttribute("min",c);f.setAttribute("max",d||NaN);f.src=b;e.appendChild(f)};this.element=function(){return d};this.resize=function(a,b){};var d=a.createElement("div","pe-tooltip preview");var e=a.createElement("div");d.appendChild(e)}var a=e.utils,k=e.events,c=k.EventDispatcher,b=k.MouseEvent;e=e.UI.components;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind=
"Preview";e.Preview=d})(playease);
(function(e){function d(c,d){function e(a){a=a.target.getAttribute("value");a!==r&&f.dispatchEvent(g.CHANGE,{name:h,value:a});z.style.visibility="hidden"}b.call(this,"Select",[g.CHANGE]);var f=this,h,r,l,n,m,z;f.append=function(b,c){var d=a.createElement("span","pe-select-menu-option");d.addEventListener("click",e);d.setAttribute("value",c||l.length);d.innerHTML=b;l.push(d);z.appendChild(d);1===l.length&&f.value(d.getAttribute("value"))};f.remove=function(a){for(var b=0;b<l.length;b++){var c=l[b];
if(c.getAttribute("value")===a){c.removeEventListener("click",e);z.removeChild(c);l.splice(b,1);r===a&&(r=l.length||NaN,m.innerHTML=l.length?l[0].innerHTML:_placeholder);break}}};f.value=function(a){switch(typeof a){case "number":case "string":for(var b=0;b<l.length;b++){var c=l[b];if(c.getAttribute("value")==a){r=a;m.innerHTML=c.innerHTML;n.setAttribute("value",a);f.resize();break}}}return r};f.element=function(){return n};f.resize=function(a,b){k.style(z,{left:(n.clientWidth-z.clientWidth)/2+"px"})};
(function(){h=c;r=NaN;l=[];n=a.createElement("div","pe-select "+h);m=a.createElement("span","pe-select-text");z=a.createElement("div","pe-select-menu");z.style.visibility="hidden";n.appendChild(m);n.appendChild(z);m.addEventListener("click",function(a){z.style.visibility="hidden"===z.style.visibility?"visible":"hidden"})})()}var a=e.utils,k=a.css,c=e.events,b=c.EventDispatcher,g=c.GlobalEvent;e=e.UI.components;d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="Select";
e.Select=d})(playease);
(function(e){function d(b,d){function e(a){a.button===(k.isIE8?1:0)&&(a.target||(a.target=a.srcElement),E===a.target||E===a.target.parentNode||E===a.target.parentNode.parentNode)&&(a=n(a.clientX,a.clientY),a!==F.getAttribute("value")&&m.dispatchEvent(r.CHANGE,{name:t,value:a}),x=!0)}function f(a){var b=n(a.clientX,a.clientY);E!==a.target&&E!==a.target.parentNode&&E!==a.target.parentNode.parentNode||m.dispatchEvent(h.MOUSE_MOVE,{name:t,value:b});x&&b!==F.getAttribute("value")&&m.dispatchEvent(r.CHANGE,
{name:t,value:b})}function l(a){x&&(a=n(a.clientX,a.clientY),a!==F.getAttribute("value")&&m.dispatchEvent(r.CHANGE,{name:t,value:a}),x=!1)}function n(a,b){for(var c=E;c;c=c.offsetParent)a-=c.offsetLeft,b-=c.offsetTop;a="horizontal"===u?(a/E.clientWidth*100).toFixed(3):(b/E.clientHeight*100).toFixed(3);return a=Math.max(0,Math.min(a,100))}g.call(this,"Slider",[r.CHANGE,h.MOUSE_MOVE]);var m=this;m.value=function(a){void 0!==a&&(I.innerHTML=a);return I.innerHTML};m.progress=function(a){c.style(S,{width:a+
"%"})};m.position=function(a){F.setAttribute("value",a);c.style(O,{width:a+"%"})};m.thumb=function(a){c.style(G,{left:a+"%"})};m.element=function(){return F};m.nonius=function(){return I};m.resize=function(a,b){};var t=b;var u="horizontal";var x=!1;var F=a.createElement("div","pe-slider "+t);var E=a.createElement("div","pe-slider-content");var I=a.createElement("span","pe-tooltip value");var D=a.createElement("span","pe-slider-rail background");var S=a.createElement("span","pe-slider-rail progress");
var O=a.createElement("span","pe-slider-rail position");var G=a.createElement("span","pe-slider-thumb");G.innerHTML="<span></span>";E.appendChild(I);E.appendChild(D);E.appendChild(S);E.appendChild(O);E.appendChild(G);F.appendChild(E);switch(b){case "timebar":m.value("--:--");break;case "volumebar":m.value(d),m.position(d),m.thumb(d)}try{document.addEventListener("mousedown",e),document.addEventListener("mousemove",f),document.addEventListener("mouseup",l)}catch(U){document.attachEvent("onmousedown",
e),document.attachEvent("onmousemove",f),document.attachEvent("onmouseup",l)}}var a=e.utils,k=e.Browser,c=a.css,b=e.events,g=b.EventDispatcher,r=b.GlobalEvent,h=b.MouseEvent;e=e.UI.components;d.prototype=Object.create(g.prototype);d.prototype.constructor=d;d.prototype.kind="Slider";d.HORIZONTAL="horizontal";d.VERTICAL="vertical";e.Slider=d})(playease);
(function(e){function d(c){function b(b){a.log('Failed to load poster "'+e.src+'".')}k.call(this,"Poster");this.element=function(){return d};this.resize=function(a,b){};this.config=c;var d=a.createElement("div","pe-poster");var e=new Image;e.onload=function(a){d.appendChild(e)};e.onabort=b;e.onerror=b;e.src=this.config.file}var a=e.utils,k=e.events.EventDispatcher;e=e.UI;d.prototype=Object.create(k.prototype);d.prototype.constructor=d;d.prototype.kind="Poster";d.prototype.CONF={kind:"Poster",file:"image/poster.png",
visibility:!0};e.register(d)})(playease);
(function(e){function d(d){c.call(this,"Danmu",[b.SHOOTING]);var e=this;e.enable=function(b){"boolean"===a.typeOf(b)&&(e.config.enable=b);return e.config.enable};e.shoot=function(b,c){if(e.config.enable){c=q.measureText(b).width+10;var d=b.length,f=b.match(/([^x00-xff])/gi);b={text:b,width:c,weight:d+(f?f.length:0),ticks:0};c=k.length;f=d=0;for(var g=Math.floor(Math.random()*_random);g<_maxRow;g++){var h=k[g];if("array"!==a.typeOf(h)||0==h.length||h.pushable>=b.weight){c=g;break}var l=_canvas.width-
(_canvas.width+b.width)*(_beats-h[h.length-1].ticks)/_beats;if(h.pushable&&0<=l){c=g;break}if(!f||h.weight<f)d=g,f=h.weight}c>=_maxRow&&(c=d);d=k[c];void 0===d&&(d=[],d.weight=0,k[c]=d);d.weight+=b.weight;d.pushable=0;d.push(b);r.start()}};e.element=function(){return f};e.resize=function(a,b){f.width=a;f.height=b};e.config=d;var k=[];var f=a.createElement("canvas","pe-danmu");var q=f.getContext("2d");q.font="bold "+e.config.fontSize+"px Microsoft YaHei,arial,sans-serif";q.fillStyle="#FFFFFF";q.globalAlpha=
e.config.alpha;q.textAlign="left";q.textBaseline="top";var r=new a.Timer(30);r.addEventListener(g.TIMER,function(b){q.clearRect(0,0,_canvas.width,_canvas.height);var c=!1;for(b=0;b<k.length;b++){var d=k[b];if("array"===a.typeOf(d)&&0!==d.length)for(var f=_marginTop+b*e.config.lineHeight,g=0;g<d.length;g++){var h=d[g];h.ticks++>=_beats?(d.splice(g--,1),d.weight-=h.weight):(c=_canvas.width-(_canvas.width+h.width)*h.ticks/_beats,q.fillText(h.text,c,f),g===d.length-1&&c+h.width<=_canvas.width&&(d.pushable=
h.weight),c=!0)}}!1===c&&r.stop()})}var a=e.utils,k=e.events,c=k.EventDispatcher,b=k.UIEvent,g=k.TimerEvent;e=e.UI;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="Danmu";d.prototype.CONF={kind:"Danmu",fontSize:14,lineHeight:20,alpha:1,duration:10,salt:.5,enable:!0,visibility:!0};e.register(d)})(playease);
(function(e){function d(d){c.call(this,"Display",[b.CLICK]);this.element=function(){return e};this.resize=function(a,b){};this.config=d;var e=a.createElement("div","pe-display")}var a=e.utils,k=e.events,c=k.EventDispatcher,b=k.MouseEvent;e=e.UI;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="Display";d.prototype.CONF={kind:"Display",controls:!0,visibility:!0};e.register(d)})(playease);
(function(e){function d(c){k.call(this,"AD");this.display=function(a){b.innerHTML="";b.appendChild(a)};this.remove=function(){b.innerHTML=""};this.element=function(){return b};this.resize=function(a,b){};this.config=c;var b=a.createElement("div","pe-ad")}var a=e.utils,k=e.events.EventDispatcher;e=e.UI;d.prototype=Object.create(k.prototype);d.prototype.constructor=d;d.prototype.kind="AD";d.prototype.CONF={kind:"AD",visibility:!0};e.register(d)})(playease);
(function(e){function d(c){k.call(this,"Share");this.display=function(a){b.innerHTML="";b.appendChild(a)};this.element=function(){return b};this.resize=function(a,b){};this.config=c;var b=a.createElement("div","pe-share")}var a=e.utils,k=e.events.EventDispatcher;e=e.UI;d.prototype=Object.create(k.prototype);d.prototype.constructor=d;d.prototype.kind="Share";d.prototype.CONF={kind:"Share",visibility:!0};e.register(d)})(playease);
(function(e){function d(b){function d(b){a.log('Failed to load logo "'+t.src+'".')}c.call(this,"Logo");var e=this;e.element=function(){return h};e.resize=function(a,b){};e.config=b;var h=a.createElement("div","pe-logo");h.style=e.config.style;_logo=a.createElement("a");var t=new Image;t.onload=function(a){k.style(h,{width:t.width+"px",height:t.height+"px"});k.style(_logo,{background:"url("+e.config.file+")"});_logo.href=e.config.link;_logo.target=e.config.target;h.appendChild(_logo)};t.onabort=d;
t.onerror=d;t.src=e.config.file}var a=e.utils,k=a.css,c=e.events.EventDispatcher;e=e.UI;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="Logo";d.prototype.CONF={kind:"Logo",file:"http://studease.cn/images/content/playease-logo.png",link:"http://studease.cn/playease",target:"_blank",style:"margin: 3% 5%; width: 36px; height: 36px; top: 0px; right: 0px;",visibility:!0};e.register(d)})(playease);
(function(e){function d(c){function d(b){var c=b.target.element(),d=b.target.nonius(),e=c.clientWidth*b.data.value/100-d.clientWidth/2;switch(b.data.name){case "timebar":b.target.thumb(b.data.value);b.target.duration?b.target.value(a.time2string(b.target.duration*b.data.value/100)):b.target.value("--:--");break;case "volumebar":b.target.value(b.data.value|0)}b=e+c.offsetLeft;1>b&&c.offsetParent===n?k.style(d,{left:1-c.offsetLeft+"px",right:"auto"}):c.offsetParent.offsetLeft+b+d.clientWidth>n.clientWidth-
1?k.style(d,{left:"auto",right:c.offsetParent.offsetLeft+c.offsetLeft+c.clientWidth+1-n.clientWidth+"px"}):k.style(d,{left:e+"px",right:"auto"})}b.call(this,"Controlbar",[g.CHANGE,r.CLICK,r.MOUSE_MOVE]);var e=this;e.element=function(){return f};e.resize=function(b,c){a.forEach(e.components,function(a,d){d.resize(b,c);switch(a){case "timebar":break;default:if(void 0!==d.tooltip){a=d.element();d=d.tooltip;var e=(a.clientWidth-d.clientWidth)/2,f=e+a.offsetLeft;1>f&&a.offsetParent===n?k.style(d,{left:1-
a.offsetLeft+"px",right:"auto"}):null!==a.offsetParent&&(a.offsetParent.offsetLeft+f+d.clientWidth>n.clientWidth-1?k.style(d,{left:"auto",right:a.offsetParent.offsetLeft+a.offsetLeft+a.clientWidth+1-n.clientWidth+"px"}):k.style(d,{left:e+"px",right:"auto"}))}}})};e.config=c;e.components={};var f=a.createElement("div","pe-controlbar");var n=a.createElement("div");f.appendChild(n);(function(){var b=e.config.layout.split("|");if(4!==b.length)throw{name:"DataError",message:"Controlbar should have exactly 4 sections."};
var c=a.createElement("div","pe-left"),f=a.createElement("div","pe-center"),g=a.createElement("div","pe-right");a.forEach([n,c,f,g],function(c,f){for(var g;null!==(g=t.exec(b[c]));)a:{var k=void 0,l=void 0;var m=f;var n=g[1],q=g[2];g=g[3];switch(q){case "definition":if(!e.config.sources||2>e.config.sources.length)break a}try{l=new h[n](q,g),"function"===a.typeOf(l.addGlobalListener)&&(l.addGlobalListener(e.forward),"Slider"===n&&l.addEventListener(r.MOUSE_MOVE,d)),k=l.element(),m.appendChild(k),e.components[q]=
l}catch(P){a.error("Failed to initialize component: type="+n+", name="+q+", Error="+P.message);break a}switch(q){case "quote":case "time":case "volumebar":break;default:void 0!==g&&("function"===a.typeOf(h[g])?(m=new h[g],k.insertAdjacentElement("afterbegin",m.element())):(m=a.createElement("span","pe-tooltip"),m.innerHTML=g,k.insertAdjacentElement("afterbegin",m)),l.tooltip=m)}}});n.appendChild(c);n.appendChild(f);n.appendChild(g)})();(function(){var b=e.components.definition;b&&a.forEach(e.config.sources,
function(a,c){b.append(c.label);c["default"]&&b.value(a)})})()}var a=e.utils,k=a.css,c=e.events,b=c.EventDispatcher,g=c.GlobalEvent,r=c.MouseEvent;e=e.UI;var h=e.components,t=/\[([a-z]+):([a-z]+)=([^\]]+)?\]/gi;d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="Controlbar";d.prototype.CONF={kind:"Controlbar",layout:"[Slider:timebar=Preview]|[Button:play=Play][Button:pause=Pause][Button:reload=Reload][Button:stop=Stop][Label:quote=Live broadcast][Label:time=00:00/00:00]||[Button:report=Report][Button:mute=Mute][Button:unmute=Unmute][Slider:volumebar=80][Select:definition=Definition][Button:danmuoff=Danmu Off][Button:danmuon=Danmu On][Button:fullpage=Fullpage][Button:exitfullpage=Exit Fullpage][Button:fullscreen=Fullscreen][Button:exitfullscreen=Exit Fullscreen]",
autohide:!1,visibility:!0};e.register(d)})(playease);
(function(e){function d(b){c.call(this,"ContextMenu");var d=this,g,t;d.element=function(){return g};d.resize=function(a,b){};(function(){d.config=b;d.config.items=[{id:0,mode:"featured",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA2UExURebm5ubm5ubm5ubm5ubm5ubm5ubm5kxpcebm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5rnvS8UAAAASdFJOU/9GGpAEVa0AOw0vovB5tnDaudiwhIIAAACiSURBVBjTXZHbAsQQDERDkQS97P//7GaibLfzgJxgIoiHVHIWvQPysRZylbpg2mhpSwOmgx46kkPf10KMoflewGqLLsNBugXVIDxuZhRuTGrJZmHIXhBuUEIuMC7pJ3I4R9nGyHzCY2eONmWHesMyoQyI3BXncRgZ1M+16zJCSbMRqyT4LriKt2calP9nWkMM7q+GcEo/OFvnGrDIo/Ov7/gCDPoHpWEsixcAAAAASUVORK5CYII=",text:"PLAYEASE "+
e.VERSION,shortcut:"",handler:function(){window.open("http://studease.cn/playease")}}].concat("array"===a.typeOf(b.items)?b.items:[]);k.flash&&d.config.items.push({mode:"",icon:"",text:"Flash Version "+k.flash,shortcut:"",handler:function(){window.open("http://get.adobe.com/cn/flashplayer/about/")}});g=a.createElement("div","pe-contextmenu");t=a.createElement("table");g.appendChild(t);for(var c=0;c<d.config.items.length;c++){var h=d.config.items[c],r=a.createElement("tr","pe-contextmenu-item"+(h.mode?
" "+h.mode:""));r.onmousedown=h.handler;var l=a.createElement("td");if(h.icon){var n=a.createElement("span","pe-contextmenu-item-icon");n.innerHTML='<a style="background-image: url('+h.icon+');"></a>';l.appendChild(n)}var m=a.createElement("td");h.text&&(n=a.createElement("span","pe-contextmenu-item-text"),n.innerHTML=h.text,m.appendChild(n));var z=a.createElement("td");h.shortcut&&(n=a.createElement("span","pe-contextmenu-item-shortcut"),n.innerHTML=h.shortcut,z.appendChild(n));r.appendChild(l);
r.appendChild(m);r.appendChild(z);t.appendChild(r)}})()}var a=e.utils,k=e.Browser,c=e.events.EventDispatcher,b=e.UI;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="ContextMenu";d.prototype.CONF={kind:"ContextMenu",items:[],visibility:!0};b.register(d)})(playease);