playease=function(){if(playease.API)return playease.API.get.apply(this,arguments)};playease.VERSION="2.0.63";playease.DEBUG=!1;
(function(e){var d={extendz:function(){var a=Array.prototype.slice.call(arguments,0),c=a[0];switch(d.typeof(c)){case "null":case "number":case "string":throw{name:"TypeError",message:"Could not extend to type "+d.typeof(c)+"."};}for(var b=1;b<a.length;b++){var g=a[b];switch(d.typeof(g)){case "null":case "number":case "string":e.DEBUG&&d.warn("Could not extend from type "+d.typeof(g));break;case "array":d.forEach(g,function(b,k){switch(d.typeof(k)){case "object":c.push(d.extendz({},k));break;case "array":c.push(d.extendz([],
k));break;default:"array"===d.typeof(c)?c.push(k):c[b]=k}});break;default:d.forEach(g,function(b,k){switch(d.typeof(k)){case "object":switch(d.typeof(c[b])){case "null":case "number":case "string":c[b]={}}c[b]=d.extendz(c[b],k);break;case "array":c[b]=d.extendz([],k);break;default:c[b]=k}})}}return c},forEach:function(a,c){for(var b in a)a.hasOwnProperty&&"function"===d.typeof(a.hasOwnProperty)?a.hasOwnProperty(b)&&c(b,a[b]):c(b,a[b])},getCookie:function(a){var c;return(c=document.cookie.match(new RegExp("(^| )"+
a+"=([^;]*)(;|$)")))?unescape(c[2]):null},padStart:function(a,c,b){for(a+="";a.length<c;)a=b+a;return a},padEnd:function(a,c,b){for(a+="";a.length<c;)a+=b;return a},hex:function(a){return"0x"+d.padStart(a.toString(16),2,"0")},time2string:function(a){var c="",b=a/3600|0,g=a%3600/60|0;a=a%60|0;b&&(c+=d.padStart(b,2,"0")+":");return c+=d.padStart(g,2,"0")+":"+d.padStart(a,2,"0")},typeof:function(a){if(null===a||void 0===a)return"null";var c=typeof a;if("object"===c)try{var b=Object.prototype.toString.call(a).match(/^\[object ([a-z]+)\]$/i);
if(b&&1<b.length&&b[1])return b[1].toLowerCase()}catch(g){}return c},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},indexOf:function(a,c){if("array"===d.typeof(a))for(var b=0;b<a.length;b++)if(a[b]===c)return b;return-1},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=16*Math.random()|0;return("x"===a?c:c&3|8).toString(16)})}};void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.MAX_SAFE_INTEGER&&(Number.MAX_SAFE_INTEGER=Math.pow(2,
53)-1);void 0===Number.MIN_SAFE_INTEGER&&(Number.MIN_SAFE_INTEGER=-1*Number.MAX_SAFE_INTEGER);d.equal=function(a,c){return Math.abs(a-c)<Number.EPSILON};d.createElement=function(a,c){a=document.createElement(a);c&&(a.className=c);return a};d.addClass=function(a,c){var b="string"===d.typeof(a.className)?a.className.split(" "):[];c="array"===d.typeof(c)?c:c.split(" ");d.forEach(c,function(a,c){-1===d.indexOf(b,c)&&b.push(c)});a.className=d.trim(b.join(" "))};d.hasClass=function(a,c){a=a.className||
"";c="array"===d.typeof(c)?c:c.split(" ");for(var b=0;b<c.length;b++)if(-1===a.search(new RegExp("\\b"+c[b]+"\\b","i")))return!1;return!0};d.removeClass=function(a,c){var b="string"===d.typeof(a.className)?a.className.split(" "):[];c="array"===d.typeof(c)?c:c.split(" ");d.foreach(c,function(a,c){a=d.indexOf(b,c);0<=a&&b.splice(a,1)});a.className=d.trim(b.join(" "))};d.emptyElement=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};var a=window.console=window.console||{log:function(){},warn:function(){},
error:function(){}};d.debug=function(){e.DEBUG&&d.log.apply(d,arguments)};d.log=function(){var e=Array.prototype.slice.call(arguments,0);"object"===d.typeof(a)?a.log.apply(a,e):a.log(e)};d.warn=function(){var e=Array.prototype.slice.call(arguments,0);"object"===d.typeof(a)?a.warn.apply(a,e):a.warn(e)};d.error=function(){var e=Array.prototype.slice.call(arguments,0);"object"===d.typeof(a)?a.error.apply(a,e):a.error(e)};e.utils=d})(playease);
(function(e){function d(b){var a=this;a.set=function(b,k,g){switch(a.type){case c.DOUBLE:if("number"!==h.typeof(k))throw{name:"TypeError",message:"Value should be number."};break;case c.BOOLEAN:if("boolean"!==h.typeof(k))throw{name:"TypeError",message:"Value should be boolean."};case c.STRING:case c.LONG_STRING:if("string"!==h.typeof(k))throw{name:"TypeError",message:"Value should be string."};break;case c.OBJECT:case c.ECMA_ARRAY:if("array"!==h.typeof(k))throw{name:"TypeError",message:"Value should be array."};
for(g=0;g<k.length;g++){var f=k[g];a.table[f.key]=f}break;case c.STRICT_ARRAY:if("array"!==h.typeof(k))throw{name:"TypeError",message:"Value should be array."};break;case c.DATE:if("number"!==h.typeof(k))throw{name:"TypeError",message:"Value should be number."};if("number"!==h.typeof(g))throw{name:"TypeError",message:"Offset not presented."};a.offset=g;break;case c.NULL:case c.UNDEFINED:if("null"!==h.typeof(k))throw{name:"TypeError",message:"Value should be null."};break;default:throw{name:"TypeError",
message:"Unrecognized amf type "+a.type+"."};}a.key=b;a.value=k;return a};a.get=function(){switch(a.type){case c.DATE:return new Date(a.value+6E4*a.offset);default:return a.value}};a.type=b;a.key="";a.value=null;a.table={};a.offset=0;a.ended=!1}function a(a,g){for(var b=0,k=0;k<g.value.length;k++){var d=g.value[k];d.key&&(d=crypt.stringToByteArray(d.key),a.WriteUint16(d.length,!1),a.Write(d),b+=2+d.length);b+=c.encode(a,g)}return b}var h=e.utils,c={DOUBLE:0,BOOLEAN:1,STRING:2,OBJECT:3,MOVIE_CLIP:4,
NULL:5,UNDEFINED:6,REFERENCE:7,ECMA_ARRAY:8,END_OF_OBJECT:9,STRICT_ARRAY:10,DATE:11,LONG_STRING:12,UNSUPPORTED:13,RECORD_SET:14,XML:15,TYPED_OBJECT:16,AMF3_DATA:17,decode:function(a,g,d){if(1>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf Value."};var b=0,e=new DataView(g,d);a.type=e.getUint8(b);b+=1;e={0:c.decodeDouble,1:c.decodeBoolean,2:c.decodeString,3:c.decodeObject,5:c.decodeNull,6:c.decodeUndefined,8:c.decodeECMAArray,9:c.decodeEndOfObject,10:c.decodeStrictArray,
11:c.decodeDate,12:c.decodeLongString}[a.type];if(!e)throw{name:"TypeError",message:"Unrecognized amf type "+a.type+"."};return b+=e(a,g,d+b)},decodeDouble:function(a,g,c){if(8>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf double."};g=new DataView(g,c);a.value=g.getFloat64(0);return 8},decodeBoolean:function(a,g,c){if(1>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf boolean."};g=new DataView(g,c);a.value=!!g.getUint8(0);return 1},
decodeString:function(a,g,c){if(2>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf string."};var b=0,d=(new DataView(g,c)).getUint16(b);b+=2;0<d?(a.value=String.fromCharCode.apply(String,new Uint8Array(g,c+b,d)),b+=d):a.value="";return b},decodeObject:function(a,g,e){if(3>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf object."};var b=0,r=g.byteLength-e;for(a.value=[];b<r;){var f=new d;b+=c.decodeString(f,g,e+b);f.key=f.get();b+=c.decode(f,
g,e+b);if(f.type===c.END_OF_OBJECT)break;a.value.push(f);a.table[f.key]=f}return b},decodeNull:function(a,g,c){a.value=null;return 0},decodeUndefined:function(a,g,c){a.value=void 0;return 0},decodeECMAArray:function(a,g,d){if(4>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf ecma array."};var b=4;new DataView(g,d);return b+=c.decodeObject(a,g,d+b)},decodeEndOfObject:function(a,g,c){a.ended=!0;return 0},decodeStrictArray:function(a,g,e){if(4>g.byteLength)throw{name:"DataError",
message:"Data not enough while decoding amf strict array."};var b=0,r=new DataView(g,e),f=r.getUint32(b);b+=4;var t=g.byteLength-e;a.value=[];for(var h=0;h<f&&b<t;h++){var q=new d;b+=c.decode(q,g,e+b);a.value.push(q)}b+3<=t&&0===r.getUint8(b)&&0===r.getUint8(b+1)&&r.getUint8(b+2)===c.END_OF_OBJECT&&(a.ended=!0,b+=3);return b},decodeDate:function(a,g,c){if(10>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf date."};var b=0;g=new DataView(g,c);a.Timestamp=g.getFloat64(b);
b+=8;a.Timeoffset=g.getInt16(b);return b+2},decodeLongString:function(a,g,c){if(4>g.byteLength)throw{name:"DataError",message:"Data not enough while decoding amf long string."};var b=0,d=(new DataView(g,c)).getUint32(b);b+=4;0<d&&(a.value=String.fromCharCode.apply(String,new Uint8Array(g,c+b,d)),b+=d);return b},appendBytes:function(a,g){a.Write(g)},appendInt8:function(a,g){a.writeInt8(g)},appendInt16:function(a,g,c){a.WriteInt16(g,c)},appendInt32:function(a,g,c){a.WriteInt32(g,c)},appendUint8:function(a,
c){a.writeUint8(c)},appendUint16:function(a,c,d){a.WriteUint16(c,d)},appendUint32:function(a,c,d){a.WriteUint32(c,d)},encode:function(a,g){var b={0:c.encodeDouble,1:c.encodeBoolean,2:c.encodeString,3:c.encodeObject,5:c.encodeNull,6:c.encodeUndefined,8:c.encodeECMAArray,10:c.encodeStrictArray,11:c.encodeDate,12:c.encodeLongString}[g.type];if(!b)throw{name:"TypeError",message:"Unrecognized amf type "+g.type+"."};return b(a,g)},encodeNumber:function(a,g){a.WriteUint8(c.DOUBLE);a.WriteFloat64(g.value,
!1);return 9},encodeBoolean:function(a,g){a.WriteUint8(c.BOOLEAN);a.WriteUint8(g.value?1:0);return 2},encodeString:function(a,g){if(!g.value)return 0;if(65535<=g.value.length)return c.encodeLongString(a,g);g=crypt.stringToByteArray(g.value);a.WriteUint8(c.STRING);a.WriteUint16(g.length,!1);a.Write(g);return 3+g.length},encodeObject:function(b,g){var d=1;b.WriteUint8(c.OBJECT);d+=a(g);g.ended&&(b.WriteUint16(0),b.WriteUint8(c.END_OF_OBJECT),d+=3);return d},encodeNull:function(a,g){a.WriteUint8(c.NULL);
return 1},encodeUndefined:function(a,g){a.WriteUint8(c.UNDEFINED);return 1},encodeECMAArray:function(b,g){var d=3;b.WriteUint8(c.ECMA_ARRAY);b.WriteUint32(g.value.length,!1);return d+=a(b,g)},encodeStrictArray:function(b,g){var d=3;b.WriteUint8(c.STRICT_ARRAY);b.WriteUint32(g.value.length,!1);return d+=a(b,g)},encodeDate:function(a,g){a.WriteUint8(c.DATE);a.WriteFloat64(g.value,!1);a.WriteUint16(g.offset,!1);return 11},encodeLongString:function(a,g){if(!g.value)return 0;g=crypt.stringToByteArray(g.value);
a.WriteUint8(c.LONG_STRING);a.WriteUint32(g.length,!1);a.Write(g);return 5+g.length}};c.Value=d;h.AMF=c})(playease);
(function(e){e=e.utils;e.MIN_UINT32=0;e.MAX_UINT32=4294967295;e.MAX_INT32=2147483647;e.MIN_INT32=-2147483648;e.MIN_CACHE_BITS=25;e.BitStream=function(d){var a=this;a.ShowBits=function(a){if(0===a)return 0;var g=b>>>3,k=0;b<c&&(k=e.getUint8(g)<<24);b+8<c&&(k|=e.getUint8(g+1)<<16);b+16<c&&(k|=e.getUint8(g+2)<<8);b+24<c&&(k|=e.getUint8(g+3));return k<<(b&7)>>>32-a};a.ShowBitsLong=function(b){return 25>=b?a.ShowBits(b):a.ShowBits(16)<<b-16|a.ShowBits(b-16)};a.ReadBits=function(c){var g=a.ShowBits(c);
b+=c;return g};a.ReadBitsLong=function(c){var g=a.ShowBitsLong(c);b+=c;return g};a.SkipBits=function(a){b+=a};a.Left=function(){return c-b};var e=new DataView(d.buffer,d.byteOffset,d.byteLength);var c=8*d.byteLength;var b=0}})(playease);
(function(e){var d=new function(){function a(a){return g.match(/(Chrome|CriOS)\/((\d+)\.(\d+))/)}function d(){if(!b.isWindows)return 0;var a=navigator.plugins;if(a){var c=a["Shockwave Flash"];if(c&&c.description){var g=c.description.replace(/\D+(\d+\.?\d*).*/,"$1");return parseFloat(g)}}if("undefined"!==typeof window.ActiveXObject)try{return c=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),g=c.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."),parseFloat(g)}catch(f){}return 0}
function c(){return void 0!==window.orientation?90===window.orientation||-90===window.orientation:window.innerWidth>window.innerHeight}var b=this;var g=navigator.userAgent;b.OS={name:"",version:"",major:NaN,minor:NaN};b.Browser={name:"",version:"",major:NaN,minor:NaN};(function(){var a=g.match(/(Windows)\sNT\s((\d+)\.(\d+))/)||g.match(/(Mac)\sOS\sX\s((\d+)[\._]{1}(\d+))/)||g.match(/(Android)(?:\s((\d+)\.(\d+)))?/)||g.match(/(iP(?:hone|ad|od)).+((\d+)_(\d+))/)||g.match(/(Windows\sPhone)(?:\sOS)?\s((\d+)\.(\d+))/);
a&&(b.OS.name=a[1],b.OS.version=a[2],b.OS.major=parseInt(a[3]),b.OS.minor=parseInt(a[4]));b.OS.isWindows="Windows"===b.OS.name;b.OS.isMac="Mac"===b.OS.name;b.OS.isAndroid="Android"===b.OS.name;b.OS.isIOS="iPhone"===b.OS.name||"iPad"===b.OS.name||"iPod"===b.OS.name;b.OS.isWindowsPhone="Windows Phone"===b.OS.name;b.OS.isMobile=b.OS.isAndroid||b.OS.isIOS||b.OS.isWindowsPhone;b.OS.isHorizontal=c})();(function(){var c;(c=g.match(/(MSIE)\s((\d+)\.(\d+))/)||g.match(/(Trident)\/.+rv:\s((11)\.(\d+))/i)||g.match(/Firefox\/((\d+)\.(\d+))/)||
g.match(/(OPR)\/((\d+)\.(\d+))/)||g.match(/(Edg|Edge|EdgA)\/((\d+)\.(\d+))/))||(a()||!g.match(/Safari/)?c=null:(c=g.match(/Version\/((\d+)\.(\d+))/),c=["Safari/"+c[1],"Safari"].concat(c.slice(1))));if(c=c||g.match(/(MicroMessenger)\/((\d+)\.(\d+))/)||g.match(/(QQ)\/((\d+)\.(\d+))/)||g.match(/(QQBrowser)\/((\d+)\.(\d+))/)||g.match(/(MetaSr)\s((\d+)\.(\d+))/)||g.match(/QIHU (360EE)/)||a())b.Browser.name=c[1],b.Browser.version=c[2],b.Browser.major=parseInt(c[3]),b.Browser.minor=parseInt(c[4]);b.Browser.isMSIE=
"MSIE"===b.Browser.name;b.Browser.isIE8="MSIE"===b.Browser.name&&8===b.Browser.major;b.Browser.isIE9="MSIE"===b.Browser.name&&9===b.Browser.major;b.Browser.isIE10="MSIE"===b.Browser.name&&10===b.Browser.major;b.Browser.isIE11="Trident"===b.Browser.name;b.Browser.isIE=b.Browser.isMSIE||b.Browser.isIE11;b.Browser.isFirefox="Firefox"===b.Browser.name;b.Browser.isOpera="OPR"===b.Browser.name;b.Browser.isEdg="Edg"===b.Browser.name;b.Browser.isEdge="Edge"===b.Browser.name;b.Browser.isEdgA="EdgA"===b.Browser.name;
b.Browser.isSafari="Safari"===b.Browser.name;b.Browser.isWeChat="MicroMessenger"===b.Browser.name;b.Browser.isQQ="QQ"===b.Browser.name;b.Browser.isQQBrowser="QQBrowser"===b.Browser.name;b.Browser.isSogou="MetaSr"===b.Browser.name;b.Browser.is360EE="360EE"===b.Browser.name;b.Browser.isChrome="Chrome"===b.Browser.name;b.Browser.isCriOS="CriOS"===b.Browser.name;b.Browser.flash=d()})()};e.OS=d.OS;e.Browser=d.Browser})(playease);
(function(e){var d=e.utils;d.crypt={stringToByteArray:function(a){for(var d=[],c=0,b=0;b<a.length;b++){for(var g=a.charCodeAt(b);255<g;)d[c++]=g&255,g>>=8;d[c++]=g}return d},byteArrayToString:function(a){if(8192>=a.length)return String.fromCharCode.apply(null,a);for(var d="",c=0;c<a.length;c+=8192){var b=Array.slice(a,c,c+8192);d+=String.fromCharCode.apply(null,b)}return d},byteArrayToHex:function(a){return Array.map(a,function(a){return d.padStart(a.toString(16),2,0)}).join("")},hexToByteArray:function(a){if(0!==
a.length%2)return d.error("Key string length must be multiple of 2."),null;for(var e=[],c=0;c<a.length;c+=2)e.push(parseInt(a.substring(c,c+2),16));return e},stringToUTF8ByteArray:function(a){for(var d=[],c=0,b=0;b<a.length;b++){var g=a.charCodeAt(b);128>g?d[c++]=g:(2048>g?d[c++]=g>>6|192:(55296===(g&64512)&&b+1<a.length&&56320===(a.charCodeAt(b+1)&64512)?(g=65536+((g&1023)<<10)+(a.charCodeAt(++b)&1023),d[c++]=g>>18|240,d[c++]=g>>12&63|128):d[c++]=g>>12|224,d[c++]=g>>6&63|128),d[c++]=g&63|128)}return d},
UTF8ByteArrayToString:function(a){for(var d=[],c=0,b=0;c<a.length;){var g=a[c++];if(128>g)d[b++]=String.fromCharCode(g);else if(191<g&&224>g){var e=a[c++];d[b++]=String.fromCharCode((g&31)<<6|e&63)}else if(239<g&&365>g){e=a[c++];var k=a[c++],r=a[c++];g=((g&7)<<18|(e&63)<<12|(k&63)<<6|r&63)-65536;d[b++]=String.fromCharCode(55296+(g>>10));d[b++]=String.fromCharCode(56320+(g&1023))}else e=a[c++],k=a[c++],d[b++]=String.fromCharCode((g&15)<<12|(e&63)<<6|k&63)}return d.join("")},XORByteArray:function(a,
e){if(a.length!==e.length)d.error("XOR array lengths must match.");else{for(var c=[],b=0;b<a.length;b++)c.push(a[b]^e[b]);return c}}}})(playease);
(function(e){function d(b,g){c||(c=a());var d="";h.foreach(g,function(a,b){d+=a+": "+b+"; "});try{c.insertRule?c.insertRule(b+" { "+d+"}",c.cssRules.length):c.addRule(b,d,c.rules.length)}catch(k){h.error("Failed to insert css rule: "+b)}}function a(){var a=document.createElement("style");a.type="text/css";document.getElementsByTagName("head")[0].appendChild(a);return a.sheet||a.styleSheet}var h=e.utils,c;d.style=function(a,c,d){if(void 0!==a&&null!==a)for(void 0===a.length&&(a=[a]),c=h.extendz({},
c),d=0;d<a.length;d++){var b=a[d];void 0!==b&&null!==b&&h.forEach(c,function(a,f){a=a.split("-");for(var c=1;c<a.length;c++)a[c]=a[c].charAt(0).toUpperCase()+a[c].slice(1);a=a.join("");b.style[a]!==f&&(b.style[a]=f)})}};h.css=d})(playease);
(function(e){e=e.utils;e.LITTLE_ENDIAN=function(){try{var d=new ArrayBuffer(2);(new DataView(d)).setInt16(0,256,!0);var a=new Int16Array(d)}catch(h){}return a&&256===a[0]}();e.getUint32=function(d,a,e){void 0===a&&(a=0);return e?d[a+0]|d[a+1]>>>8|d[a+2]>>>16|d[a+3]>>>24:d[a+0]<<24|d[a+1]<<16|d[a+2]<<8|d[a+3]}})(playease);
(function(e){function d(c){var b=this,g,d,k,e;b.append=function(a){f.push(a)};b.save=function(a){a||(a=b.config.filename);g=new Blob(f,{type:b.config.type});d=URL.createObjectURL(g);k=document.createEvent("MouseEvents");k.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);e=document.createElementNS("http://www.w3.org/1999/xhtml","a");e.href=d;e.download=a;e.dispatchEvent(k);f=[];URL.revokeObjectURL(d)};b.config=a.extendz({},h,c);var f=[]}var a=e.utils,h={filename:"sample.fragmented.mp4",
type:"video/mpeg"};d.prototype.CONF=h;a.FileKeeper=d})(playease);
(function(e){function d(d){a.call(this,d);var c=this;c.ReadUE=function(){for(var a=-1,d=0;0===d&&0<c.Left();a++)d=c.ReadBits(1);return(1<<a>>>0)-1+c.ReadBitsLong(a)};c.ReadSE=function(){var a=c.ReadUE();return 0===(a&1)?-(a>>>1):a+1>>>1}}e=e.utils;var a=e.BitStream;d.prototype=Object.create(a.prototype);d.prototype.constructor=d;e.ebsp2rbsp=function(a){var c=2,b=a.byteLength,d=new Uint8Array(b);d[0]=a[0];d[1]=a[1];for(var e=2;e<b;e++)if(3!==a[e]||0!==a[e-1]||0!==a[e-2])d[c]=a[e],c++;return d.subarray(0,
c)};e.Golomb=d})(playease);
(function(e){var d=/^(([a-z]+:)\/\/(([-a-z\d\.]+)(?::(\d+))?))((?:\/[-_a-z\d\s\.]*)*)([?#][-_=%&a-z\d\s\.]+)?$/i;e.utils.URL=function(a){var e=this;e.parse=function(a){e.href=a;!1===/^([a-z]+):\/\//.test(a)&&(e.href=window.location.origin+("/"===a.substr(0,1)?"":"/")+a);var b=e.href.match(d);if(null===b)throw{name:"SyntaxError",message:"The URL did not match the expected pattern, url="+a+"."};e.origin=b[1];e.protocol=b[2];e.host=b[3];e.hostname=b[4];e.port=b[5]||"";e.pathname=b[6]||"";if(a=e.pathname.match(/\/([-_a-z\d\s\(\)\[\]\{\}]+)(?:\.([a-z\d]+))?$/))e.filename=
a[1],e.filetype=a[2];b[7]&&("?"===b[7].substr(0,1)?e.search=b[7]:e.hash=b[7])};e.href="";e.origin="";e.protocol="";e.host="";e.hostname="";e.port="";e.pathname="";e.filename="";e.filetype="";e.search="";e.hash="";a&&e.parse(a)}})(playease);
(function(e){function d(b){function d(b,c){var f={};if(b.nodeType===h.DOCUMENT_NODE){for(var g=0;g<b.childNodes.length;g++){var k=b.childNodes[g],q=k.localName||k.baseName||k.nodeName;k.nodeType===h.ELEMENT_NODE&&(k=d(k),k.parent=f,e.config.ignoreRoot?(delete k.parent,f=k):f[q]=k)}return f}if(b.nodeType===h.ELEMENT_NODE){for(g=0;g<b.childNodes.length;g++)if(k=b.childNodes[g],q=k.localName||k.baseName||k.nodeName,k.nodeType!==h.COMMENT_NODE)if(k=d(k,c+"."+q),k.parent=f,f.hasOwnProperty(q))"array"!=
a.typeof(f[q])&&(f[q]=[f[q]]),f[q].push(k);else if("#text"!=q||/[^\s]/.test(k))f[q]=k;q=b.localName||b.baseName||b.nodeName;null!=b.prefix&&""!=b.prefix&&(q=b.prefix+":"+q);for(g=0;g<b.attributes.length;g++){c=b.attributes[g];k=c.value;for(var l=0;l<e.config.matchers.length;l++){var n=e.config.matchers[l];n.test(c,q)&&(k=n.exec(c.value));f[e.config.attributePrefix+c.name]=k}}null!=f["#text"]&&e.config.trimWhitespaces&&(f["#text"]=f["#text"].trim());f.toString=function(){return(null==f["#text"]?"":
f["#text"])+(null==f["#cdata-section"]?"":f["#cdata-section"])};return f}if(b.nodeType===h.TEXT_NODE||b.nodeType===h.CDATA_SECTION_NODE)return b.nodeValue}var e=this;e.parse=function(b){if(window.DOMParser){var c=new DOMParser;try{var f=c.parseFromString(b,"text/xml")}catch(t){return a.error("Failed to parse XML structure."),null}}else 0===b.indexOf("<?")&&(b=b.substr(b.indexOf("?>")+2)),f=new ActiveXObject("Microsoft.XMLDOM"),f.async="false",f.loadXML(b);return d(f)};e.config=a.extendz({},c,b)}var a=
e.utils,h={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9},c={ignoreRoot:!0,trimWhitespaces:!1,attributePrefix:"@",matchers:[]};d.prototype.CONF=c;a.XML2JSON=d})(playease);
(function(e){var d=e.utils;d.MPD=function(a){function e(a,b){if(a)for(var f=0;f<a.AdaptationSet.length;f++){var c=a.AdaptationSet[f];if(c.hasOwnProperty("@id")){if(c["@id"]===b["@id"])return c}else if(c.hasOwnProperty("@contentType")){if(c["@contentType"]===b["@contentType"])return c}else if(c.hasOwnProperty("@mimeType")){if(c["@mimeType"]===b["@mimeType"])return c}else if(c.hasOwnProperty("@codecs")){if(c["@codecs"]===b["@codecs"])return c}else break}}var c,b,g;this.update=function(a){b=p;a.Location&&
a.Location["#text"]&&(b=a.Location["#text"]);g=a.BaseURL||b.substring(0,b.lastIndexOf("/")+1);if("dynamic"===a["@type"]){var k=c,f=0,t=NaN;"array"!=d.typeof(a.Period)&&(a.Period=[a.Period]);for(var A=0;A<a.Period.length;A++){var q=a.Period[A];q.hasOwnProperty("@start")?f=q["@start"]:isNaN(t)?0===A&&"dynamic"!==a["@type"]&&(f=0):f+=t;q.hasOwnProperty("@duration")&&(t=q["@duration"]);q["@start"]=f;q["@duration"]=t;a:{var l=k;var n=q;if(l)for(var z=0;z<l.Period.length;z++){var x=l.Period[z];if(x.hasOwnProperty("@id")){if(x["@id"]===
n["@id"]){l=x;break a}}else if(x.hasOwnProperty("@start")){if(x["@start"]===n["@start"]){l=x;break a}}else{l=x;break a}}l=void 0}"array"!=d.typeof(q.AdaptationSet)&&(q.AdaptationSet=[q.AdaptationSet]);for(n=0;n<q.AdaptationSet.length;n++){z=q.AdaptationSet[n];x=e(l,z);var y=x,h=x=0,F=[];if(!1!==z.SegmentTemplate.hasOwnProperty("SegmentTimeline")){if(y){var G=y.SegmentTemplate.SegmentTimeline;"array"!=d.typeof(G.S)&&(G.S=[G.S]);for(y=0;y<G.S.length;y++){var D=G.S[y];0===y&&D.hasOwnProperty("@t")&&
(x=D["@t"]);x+=D["@d"];D["@r"]&&(x+=D["@d"]*D["@r"]);F.push(d.extendz({},D))}}z=z.SegmentTemplate.SegmentTimeline;"array"!=d.typeof(z.S)&&(z.S=z.S?[z.S]:[]);for(y=0;y<z.S.length;y++)D=z.S[y],0===y&&D.hasOwnProperty("@t")&&(h=D["@t"]),h>=x&&F.push(D),h+=D["@d"],D["@r"]&&(h+=D["@d"]*D["@r"])}}}}c=a};this.getSegmentInfo=function(a,b,f,e,A,q){for(var k=c.Period[0],n=0;n<c.Period.length;n++){var t=c.Period[n];if(t.hasOwnProperty("@start"))t["@start"]>k["@start"]&&t["@start"]<=a&&(k=t);else break}a=k;a:{for(k=
0;k<a.AdaptationSet.length;k++)if(n=a.AdaptationSet[k],n.hasOwnProperty("@contentType")){if(n["@contentType"]===b){b=n;break a}}else if(n.hasOwnProperty("@mimeType")&&(t=n["@mimeType"].match(/^([a-z]+)\/[a-z0-9]+/i))&&1<t.length&&t[1]===b){b=n;break a}b=void 0}if(b){k=b;"array"!=d.typeof(k.Representation)&&(k.Representation=[k.Representation]);n=k.Representation[0];for(t=0;t<k.Representation.length;t++){var x=k.Representation[t];x["@bandwidth"]>n["@bandwidth"]&&(!q||x["@bandwidth"]<=q)&&(n=x)}if(q=
n){t=b.SegmentTemplate;k=t[f?"@initialization":"@media"];n=t["@timescale"]||1;var y=t["@duration"]||0;k=k.replace(/\$RepresentationID\$/,q["@id"]);if(t["@media"].search(/\$Time\$/))if(x=t.SegmentTimeline,f)if(0<e||0===e&&!1===c.hasOwnProperty("@suggestedPresentationDelay"))x.S.length&&(e=x.S[0]["@t"]);else{var r=Math.abs(r)||c["@suggestedPresentationDelay"];a:{var h=r*n;for(r=x.S.length-1;0<=r;r--){var p=x.S[r];h-=p["@d"]*(p["@r"]||1);if(0>=h){h=x.S[0]["@t"];for(var D=0;D<r;D++)h+=x.S[D]["@d"],p["@r"]&&
(h+=p["@d"]*p["@r"]);p["@t"]=h;r=p;break a}}r=x.S[0]}r&&(e=r["@t"],y=r["@d"])}else{a:{for(r=NaN;x.S.length;){y=x.S.shift();isNaN(r)&&(r=y["@t"]||0);if(r+y["@d"]*(y["@r"]||0)>=e){y["@t"]=r;x.S.length&&(x.S[0]["@t"]=y["@t"]+y["@d"]);r=y;break a}r+=y["@d"];y["@r"]&&(r+=y["@d"]*y["@r"])}r=void 0}if(void 0===r)return;e=r["@t"];y=r["@d"];k=k.replace(/\$Time\$/,e)}t["@media"].search(/\$Number\$/)&&(f?A=t["@startNumber"]:k=k.replace(/\$Number\$/,A));f=q.baseURL||b.baseURL||a.baseURL;k=(f?f["#text"]:g)+k;
return{mimeType:q["@mimeType"]||b["@mimeType"],codecs:q["@codecs"]||b["@codecs"],index:A,start:e,duration:y,timescale:n,url:k}}}};this.getLocation=function(){return b};var p=a||""}})(playease);(function(e){e.utils.MPD.matchers={}})(playease);
(function(e){var d=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;e.utils.MPD.matchers.datetime=function(){this.test=function(a){return d.test(a.value)};this.exec=function(a){a=d.exec(a);var e=Date.UTC(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10),a[6]&&parseInt(a[6],10)||0,a[7]&&1E3*parseFloat(a[7])||0);if(a[9]&&a[10]){var c=60*parseInt(a[9],10)+parseInt(a[10],10);e+=("+"===a[8]?
-1:1)*c*6E4}return new Date(e)}}})(playease);
(function(e){var d=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,a="minBufferTime mediaPresentationDuration minimumUpdatePeriod timeShiftBufferDepth maxSegmentDuration maxSubsegmentDuration suggestedPresentationDelay start starttime duration".split(" ");e.utils.MPD.matchers.duration=function(){this.test=function(e){for(var c=0;c<a.length;c++)if((e.localName||e.baseName||e.nodeName)===a[c])return d.test(e.value);return!1};this.exec=function(a){a=d.exec(a);var c=
31536E3*parseFloat(a[2]||0)+2592E3*parseFloat(a[4]||0)+86400*parseFloat(a[6]||0)+3600*parseFloat(a[8]||0)+60*parseFloat(a[10]||0)+parseFloat(a[12]||0);void 0!==a[1]&&(c*=-1);return c}}})(playease);(function(e){var d=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/;e.utils.MPD.matchers.numeric=function(){this.test=function(a){return d.test(a.value)};this.exec=function(a){return parseFloat(a)}}})(playease);
(function(e){var d={MPD:["id","profiles"],Period:["id"],BaseURL:["serviceLocation","byteRange"],SegmentBase:["indexRange"],Initialization:["range"],RepresentationIndex:["range"],SegmentList:["indexRange"],BitstreamSwitching:["range"],SegmentURL:["mediaRange","indexRange"],SegmentTemplate:["indexRange","media","index","initialization","bitstreamSwitching"],AssetIdentifier:["value","id"],EventStream:["value"],AdaptationSet:["profiles","mimeType","segmentProfiles","codecs","contentType"],FramePacking:["value",
"id"],AudioChannelConfiguration:["value","id"],ContentProtection:["value","id"],EssentialProperty:["value","id"],SupplementalProperty:["value","id"],InbandEventStream:["value","id"],Accessibility:["value","id"],Role:["value","id"],Rating:["value","id"],Viewpoint:["value","id"],ContentComponent:["contentType"],Representation:["id","dependencyId","mediaStreamStructureId"],Subset:["id"],Metrics:["metrics"],Reporting:["value","id"]};e.utils.MPD.matchers.string=function(){this.test=function(a,e){return d.hasOwnProperty(e)&&
(e=d[e],void 0!==e)?0<=e.indexOf(a.name):!1};this.exec=function(a){return String(a)}}})(playease);
(function(e){e.events={Event:{BIND:"bind",READY:"ready",PLAY:"play",WAITING:"waiting",DURATIONCHANGE:"durationchange",LOADEDMETADATA:"loadedmetadata",LOADEDDATA:"loadeddata",CANPLAY:"canplay",PLAYING:"playing",CANPLAYTHROUGH:"canplaythrough",PAUSE:"pause",SEEKING:"seeking",SEEKED:"seeked",SWITCHING:"switching",SWITCHED:"switched",RATECHANGE:"ratechange",TIMEUPDATE:"timeupdate",VOLUMECHANGE:"volumechange",ENDED:"ended",ERROR:"error"},IOEvent:{SUSPEND:"suspend",LOADSTART:"loadstart",STALLED:"stalled",
ABORT:"abort",TIMEOUT:"timeout",PROGRESS:"progress",LOAD:"load",LOADEND:"loadend"},UIEvent:{SHOOTING:"shooting",FULLPAGE:"fullpage",FULLSCREEN:"fullscreen",RESIZE:"resize"},GlobalEvent:{CHANGE:"change"},MouseEvent:{CLICK:"click",DOUBLE_CLICK:"doubleclick",MOUSE_MOVE:"mousemove"},KeyboardEvent:{KEY_DOWN:"key-down",KEY_UP:"key-up"},TimerEvent:{TIMER:"timer",COMPLETE:"complete"},MediaEvent:{PACKET:"packet",AAC_SPECIFIC_CONFIG:"aac-specific-config",AAC_SAMPLE:"aac-sample",AVC_CONFIG_RECORD:"avc-config-record",
AVC_SAMPLE:"avc-sample",END_OF_STREAM:"end-of-stream",FLV_INFO_FRAME:"flv-info-frame",FLV_FRAME:"flv-frame",MP4_INIT_SEGMENT:"mp4-init-segment",MP4_SEGMENT:"mp4-segment"},MediaStreamTrackEvent:{ADDTRACK:"addtrack",REMOVETRACK:"removetrack"}}})(playease);
(function(e){var d=e.utils;e.events.EventDispatcher=function(a){function h(a,b){if(a)for(var c=a.slice(0),g=0;g<c.length;g++){var k=c[g];if(k){isNaN(k.count)||0!==--k.count||a.splice(g,1);try{if(k.listener(b),b.stopPropagation)break}catch(q){d.error("Error handling event:",b,q.toString())}}}}var c=this,b=Array.prototype.slice.call(arguments,1);c.bind=function(){var a=Array.prototype.slice.call(arguments,0);d.forEach(a,function(a,b){d.forEach(b,function(a,b){a="on"+b.replace(/-/g,"");c[a]=void 0})})};
c.addEventListener=function(a,b,c){try{g[a]||(g[a]=[]),"string"===d.typeof(b)&&(b=(new Function("return "+b))()),g[a].push({listener:b,count:c||NaN})}catch(t){d.error("Failed to addEventListener("+a+"):",t)}};c.removeEventListener=function(a,b){if(g[a])try{if(void 0===b)delete g[a];else for(var c=0;c<g[a].length;c++)if(g[a][c].listener.toString()===b.toString()){g[a].splice(c,1);break}}catch(t){d.error("Failed to removeEventListener("+a+"):",t)}};c.hasEventListener=function(a){return g.hasOwnProperty(a)&&
0<g[a].length};c.addGlobalListener=function(a,b){try{"string"===d.typeof(a)&&(a=(new Function("return "+a))()),p.push({listener:a,count:b||NaN})}catch(f){d.error("Failed to addGlobalListener():",f)}};c.removeGlobalListener=function(a){if(a)try{for(var b=0;b<p.length;b++)if(p[b].listener.toString()===a.toString()){p.splice(b,1);break}}catch(f){d.error("Failed to removeGlobalListener():",f)}};c.dispatchEvent=function(a,b){c.forward({type:a,data:b||{},srcElement:c,version:e.VERSION})};c.forward=function(a){a.target=
c;a.stopPropagation=!1;e.DEBUG&&d.log(a);var b="on"+a.type.replace(/-/g,"");if("function"===d.typeof(c[b]))c[b](a);else h(g[a.type],a),h(p,a)};var g={};var p=[];c.bind.apply(c,b)}})(playease);
(function(e){function d(a,d){function b(){f++;g.dispatchEvent(c.TIMER);0<g.repeatCount&&f>=g.repeatCount&&(g.stop(),g.dispatchEvent(c.COMPLETE))}h.call(this,"Timer",[c.TIMER,c.COMPLETE]);var g=this,e,f=0,t=!1;g.start=function(){!1===t&&(e=setInterval(b,g.delay),t=!0)};g.stop=function(){t&&(clearInterval(e),e=0,t=!1)};g.reset=function(){g.stop();f=0};g.currentCount=function(){return f};g.running=function(){return t};g.delay=a||50;g.repeatCount=d||0}var a=e.utils;e=e.events;var h=e.EventDispatcher,
c=e.TimerEvent;d.prototype=Object.create(h.prototype);d.prototype.constructor=d;a.Timer=d})(playease);
(function(e){var d=e.utils,a={},h=[];a.register=function(c,b){try{h.splice(b||h.length,0,c),a[c.prototype.kind]=c}catch(g){d.error("Failed to register loader "+c.prototype.kind+", Error="+g.message)}};a.get=function(a,b){for(var c=0;c<h.length;c++){var d=h[c];if(d.prototype.isSupported(a,b))return d}return null};a.Mode={CORS:"cors",NO_CORS:"no-cors",SAME_ORIGIN:"same-origin"};a.Credentials={OMIT:"omit",INCLUDE:"include",SAME_ORIGIN:"same-origin"};a.Cache={DEFAULT:"default",NO_STAORE:"no-store",RELOAD:"reload",
NO_CACHE:"no-cache",FORCE_CACHE:"force-cache",ONLY_IF_CACHED:"only-if-cached"};a.Redirect={FOLLOW:"follow",MANUAL:"manual",ERROR:"error"};a.ResponseType={ARRAYBUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};a.ReadyState={UNINITIALIZED:0,OPEN:1,SENT:2,LOADING:3,DONE:4};e.io=a.get;e.IO=a})(playease);
(function(e){function d(d){function e(c){return c.read().then(function(f){if(f.done)return a.debug("Loader load"),A=g.DONE,k.dispatchEvent(b.LOAD),k.dispatchEvent(b.LOADEND),Promise.resolve("load");switch(A){case g.SENT:A=g.LOADING;break;case g.DONE:return a.warn("Loader state error, probably aborted already."),c.cancel()}a.debug("Loader progress: "+f.value.buffer.byteLength+"/"+q);k.dispatchEvent(b.PROGRESS,{buffer:f.value.buffer,loaded:f.value.buffer.byteLength,total:q});return e(c)})["catch"](f)}
function f(c){A=g.DONE;switch(c.name){case "AbortError":a.warn("Loader "+c.name+": "+c.message);k.dispatchEvent(b.ABORT,{name:c.name,message:c.message});break;case "TimeoutError":a.error("Loader "+c.name+": "+c.message);k.dispatchEvent(b.TIMEOUT,{name:c.name,message:c.message});break;default:a.error("Loader "+c.name+": "+c.message),k.dispatchEvent(b.STALLED,{name:c.name,message:c.message})}k.dispatchEvent(b.LOADEND)}c.call(this,"Fetch",b);var k=this,A;k.load=function(c,d,x){A=g.UNINITIALIZED;k.isSupported(c)?
(a.debug("Loader loadstart"),k.dispatchEvent(b.LOADSTART),A=g.OPEN,void 0!==d&&a.extendz(k.config.headers,{Range:"bytes="+d+"-"+(x||"")}),d=a.extendz({},k.config,{headers:new Headers(k.config.headers),signal:l.signal}),fetch(c.href,d).then(function(b){switch(A){case g.OPEN:A=g.SENT;break;default:a.warn("Loader state error, probably aborted already.")}if(!b.ok||200>b.status||299<b.status)return Promise.reject(Error(b.status+" "+b.statusText));var c=b.headers.get("Content-Length");c&&(c=parseInt(c));
if(206===b.status){var f=b.headers.get("Content-Range");f&&(f=f.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(c=parseInt(f[3]))}q!==c&&(q=c,a.log("Content-Length changed: "+q));return e(b.body.getReader())})["catch"](f)):(a.error("Loader suspend: not supportped"),A=g.DONE,k.dispatchEvent(b.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),k.dispatchEvent(b.LOADEND))};k.abort=function(){l.abort()};k.state=function(){return A};k.config=a.extendz({},p,d);var q=NaN;var l=new AbortController}var a=
e.utils,h=e.events,c=h.EventDispatcher,b=h.IOEvent;e=e.IO;var g=e.ReadyState,p={method:"GET",headers:{},mode:e.Mode.CORS,credentials:e.Credentials.OMIT,cache:e.Cache.DEFAULT,redirect:e.Redirect.FOLLOW};d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="Fetch";d.prototype.CONF=p;d.prototype.isSupported=function(a,b){return b&&"live"!==b?!1:!!fetch&&("http:"===a.protocol||"https:"===a.protocol)};e.register(d)})(playease);
(function(e){function d(c){b.call(this,"MozStream",g);var f=this,d;f.load=function(b,c,e){d=k.UNINITIALIZED;if(f.isSupported(b)){a.debug("Loader loadstart");f.dispatchEvent(g.LOADSTART);void 0!==c&&a.extendz(f.config.headers,{Range:"bytes="+c+"-"+(e||"")});a.forEach(f.config.headers,function(a,b){l.setRequestHeader(a,b)});switch(f.config.credentials){case p.INCLUDE:l.withCredentials=!0;break;case p.SAME_ORIGIN:l.withCredentials=window.location.host===b.host;break;default:l.withCredentials=!1}l.open(f.config.method,
b.href,!0);l.send()}else a.error("Loader suspend: not supportped"),d=k.DONE,f.dispatchEvent(g.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),f.dispatchEvent(g.LOADEND)};f.abort=function(){l.abort()};f.state=function(){return d};f.config=a.extendz({},r,c);var e=NaN;var l=new XMLHttpRequest;l.onreadystatechange=function(b){d=l.readyState;switch(d){case k.SENT:if(200>l.status||299<l.status)a.error("Loader stalled: "+l.status+" "+l.statusText),f.dispatchEvent(g.STALLED,{name:"NetworkError",
message:l.status+" "+l.statusText});else{(b=l.getResponseHeader("Content-Length"))&&(b=parseInt(b));if(206===l.status){var c=l.getResponseHeader("Content-Range");c&&(c=c.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(b=parseInt(c[3]))}e!==b&&(e=b,a.log("Content-Length changed: "+e))}}};l.onabort=function(b){a.warn("Loader AbortError: The operation was aborted.");f.dispatchEvent(g.ABORT,{name:"AbortError",message:"The operation was aborted."})};l.onprogress=function(b){a.debug("Loader progress: "+l.response.byteLength+
"/"+e);f.dispatchEvent(g.PROGRESS,{buffer:l.response,loaded:l.response.byteLength,total:e})};l.onload=function(b){a.debug("Loader load.");f.dispatchEvent(g.LOAD)};l.onerror=function(b){a.error("Loader "+b.name+": "+b.message);switch(b.name){case "TimeoutError":f.dispatchEvent(g.TIMEOUT,{name:b.name,message:b.message});break;default:f.dispatchEvent(g.STALLED,{name:b.name,message:b.message})}};l.onloadend=function(a){f.dispatchEvent(g.LOADEND)};l.responseType="moz-chunked-arraybuffer"}var a=e.utils,
h=e.Browser,c=e.events,b=c.EventDispatcher,g=c.IOEvent;e=e.IO;var p=e.Credentials,k=e.ReadyState,r={method:"GET",headers:{},mode:e.Mode.CORS,credentials:p.OMIT,cache:e.Cache.DEFAULT,redirect:e.Redirect.FOLLOW};d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="MozStream";d.prototype.CONF=r;d.prototype.isSupported=function(a,b){return b&&"live"!==b||h.isFirefox&&(14>h.major||67<h.major)?!1:"http:"===a.protocol||"https:"===a.protocol};e.register(d)})(playease);
(function(e){function d(c){function f(b){a.error("Loader "+b.name+": "+b.message);switch(b.name){case "TimeoutError":d.dispatchEvent(g.TIMEOUT,{name:b.name,message:b.message});break;default:d.dispatchEvent(g.STALLED,{name:b.name,message:b.message})}}b.call(this,"MSStream",g);var d=this,e;d.load=function(b,c,f){e=k.UNINITIALIZED;h.position=0;if(d.isSupported(b)){a.debug("Loader loadstart");d.dispatchEvent(g.LOADSTART);void 0!==c&&a.extendz(d.config.headers,{Range:"bytes="+c+"-"+(f||"")});a.forEach(d.config.headers,
function(a,b){n.setRequestHeader(a,b)});switch(d.config.credentials){case p.INCLUDE:n.withCredentials=!0;break;case p.SAME_ORIGIN:n.withCredentials=window.location.host===b.host;break;default:n.withCredentials=!1}n.open(d.config.method,b.href,!0);n.send()}else a.error("Loader suspend: not supportped"),e=k.DONE,d.dispatchEvent(g.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),d.dispatchEvent(g.LOADEND)};d.abort=function(){n.abort()};d.state=function(){return e};d.config=a.extendz({},
r,c);var l=NaN;var n=new XMLHttpRequest;n.onreadystatechange=function(b){e=n.readyState;switch(e){case k.SENT:if(200>n.status||299<n.status){a.error("Loader stalled: "+n.status+" "+n.statusText);d.dispatchEvent(g.STALLED,{name:"NetworkError",message:n.status+" "+n.statusText});break}(b=n.getResponseHeader("Content-Length"))&&(b=parseInt(b));if(206===n.status){var c=n.getResponseHeader("Content-Range");c&&(c=c.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(b=parseInt(c[3]))}l!==b&&(l=b,a.log("Content-Length changed: "+
l));break;case k.LOADING:200>n.status||299<n.status?(a.error("Loader stalled: "+n.status+" "+n.statusText),d.dispatchEvent(g.STALLED,{name:"NetworkError",message:n.status+" "+n.statusText})):h.readAsArrayBuffer(n.response)}};n.onabort=function(b){a.warn("Loader AbortError: The operation was aborted.");d.dispatchEvent(g.ABORT,{name:"AbortError",message:"The operation was aborted."})};n.onerror=f;n.onloadend=function(a){d.dispatchEvent(g.LOADEND)};n.responseType="ms-stream";var h=new MSStreamReader;
h.onprogress=function(b){b=h.result.slice(h.position);null==b?a.warn("What happend???"):(a.debug("Loader progress: "+b.byteLength+"/"+l),d.dispatchEvent(g.PROGRESS,{buffer:b,loaded:b.byteLength,total:l}),h.position=h.result.byteLength)};h.onload=function(b){a.debug("Loader load.");d.dispatchEvent(g.LOAD)};h.onerror=f}var a=e.utils,h=e.Browser,c=e.events,b=c.EventDispatcher,g=c.IOEvent;e=e.IO;var p=e.Credentials,k=e.ReadyState,r={method:"GET",headers:{},mode:e.Mode.CORS,credentials:p.OMIT,cache:e.Cache.DEFAULT,
redirect:e.Redirect.FOLLOW};d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="MSStream";d.prototype.CONF=r;d.prototype.isSupported=function(a,b){return b&&"live"!==b||!h.isIE10&&!h.isIE11&&!h.isEdge?!1:"http:"===a.protocol||"https:"===a.protocol};e.register(d)})(playease);
(function(e){function d(d){function e(a){l=g.SENT}function f(c){a.debug("Loader progress: "+c.data.byteLength+"/NaN");l===g.SENT&&(l=g.LOADING);q.dispatchEvent(b.PROGRESS,{buffer:c.data,loaded:c.data.byteLength,total:NaN})}function k(a){switch(a.name){case "TimeoutError":q.dispatchEvent(b.TIMEOUT,{name:a.name,message:a.message});break;default:q.dispatchEvent(b.STALLED,{name:a.name,message:a.message})}}function h(c){a.debug("Loader load.");l=g.DONE;q.dispatchEvent(b.LOAD);q.dispatchEvent(b.LOADEND)}
c.call(this,"Websocket",b);var q=this,l,n;q.load=function(c,d,y){l=g.UNINITIALIZED;q.isSupported(c)?(a.debug("Loader loadstart"),q.dispatchEvent(b.LOADSTART),l=g.OPEN,n=new window.WebSocket(c.href),n.onopen=e,n.onmessage=f,n.onerror=k,n.onclose=h,n.binaryType="arraybuffer"):(a.error("Loader suspend: not supportped"),l=g.DONE,q.dispatchEvent(b.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),q.dispatchEvent(b.LOADEND))};q.abort=function(){!n||n.readyState!=WebSocket.CONNECTING&&n.readyState!=
WebSocket.OPEN||(n.close(),a.warn("Loader AbortError: The operation was aborted."),q.dispatchEvent(b.ABORT,{name:"AbortError",message:"The operation was aborted."}))};q.state=function(){return l};q.config=a.extendz({},p,d);window.WebSocket=window.WebSocket||window.MozWebSocket}var a=e.utils,h=e.events,c=h.EventDispatcher,b=h.IOEvent;e=e.IO;var g=e.ReadyState,p={method:"GET",headers:{},mode:e.Mode.CORS,credentials:e.Credentials.OMIT,cache:e.Cache.DEFAULT,redirect:e.Redirect.FOLLOW};d.prototype=Object.create(c.prototype);
d.prototype.constructor=d;d.prototype.kind="Websocket";d.prototype.CONF=p;d.prototype.isSupported=function(a,b){return b&&"live"!==b?!1:!(!window.WebSocket&&!window.MozWebSocket)&&("ws:"===a.protocol||"wss:"===a.protocol)};e.register(d)})(playease);
(function(e){function d(f){c.call(this,"XHR",b);var d=this,e;d.load=function(c,f,q){e=k.UNINITIALIZED;if(d.isSupported(c)){a.debug("Loader loadstart");d.dispatchEvent(b.LOADSTART);void 0!==f&&a.extendz(d.config.headers,{Range:"bytes="+f+"-"+(q||"")});a.forEach(d.config.headers,function(a,b){l.setRequestHeader(a,b)});switch(d.config.credentials){case g.INCLUDE:l.withCredentials=!0;break;case g.SAME_ORIGIN:l.withCredentials=window.location.host===c.host;break;default:l.withCredentials=!1}l.open(d.config.method,
c.href,!0);l.send()}else a.error("Loader suspend: not supportped"),e=k.DONE,d.dispatchEvent(b.SUSPEND,{name:"NotSupportedError",message:"Not supportped."}),d.dispatchEvent(b.LOADEND)};d.abort=function(){l.abort()};d.state=function(){return e};d.config=a.extendz({},r,f);var q=NaN;var l=new XMLHttpRequest;l.onreadystatechange=function(c){e=l.readyState;switch(e){case k.SENT:if(416!==l.status&&(200>l.status||299<l.status))a.error("Loader stalled: "+l.status+" "+l.statusText),d.dispatchEvent(b.STALLED,
{name:"NetworkError",message:l.status+" "+l.statusText});else{(c=l.getResponseHeader("Content-Length"))&&(c=parseInt(c));if(206===l.status){var f=l.getResponseHeader("Content-Range");f&&(f=f.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(c=parseInt(f[3]))}q!==c&&(q=c,a.log("Content-Length changed: "+q))}}};l.onabort=function(c){a.warn("Loader AbortError: The operation was aborted.");d.dispatchEvent(b.ABORT,{name:"AbortError",message:"The operation was aborted."})};l.onprogress=function(b){a.debug("Loader progress: "+
l.loaded+"/"+q)};l.onload=function(c){a.debug("Loader load.");d.dispatchEvent(b.PROGRESS,{buffer:l.response,loaded:l.response.byteLength,total:l.loaded});d.dispatchEvent(b.LOAD)};l.onerror=function(c){a.error("Loader "+c.name+": "+c.message);switch(c.name){case "TimeoutError":d.dispatchEvent(b.TIMEOUT,{name:c.name,message:c.message});break;default:d.dispatchEvent(b.STALLED,{name:c.name,message:c.message})}};l.onloadend=function(a){d.dispatchEvent(b.LOADEND)};l.responseType=p.ARRAYBUFFER}var a=e.utils,
h=e.events,c=h.EventDispatcher,b=h.IOEvent;e=e.IO;var g=e.Credentials,p=e.ResponseType,k=e.ReadyState,r={method:"GET",headers:{},mode:e.Mode.CORS,credentials:g.OMIT,cache:e.Cache.DEFAULT,redirect:e.Redirect.FOLLOW};d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="XHR";d.prototype.CONF=r;d.prototype.isSupported=function(a,b){if(b&&"live"===b){b=["flv","",void 0,"mp4","m4s","f4v","m4v","mov"];for(var c=0;c<b.length;c++)if(a.filetype===b[c])return!1}return"http:"===
a.protocol||"https:"===a.protocol};e.register(d)})(playease);
(function(e){function d(a,b){this.Num=a||30;this.Den=b||1}function a(){var a=this;a.left=function(){return null==a.payload?0:a.payload.byteLength-a.position};a.set=function(a,c){b[a]=c};a.get=function(a){return b[a]};var b={};a.kind="";a.codec="";a.length=0;a.timestamp=0;a.streamid=0;a.payload=null;a.position=0}var h={};a.KindAudio="audio";a.KindVideo="video";a.KindScript="script";h.Rational=d;h.Information=function(){this.MimeType="";this.Codecs=[];this.Timescale=1E3;this.BitRate=this.VideoDataRate=
this.AudioDataRate=this.CodecHeight=this.CodecWidth=this.Height=this.Width=this.Size=this.Duration=this.Timestamp=this.TimeBase=0;this.FrameRate=new d;this.Channels=this.SampleSize=this.SampleRate=0};h.Packet=a;e.AV=h})(playease);
(function(e){var d=e.utils;e=e.AV;var a={},h=[];a.COL_PRI_RESERVED0=0;a.COL_PRI_BT709=1;a.COL_PRI_UNSPECIFIED=2;a.COL_PRI_RESERVED=3;a.COL_PRI_BT470M=4;a.COL_PRI_BT470BG=5;a.COL_PRI_SMPTE170M=6;a.COL_PRI_SMPTE240M=7;a.COL_PRI_FILM=8;a.COL_PRI_BT2020=9;a.COL_PRI_SMPTEST428_1=10;a.COL_PRI_NB=11;a.COL_TRC_RESERVED0=0;a.COL_TRC_BT709=1;a.COL_TRC_UNSPECIFIED=2;a.COL_TRC_RESERVED=3;a.COL_TRC_GAMMA22=4;a.COL_TRC_GAMMA28=5;a.COL_TRC_SMPTE170M=6;a.COL_TRC_SMPTE240M=7;a.COL_TRC_LINEAR=8;a.COL_TRC_LOG=9;a.COL_TRC_LOG_SQRT=
10;a.COL_TRC_IEC61966_2_4=11;a.COL_TRC_BT1361_ECG=12;a.COL_TRC_IEC61966_2_1=13;a.COL_TRC_BT2020_10=14;a.COL_TRC_BT2020_12=15;a.COL_TRC_SMPTEST2084=16;a.COL_TRC_SMPTEST428_1=17;a.COL_TRC_ARIB_STD_B67=18;a.COL_TRC_NB=19;a.COL_SPC_RGB=0;a.COL_SPC_BT709=1;a.COL_SPC_UNSPECIFIED=2;a.COL_SPC_RESERVED=3;a.COL_SPC_FCC=4;a.COL_SPC_BT470BG=5;a.COL_SPC_SMPTE170M=6;a.COL_SPC_SMPTE240M=7;a.COL_SPC_YCOCG=8;a.COL_SPC_YCGCO=8;a.COL_SPC_BT2020_NCL=9;a.COL_SPC_BT2020_CL=10;a.COL_SPC_NB=11;a.COL_RANGE_UNSPECIFIED=0;
a.COL_RANGE_MPEG=1;a.COL_RANGE_JPEG=2;a.COL_RANGE_NB=2;a.CHROMA_LOC_UNSPECIFIED=0;a.CHROMA_LOC_LEFT=1;a.CHROMA_LOC_CENTER=2;a.CHROMA_LOC_TOPLEFT=3;a.CHROMA_LOC_TOP=4;a.CHROMA_LOC_BOTTOMLEFT=5;a.CHROMA_LOC_BOTTOM=6;a.CHROMA_LOC_NB=7;a.register=function(c,b){try{h.splice(b||h.length,0,c),a[c.prototype.kind]=c}catch(g){d.error("Failed to register codec "+c.prototype.kind+", Error="+g.message)}};a.get=function(a){for(var b=0;b<h.length;b++)if(a=h[b],a.prototype.kind===a)return a;return null};e.codec=
a.get;e.Codec=a})(playease);
(function(e){function d(c){b.call(this,"AAC",p,[g.ERROR]);var d=this,e;d.parse=function(b){if(1>b.left())d.dispatchEvent(g.ERROR,{name:"DataError",message:"Data not enough while parsing AAC packet."});else{n.Timestamp=b.timestamp;var c=new DataView(b.payload.buffer);b.set("DataType",c.getUint8(b.position++));b.set("CTS",0);switch(b.get("DataType")){case k.SPECIFIC_CONFIG:a:if(2>b.left())d.dispatchEvent(g.ERROR,{name:"DataError",message:"Data not enough while parsing AAC specific config."});else{e=
new h(b.payload.subarray(b.position));d.AudioObjectType=e.ReadBits(5);d.AudioObjectType===r.ESCAPE&&(d.AudioObjectType=32+e.ReadBits(6));d.SamplingFrequencyIndex=e.ReadBits(4);d.SamplingFrequency=15===d.SamplingFrequencyIndex?e.ReadBits(24):f[d.SamplingFrequencyIndex];d.ChannelConfiguration=e.ReadBits(4);16>d.ChannelConfiguration&&(d.Channels=t[d.ChannelConfiguration]);if(d.AudioObjectType===r.SBR||d.AudioObjectType===r.PS&&0===(e.ShowBits(3)&3)&&0===(e.ShowBits(9)&63))switch(d.ExtensionSamplingFrequencyIndex=
e.ReadBits(4),d.ExtensionSamplingFrequency=15===d.ExtensionSamplingFrequencyIndex?e.ReadBits(24):f[d.ExtensionSamplingFrequencyIndex],d.ExtensionAudioObjectType=e.ReadBits(5),d.ExtensionAudioObjectType){case r.ESCAPE:d.ExtensionAudioObjectType=32+e.ReadBits(6);break;case r.ER_BSAC:d.ExtensionChannelConfiguration=e.ReadBits(4)}else d.ExtensionAudioObjectType=r.NULL,d.ExtensionSamplingFrequency=0;if(d.AudioObjectType===r.ALS){e.ShowBits(5);4279379!==e.ShowBitsLong(24)&&e.SkipBits(24);try{if(112>e.Left())throw{name:"DataError",
message:"Data not enough while parsing ALS config."};if(1095521024!==e.ReadBitsLong(32))throw{name:"TypeError",message:"Not ALS\\0"};d.SamplingFrequency=e.ReadBitsLong(32);e.SkipBits(32);d.ChannelConfiguration=0;d.Channels=e.ReadBits(16)+1}catch(y){a.error("Failed to parse AAC config ALS.");d.dispatchEvent(g.ERROR,{name:y.name,message:y.message});break a}}d.RefSampleDuration=Math.floor(1024*n.Timescale/d.SamplingFrequency);d.AudioObjectType=r.SBR;d.ExtensionSamplingFrequencyIndex=d.SamplingFrequencyIndex;
6<=d.SamplingFrequencyIndex?d.ExtensionSamplingFrequencyIndex-=3:1===d.ChannelConfiguration&&(d.AudioObjectType=r.AAC_LC);d.Config=d.AudioObjectType===r.SBR?new Uint8Array([d.AudioObjectType<<3|d.SamplingFrequencyIndex>>1,d.SamplingFrequencyIndex<<7|d.ChannelConfiguration<<3|d.ExtensionSamplingFrequencyIndex>>1,d.ExtensionSamplingFrequencyIndex<<7|8,0]):new Uint8Array([d.AudioObjectType<<3|d.SamplingFrequencyIndex>>1,d.SamplingFrequencyIndex<<7|d.ChannelConfiguration<<3]);d.Codec="mp4a.40."+d.AudioObjectType;
d.dispatchEvent(p.AAC_SPECIFIC_CONFIG)}break;case k.RAW_FRAME_DATA:b.set("DTS",n.TimeBase+n.Timestamp);b.set("PTS",b.get("DTS"));b.set("Data",b.payload.subarray(b.position));d.dispatchEvent(p.AAC_SAMPLE,{packet:b});break;default:d.dispatchEvent(g.ERROR,{name:"TypeError",message:"Unrecognized AAC packet type: "+d.DataType})}}};var n=c;d.MimeType="audio/mp4";d.Codec="";d.RefSampleDuration=Math.floor(1024*n.Timescale/44100);d.AudioObjectType=0;d.SamplingFrequencyIndex=0;d.SamplingFrequency=0;d.ChannelConfiguration=
0;d.Channels=0;d.ExtensionAudioObjectType=0;d.ExtensionSamplingFrequencyIndex=0;d.ExtensionSamplingFrequency=0;d.ExtensionChannelConfiguration=0;d.Config=null;d.ExpectedDts=0;d.Flags={IsLeading:0,SampleDependsOn:1,SampleIsDependedOn:0,SampleHasRedundancy:0,IsNonSync:0}}var a=e.utils,h=a.Golomb,c=e.events,b=c.EventDispatcher,g=c.Event,p=c.MediaEvent;e=e.AV.Codec;var k={SPECIFIC_CONFIG:0,RAW_FRAME_DATA:1},r={NULL:0,AAC_MAIN:1,AAC_LC:2,AAC_SSR:3,AAC_LTP:4,SBR:5,AAC_SCALABLE:6,TWINVQ:7,CELP:8,HVXC:9,
TTSI:12,MAINSYNTH:13,WAVESYNTH:14,MIDI:15,SAFX:16,ER_AAC_LC:17,ER_AAC_LTP:19,ER_AAC_SCALABLE:20,ER_TWINVQ:21,ER_BSAC:22,ER_AAC_LD:23,ER_CELP:24,ER_HVXC:25,ER_HILN:26,ER_PARAM:27,SSC:28,PS:29,SURROUND:30,ESCAPE:31,L1:32,L2:33,L3:34,DST:35,ALS:36,SLS:37,SLS_NON_CORE:38,ER_AAC_ELD:39,SMR_SIMPLE:40,SMR_MAIN:41,USAC_NOSBR:42,SAOC:43,LD_SURROUND:44,USAC:45},f=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],t=[0,1,2,3,4,5,6,8];c=[new Uint8Array([0,200,0,128,35,128]),new Uint8Array([33,
0,73,144,2,25,0,35,128]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])];d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="AAC";d.DataTypes=k;d.AOT=r;d.SamplingFrequencys=f;d.Channels=t;d.SilentFrames=c;e.register(d)})(playease);
(function(e){function d(e){c.call(this,"AVC",g,[b.ERROR]);var f=this;f.parse=function(d){if(4>d.left())f.dispatchEvent(b.ERROR,{name:"DataError",message:"Data not enough while parsing AVC packet."});else{r.Timestamp=d.timestamp;var c=new DataView(d.payload.buffer);d.set("DataType",c.getUint8(d.position++));d.set("CTS",c.getUint8(d.position++)<<16|c.getUint8(d.position++)<<8|c.getUint8(d.position++));switch(d.get("DataType")){case p.SEQUENCE_HEADER:a:if(7>d.left())f.dispatchEvent(b.ERROR,{name:"DataError",
message:"Data not enough while parsing AVC decoder configuration record."});else{f.AVCC=d.payload.subarray(d.position);c=0;var l=new DataView(d.payload.buffer,d.position);f.ConfigurationVersion=l.getUint8(c++);f.ProfileIndication=l.getUint8(c++);f.ProfileCompatibility=l.getUint8(c++);f.LevelIndication=l.getUint8(c++);if(1!==f.ConfigurationVersion||0===f.ProfileIndication)f.dispatchEvent(b.ERROR,{name:"DataError",message:"Invalid AVC configuration version or profile."});else if(f.NalLengthSize=(l.getUint8(c++)&
3)+1,3>f.NalLengthSize)f.dispatchEvent(b.ERROR,{name:"DataError",message:"Invalid NalLengthSize "+f.NalLengthSize});else{for(var n=l.getUint8(c++)&31,t=0;t<n;t++){var x=l.getUint16(c);c+=2;if(0!==x){var y=f.AVCC.subarray(c,c+x);try{f.SPS.parse(y),f.RefSampleDuration=Math.floor(r.Timescale*e.FrameRate.Den/e.FrameRate.Num)}catch(L){f.dispatchEvent(b.ERROR,{name:L.name,message:L.message});break a}c+=x}}n=l.getUint8(c++);for(t=0;t<n;t++)x=l.getUint16(c),c+=2,0!==x&&(c+=x);f.Codec=f.SPS.Codec;f.dispatchEvent(g.AVC_CONFIG_RECORD,
{packet:d})}}break;case p.NALU:a:{c=0;l=new DataView(d.payload.buffer,d.position);t=d.payload.subarray(d.position);n=[];d.set("DTS",r.TimeBase+r.Timestamp);d.set("PTS",d.get("CTS")+d.get("DTS"));d.set("Data",t);for(d.set("NALUs",n);c<l.byteLength;){if(c+4>=l.byteLength){f.dispatchEvent(h.ERROR,{name:"DataError",message:"Data not enough for next NALU."});break a}x=l.getUint32(c);3===f.NalLengthSize&&(x>>=8);c+=f.NalLengthSize;if(x>l.byteLength-f.NalLengthSize){f.dispatchEvent(h.ERROR,{name:"DataError",
message:"Malformed Nalus near timestamp "+d.get("DTS")+"."});break a}d.set("ForbiddenZeroBit",l.getUint8(c)>>7&1);d.set("NalRefIdc",l.getUint8(c)>>5&3);d.set("NalUnitType",l.getUint8(c)&31);d.get("NalUnitType")===k.IDR_SLICE&&d.set("Keyframe",!0);y=t.subarray(c,c+x);c+=x;n.push(y)}f.dispatchEvent(g.AVC_SAMPLE,{packet:d})}break;case p.END_OF_SEQUENCE:a.debug("AVC sequence end.");f.dispatchEvent(g.END_OF_STREAM);break;default:f.dispatchEvent(b.ERROR,{name:"TypeError",message:"Unrecognized AVC packet type: "+
d.get("DataType")})}}};var r=e;f.MimeType="video/mp4";f.Codec="";f.RefSampleDuration=Math.floor(r.Timescale*e.FrameRate.Den/e.FrameRate.Num);f.AVCC=null;f.ConfigurationVersion=0;f.ProfileIndication=0;f.ProfileCompatibility=0;f.LevelIndication=0;f.NalLengthSize=0;f.SPS=new d.SPS(r);f.PPS=new d.PPS(f.SPS);f.ExpectedDts=0;f.Flags={IsLeading:0,SampleDependsOn:0,SampleIsDependedOn:0,SampleHasRedundancy:0,IsNonSync:0}}var a=e.utils,h=e.events,c=h.EventDispatcher,b=h.Event,g=h.MediaEvent;e=e.AV.Codec;var p=
{SEQUENCE_HEADER:0,NALU:1,END_OF_SEQUENCE:2},k={SLICE:1,DPA:2,DPB:3,DPC:4,IDR_SLICE:5,SEI:6,SPS:7,PPS:8,AUD:9,END_SEQUENCE:10,END_STREAM:11,FILLER_DATA:12,SPS_EXT:13,AUXILIARY_SLICE:19,FF_IGNORE:267448321};d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="AVC";d.DataTypes=p;d.NAL=k;e.register(d)})(playease);
(function(e){function d(){var a=this,b;a.parse=function(d){b=d;a.CpbCnt=b.ReadUE()+1;if(32<a.CpbCnt)throw{name:"DataError",message:"Invalid HRD.CpbCnt "+a.CpbCnt+"."};a.BitRateScale=b.ReadBits(4);a.CpbSizeScale=b.ReadBits(4);for(d=0;d<a.CpbCnt;d++)a.BitRateValue[d]=b.ReadUE(),a.CpbSizeValue[d]=b.ReadUE(),a.CbrFlag|=b.ReadBits(1)<<d;a.InitialCpbRemovalDelayLength=_b.ReadBits(5)+1;a.CpbRemovalDelayLength=b.ReadBits(5)+1;a.DpbOutputDelayLength=b.ReadBits(5)+1;a.TimeOffsetLength=b.ReadBits(5)};a.CpbCnt=
0;a.BitRateScale=0;a.CpbSizeScale=0;a.BitRateValue=Array(32);a.CpbSizeValue=Array(32);a.CbrFlag=0;a.InitialCpbRemovalDelayLength=0;a.CpbRemovalDelayLength=0;a.DpbOutputDelayLength=0;a.TimeOffsetLength=0}function a(){var a=this,c;a.parse=function(b){c=b;a.AspectRatioInfoPresentFlag=c.ReadBits(1);if(0!==a.AspectRatioInfoPresentFlag)if(a.AspectRatioIdc=c.ReadBits(8),255===a.AspectRatioIdc)a.Sar.Num=c.ReadBits(16),a.Sar.Den=c.ReadBits(16);else if(a.AspectRatioIdc<p.length)a.Sar=p[a.AspectRatioIdc];else throw{name:"DataError",
message:"Illegal aspect ratio."};else a.Sar.Num=0,a.Sar.Den=0;a.OverscanInfoPresentFlag=c.ReadBits(1);0!==a.OverscanInfoPresentFlag&&(a.OverscanAppropriateFlag=c.ReadBits(1));a.VideoSignalTypePresentFlag=c.ReadBits(1);0!==a.VideoSignalTypePresentFlag&&(a.VideoFormat=c.ReadBits(3),a.VideoFullRangeFlag=c.ReadBits(1),a.ColourDescriptionPresentFlag=c.ReadBits(1),0!==a.ColourDescriptionPresentFlag&&(a.ColourPrimaries=c.ReadBits(8),a.TransferCharacteristics=c.ReadBits(8),a.MatrixCoefficients=c.ReadBits(8),
a.ColourPrimaries>=g.COL_PRI_NB&&(a.ColourPrimaries=g.COL_PRI_UNSPECIFIED),a.TransferCharacteristics>=g.COL_TRC_NB&&(a.TransferCharacteristics=g.COL_TRC_UNSPECIFIED),a.MatrixCoefficients>=g.COL_SPC_NB&&(a.MatrixCoefficients=g.COL_SPC_UNSPECIFIED)));a.ChromaLocInfoPresentFlag=c.ReadBits(1);0!==a.ChromaLocInfoPresentFlag&&(a.ChromaSampleLocTypeTopField=c.ReadUE(),a.ChromaSampleLocTypeBottomField=c.ReadUE());if(0!==c.ReadBits(1)&&10>c.Left())throw{name:"DataError",message:"Truncated VUI."};a.TimingInfoPresentFlag=
c.ReadBits(1);if(0!==a.TimingInfoPresentFlag){a.NumUnitsInTick=c.ReadBitsLong(32);a.TimeScale=c.ReadBitsLong(32);if(0===a.NumUnitsInTick||0===a.TimeScale)h.debug("time_scale/num_units_in_tick invalid or unsupported "+a.TimeScale+"/"+a.NumUnitsInTick),a.TimingInfoPresentFlag=0;a.FixedFrameRateFlag=c.ReadBits(1)}a.NalHrdParametersPresentFlag=c.ReadBits(1);0!==a.NalHrdParametersPresentFlag&&a.NalHrd.parse(c);a.VclHrdParametersPresentFlag=c.ReadBits(1);0!==a.VclHrdParametersPresentFlag&&a.VclHrd.parse(c);
if(0!==a.NalHrdParametersPresentFlag||0!==a.VclHrdParametersPresentFlag)a.LowDelayHrdFlag=c.ReadBits(1);a.PicStructPresentFlag=c.ReadBits(1);if(0!==c.Left()&&(a.BitstreamRestrictionFlag=c.ReadBits(1),0!==a.BitstreamRestrictionFlag&&(a.MotionVectorsOverPicBoundariesFlag=c.ReadBits(1),a.MaxBytesPerPicDenom=c.ReadUE(),a.MaxBitsPerMbDenom=c.ReadUE(),a.Log2MaxMvLengthHorizontal=c.ReadUE(),a.Log2MaxMvLengthVertical=c.ReadUE(),a.MaxNumReorderFrames=c.ReadUE(),a.MaxDecFrameBuffering=c.ReadUE(),0>c.Left()&&
(a.MaxNumReorderFrames=0,a.BitstreamRestrictionFlag=0),16<a.MaxNumReorderFrames)))throw a.MaxNumReorderFrames=16,{name:"DataError",message:"Clipping illegal MaxNumReorderFrames "+a.MaxNumReorderFrames+"."};};a.AspectRatioInfoPresentFlag=0;a.AspectRatioIdc=0;a.Sar=new b;a.OverscanInfoPresentFlag=0;a.OverscanAppropriateFlag=0;a.VideoSignalTypePresentFlag=0;a.VideoFormat=0;a.VideoFullRangeFlag=0;a.ColourDescriptionPresentFlag=0;a.ColourPrimaries=0;a.TransferCharacteristics=0;a.MatrixCoefficients=0;a.ChromaLocInfoPresentFlag=
0;a.ChromaSampleLocTypeTopField=0;a.ChromaSampleLocTypeBottomField=0;a.TimingInfoPresentFlag=0;a.NumUnitsInTick=0;a.TimeScale=0;a.FixedFrameRateFlag=0;a.NalHrdParametersPresentFlag=0;a.NalHrd=new d;a.VclHrdParametersPresentFlag=0;a.VclHrd=new d;a.LowDelayHrdFlag=0;a.PicStructPresentFlag=0;a.BitstreamRestrictionFlag;a.MotionVectorsOverPicBoundariesFlag=0;a.MaxBytesPerPicDenom=0;a.MaxBitsPerMbDenom=0;a.Log2MaxMvLengthHorizontal=0;a.Log2MaxMvLengthVertical=0;a.MaxNumReorderFrames=0;a.MaxDecFrameBuffering=
0}var h=e.utils,c=h.Golomb;e=e.AV;var b=e.Rational,g=e.Codec;e=g.AVC;var p=[new b(0,1),new b(1,1),new b(12,11),new b(10,11),new b(16,11),new b(40,33),new b(24,11),new b(20,11),new b(32,11),new b(80,33),new b(18,11),new b(15,11),new b(64,33),new b(160,99),new b(4,3),new b(3,2),new b(2,1)];e.SPS=function(b){function d(a,b){return 0!==a&&0!==b&&(a+128)*(b+128)<h.MAX_INT32/8}var f=this,e;f.parse=function(a){if(4>a.byteLength)throw{name:"DataError",message:"Data not enough while parsing SPS."};f.Codec=
"avc1.";h.forEach(a.subarray(1,4),function(a,b){a=h.padStart(b.toString(16),2,"0");f.Codec+=a});a=h.ebsp2rbsp(a);e=new c(a);f.Data=a;e.ReadBits(8);f.ProfileIdc=e.ReadBits(8);f.ConstraintSetFlags=e.ReadBits(1)<<0;f.ConstraintSetFlags|=e.ReadBits(1)<<1;f.ConstraintSetFlags|=e.ReadBits(1)<<2;f.ConstraintSetFlags|=e.ReadBits(1)<<3;f.ConstraintSetFlags|=e.ReadBits(1)<<4;f.ConstraintSetFlags|=e.ReadBits(1)<<5;f.ReservedZero2Bits=e.ReadBits(2);f.LevelIdc=e.ReadBits(8);f.ID=e.ReadUE();if(32<=f.ID)throw{name:"DataError",
message:"SPS ID(0x"+f.ID.toString(16)+") out of range."};f.SeqScalingMatrixPresentFlag=0;f.Vui.VideoFullRangeFlag=1;f.Vui.MatrixCoefficients=g.COL_SPC_UNSPECIFIED;if(100===f.ProfileIdc||110===f.ProfileIdc||122===f.ProfileIdc||244===f.ProfileIdc||44===f.ProfileIdc||83===f.ProfileIdc||86===f.ProfileIdc||118===f.ProfileIdc||128===f.ProfileIdc||138===f.ProfileIdc||144===f.ProfileIdc){f.ChromaFormatIdc=e.ReadUE();if(3<f.ChromaFormatIdc)throw{name:"DataError",message:"Bad ChromaFormatIdc "+f.ChromaFormatIdc+
"."};if(3===f.ChromaFormatIdc&&(f.SeparateColourPlaneFlag=e.ReadBits(1),0!==f.SeparateColourPlaneFlag))throw{name:"DataError",message:"Separate color planes are not supported."};f.BitDepthLuma=e.ReadUE()+8;f.BitDepthChroma=e.ReadUE()+8;if(f.BitDepthChroma!==f.BitDepthLuma)throw{name:"DataError",message:"Different chroma and luma bit depth."};if(8>f.BitDepthLuma||14<f.BitDepthLuma||8>f.BitDepthChroma||14<f.BitDepthChroma)throw{name:"DataError",message:"Illegal bit depth value "+f.BitDepthLuma+", "+
f.BitDepthChroma+"."};f.TransformBypass=e.ReadBits(1);f.SeqScalingMatrixPresentFlag=e.ReadBits(1);if(0!==f.SeqScalingMatrixPresentFlag){a=8;3===f.ChromaFormatIdc&&(a+=4);for(var k=0;k<a;k++)if(0!=e.ReadBits(1)){var l=16;6<=k&&(l=64);for(var n=8,r=8,x=0;x<l;x++)r=e.ReadSE(),r=(n+r+256)%256,0!==r&&(n=r)}}}else f.ChromaFormatIdc=1,f.BitDepthLuma=8,f.BitDepthChroma=8;f.Log2MaxFrameNum=e.ReadUE()+4;if(4>f.Log2MaxFrameNum||16<f.Log2MaxFrameNum)throw{name:"DataError",message:"log2_max_frame_num_minus4("+
(f.Log2MaxFrameNum-4)+") out of range, expect 0-12."};f.PocType=e.ReadUE();if(0===f.PocType){if(f.Log2MaxPocLsb=e.ReadUE()+4,16<f.Log2MaxPocLsb)throw{name:"DataError",message:"log2_max_poc_lsb("+f.Log2MaxPocLsb+") is out of range."};}else if(1===f.PocType){f.DeltaPicOrderAlwaysZeroFlag=e.ReadBits(1);f.OffsetForNonRefPic=e.ReadUE();f.OffsetForTopToBottomField=e.ReadUE();f.NumRefFramesInPocCycle=e.ReadUE();a=f.OffsetForRefFrame.length;if(f.NumRefFramesInPocCycle>=a)throw{name:"DataError",message:"poc_cycle_length("+
f.NumRefFramesInPocCycle+") overflow."};for(k=0;k<f.NumRefFramesInPocCycle;k++)f.OffsetForRefFrame[k]=e.ReadUE()}else if(2!==f.PocType)throw{name:"DataError",message:"Illegal POC type "+f.PocType+"."};f.MaxNumRefFrames=e.ReadUE();if(34<f.MaxNumRefFrames||16<f.MaxNumRefFrames)throw{name:"DataError",message:"Too many reference frames, "+f.MaxNumRefFrames+"."};f.GapsInFrameNumValueAllowedFlag=e.ReadBits(1);f.PicWidth=e.ReadUE()+1;f.PicHeight=e.ReadUE()+1;if(f.PicWidth>=h.MAX_INT32/16||f.PicHeight>=h.MAX_INT32/
16||0==d(16*f.PicWidth,16*f.PicHeight))throw{name:"DataError",message:"pic_width or pic_height overflow."};f.FrameMbsOnlyFlag=e.ReadBits(1);f.MbAdaptiveFrameFieldFlag=0===f.FrameMbsOnlyFlag?e.ReadBits(1):0;b.CodecWidth=16*f.PicWidth;b.CodecHeight=16*f.PicHeight*(2-f.FrameMbsOnlyFlag);f.Direct8x8InferenceFlag=e.ReadBits(1);f.FrameCroppingFlag=e.ReadBits(1);if(0!==f.FrameCroppingFlag){var y;a=e.ReadUE();k=e.ReadUE();l=e.ReadUE();n=e.ReadUE();1===f.ChromaFormatIdc&&(y=1);if(1===f.ChromaFormatIdc||2===
f.ChromaFormatIdc)var p=1;p=1<<p;y=2-f.FrameMbsOnlyFlag<<y;if(a>h.MAX_INT32/4/p||k>h.MAX_INT32/4/p||l>h.MAX_INT32/4/y||n>h.MAX_INT32/4/y||(a+k)*p>=b.CodecWidth||(l+n)*y>=b.CodecHeight)throw{name:"DataError",message:"Invalid crop values, l="+a+", r="+k+", t="+l+", b="+n+", w="+b.CodecWidth+", h="+b.CodecHeight+"."};f.FrameCropLeftOffset=a*p;f.FrameCropRightOffset=k*p;f.FrameCropTopOffset=l*y;f.FrameCropBottomOffset=n*y}else f.FrameCropLeftOffset=0,f.FrameCropRightOffset=0,f.FrameCropTopOffset=0,f.FrameCropBottomOffset=
0;f.VuiParametersPresentFlag=e.ReadBits(1);0!==f.VuiParametersPresentFlag&&(f.Vui.parse(e),0!==f.Vui.TimingInfoPresentFlag&&(b.FrameRate.Num=f.Vui.TimeScale,b.FrameRate.Den=2*f.Vui.NumUnitsInTick));b.CodecWidth-=f.FrameCropLeftOffset+f.FrameCropRightOffset;b.CodecHeight-=f.FrameCropTopOffset+f.FrameCropBottomOffset;b.Width=b.CodecWidth;b.Height=b.CodecHeight;1<f.Vui.Sar.Den&&(b.Width*=f.Vui.Sar.Num/f.Vui.Sar.Den)};f.ProfileIdc=0;f.ConstraintSetFlags=0;f.ReservedZero2Bits=0;f.LevelIdc=0;f.ID=0;f.ChromaFormatIdc=
0;f.SeparateColourPlaneFlag=0;f.BitDepthLuma=0;f.BitDepthChroma=0;f.TransformBypass=0;f.SeqScalingMatrixPresentFlag=0;f.Log2MaxFrameNum=0;f.PocType=0;f.Log2MaxPocLsb=0;f.DeltaPicOrderAlwaysZeroFlag=0;f.OffsetForNonRefPic=0;f.OffsetForTopToBottomField=0;f.NumRefFramesInPocCycle=0;f.OffsetForRefFrame=Array(256);f.MaxNumRefFrames=0;f.GapsInFrameNumValueAllowedFlag=0;f.PicWidth=0;f.PicHeight=0;f.FrameMbsOnlyFlag=0;f.MbAdaptiveFrameFieldFlag=0;f.Direct8x8InferenceFlag=0;f.FrameCroppingFlag=0;f.FrameCropLeftOffset=
0;f.FrameCropRightOffset=0;f.FrameCropTopOffset=0;f.FrameCropBottomOffset=0;f.VuiParametersPresentFlag=0;f.Vui=new a}})(playease);
(function(e){var d=e.utils,a=d.Golomb;e.AV.Codec.AVC.PPS=function(e){var c=this,b;c.parse=function(e){e=d.ebsp2rbsp(e);b=new a(e);c.Data=e;c.ID=b.ReadUE();if(256<=c.ID)throw{name:"DataError",message:"PPS ID(0x"+c.ID.toString(16)+") out of range."};c.SpsID=b.ReadUE();if(32<=c.SpsID)throw{name:"DataError",message:"SPS ID(0x"+c.SpsID.toString(16)+") out of range."};if(14<g.BitDepthLuma)throw{name:"DataError",message:"Invalid BitDepthLuma "+g.BitDepthLuma+"."};if(11===g.BitDepthLuma||13===g.BitDepthLuma)throw{name:"DataError",
message:"Unimplemented BitDepthLuma "+g.BitDepthLuma+"."};c.EntropyCodingModeFlag=b.ReadBits(1);c.PicOrderPresentFlag=b.ReadBits(1);c.NumSliceGroups=b.ReadUE()+1;1<c.NumSliceGroups&&(c.SliceGroupMapType=b.ReadUE(),d.debug("FMO not supported!"));c.NumRefIdx[0]=b.ReadUE()+1;c.NumRefIdx[1]=b.ReadUE()+1;if(31<c.NumRefIdx[0]-1||31<c.NumRefIdx[1]-1)throw{name:"DataError",message:"PPS reference overflow."};e=6*(g.BitDepthLuma-8);c.WeightedPredFlag=b.ReadBits(1);c.WeightedBipredIdc=b.ReadBits(2);c.PicInitQp=
b.ReadSE()+26+e;c.PicInitQs=b.ReadSE()+26+e;c.ChromaQpIndexOffset[0]=b.ReadSE();c.DeblockingFilterControlPresentFlag=b.ReadBits(1);c.ConstrainedIntraPredFlag=b.ReadBits(1);c.RedundantPicCntPresentFlag=b.ReadBits(1);c.Transform8x8ModeFlag=0;if(e=0<b.Left())66!==g.ProfileIdc&&77!==g.ProfileIdc&&88!==g.ProfileIdc||0===(g.ConstraintSetFlags&7)?e=!0:(d.debug("Current profile doesn't provide more RBSP data in PPS, skipping..."),e=!1);e?(c.Transform8x8ModeFlag=b.ReadBits(1),c.PicScalingMatrixPresentFlag=
b.ReadBits(1),0!==c.PicScalingMatrixPresentFlag&&(e=2,3===g.ChromaFormatIdc&&(e=6),b.ReadBits(6+e*c.Transform8x8ModeFlag)),c.ChromaQpIndexOffset[1]=b.ReadSE()):c.ChromaQpIndexOffset[1]=c.ChromaQpIndexOffset[0];c.ChromaQpIndexOffset[0]!==c.ChromaQpIndexOffset[1]&&(c.ChromaQpDiff=1)};var g=e;c.ID=0;c.SpsID=0;c.EntropyCodingModeFlag=0;c.PicOrderPresentFlag=0;c.NumSliceGroups=0;c.SliceGroupMapType=0;c.NumRefIdx=Array(2);c.WeightedPredFlag=0;c.WeightedBipredIdc=0;c.PicInitQp=0;c.PicInitQs=0;c.ChromaQpIndexOffset=
Array(2);c.DeblockingFilterControlPresentFlag=0;c.ConstrainedIntraPredFlag=0;c.RedundantPicCntPresentFlag=0;c.Transform8x8ModeFlag=0;c.PicScalingMatrixPresentFlag=0;c.ChromaQpDiff=0}})(playease);
(function(e){function d(a,b){c.call(this,"MediaStreamTrack");var e=this;e.stop=function(){};e.clone=function(){return new d(e.kind,e.source)};e.id=0;e.sn=0;e.kind=a;e.source=b}var a=e.utils,h=e.events,c=h.EventDispatcher,b=h.Event,g=h.MediaStreamTrackEvent;e=e.AV;var p=e.Information,k={},r=[];k.register=function(b,c){try{r.splice(c||r.length,0,b),k[b.prototype.kind]=b}catch(A){a.error("Failed to register format "+b.prototype.kind+", Error="+A.message)}};k.get=function(a){for(var b=0;b<r.length;b++){var c=
r[b];if(c.prototype.kind===a)return c}return null};d.KindAudio="audio";d.KindVideo="video";k.MediaStreamTrack=d;k.MediaStream=function(){c.call(this,"MediaStream",g,[b.ERROR]);var e=this;e.addTrack=function(b){for(var c=0;c<h.length;c++)if(h[c]===b){a.warn("MediaStreamTrack already added.");return}b.id=k++;h.push(b);e.dispatchEvent(g.ADDTRACK,{track:b})};e.removeTrack=function(a){for(var b=0;b<h.length;b++)if(h[b]===a){h.splice(b,1);e.dispatchEvent(g.REMOVETRACK,{track:a});break}};e.getTrackById=
function(a){for(var b=0;b<h.length;b++)if(h[b].id===a)return h[b];return null};e.getTracks=function(){var b=[];a.forEach(h,function(a,c){b.push(c)});return b};e.getAudioTracks=function(){var b=[];a.forEach(h,function(a,c){c.kind===d.KindAudio&&b.push(c)});return b};e.getVideoTracks=function(){var b=[];a.forEach(h,function(a,c){c.kind===d.KindVideo&&b.push(c)});return b};e.close=function(){a.forEach(h,function(a,b){b.stop();e.dispatchEvent(g.REMOVETRACK,{track:b})});k=1;h=[];e.info=new p};var k=1;
var h=[];e.info=new p};e.format=k.get;e.Format=k})(playease);
(function(e){function d(){b.call(this,"FMP4");var a=this;a.append=function(b){a.dispatchEvent(h.ERROR,{name:"NotSupportedError",message:"The operation is not supported."})};a.getInitSegment=function(){var b=a.ftyp(),c=a.moov.apply(a,arguments);return d.merge(b,c)};a.getSegment=function(b,e){var f=b.source,g=e.get("DTS")-a.info.TimeBase-f.ExpectedDts;e.set("DTS",f.ExpectedDts);e.set("PTS",e.get("CTS")+e.get("DTS"));e.set("Duration",f.RefSampleDuration+g);f.ExpectedDts=e.get("DTS")+e.get("Duration");
b.kind===c.KindVideo&&(e.get("Keyframe")?(f.Flags.SampleDependsOn=2,f.Flags.SampleIsDependedOn=1):(f.Flags.SampleDependsOn=1,f.Flags.SampleIsDependedOn=0));b.sn++;b=a.moof(b,e);e=a.mdat(e.get("Data"));return d.merge(b,e)};a.box=function(a){for(var b=Array.prototype.slice.call(arguments,1),c=8,d=0;d<b.length;d++)c+=b[d].byteLength;var e=0,f=new Uint8Array(c);f[e++]=c>>>24&255;f[e++]=c>>>16&255;f[e++]=c>>>8&255;f[e++]=c&255;f.set(a,e);e+=4;for(d=0;d<b.length;d++)f.set(b[d],e),e+=b[d].byteLength;return f};
a.ftyp=function(){return a.box(g.ftyp,k)};a.moov=function(){for(var b=[],c=[],d=a.mvhd(),e=Array.prototype.slice.call(arguments,0),f=0;f<e.length;f++){var l=e[f],k=a.trak(l);l=a.trex(l);b.push(k);c.push(l)}c=a.box.apply(a,[g.mvex].concat(c));return a.box.apply(a,[g.moov].concat([d],b,[c]))};a.mvhd=function(){var b=a.info.Timescale,c=1E3*a.info.Duration;return a.box(g.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255,c>>24&255,c>>16&255,c>>8&255,c&255,0,1,0,0,1,0,0,0,
0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))};a.trak=function(b){var c=a.tkhd(b);b=a.mdia(b);return a.box(g.trak,c,b)};a.tkhd=function(b){b=b.id;var c=1E3*a.info.Duration,d=a.info.Width,e=a.info.Height;return a.box(g.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255,0,0,0,0,c>>24&255,c>>16&255,c>>8&255,c&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,d>>8&255,d&255,0,0,e>>8&255,e&255,0,0]))};a.mdia=function(b){var c=a.mdhd(),d=a.hdlr(b);b=a.minf(b);return a.box(g.mdia,c,d,b)};a.mdhd=function(){var b=a.info.Timescale,c=1E3*a.info.Duration;return a.box(g.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255,c>>24&255,c>>16&255,c>>8&255,c&255,85,196,0,0]))};a.hdlr=function(b){return a.box(g.hdlr,b.kind===c.KindAudio?f:r)};a.minf=function(b){var d=b.kind===c.KindAudio?
a.box(g.smhd,z):a.box(g.vmhd,n);var e=a.dinf();b=a.stbl(b);return a.box(g.minf,d,e,b)};a.dinf=function(){var b=a.box(g.dref,p);return a.box(g.dinf,b)};a.stbl=function(b){b=a.stsd(b);var c=a.box(g.stts,A),d=a.box(g.stsc,q),e=a.box(g.stsz,l),f=a.box(g.stco,STCO);return a.box(g.stbl,b,c,d,e,f)};a.stsd=function(b){return b.kind===c.KindAudio?a.box(g.stsd,t,a.mp4a(b)):a.box(g.stsd,t,a.avc1(b))};a.mp4a=function(b){var c=b.source.SamplingFrequency;c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,b.source.ChannelConfiguration,
0,16,0,0,0,0,c>>>8&255,c&255,0,0]);b=a.esds(b);return a.box(g.mp4a,c,b)};a.esds=function(b){b=b.source.Config;var c=b.byteLength;c=new Uint8Array([0,0,0,0,3,23+c,0,1,0,4,15+c,64,21,0,0,0,0,0,0,0,0,0,0,0,5,c]);return a.box(g.esds,c,b,new Uint8Array([6,1,2]))};a.avc1=function(b){var c=a.info.CodecWidth,d=a.info.CodecHeight;c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,115,112,101,110,99,101,114,108,97,117,47,112,108,
97,121,101,97,115,101,46,106,115,0,0,0,0,0,0,0,0,0,0,24,255,255]);b=a.box(g.avcC,b.source.AVCC);return a.box(g.avc1,c,b)};a.trex=function(b){b=b.id;return a.box(g.trex,new Uint8Array([0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))};a.moof=function(b,c){var d=a.mfhd(b);b=a.traf(b,c);return a.box(g.moof,d,b)};a.mfhd=function(b){b=b.sn;b=new Uint8Array([0,0,0,0,b>>24&255,b>>16&255,b>>8&255,b&255]);return a.box(g.mfhd,b)};a.traf=function(b,c){var d=b.id,e=c.get("DTS");d=
a.box(g.tfhd,new Uint8Array([0,0,0,0,d>>24&255,d>>16&255,d>>8&255,d&255]));e=a.box(g.tfdt,new Uint8Array([0,0,0,0,e>>24&255,e>>16&255,e>>8&255,e&255]));c=a.trun(b,c);b=a.sdtp(b);return a.box(g.traf,d,e,c,b)};a.trun=function(b,c){var d=c.get("Duration"),e=c.get("Data").byteLength;b=b.source.Flags;c=c.get("CTS");return a.box(g.trun,new Uint8Array([0,0,15,1,0,0,0,1,0,0,0,121,d>>24,d>>16,d>>8,d,e>>24,e>>16,e>>8,e,b.IsLeading<<2|b.SampleDependsOn,b.SampleIsDependedOn<<6|b.SampleHasRedundancy<<4|b.IsNonSync,
0,0,c>>24,c>>16,c>>8,c]))};a.sdtp=function(b){b=b.source.Flags;return a.box(g.sdtp,new Uint8Array([0,0,0,0,b.IsLeading<<6|b.SampleDependsOn<<4|b.SampleIsDependedOn<<2|b.SampleHasRedundancy]))};a.mdat=function(b){return a.box(g.mdat,b)};a.reset=function(){a.close()}}var a=e.utils,h=e.events.Event;e=e.AV.Format;var c=e.MediaStreamTrack,b=e.MediaStream,g={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],
stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),k=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),f=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,
0]),t=new Uint8Array([0,0,0,0,0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0]),q=STCO=A,l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),n=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),z=new Uint8Array([0,0,0,0,0,0,0,0]);a.forEach(g,function(a,b){b.push(a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3))});d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="FMP4";d.merge=function(){for(var a=Array.prototype.slice.call(arguments,0),b=0,c=0;c<a.length;c++)b+=a[c].byteLength;
var d=0;b=new Uint8Array(b);for(c=0;c<a.length;c++)b.set(a[c],d),d+=a[c].byteLength;return b};d.parseDescriptor=function(a){a=new Uint8Array(a);for(var b=0,c={},d,e=0;e<a.byteLength;e++)switch(b){case 0:d={type:a[e],size:0,data:void 0};c[d.type]=d;b=1;break;case 1:case 2:case 3:case 4:var f=a[e];d&&(d.size=d.size<<7|f&127);f&128?b++:b=5;break;case 5:d&&(d.data=a.subarray(e,e+d.size),e+=d.size-1);b=0;break;default:throw{name:"InvalidStateError",message:"Invalid state while parsing fmp4 descriptor."};
}return c};e.FMP4=d})(playease);(function(e){var d=e.utils,a={},h=[];a.register=function(c,b){try{h.splice(b||h.length,0,c),a[c.prototype.kind]=c}catch(g){d.error("Failed to register module "+c.prototype.kind+", Error="+g.message)}};a.get=function(a,b){for(var c=0;c<h.length;c++){var d=h[c];if(d.prototype.isSupported(a,b))return d}return null};e.module=a.get;e.Module=a})(playease);
(function(e){function d(b){g.call(this,"SRC",p,k);var c=this,d;c.setup=function(){!1===e&&(e=!0,c.dispatchEvent(p.READY,{kind:c.kind}))};c.play=function(b,e){"string"===a.typeof(b)&&b!==d&&b!==h.src&&(d=b,h.src=b);if(b=h.play())b["catch"](function(b){switch(b.name){case "AbortError":c.dispatchEvent(p.STALLED,{name:b.name,message:b.message});break;case "NotAllowedError":a.warn("Failed to play due to the autoplay policy, trying to play with muted.");h.muted=!0;h.play();break;default:a.error("Unrecognized error occured, "+
b.name+": "+b.message),c.dispatchEvent(p.STALLED,{name:b.name,message:b.message})}});h.controls=!1};c.pause=function(){h.pause();h.controls=!1};c.seek=function(a){h.currentTime=a;c.play()};c.stop=function(){e=!1;d=void 0;h.removeAttribute("src");h.load();h.currentTime=0;h.controls=!1};c.reload=function(){h.load();h.controls=!1};c.muted=function(b){"boolean"===a.typeof(b)&&(h.muted=b);return h.muted};c.volume=function(b){"number"===a.typeof(b)&&(h.volume=b);return h.volume};c.cleanup=function(){c.stop();
e=!1};c.element=function(){return h};c.config=b;var e=!1;var h=a.createElement("video");h.addEventListener("play",c.forward);h.addEventListener("suspend",c.forward);h.addEventListener("loadstart",c.forward);h.addEventListener("stalled",c.forward);h.addEventListener("waiting",c.forward);h.addEventListener("abort",c.forward);h.addEventListener("timeout",c.forward);h.addEventListener("durationchange",function(a){c.dispatchEvent(p.DURATIONCHANGE,{duration:h.duration})});h.addEventListener("loadedmetadata",
c.forward);h.addEventListener("loadeddata",c.forward);h.addEventListener("progress",c.forward);h.addEventListener("canplay",c.forward);h.addEventListener("playing",c.forward);h.addEventListener("canplaythrough",c.forward);h.addEventListener("pause",c.forward);h.addEventListener("seeking",c.forward);h.addEventListener("seeked",c.forward);h.addEventListener("ratechange",c.forward);h.addEventListener("timeupdate",function(a){a=h.buffered;c.dispatchEvent(p.TIMEUPDATE,{time:h.currentTime,buffered:a.length?
a.end(a.length-1):0,duration:h.duration})});h.addEventListener("volumechange",c.forward);h.addEventListener("load",c.forward);h.addEventListener("ended",c.forward);h.addEventListener("error",c.forward);h.muted=c.config.muted;h.volume=c.config.volume;c.config.airplay&&h.setAttribute("x-webkit-airplay","allow");c.config.playsinline&&(h.setAttribute("playsinline","isiPhoneShowPlaysinline"),h.setAttribute("webkit-playsinline","isiPhoneShowPlaysinline"),h.setAttribute("x5-playsinline",""),h.setAttribute("x5-video-player-type",
"h5-page"),h.setAttribute("x5-video-player-fullscreen",!0),h.setAttribute("t7-video-player-type","inline"),h.setAttribute("x-webkit-airplay",""));c.config.preload&&(h.preload="none")}var a=e.utils,h=e.OS,c=e.Browser,b=e.events,g=b.EventDispatcher,p=b.Event,k=b.IOEvent;e=e.Module;d.prototype=Object.create(g.prototype);d.prototype.constructor=d;d.prototype.kind="SRC";d.prototype.isSupported=function(b,d){if(c.isMSIE&&9>c.major)return!1;b=new a.URL(b);if("http:"!==b.protocol&&"https:"!==b.protocol)return!1;
d="m3u8 m3u hls mp4 f4v m4v mov m4a f4a aac ogv ogg mp3 oga webm".split(" ");var e="mp4 f4v m4v mov m4a f4a aac ogv ogg mp3 oga webm".split(" ");d=h.isMobile||h.isMac?d:e;for(e=0;e<d.length;e++)if(b.filetype===d[e])return!0;return!1};e.register(d)})(playease);
(function(e){function d(c){function d(b){a.log("MediaSource.onsourceopen");u.load(w)}function h(b){a.log("MediaSource.onsourceended")}function x(b){a.log("MediaSource.onsourceclose")}function G(b){a.log("MediaSource.onsourceerror");m.dispatchEvent(g.ERROR,{name:err.name,message:err.message})}function D(){u&&(u.removeEventListener(p.SUSPEND,H),u.removeEventListener(p.LOADSTART,m.forward),u.removeEventListener(p.STALLED,H),u.removeEventListener(p.ABORT,H),u.removeEventListener(p.TIMEOUT,H),u.removeEventListener(p.PROGRESS,
O),u.removeEventListener(p.LOAD,m.forward),u.removeEventListener(p.LOADEND,m.forward),u.abort());var b=e.io(w,m.config.mode);if(null==b)throw{name:"NotSupportedError",message:"No supported io found."};u=new b(w,m.config.mode);u.addEventListener(p.SUSPEND,H);u.addEventListener(p.LOADSTART,m.forward);u.addEventListener(p.STALLED,H);u.addEventListener(p.ABORT,H);u.addEventListener(p.TIMEOUT,H);u.addEventListener(p.PROGRESS,O);u.addEventListener(p.LOAD,m.forward);u.addEventListener(p.LOADEND,m.forward);
a.log(u.kind+" loader initialized.")}function O(b){a.debug("progress: "+b.data.loaded+"/"+b.data.total);B.append(b.data.buffer);m.forward(b)}function H(a){m.cleanup();m.forward(a)}function M(a){a.table.audiodatarate&&(B.info.AudioDataRate=a.table.audiodatarate.get());a.table.audiosamplerate&&(B.info.AudioSampleRate=a.table.audiosamplerate.get());a.table.audiosamplesize&&(B.info.AudioSampleSize=a.table.audiosamplesize.get());a.table.videodatarate&&(B.info.VideoDataRate=a.table.videodatarate.get());
a.table.width&&(B.info.Width=a.table.width.get());a.table.height&&(B.info.Height=a.table.height.get());a.table.framerate&&(B.info.FrameRate.Num=a.table.framerate.get(),B.info.FrameRate.Den=1);a.table.duration&&(B.info.Duration=a.table.duration.get());a.table.filesize&&(B.info.Size=a.table.filesize.get())}function R(a){a=I.getVideoTracks()[0];T(a);var b=I.getInitSegment(a);_segments[a.kind].push(b);P(a.kind)}function S(a){a=I.getAudioTracks()[0];T(a);var b=I.getInitSegment(a);_segments[a.kind].push(b);
P(a.kind)}function U(a){var b=I.getVideoTracks()[0];a=I.getSegment(b,a.data.packet);_segments[b.kind].push(a);P(b.kind)}function V(a){var b=I.getAudioTracks()[0];a=I.getSegment(b,a.data.packet);_segments[b.kind].push(a);P(b.kind)}function W(a){J=!0}function T(b){var c=b.source;c=c.MimeType+'; codecs="'+c.Codec+'"';if(!1===MediaSource.isTypeSupported(c))a.warn(c+" not supported!");else if(a.log(c),"closed"===E.readyState)m.dispatchEvent(g.ERROR,{name:"InvalidStateError",message:"MediaSource is already closed while adding SourceBuffer."});
else try{var d=E.addSourceBuffer(c);d.addEventListener("updateend",X);d.addEventListener("error",K);d.mode="sequence";d.kind=b.kind;C[b.kind]=d}catch(Q){a.error(Q.name+": "+Q.message)}}function P(b){if(B.hasAudio||B.hasVideo)if(B.hasAudio&&!C[l.KindAudio]||B.hasVideo&&!C[l.KindVideo])return;var c=_segments[b];if(c.length&&(b=C[b])&&!b.updating)try{var d=c.shift();b.appendBuffer(d)}catch(Q){a.error(Q.name+": "+Q.message),m.dispatchEvent(g.ERROR,{name:Q.name,message:Q.message})}}function X(b){a.debug("SourceBuffer.onupdateend");
b=b.target;var c=v.buffered;c.length&&(c=c.start(0),v.currentTime<c&&(v.currentTime=c));if(J){if("open"!==E.readyState)return;if(!_segments[l.KindAudio].length&&!_segments[l.KindVideo].length){E.endOfStream();return}}P(b.kind)}function K(b){a.error("SourceBuffer.onerror");m.dispatchEvent(g.ERROR,{name:"DataError",message:"SourceBuffer error occurs."})}b.call(this,"FLV",g,p);var m=this,N,u;m.setup=function(){!1===N&&(N=!0,m.dispatchEvent(g.READY,{kind:m.kind}))};m.play=function(b,c){if("string"===
a.typeof(b)&&b!==w.href){try{w.parse(b)}catch(Y){a.error('Failed to parse url "'+b+'".');m.dispatchEvent(g.ERROR,{name:Y.name,message:Y.message});return}J=!1;B.reset();I.reset();I.info=B.info;D();v.src=URL.createObjectURL(E);v.load()}if(b=v.play())b["catch"](function(b){switch(b.name){case "AbortError":m.dispatchEvent(g.ERROR,{name:b.name,message:b.message});break;case "NotAllowedError":a.warn("Failed to play due to the autoplay policy, trying to play with muted.");v.muted=!0;v.play();break;default:a.error("Unrecognized error occured, "+
b.name+": "+b.message),m.dispatchEvent(g.ERROR,{name:b.name,message:b.message})}});v.controls=!1};m.pause=function(){v.pause();v.controls=!1};m.seek=function(a){v.currentTime=a;m.play()};m.stop=function(){u&&u.abort();a.forEach(C,function(a,b){b&&E.removeSourceBuffer(b);C[a]=null});a.forEach(_segments,function(a,b){_segments[a]=[]});N=!1;w=new a.URL;v.removeAttribute("src");v.load();v.currentTime=0;v.controls=!1};m.reload=function(){var a=w.href;m.stop();m.play(a)};m.muted=function(b){"boolean"===
a.typeof(b)&&(v.muted=b);return v.muted};m.volume=function(b){"number"===a.typeof(b)&&(v.volume=b);return v.volume};m.cleanup=function(){m.stop();N=!1};m.element=function(){return v};m.config=c;var J=N=!1;var w=new a.URL;var C={};C[l.KindAudio]=null;C[l.KindVideo]=null;_segments={};_segments[l.KindAudio]=[];_segments[l.KindVideo]=[];new a.FileKeeper;var E=new (window.MediaSource||window.WebKitMediaSource);E.addEventListener("sourceopen",d);E.addEventListener("sourceended",h);E.addEventListener("sourceclose",
x);E.addEventListener("error",G);E.addEventListener("webkitsourceopen",d);E.addEventListener("webkitsourceended",h);E.addEventListener("webkitsourceclose",x);E.addEventListener("webkiterror",G);var B=new q.FLV;B.addEventListener(k.PACKET,function(b){b=b.data.packet;switch(b.kind){case t.KindVideo:if(b.get("Codec")!==z.AVC){m.dispatchEvent(g.ERROR,{name:"NotSupportedError",message:"Video codec "+a.hex(b.get("Codec"))+" not supported."});break}var c=B.getVideoTracks()[0];if(b.get("DataType")===A.AVC.DataTypes.SEQUENCE_HEADER){if(c){a.warn("Video track already exists, ignored.");
break}c=new A.AVC(B.info);c=new l(l.KindVideo,c);B.addTrack(c)}c.source.parse(b);break;case t.KindAudio:if(b.get("Format")!==n.AAC){m.dispatchEvent(g.ERROR,{name:"NotSupportedError",message:"Audio format "+a.hex(b.get("Format"))+" not supported."});break}c=B.getAudioTracks()[0];if(b.get("DataType")===A.AAC.DataTypes.SPECIFIC_CONFIG){if(c){a.warn("Audio track already exists, ignored.");break}c=new A.AAC(B.info);c=new l(l.KindAudio,c);B.addTrack(c)}c.source.parse(b);break;case t.KindScript:c=new f.Value;
var d=f.decode(c,b.payload.buffer,b.position);c.key=c.get();d+=f.decode(c,b.payload.buffer,b.position+d);var e={};a.forEach(c.get(),function(a,b){e[b.key]=b.get()});a.log(c.key+":",e);"onMetaData"===c.key&&M(c);break;default:a.error("Unrecognized flv tag "+a.hex(b.kind)+".")}});B.addEventListener(r.ADDTRACK,function(a){a=a.data.track.clone();a.source.addEventListener(k.AVC_CONFIG_RECORD,R);a.source.addEventListener(k.AAC_SPECIFIC_CONFIG,S);a.source.addEventListener(k.AVC_SAMPLE,U);a.source.addEventListener(k.AAC_SAMPLE,
V);a.source.addEventListener(k.END_OF_STREAM,W);a.source.addEventListener(g.ERROR,m.forward);I.addTrack(a)});B.addEventListener(r.REMOVETRACK,function(a){a=I.getTrackById(a.data.track.id);a.source.removeEventListener(k.AVC_CONFIG_RECORD,R);a.source.removeEventListener(k.AAC_SPECIFIC_CONFIG,S);a.source.removeEventListener(k.AVC_SAMPLE,U);a.source.removeEventListener(k.AAC_SAMPLE,V);a.source.removeEventListener(k.END_OF_STREAM,W);a.source.removeEventListener(g.ERROR,m.forward);a.stop();I.removeTrack(a)});
B.addEventListener(g.ERROR,m.forward);var I=new q.FMP4;I.addEventListener(g.ERROR,m.forward);var v=a.createElement("video");v.addEventListener("play",m.forward);v.addEventListener("suspend",m.forward);v.addEventListener("loadstart",m.forward);v.addEventListener("stalled",m.forward);v.addEventListener("waiting",m.forward);v.addEventListener("abort",m.forward);v.addEventListener("timeout",m.forward);v.addEventListener("durationchange",function(a){m.dispatchEvent(g.DURATIONCHANGE,{duration:v.duration})});
v.addEventListener("loadedmetadata",m.forward);v.addEventListener("loadeddata",m.forward);v.addEventListener("progress",m.forward);v.addEventListener("canplay",m.forward);v.addEventListener("playing",m.forward);v.addEventListener("canplaythrough",m.forward);v.addEventListener("pause",m.forward);v.addEventListener("seeking",m.forward);v.addEventListener("seeked",m.forward);v.addEventListener("ratechange",m.forward);v.addEventListener("timeupdate",function(a){a=v.buffered;m.dispatchEvent(g.TIMEUPDATE,
{time:v.currentTime,buffered:a.length?a.end(a.length-1):0,duration:v.duration})});v.addEventListener("volumechange",m.forward);v.addEventListener("load",m.forward);v.addEventListener("ended",m.forward);v.addEventListener("error",m.forward);v.muted=m.config.muted;v.volume=m.config.volume;m.config.airplay&&v.setAttribute("x-webkit-airplay","allow");m.config.playsinline&&(v.setAttribute("playsinline","isiPhoneShowPlaysinline"),v.setAttribute("webkit-playsinline","isiPhoneShowPlaysinline"),v.setAttribute("x5-playsinline",
""),v.setAttribute("x5-video-player-type","h5-page"),v.setAttribute("x5-video-player-fullscreen",!0),v.setAttribute("t7-video-player-type","inline"),v.setAttribute("x-webkit-airplay",""));m.config.preload&&(v.preload="none")}var a=e.utils,h=e.Browser,c=e.events,b=c.EventDispatcher,g=c.Event,p=c.IOEvent,k=c.MediaEvent,r=c.MediaStreamTrackEvent,f=a.AMF;c=e.AV;var t=c.Packet,A=c.Codec,q=c.Format,l=q.MediaStreamTrack,n=q.FLV.Formats,z=q.FLV.Codecs;c=e.Module;d.prototype=Object.create(b.prototype);d.prototype.constructor=
d;d.prototype.kind="FLV";d.prototype.isSupported=function(b,c){if(h.isMSIE&&9>h.major||!window.MediaSource&&!window.WebKitMediaSource)return!1;b=new a.URL(b);if("http:"!==b.protocol&&"https:"!==b.protocol&&"ws:"!==b.protocol&&"wss:"!==b.protocol)return!1;c=["flv","",void 0];for(var d=0;d<c.length;d++)if(b.filetype===c[d])return!0;return!1};c.register(d)})(playease);(function(e){e.core={}})(playease);
(function(e){function d(c){var b=this,d,h,k;b.definition=function(c){"number"===a.typeof(c)&&c!==h&&c<b.config.sources.length&&(a.log("Model definition changed: "+c),h=c);return isNaN(h)?null:b.config.sources[h]};b.duration=function(c){"number"===a.typeof(c)&&c!==k&&(a.log("Model duration changed: "+c),k=c,b.config.mode=Infinity===c?"live":"vod");return k};b.state=function(c){"string"===a.typeof(c)&&c!==d&&(a.log("playease("+b.config.id+") state changed: "+c),d=c);return d};(function(){b.config=c;
d="";k=NaN;"array"!==a.typeof(b.config.sources)&&(b.config.sources=[]);b.config.file&&(b.config.sources=[{file:b.config.file,module:b.config.module}]);h=b.config.sources.length?0:NaN;for(var g=0;g<b.config.sources.length;g++){var f=b.config.sources[g];null==e.module(f.file,b.config.mode)?(a.warn("Source file("+f.file+") not supported."),b.config.sources.splice(g--,1)):f.default&&(h=g)}0===b.config.sources.length&&a.warn("No supported source[s] provided.")})()}var a=e.utils,h=e.core;d.prototype.constructor=
d;h.Model=d})(playease);
(function(e){function d(d,h){c.call(this,"View",b,g);var f=this,k;f.setup=function(b){if(void 0!==k){k.cleanup();if(k.kind===b){k.setup();return}k.removeGlobalListener(f.forward);r.innerHTML=""}try{k=new p[b](q.config),k.addGlobalListener(f.forward),r.appendChild(k.element()),k.setup()}catch(n){a.error("Failed to init module "+b+". "+n.name+": "+n.message)}};f.play=function(a,c){void 0!==k&&k.isSupported(a,q.config.mode)?k.play(a,c):(a=e.module(a,q.config.mode),null==a?f.dispatchEvent(b.ERROR,{name:"NotSupportedError",
message:"Not supported."}):f.setup(a.prototype.kind))};f.pause=function(){k&&k.pause()};f.seek=function(a){k&&k.seek(a)};f.stop=function(){k&&k.stop()};f.reload=function(){k&&k.reload()};f.muted=function(a){return k?k.muted(a):q.config.muted};f.volume=function(a){return k?k.volume(a):q.config.volume};f.definition=function(c){"number"===a.typeof(c)&&c!==q.definition()&&(c<q.config.sources.length?(q.definition(c),f.dispatchEvent(b.SWITCHING,{index:c})):f.dispatchEvent(b.ERROR,{name:"IndexSizeError",
message:"The index is not in the allowed range."}));return q.definition()};f.onSWFState=function(a){switch(a.state){case "buffering":f.dispatchEvent(b.WAITING);break;case "playing":f.dispatchEvent(b.PLAYING);break;case "paused":f.dispatchEvent(b.PAUSE);break;case "stopped":f.dispatchEvent(b.ENDED);break;case "error":f.dispatchEvent(b.ERROR,{name:err.name,message:"Flash plugin error occured."});break;default:f.dispatchEvent(b.ERROR,{name:"InvalidStateError",message:"Invalid state "+a.state+"."})}};
f.element=function(){return k?k.element():null};f.resize=function(a,b){};var r=d;var q=h}var a=e.utils,h=e.events,c=h.EventDispatcher,b=h.Event,g=h.IOEvent,p=e.Module;h=e.core;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;h.View=d})(playease);
(function(e){function d(d,e){function k(a){q.state(a.type);f.forward(a)}c.call(this,"Controller",b,g);var f=this,h,p;f.play=function(a,c){h=a;p=c;if(void 0===h){a=q.definition();if(null==a||!a.file){f.dispatchEvent(b.ERROR,{name:"NotFoundError",message:"No source found."});return}h=a.file;p=a}l.play(h,p)};var q=d;var l=e;l.addEventListener(b.READY,function(b){a.log("playease("+d.config.id+') module "'+b.data.kind+'" is ready.');k(b);f.play(h,p)});l.addEventListener(b.PLAY,k);l.addEventListener(g.SUSPEND,
f.forward);l.addEventListener(g.LOADSTART,f.forward);l.addEventListener(g.STALLED,f.forward);l.addEventListener(b.WAITING,k);l.addEventListener(g.ABORT,f.forward);l.addEventListener(g.TIMEOUT,f.forward);l.addEventListener(b.DURATIONCHANGE,function(a){q.duration(a.data.duration);f.forward(a)});l.addEventListener(b.LOADEDMETADATA,f.forward);l.addEventListener(b.LOADEDDATA,f.forward);l.addEventListener(g.PROGRESS,f.forward);l.addEventListener(b.CANPLAY,f.forward);l.addEventListener(b.PLAYING,k);l.addEventListener(b.CANPLAYTHROUGH,
f.forward);l.addEventListener(b.PAUSE,k);l.addEventListener(b.SEEKING,k);l.addEventListener(b.SEEKED,f.forward);l.addEventListener(b.SWITCHING,function(b){var c=q.definition();a.log("Switching definition "+b.data.index+": "+c.file);var d=0,e=l.element();e&&(d=e.currentTime);k(b);f.play(c.file,c);l.seek(d)});l.addEventListener(b.SWITCHED,f.forward);l.addEventListener(b.RATECHANGE,f.forward);l.addEventListener(b.TIMEUPDATE,f.forward);l.addEventListener(b.VOLUMECHANGE,f.forward);l.addEventListener(g.LOAD,
f.forward);l.addEventListener(b.ENDED,k);l.addEventListener(b.ERROR,function(b){a.error(b.data.name+": "+b.data.message);l.stop();k(b)})}var a=e.utils,h=e.events,c=h.EventDispatcher,b=h.Event,g=h.IOEvent;e=e.core;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;e.Controller=d})(playease);
(function(e){function d(b){function c(){d.play=h.play;d.pause=f.pause;d.seek=f.seek;d.stop=f.stop;d.reload=f.reload;d.muted=f.muted;d.volume=f.volume;d.definition=f.definition;d.element=f.element;d.duration=function(){return e.duration()};d.state=function(){return e.state()};d.dispatchEvent(p.BIND)}g.call(this,"API",p,k);var d=this,e,f,h;d.setup=function(b,g){d.config=a.extendz({id:d.id},t,g);e=new r.Model(d.config);f=new r.View(b,e);h=new r.Controller(e,f);h.addGlobalListener(d.forward);c();d.config.autoplay&&
h.play()};d.id=b}var a=e.utils,h=e.OS,c=e.Browser,b=e.events,g=b.EventDispatcher,p=b.Event,k=b.IOEvent,r=e.core,f={},t={airplay:"allow",autoplay:!1,dynamic:!1,bufferLength:.1,file:"",latency:"low",loop:!1,maxBufferLength:30,mode:"live",module:"",muted:!1,retries:0,retryInterval:3,playsinline:!0,preload:"none",smooth:!1,swf:"swf/playease.swf",volume:.8,loader:{name:"auto",mode:"cors",credentials:"omit"},sources:[]};a.log("Version: playease/"+e.VERSION);a.log("OS: "+h.name+"/"+h.version);a.log("Browser: "+
c.name+"/"+c.version);d.prototype=Object.create(g.prototype);d.prototype.constructor=d;d.prototype.CONF=t;d.get=function(a){void 0==a&&(a=0);var b=f[a];void 0==b&&(b=new d(a),f[a]=b);return b};e.API=d})(playease);
(function(e){function d(e){function g(){u=a.createElement("div","pe-wrapper pe-ui-"+m.config.skin);J=a.createElement("div","pe-content");u.appendChild(J);N.appendChild(u);a.forEach(m.config.plugins,function(b,c){if("function"!==a.typeof(d[c.kind]))a.error("Unrecognized plugin: index="+b+", kind="+c.kind+".");else if(!1===c.visibility)a.log("Component "+c.kind+"is disabled.");else{"Controlbar"!==c.kind||m.config.file||(c.sources=m.config.sources);try{var e=new d[c.kind](c);"function"===a.typeof(e.addGlobalListener)&&
e.addGlobalListener(G);u.appendChild(e.element());C[c.kind]=e}catch(Z){a.error("Failed to initialize plugin: index="+b+", kind="+c.kind+". Error="+Z.message)}}})}function n(){u.setAttribute("mode",m.config.mode);u.setAttribute("state","");var a=C.Controlbar;a?(u.setAttribute("controls",a.config.autohide?"motion":"always"),a.config.autohide&&u.addEventListener("mousemove",H)):u.setAttribute("controls","never");a=C.Danmu;u.setAttribute("danmu",a&&a.config.enable?"on":"off");u.setAttribute("muted",m.config.muted);
u.setAttribute("fullpage",!1);u.setAttribute("fullscreen",!1);C.ContextMenu&&(u.oncontextmenu=function(a){a=a||window.event;a.preventDefault?a.preventDefault():a.returnValue=!1;return!1},document.addEventListener("mouseup",M),u.addEventListener("mouseup",M),document.addEventListener("mousedown",R),u.addEventListener("mousedown",R))}function x(a){m.config=w.config;m.play=w.play;m.pause=w.pause;m.seek=w.seek;m.stop=w.stop;m.reload=w.reload;m.muted=w.muted;m.volume=w.volume;m.definition=w.definition;
m.element=w.element;m.duration=w.duration;m.state=w.state;m.forward(a)}function G(a){switch(a.type){case t.CHANGE:D(a);break;case A.CLICK:O(a)}}function D(a){var b={timebar:function(){var b=w.duration();b&&w.seek(b*a.data.value/100)},volumebar:function(){w.volume(a.data.value/100)},definition:function(){w.definition(parseInt(a.data.value))}}[a.data.name];b?b():m.forward(a)}function O(a){var b={play:m.play,pause:m.pause,stop:m.stop,reload:m.reload,mute:function(){m.muted(!0)},unmute:function(){m.muted(!1)},
danmuoff:function(){m.danmu(!1)},danmuon:function(){m.danmu(!0)},fullpage:function(){m.fullpage(!0)},exitfullpage:function(){m.fullpage(!1)},fullscreen:function(){m.fullscreen(!0)},exitfullscreen:function(){m.fullscreen(!1)}}[a.data.name];b?b():m.forward(a)}function H(a){(a=C.Controlbar)&&b.style(a.element(),{display:"block"});E.stop();E.start()}function M(a){var c=C.ContextMenu;if(void 0===a.currentTarget)for(var d=a.srcElement;d;d=d.offsetParent)if(d===u){a.currentTarget=u;break}if(2===a.button&&
a.currentTarget===u){var e=0,f=0;for(d=a.srcElement||a.target;d&&d!==u;d=d.offsetParent)e+=d.offsetLeft,f+=d.offsetTop;b.style(c.element(),{left:a.offsetX+e+"px",top:a.offsetY+f+"px",display:"block"});a.preventDefault?a.preventDefault():a.returnValue=!1;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;return!1}}function R(a){b.style(C.ContextMenu.element(),{display:"none"})}function S(a){K(a)}function U(a){a.type=k.ENDED;K(a)}function V(a){u.setAttribute("mode",m.config.mode);m.forward(a)}
function W(a){var b=C.Controlbar;b&&(b=b.components.definition)&&b.value(a.data.index);K(a)}function T(b){var c=C.Controlbar;if(c){var d=c.components.timebar;d&&(d.duration=b.data.duration,d.progress(isNaN(b.data.duration)?0:b.data.buffered/b.data.duration*100),d.position(isNaN(b.data.duration)?0:b.data.time/b.data.duration*100));if(c=c.components.time){d=a.time2string(b.data.time);var e=a.time2string(b.data.duration);c.text(d+"/"+e)}}m.forward(b)}function P(a){var b=100*a.srcElement.volume|0;u.setAttribute("muted",
a.srcElement.muted||!b);var c=C.Controlbar;c&&(c.resize(J.clientWidth,J.clientHeight),c=c.components.volumebar)&&(c.position(b),c.thumb(b));m.forward(a)}function X(a){K(a)}function K(a){u.setAttribute("state",a.type);m.resize();m.forward(a)}p.call(this,"UI",a.extendz({},k,r,f));var m=this,N,u,J,w;m.setup=function(b,c){N=b;"array"!==a.typeof(c.plugins)&&(c.plugins=[]);b=[];for(var d=0;d<z.plugins.length;d++){var e=z.plugins[d],f=e.prototype.CONF;a:{for(var h=0;h<c.plugins.length;h++){var p=c.plugins[h];
if(p.kind===e.prototype.kind){e=p;break a}}e=null}b.push(a.extendz({},f,e))}m.config=a.extendz({id:m.id},l.prototype.CONF,z,c);m.config.plugins=b;g();n();m.resize();w=l.get(m.id);w.addEventListener(k.BIND,x);w.addEventListener(k.READY,S);w.addEventListener(k.PLAY,K);w.addEventListener(r.SUSPEND,m.forward);w.addEventListener(r.LOADSTART,m.forward);w.addEventListener(r.STALLED,m.forward);w.addEventListener(k.WAITING,K);w.addEventListener(r.ABORT,U);w.addEventListener(r.TIMEOUT,m.forward);w.addEventListener(k.DURATIONCHANGE,
V);w.addEventListener(k.LOADEDMETADATA,m.forward);w.addEventListener(k.LOADEDDATA,m.forward);w.addEventListener(r.PROGRESS,m.forward);w.addEventListener(k.CANPLAY,m.forward);w.addEventListener(k.PLAYING,K);w.addEventListener(k.CANPLAYTHROUGH,m.forward);w.addEventListener(k.PAUSE,K);w.addEventListener(k.SEEKING,K);w.addEventListener(k.SEEKED,m.forward);w.addEventListener(k.SWITCHING,W);w.addEventListener(k.SWITCHED,m.forward);w.addEventListener(k.RATECHANGE,m.forward);w.addEventListener(k.TIMEUPDATE,
T);w.addEventListener(k.VOLUMECHANGE,P);w.addEventListener(r.LOAD,m.forward);w.addEventListener(k.ENDED,K);w.addEventListener(k.ERROR,X);w.setup(J,m.config)};m.danmu=function(a){u.setAttribute("danmu",a?"on":"off");var b=C.Controlbar;b&&b.resize(J.clientWidth,J.clientHeight);return(b=C.Danmu)?b.enable(a):!1};m.shoot=function(a,b){var c=C.Danmu;c&&(c.shoot(a,b),m.dispatchEvent(f.SHOOTING,{text:a,data:b}))};m.displayAD=function(a){var b=C.AD;b&&b.display(a)};m.removeAD=function(){var a=C.AD;a&&a.remove()};
m.fullpage=function(a){if(void 0==a)return"true"===u.getAttribute("fullpage");u.setAttribute("fullpage",!!a);m.resize();m.dispatchEvent(f.FULLPAGE,{status:a})};m.fullscreen=function(a){if(void 0==a)return"true"===u.getAttribute("fullscreen");if(a)if(u.requestFullscreen=u.requestFullscreen||u.webkitRequestFullScreen||u.mozRequestFullScreen||u.msRequestFullscreen,c.isMobile&&d.webkitEnterFullscreen){var d=w.element();d&&(d.setAttribute("x5-video-orientation","landscape"),d.webkitEnterFullscreen());
if(h.isIOS)return}else if(u.requestFullscreen)u.requestFullscreen();else{m.fullpage(a);return}else if(document.exitFullscreen=document.exitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen,document.exitFullscreen)(d=w.element())&&d.setAttribute("x5-video-orientation","portraint"),document.exitFullscreen();else{m.fullpage(a);return}if(d=C.Controlbar)b.style(d.element(),{display:"block"}),a?d.config.autohide||(u.setAttribute("controls","motion"),u.addEventListener("mousemove",
H)):d.config.autohide||(u.setAttribute("controls","always"),u.removeEventListener("mousemove",H),E.stop());u.setAttribute("fullscreen",!!a);m.resize();m.dispatchEvent(f.FULLSCREEN,{status:a})};m.resize=function(){var b=J.clientWidth,c=J.clientHeight;if(""!==m.config.aspectratio){var d=m.config.aspectratio.match(/(\d+):(\d+)/);if("array"===a.typeof(d)&&2<d.length){var e=parseInt(d[1]);d=parseInt(d[2]);c=b*d/e;"always"===u.getAttribute("controls")&&(c-=40)}}a.forEach(C,function(a,d){d.resize(b,c)});
m.dispatchEvent(f.RESIZE,{width:b,height:c})};m.id=e;var C={};var E=new a.Timer(3E3,1);E.addEventListener(q.TIMER,function(a){(a=C.Controlbar)&&b.style(a.element(),{display:"none"})})}var a=e.utils,h=e.OS,c=e.Browser,b=a.css,g=e.events,p=g.EventDispatcher,k=g.Event,r=g.IOEvent,f=g.UIEvent,t=g.GlobalEvent,A=g.MouseEvent,q=g.TimerEvent,l=e.API,n={},z={aspectratio:"",skin:"classic",plugins:[]};d.prototype=Object.create(p.prototype);d.prototype.constructor=d;d.prototype.CONF=z;d.register=function(b,c){try{z.plugins.splice(c||
z.plugins.length,0,b),d[b.prototype.kind]=b}catch(L){a.error("Failed to register plugin "+b.prototype.kind+", Error="+L.message)}};d.get=function(a){null==a&&(a=0);var b=n[a];void 0===b&&(b=new d(a),n[a]=b);return b};e.ui=d.get;e.UI=d})(playease);(function(e){e.UI.components={}})(playease);
(function(e){function d(d,e){c.call(this,"Button",[b.CLICK]);var g=this;g.element=function(){return h};g.resize=function(a,b){};var h=a.createElement("span","pe-button "+d);h.addEventListener("click",function(a){g.dispatchEvent(b.CLICK,{name:d})})}var a=e.utils,h=e.events,c=h.EventDispatcher,b=h.MouseEvent;e=e.UI.components;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="Button";e.Button=d})(playease);
(function(e){function d(c,b){h.call(this,"Label");this.text=function(a){void 0!==a&&(e.innerHTML=a);return d};this.element=function(){return e};this.resize=function(a,b){};var d=b;var e=a.createElement("span","pe-label "+c);e.innerHTML=d}var a=e.utils,h=e.events.EventDispatcher;e=e.UI.components;d.prototype=Object.create(h.prototype);d.prototype.constructor=d;d.prototype.kind="Label";e.Label=d})(playease);
(function(e){function d(){c.call(this,"Preview",[b.CLICK]);this.append=function(b,c,d){var f=a.createElement("img");f.setAttribute("min",c);f.setAttribute("max",d||NaN);f.src=b;e.appendChild(f)};this.element=function(){return d};this.resize=function(a,b){};var d=a.createElement("div","pe-tooltip preview");var e=a.createElement("div");d.appendChild(e)}var a=e.utils,h=e.events,c=h.EventDispatcher,b=h.MouseEvent;e=e.UI.components;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind=
"Preview";e.Preview=d})(playease);
(function(e){function d(c,d){function e(a){a=a.target.getAttribute("value");a!==p&&f.dispatchEvent(g.CHANGE,{name:k,value:a});z.style.visibility="hidden"}b.call(this,"Select",[g.CHANGE]);var f=this,k,p,q,l,n,z;f.append=function(b,c){var d=a.createElement("span","pe-select-menu-option");d.addEventListener("click",e);d.setAttribute("value",c||q.length);d.innerHTML=b;q.push(d);z.appendChild(d);1===q.length&&f.value(d.getAttribute("value"))};f.remove=function(a){for(var b=0;b<q.length;b++){var c=q[b];
if(c.getAttribute("value")===a){c.removeEventListener("click",e);z.removeChild(c);q.splice(b,1);p===a&&(p=q.length||NaN,n.innerHTML=q.length?q[0].innerHTML:_placeholder);break}}};f.value=function(a){switch(typeof a){case "number":case "string":for(var b=0;b<q.length;b++){var c=q[b];if(c.getAttribute("value")==a){p=a;n.innerHTML=c.innerHTML;l.setAttribute("value",a);f.resize();break}}}return p};f.element=function(){return l};f.resize=function(a,b){h.style(z,{left:(l.clientWidth-z.clientWidth)/2+"px"})};
(function(){k=c;p=NaN;q=[];l=a.createElement("div","pe-select "+k);n=a.createElement("span","pe-select-text");z=a.createElement("div","pe-select-menu");z.style.visibility="hidden";l.appendChild(n);l.appendChild(z);n.addEventListener("click",function(a){z.style.visibility="hidden"===z.style.visibility?"visible":"hidden"})})()}var a=e.utils,h=a.css,c=e.events,b=c.EventDispatcher,g=c.GlobalEvent;e=e.UI.components;d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="Select";
e.Select=d})(playease);
(function(e){function d(b,d){function e(a){a.button===(h.isIE8?1:0)&&(a.target||(a.target=a.srcElement),F===a.target||F===a.target.parentNode||F===a.target.parentNode.parentNode)&&(a=l(a.clientX,a.clientY),a!==L.getAttribute("value")&&n.dispatchEvent(p.CHANGE,{name:r,value:a}),y=!0)}function f(a){var b=l(a.clientX,a.clientY);F!==a.target&&F!==a.target.parentNode&&F!==a.target.parentNode.parentNode||n.dispatchEvent(k.MOUSE_MOVE,{name:r,value:b});y&&b!==L.getAttribute("value")&&n.dispatchEvent(p.CHANGE,
{name:r,value:b})}function q(a){y&&(a=l(a.clientX,a.clientY),a!==L.getAttribute("value")&&n.dispatchEvent(p.CHANGE,{name:r,value:a}),y=!1)}function l(a,b){for(var c=F;c;c=c.offsetParent)a-=c.offsetLeft,b-=c.offsetTop;a="horizontal"===x?(a/F.clientWidth*100).toFixed(3):(b/F.clientHeight*100).toFixed(3);return a=Math.max(0,Math.min(a,100))}g.call(this,"Slider",[p.CHANGE,k.MOUSE_MOVE]);var n=this;n.value=function(a){void 0!==a&&(G.innerHTML=a);return G.innerHTML};n.progress=function(a){c.style(O,{width:a+
"%"})};n.position=function(a){L.setAttribute("value",a);c.style(H,{width:a+"%"})};n.thumb=function(a){c.style(M,{left:a+"%"})};n.element=function(){return L};n.nonius=function(){return G};n.resize=function(a,b){};var r=b;var x="horizontal";var y=!1;var L=a.createElement("div","pe-slider "+r);var F=a.createElement("div","pe-slider-content");var G=a.createElement("span","pe-tooltip value");var D=a.createElement("span","pe-slider-rail background");var O=a.createElement("span","pe-slider-rail progress");
var H=a.createElement("span","pe-slider-rail position");var M=a.createElement("span","pe-slider-thumb");M.innerHTML="<span></span>";F.appendChild(G);F.appendChild(D);F.appendChild(O);F.appendChild(H);F.appendChild(M);L.appendChild(F);switch(b){case "timebar":n.value("--:--");break;case "volumebar":n.value(d),n.position(d),n.thumb(d)}try{document.addEventListener("mousedown",e),document.addEventListener("mousemove",f),document.addEventListener("mouseup",q)}catch(R){document.attachEvent("onmousedown",
e),document.attachEvent("onmousemove",f),document.attachEvent("onmouseup",q)}}var a=e.utils,h=e.Browser,c=a.css,b=e.events,g=b.EventDispatcher,p=b.GlobalEvent,k=b.MouseEvent;e=e.UI.components;d.prototype=Object.create(g.prototype);d.prototype.constructor=d;d.prototype.kind="Slider";d.HORIZONTAL="horizontal";d.VERTICAL="vertical";e.Slider=d})(playease);
(function(e){function d(c){function b(b){a.log('Failed to load poster "'+e.src+'".')}h.call(this,"Poster");this.element=function(){return d};this.resize=function(a,b){};this.config=c;var d=a.createElement("div","pe-poster");var e=new Image;e.onload=function(a){d.appendChild(e)};e.onabort=b;e.onerror=b;e.src=this.config.file}var a=e.utils,h=e.events.EventDispatcher;e=e.UI;d.prototype=Object.create(h.prototype);d.prototype.constructor=d;d.prototype.kind="Poster";d.prototype.CONF={kind:"Poster",file:"images/poster.png",
visibility:!0};e.register(d)})(playease);
(function(e){function d(d){c.call(this,"Danmu",[b.SHOOTING]);var e=this;e.enable=function(b){"boolean"===a.typeof(b)&&(e.config.enable=b);return e.config.enable};e.shoot=function(b,c){if(e.config.enable){c=p.measureText(b).width+10;var d=b.length,f=b.match(/([^x00-xff])/gi);b={text:b,width:c,weight:d+(f?f.length:0),ticks:0};c=h.length;f=d=0;for(var g=Math.floor(Math.random()*_random);g<_maxRow;g++){var k=h[g];if("array"!==a.typeof(k)||0==k.length||k.pushable>=b.weight){c=g;break}var l=_canvas.width-
(_canvas.width+b.width)*(_beats-k[k.length-1].ticks)/_beats;if(k.pushable&&0<=l){c=g;break}if(!f||k.weight<f)d=g,f=k.weight}c>=_maxRow&&(c=d);d=h[c];void 0===d&&(d=[],d.weight=0,h[c]=d);d.weight+=b.weight;d.pushable=0;d.push(b);A.start()}};e.element=function(){return f};e.resize=function(a,b){f.width=a;f.height=b};e.config=d;var h=[];var f=a.createElement("canvas","pe-danmu");var p=f.getContext("2d");p.font="bold "+e.config.fontSize+"px Microsoft YaHei,arial,sans-serif";p.fillStyle="#FFFFFF";p.globalAlpha=
e.config.alpha;p.textAlign="left";p.textBaseline="top";var A=new a.Timer(30);A.addEventListener(g.TIMER,function(b){p.clearRect(0,0,_canvas.width,_canvas.height);var c=!1;for(b=0;b<h.length;b++){var d=h[b];if("array"===a.typeof(d)&&0!==d.length)for(var f=_marginTop+b*e.config.lineHeight,g=0;g<d.length;g++){var k=d[g];k.ticks++>=_beats?(d.splice(g--,1),d.weight-=k.weight):(c=_canvas.width-(_canvas.width+k.width)*k.ticks/_beats,p.fillText(k.text,c,f),g===d.length-1&&c+k.width<=_canvas.width&&(d.pushable=
k.weight),c=!0)}}!1===c&&A.stop()})}var a=e.utils,h=e.events,c=h.EventDispatcher,b=h.UIEvent,g=h.TimerEvent;e=e.UI;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="Danmu";d.prototype.CONF={kind:"Danmu",fontSize:14,lineHeight:20,alpha:1,duration:10,salt:.5,enable:!0,visibility:!0};e.register(d)})(playease);
(function(e){function d(d){c.call(this,"Display",[b.CLICK]);this.element=function(){return e};this.resize=function(a,b){};this.config=d;var e=a.createElement("div","pe-display")}var a=e.utils,h=e.events,c=h.EventDispatcher,b=h.MouseEvent;e=e.UI;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="Display";d.prototype.CONF={kind:"Display",controls:!0,visibility:!0};e.register(d)})(playease);
(function(e){function d(c){h.call(this,"AD");this.display=function(a){b.innerHTML="";b.appendChild(a)};this.remove=function(){b.innerHTML=""};this.element=function(){return b};this.resize=function(a,b){};this.config=c;var b=a.createElement("div","pe-ad")}var a=e.utils,h=e.events.EventDispatcher;e=e.UI;d.prototype=Object.create(h.prototype);d.prototype.constructor=d;d.prototype.kind="AD";d.prototype.CONF={kind:"AD",visibility:!0};e.register(d)})(playease);
(function(e){function d(c){h.call(this,"Share");this.display=function(a){b.innerHTML="";b.appendChild(a)};this.element=function(){return b};this.resize=function(a,b){};this.config=c;var b=a.createElement("div","pe-share")}var a=e.utils,h=e.events.EventDispatcher;e=e.UI;d.prototype=Object.create(h.prototype);d.prototype.constructor=d;d.prototype.kind="Share";d.prototype.CONF={kind:"Share",visibility:!0};e.register(d)})(playease);
(function(e){function d(b){function d(b){a.log('Failed to load logo "'+r.src+'".')}c.call(this,"Logo");var e=this;e.element=function(){return k};e.resize=function(a,b){};e.config=b;var k=a.createElement("div","pe-logo");k.style=e.config.style;_logo=a.createElement("a");var r=new Image;r.onload=function(a){h.style(k,{width:r.width+"px",height:r.height+"px"});h.style(_logo,{background:"url("+e.config.file+")"});_logo.href=e.config.link;_logo.target=e.config.target;k.appendChild(_logo)};r.onabort=d;
r.onerror=d;r.src=e.config.file}var a=e.utils,h=a.css,c=e.events.EventDispatcher;e=e.UI;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="Logo";d.prototype.CONF={kind:"Logo",file:"http://studease.cn/images/content/playease-logo.png",link:"http://studease.cn/playease",target:"_blank",style:"margin: 3% 5%; width: 36px; height: 36px; top: 0px; right: 0px;",visibility:!0};e.register(d)})(playease);
(function(e){function d(c){function d(b){var c=b.target.element(),d=b.target.nonius(),e=c.clientWidth*b.data.value/100-d.clientWidth/2;switch(b.data.name){case "timebar":b.target.thumb(b.data.value);b.target.duration?b.target.value(a.time2string(b.target.duration*b.data.value/100)):b.target.value("--:--");break;case "volumebar":b.target.value(b.data.value|0)}b=e+c.offsetLeft;1>b&&c.offsetParent===l?h.style(d,{left:1-c.offsetLeft+"px",right:"auto"}):c.offsetParent.offsetLeft+b+d.clientWidth>l.clientWidth-
1?h.style(d,{left:"auto",right:c.offsetParent.offsetLeft+c.offsetLeft+c.clientWidth+1-l.clientWidth+"px"}):h.style(d,{left:e+"px",right:"auto"})}b.call(this,"Controlbar",[g.CHANGE,p.CLICK,p.MOUSE_MOVE]);var e=this;e.element=function(){return f};e.resize=function(b,c){a.forEach(e.components,function(a,d){d.resize(b,c);switch(a){case "timebar":break;default:if(void 0!==d.tooltip){a=d.element();d=d.tooltip;var e=(a.clientWidth-d.clientWidth)/2,f=e+a.offsetLeft;1>f&&a.offsetParent===l?h.style(d,{left:1-
a.offsetLeft+"px",right:"auto"}):null!==a.offsetParent&&(a.offsetParent.offsetLeft+f+d.clientWidth>l.clientWidth-1?h.style(d,{left:"auto",right:a.offsetParent.offsetLeft+a.offsetLeft+a.clientWidth+1-l.clientWidth+"px"}):h.style(d,{left:e+"px",right:"auto"}))}}})};e.config=c;e.components={};var f=a.createElement("div","pe-controlbar");var l=a.createElement("div");f.appendChild(l);(function(){var b=e.config.layout.split("|");if(4!==b.length)throw{name:"DataError",message:"Controlbar should have exactly 4 sections."};
var c=a.createElement("div","pe-left"),f=a.createElement("div","pe-center"),g=a.createElement("div","pe-right");a.forEach([l,c,f,g],function(c,f){for(var g;null!==(g=r.exec(b[c]));)a:{var h=void 0,l=void 0;var n=f;var q=g[1],t=g[2];g=g[3];switch(t){case "definition":if(!e.config.sources||2>e.config.sources.length)break a}try{l=new k[q](t,g),"function"===a.typeof(l.addGlobalListener)&&(l.addGlobalListener(e.forward),"Slider"===q&&l.addEventListener(p.MOUSE_MOVE,d)),h=l.element(),n.appendChild(h),e.components[t]=
l}catch(S){a.error("Failed to initialize component: type="+q+", name="+t+", Error="+S.message);break a}switch(t){case "quote":case "time":case "volumebar":break;default:void 0!==g&&("function"===a.typeof(k[g])?(n=new k[g],h.insertAdjacentElement("afterbegin",n.element())):(n=a.createElement("span","pe-tooltip"),n.innerHTML=g,h.insertAdjacentElement("afterbegin",n)),l.tooltip=n)}}});l.appendChild(c);l.appendChild(f);l.appendChild(g)})();(function(){var b=e.components.definition;b&&a.forEach(e.config.sources,
function(a,c){b.append(c.label);c.default&&b.value(a)})})()}var a=e.utils,h=a.css,c=e.events,b=c.EventDispatcher,g=c.GlobalEvent,p=c.MouseEvent;e=e.UI;var k=e.components,r=/\[([a-z]+):([a-z]+)=([^\]]+)?\]/gi;d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.kind="Controlbar";d.prototype.CONF={kind:"Controlbar",layout:"[Slider:timebar=Preview]|[Button:play=Play][Button:pause=Pause][Button:reload=Reload][Button:stop=Stop][Label:quote=Live broadcast][Label:time=00:00/00:00]||[Button:report=Report][Button:mute=Mute][Button:unmute=Unmute][Slider:volumebar=80][Select:definition=Definition][Button:danmuoff=Danmu Off][Button:danmuon=Danmu On][Button:fullpage=Fullpage][Button:exitfullpage=Exit Fullpage][Button:fullscreen=Fullscreen][Button:exitfullscreen=Exit Fullscreen]",
autohide:!1,visibility:!0};e.register(d)})(playease);
(function(e){function d(b){c.call(this,"ContextMenu");var d=this,g,r;d.element=function(){return g};d.resize=function(a,b){};(function(){d.config=b;d.config.items=[{id:0,mode:"featured",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA2UExURebm5ubm5ubm5ubm5ubm5ubm5ubm5kxpcebm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5rnvS8UAAAASdFJOU/9GGpAEVa0AOw0vovB5tnDaudiwhIIAAACiSURBVBjTXZHbAsQQDERDkQS97P//7GaibLfzgJxgIoiHVHIWvQPysRZylbpg2mhpSwOmgx46kkPf10KMoflewGqLLsNBugXVIDxuZhRuTGrJZmHIXhBuUEIuMC7pJ3I4R9nGyHzCY2eONmWHesMyoQyI3BXncRgZ1M+16zJCSbMRqyT4LriKt2calP9nWkMM7q+GcEo/OFvnGrDIo/Ov7/gCDPoHpWEsixcAAAAASUVORK5CYII=",text:"PLAYEASE "+
e.VERSION,shortcut:"",handler:function(){window.open("http://studease.cn/playease")}}].concat("array"===a.typeof(b.items)?b.items:[]);h.flash&&d.config.items.push({mode:"",icon:"",text:"Flash Version "+h.flash,shortcut:"",handler:function(){window.open("http://get.adobe.com/cn/flashplayer/about/")}});g=a.createElement("div","pe-contextmenu");r=a.createElement("table");g.appendChild(r);for(var c=0;c<d.config.items.length;c++){var k=d.config.items[c],p=a.createElement("tr","pe-contextmenu-item"+(k.mode?
" "+k.mode:""));p.onmousedown=k.handler;var q=a.createElement("td");if(k.icon){var l=a.createElement("span","pe-contextmenu-item-icon");l.innerHTML='<a style="background-image: url('+k.icon+');"></a>';q.appendChild(l)}var n=a.createElement("td");k.text&&(l=a.createElement("span","pe-contextmenu-item-text"),l.innerHTML=k.text,n.appendChild(l));var z=a.createElement("td");k.shortcut&&(l=a.createElement("span","pe-contextmenu-item-shortcut"),l.innerHTML=k.shortcut,z.appendChild(l));p.appendChild(q);
p.appendChild(n);p.appendChild(z);r.appendChild(p)}})()}var a=e.utils,h=e.Browser,c=e.events.EventDispatcher,b=e.UI;d.prototype=Object.create(c.prototype);d.prototype.constructor=d;d.prototype.kind="ContextMenu";d.prototype.CONF={kind:"ContextMenu",items:[],visibility:!0};b.register(d)})(playease);