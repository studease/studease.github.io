playease=function(){if(playease.API)return playease.API.get.apply(this,arguments)},playease.VERSION="2.1.34",playease.DEBUG=!1,function(a){var i={extendz:function(){var e=Array.prototype.slice.call(arguments,0),n=e[0];switch(i.typeOf(n)){case"null":case"number":case"string":throw{name:"TypeError",message:"Could not extend to type "+i.typeOf(n)+"."}}for(var t=1;t<e.length;t++){var r=e[t];switch(i.typeOf(r)){case"null":case"number":case"string":a.DEBUG&&i.warn("Could not extend from type "+i.typeOf(r));break;case"array":i.forEach(r,function(e,t){switch(i.typeOf(t)){case"object":n.push(i.extendz({},t));break;case"array":n.push(i.extendz([],t));break;default:"array"===i.typeOf(n)?n.push(t):n[e]=t}});break;default:i.forEach(r,function(e,t){switch(i.typeOf(t)){case"object":switch(i.typeOf(n[e])){case"null":case"number":case"string":n[e]={}}n[e]=i.extendz(n[e],t);break;case"array":n[e]=i.extendz([],t);break;default:n[e]=t}})}}return n},forEach:function(e,t){for(var n in e)(!e.hasOwnProperty||"function"!==i.typeOf(e.hasOwnProperty)||e.hasOwnProperty(n))&&t(n,e[n])},getCookie:function(e){e=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(e=document.cookie.match(e))?unescape(e[2]):null},padStart:function(e,t,n){for(e+="";e.length<t;)e=n+e;return e},padEnd:function(e,t,n){for(e+="";e.length<t;)e+=n;return e},hex:function(e){return"0x"+i.padStart(e.toString(16),2,"0")},time2string:function(e){var t="",n=e/3600|0,r=e%3600/60|0,e=e%60|0;return n&&(t+=i.padStart(n,2,"0")+":"),t+=i.padStart(r,2,"0")+":"+i.padStart(e,2,"0")},formatBytes:function(e){for(var t=["B","KB","MB","GB","TB"],n=0;n<t.length;n++){if(e<1024||n===t.length-1)return e.toFixed(3)+" "+t[n];e/=1024}return e+" B"},typeOf:function(e){if(null==e)return"null";var t=typeof e;if("object"==t)try{var n=Object.prototype.toString.call(e).match(/^\[object ([a-z]+)\]$/i);if(n&&1<n.length&&n[1])return n[1].toLowerCase()}catch(e){}return t},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},indexOf:function(e,t){if("array"===i.typeOf(e))for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}};void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.MAX_SAFE_INTEGER&&(Number.MAX_SAFE_INTEGER=Math.pow(2,53)-1),void 0===Number.MIN_SAFE_INTEGER&&(Number.MIN_SAFE_INTEGER=-1*Number.MAX_SAFE_INTEGER),i.equal=function(e,t){return Math.abs(e-t)<Number.EPSILON},i.createElement=function(e,t){e=document.createElement(e);return t&&(e.className=t),e},i.addClass=function(e,t){var n="string"===i.typeOf(e.className)?e.className.split(" "):[],t="array"===i.typeOf(t)?t:t.split(" ");i.forEach(t,function(e,t){-1===i.indexOf(n,t)&&n.push(t)}),e.className=i.trim(n.join(" "))},i.hasClass=function(e,t){for(var n=e.className||"",r="array"===i.typeOf(t)?t:t.split(" "),a=0;a<r.length;a++){var o=new RegExp("\\b"+r[a]+"\\b","i");if(-1===n.search(o))return!1}return!0},i.removeClass=function(e,t){var n="string"===i.typeOf(e.className)?e.className.split(" "):[],t="array"===i.typeOf(t)?t:t.split(" ");i.foreach(t,function(e,t){t=i.indexOf(n,t);0<=t&&n.splice(t,1)}),e.className=i.trim(n.join(" "))},i.emptyElement=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)};var t=window.console||{log:function(){},warn:function(){},error:function(){}};i.debug=function(){a.DEBUG&&i.log.apply(i,arguments)},i.log=function(){var e=Array.prototype.slice.call(arguments,0);"object"==typeof t?t.log.apply(t,e):t.log(e)},i.warn=function(){var e=Array.prototype.slice.call(arguments,0);"object"==typeof t?t.warn.apply(t,e):t.warn(e)},i.error=function(){var e=Array.prototype.slice.call(arguments,0);"object"==typeof t?t.error.apply(t,e):t.error(e)},a.utils=i}(playease),function(){var i=playease.utils,c={DOUBLE:0,BOOLEAN:1,STRING:2,OBJECT:3,MOVIE_CLIP:4,NULL:5,UNDEFINED:6,REFERENCE:7,ECMA_ARRAY:8,END_OF_OBJECT:9,STRICT_ARRAY:10,DATE:11,LONG_STRING:12,UNSUPPORTED:13,RECORD_SET:14,XML:15,TYPED_OBJECT:16,AMF3_DATA:17};function u(e){var o=this;o.set=function(e,t,n){switch(o.type){case c.DOUBLE:if("number"!==i.typeOf(t))throw{name:"TypeError",message:"Value should be number."};break;case c.BOOLEAN:if("boolean"!==i.typeOf(t))throw{name:"TypeError",message:"Value should be boolean."};case c.STRING:case c.LONG_STRING:if("string"!==i.typeOf(t))throw{name:"TypeError",message:"Value should be string."};break;case c.OBJECT:case c.ECMA_ARRAY:if("array"!==i.typeOf(t))throw{name:"TypeError",message:"Value should be array."};for(var r=0;r<t.length;r++){var a=t[r];o.table[a.key]=a}break;case c.STRICT_ARRAY:if("array"!==i.typeOf(t))throw{name:"TypeError",message:"Value should be array."};break;case c.DATE:if("number"!==i.typeOf(t))throw{name:"TypeError",message:"Value should be number."};if("number"!==i.typeOf(n))throw{name:"TypeError",message:"Offset not presented."};o.offset=n;break;case c.NULL:case c.UNDEFINED:if("null"!==i.typeOf(t))throw{name:"TypeError",message:"Value should be null."};break;default:throw{name:"TypeError",message:"Unrecognized amf type "+o.type+"."}}return o.key=e,o.value=t,o},o.get=function(){return o.type!==c.DATE?o.value:new Date(o.value+60*o.offset*1e3)},o.type=e,o.key="",o.value=null,o.table={},o.offset=0,o.ended=!1}function r(e,t){for(var n=0,r=0;r<t.value.length;r++){var a=t.value[r];a.key&&(a=crypt.stringToByteArray(a.key),e.WriteUint16(a.length,!1),e.Write(a),n+=2+a.length),n+=c.encode(e,t)}return n}c.decode=function(e,t,n){if(t.byteLength<1)throw{name:"DataError",message:"Data not enough while decoding amf Value."};var r=0,a=new DataView(t,n);e.type=a.getUint8(0),++r;a={0:c.decodeDouble,1:c.decodeBoolean,2:c.decodeString,3:c.decodeObject,5:c.decodeNull,6:c.decodeUndefined,8:c.decodeECMAArray,9:c.decodeEndOfObject,10:c.decodeStrictArray,11:c.decodeDate,12:c.decodeLongString}[e.type];if(!a)throw{name:"TypeError",message:"Unrecognized amf type "+e.type+"."};return r+=a(e,t,n+1)},c.decodeDouble=function(e,t,n){if(t.byteLength<8)throw{name:"DataError",message:"Data not enough while decoding amf double."};n=new DataView(t,n);return e.value=n.getFloat64(0),8},c.decodeBoolean=function(e,t,n){if(t.byteLength<1)throw{name:"DataError",message:"Data not enough while decoding amf boolean."};n=new DataView(t,n);return e.value=!!n.getUint8(0),1},c.decodeString=function(e,t,n){if(t.byteLength<2)throw{name:"DataError",message:"Data not enough while decoding amf string."};var r=0,a=new DataView(t,n).getUint16(r);return r+=2,0<a?(e.value=String.fromCharCode.apply(String,new Uint8Array(t,n+r,a)),r+=a):e.value="",r},c.decodeObject=function(e,t,n){if(t.byteLength<3)throw{name:"DataError",message:"Data not enough while decoding amf object."};var r=0,a=t.byteLength-n;for(e.value=[];r<a;){var o=new u;if(r+=c.decodeString(o,t,n+r),o.key=o.get(),r+=c.decode(o,t,n+r),o.type===c.END_OF_OBJECT)break;e.value.push(o),e.table[o.key]=o}return r},c.decodeNull=function(e,t,n){return e.value=null,0},c.decodeUndefined=function(e,t,n){return e.value=void 0,0},c.decodeECMAArray=function(e,t,n){if(t.byteLength<4)throw{name:"DataError",message:"Data not enough while decoding amf ecma array."};var r=4;return r+=c.decodeObject(e,t,n+4)},c.decodeEndOfObject=function(e,t,n){return e.ended=!0,0},c.decodeStrictArray=function(e,t,n){if(t.byteLength<4)throw{name:"DataError",message:"Data not enough while decoding amf strict array."};var r=0,a=new DataView(t,n),o=a.getUint32(r);r+=4;var i=t.byteLength-n;e.value=[];for(var s=0;s<o&&r<i;s++){var d=new u;r+=c.decode(d,t,n+r),e.value.push(d)}return r+3<=i&&0===a.getUint8(r)&&0===a.getUint8(r+1)&&a.getUint8(r+2)===c.END_OF_OBJECT&&(e.ended=!0,r+=3),r},c.decodeDate=function(e,t,n){if(t.byteLength<10)throw{name:"DataError",message:"Data not enough while decoding amf date."};n=new DataView(t,n);return e.Timestamp=n.getFloat64(0),e.Timeoffset=n.getInt16(8),10},c.decodeLongString=function(e,t,n){if(t.byteLength<4)throw{name:"DataError",message:"Data not enough while decoding amf long string."};var r=0,a=new DataView(t,n).getUint32(r);return r+=4,0<a&&(e.value=String.fromCharCode.apply(String,new Uint8Array(t,n+r,a)),r+=a),r},c.appendBytes=function(e,t){e.Write(t)},c.appendInt8=function(e,t){e.writeInt8(t)},c.appendInt16=function(e,t,n){e.WriteInt16(t,n)},c.appendInt32=function(e,t,n){e.WriteInt32(t,n)},c.appendUint8=function(e,t){e.writeUint8(t)},c.appendUint16=function(e,t,n){e.WriteUint16(t,n)},c.appendUint32=function(e,t,n){e.WriteUint32(t,n)},c.encode=function(e,t){var n={0:c.encodeDouble,1:c.encodeBoolean,2:c.encodeString,3:c.encodeObject,5:c.encodeNull,6:c.encodeUndefined,8:c.encodeECMAArray,10:c.encodeStrictArray,11:c.encodeDate,12:c.encodeLongString}[t.type];if(!n)throw{name:"TypeError",message:"Unrecognized amf type "+t.type+"."};return n(e,t)},c.encodeNumber=function(e,t){return e.WriteUint8(c.DOUBLE),e.WriteFloat64(t.value,!1),9},c.encodeBoolean=function(e,t){return e.WriteUint8(c.BOOLEAN),e.WriteUint8(t.value?1:0),2},c.encodeString=function(e,t){if(!t.value)return 0;if(65535<=t.value.length)return c.encodeLongString(e,t);t=crypt.stringToByteArray(t.value);return e.WriteUint8(c.STRING),e.WriteUint16(t.length,!1),e.Write(t),3+t.length},c.encodeObject=function(e,t){var n=1;return e.WriteUint8(c.OBJECT),n+=r(t),t.ended&&(e.WriteUint16(0),e.WriteUint8(c.END_OF_OBJECT),n+=3),n},c.encodeNull=function(e,t){return e.WriteUint8(c.NULL),1},c.encodeUndefined=function(e,t){return e.WriteUint8(c.UNDEFINED),1},c.encodeECMAArray=function(e,t){var n=3;return e.WriteUint8(c.ECMA_ARRAY),e.WriteUint32(t.value.length,!1),n+=r(e,t)},c.encodeStrictArray=function(e,t){var n=3;return e.WriteUint8(c.STRICT_ARRAY),e.WriteUint32(t.value.length,!1),n+=r(e,t)},c.encodeDate=function(e,t){return e.WriteUint8(c.DATE),e.WriteFloat64(t.value,!1),e.WriteUint16(t.offset,!1),11},c.encodeLongString=function(e,t){if(!t.value)return 0;t=crypt.stringToByteArray(t.value);return e.WriteUint8(c.LONG_STRING),e.WriteUint32(t.length,!1),e.Write(t),5+t.length},c.Value=u,i.AMF=c}(),function(){var e=playease.utils;e.MIN_UINT32=0,e.MAX_UINT32=-1>>>0,e.MAX_INT32=-1>>>1,e.MIN_INT32=1<<31,e.MIN_CACHE_BITS=25,e.BitStream=function(e){var r,a,o,n=this;n.ShowBits=function(e){if(0===e)return 0;var t=o>>>3,n=0;return o<a&&(n=r.getUint8(t)<<24),o+8<a&&(n|=r.getUint8(1+t)<<16),o+16<a&&(n|=r.getUint8(2+t)<<8),o+24<a&&(n|=r.getUint8(3+t)),n<<(7&o)>>>32-e},n.ShowBitsLong=function(e){return e<=25?n.ShowBits(e):n.ShowBits(16)<<e-16|n.ShowBits(e-16)},n.ReadBits=function(e){var t=n.ShowBits(e);return o+=e,t},n.ReadBitsLong=function(e){var t=n.ShowBitsLong(e);return o+=e,t},n.SkipBits=function(e){o+=e},n.Left=function(){return a-o},r=new DataView(e.buffer,e.byteOffset,e.byteLength),a=8*e.byteLength,o=0}}(),function(e){var t=new function(){var t,e,r=this;function n(){return t.match(/(Chrome|CriOS)\/((\d+)\.(\d+)(?:\.\d+)*)/)}function a(){return void 0!==window.orientation?90===window.orientation||-90===window.orientation:window.innerWidth>window.innerHeight}t=navigator.userAgent,r.OS={name:"",version:"",major:NaN,minor:NaN},r.Kernel={name:"",version:"",major:NaN,minor:NaN},r.Browser={name:"",version:"",major:NaN,minor:NaN},function(){var e=function(){var e=t.match(/(Windows)\sNT\s((\d+)\.(\d+))/);if(e)switch(e[2]){case"6.3":e=["Windows 8.1","Windows","8.1","8","1"];break;case"6.2":e=["Windows 8.0","Windows","8.0","8","0"];break;case"6.1":e=["Windows 7.0","Windows","7.0","7","0"]}return e}()||t.match(/(Mac)\sOS\sX\s((\d+)[\._](\d+)(?:[\._]\d+)*)/)||t.match(/(Android)(?:\s((\d+)(?:\.(\d+))?(?:\.(\d+))*))?/)||t.match(/(iP(?:hone|ad|od)).*\s((\d+)_(\d+)(?:_\d+)*)/)||t.match(/(Windows\sPhone)(?:\sOS)?\s((\d+)\.(\d+)(?:\.\d+)*)/);e&&(r.OS.name=e[1]||"",r.OS.version=(e[2]||"").replace(/_/g,"."),r.OS.major=parseInt(e[3]),r.OS.minor=parseInt(e[4]));r.OS.isWindows="Windows"===r.OS.name,r.OS.isMac="Mac"===r.OS.name,r.OS.isAndroid="Android"===r.OS.name,r.OS.isIOS="iPhone"===r.OS.name||"iPad"===r.OS.name||"iPod"===r.OS.name,r.OS.isWindowsPhone="Windows Phone"===r.OS.name,r.OS.isMobile=r.OS.isAndroid||r.OS.isIOS||r.OS.isWindowsPhone,r.OS.isHorizontal=a}(),(e=r.OS.isAndroid&&t.match(/;\s(([-a-z\d\s]+)(?:\sBuild\/([-a-z\d\.\s]+))?)(?:;\swv|\))/i))&&(r.OS.model=e[1],r.OS.brand=e[2],r.OS.build=e[3]),function(){var e=!r.OS.isIOS&&n()||t.match(/(AppleWebKit)\/((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/(Gecko)\/((\d+)(?:\.(\d+))?(?:\d+)*)/)||t.match(/(Presto)\/((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/(Trident)\/((\d+)\.(\d+)(?:\.\d+)*)/);e&&(r.Kernel.name=e[1]||"",r.Kernel.version=e[2]||"",r.Kernel.major=parseInt(e[3]),r.Kernel.minor=parseInt(e[4]));r.Kernel.isChrome="Chrome"===r.Kernel.name,r.Kernel.isAppleWebKit="AppleWebKit"===r.Kernel.name,r.Kernel.isGecko="Gecko"===r.Kernel.name,r.Kernel.isPresto="Presto"===r.Kernel.name,r.Kernel.isTrident="Trident"===r.Kernel.name}(),function(){var e=t.match(/(MSIE)\s((\d+)\.(\d+))/)||t.match(/(Trident)\/.+rv:((11)\.(\d+))/i)||t.match(/(Firefox)\/((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/(OPR|OPiOS|Opera\sMini)\/((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/(UCBrowser)\/((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/(MicroMessenger)\/((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/(QQ)\/((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/([M]?QQBrowser)\/((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/(MetaSr|SogouMobileBrowser)[\s\/]((\d+)\.(\d+)(?:\.\d+)*)/)||t.match(/(QihooBrowser|360browser)(?:\/((\d+)\.(\d+)(?:\.\d+)*))?/)||t.match(/(Electron)(?:\/((\d+)\.(\d+)(?:\.\d+)*))?/)||t.match(/(Edg|Edge|EdgA)\/((\d+)\.(\d+)(?:\.\d+)*)/)||n()||function(){if(r.OS.isAndroid||n()||!t.match(/Safari/))return null;var e=t.match(/Version\/((\d+)\.(\d+)(?:\.\d+)*)/);if(e)return["Safari/"+e[1],"Safari"].concat(e.slice(1));return null}()||t.match(/\s([a-z\d]+Browser)\/((\d+)\.(\d+)(?:\.\d+)*)/i)||t.match(/\s([a-z\d]+)\/((\d+)\.(\d+)(?:\.\d+)*)$/i);e&&(r.Browser.name=e[1]||"",r.Browser.version=e[2]||"",r.Browser.major=parseInt(e[3]),r.Browser.minor=parseInt(e[4]));r.Browser.isMSIE="MSIE"===r.Browser.name,r.Browser.isIE8="MSIE"===r.Browser.name&&8===r.Browser.major,r.Browser.isIE9="MSIE"===r.Browser.name&&9===r.Browser.major,r.Browser.isIE10="MSIE"===r.Browser.name&&10===r.Browser.major,r.Browser.isIE11="Trident"===r.Browser.name,r.Browser.isIE=r.Browser.isMSIE||r.Browser.isIE11,r.Browser.isFirefox="Firefox"===r.Browser.name,r.Browser.isOpera="OPR"===r.Browser.name||"OPiOS"===r.Browser.name||"Opera Mini"===r.Browser.name,r.Browser.isUCBrowser="UCBrowser"===r.Browser.name,r.Browser.isWeChat="MicroMessenger"===r.Browser.name,r.Browser.isQQ="QQ"===r.Browser.name,r.Browser.isQQBrowser="QQBrowser"===r.Browser.name||"MQQBrowser"===r.Browser.name,r.Browser.isSogou="MetaSr"===r.Browser.name||"SogouMobileBrowser"===r.Browser.name,r.Browser.is360="QihooBrowser"===r.Browser.name,r.Browser.isElectron="Electron"===r.Browser.name,r.Browser.isEdg="Edg"===r.Browser.name,r.Browser.isEdge="Edge"===r.Browser.name,r.Browser.isEdgA="EdgA"===r.Browser.name,r.Browser.isChrome="Chrome"===r.Browser.name,r.Browser.isCriOS="CriOS"===r.Browser.name,r.Browser.isSafari="Safari"===r.Browser.name,r.Browser.flash=function(){if(!r.isWindows)return 0;var e=navigator.plugins;if(e)if((n=e["Shockwave Flash"])&&n.description){var t=n.description.replace(/\D+(\d+\.?\d*).*/,"$1");return parseFloat(t)}if(void 0!==window.ActiveXObject)try{var n;if(n=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")){t=n.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,".");return parseFloat(t)}}catch(e){}return 0}()}()};e.OS=t.OS,e.Kernel=t.Kernel,e.Browser=t.Browser}(playease),function(){var a=playease.utils,e={stringToByteArray:function(e){for(var t=[],n=0,r=0;r<e.length;r++){for(var a=e.charCodeAt(r);255<a;)t[n++]=255&a,a>>=8;t[n++]=a}return t},byteArrayToString:function(e){if(e.length<=8192)return String.fromCharCode.apply(null,e);for(var t="",n=0;n<e.length;n+=8192){var r=Array.slice(e,n,n+8192);t+=String.fromCharCode.apply(null,r)}return t},byteArrayToHex:function(e){return Array.map(e,function(e){return a.padStart(e.toString(16),2,0)}).join("")},hexToByteArray:function(e){if(e.length%2!=0)return a.error("Key string length must be multiple of 2."),null;for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substring(n,n+2),16));return t},stringToUTF8ByteArray:function(e){for(var t=[],n=0,r=0;r<e.length;r++){var a=e.charCodeAt(r);a<128?t[n++]=a:(a<2048?t[n++]=a>>6|192:(55296==(64512&a)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128):t[n++]=a>>12|224,t[n++]=a>>6&63|128),t[n++]=63&a|128)}return t},UTF8ByteArrayToString:function(e){for(var t=[],n=0,r=0;n<e.length;){var a,o,i,s=e[n++];s<128?t[r++]=String.fromCharCode(s):191<s&&s<224?(o=e[n++],t[r++]=String.fromCharCode((31&s)<<6|63&o)):239<s&&s<365?(a=((7&s)<<18|(63&(o=e[n++]))<<12|(63&(i=e[n++]))<<6|63&e[n++])-65536,t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))):(o=e[n++],i=e[n++],t[r++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&i))}return t.join("")},XORByteArray:function(e,t){if(e.length===t.length){for(var n=[],r=0;r<e.length;r++)n.push(e[r]^t[r]);return n}a.error("XOR array lengths must match.")}};a.crypt=e}(),function(){var a,i=playease.utils;function e(t,e){var n;a||((n=document.createElement("style")).type="text/css",document.getElementsByTagName("head")[0].appendChild(n),a=n.sheet||n.styleSheet);var r="";i.foreach(e,function(e,t){r+=e+": "+t+"; "});try{a.insertRule?a.insertRule(t+" { "+r+"}",a.cssRules.length):a.addRule(t,r,a.rules.length)}catch(e){i.error("Failed to insert css rule: "+t)}}e.style=function(e,t,n){if(null!=e){void 0===e.length&&(e=[e]);for(var r=i.extendz({},t),a=0;a<e.length;a++){var o=e[a];null!=o&&i.forEach(r,function(e,t){e=function(e){e=e.split("-");for(var t=1;t<e.length;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);return e.join("")}(e);o.style[e]!==t&&(o.style[e]=t)})}}},i.css=e}(),function(){var e=playease.utils;e.LITTLE_ENDIAN=function(){var e,t;try{e=new ArrayBuffer(2),new DataView(e).setInt16(0,256,!0),t=new Int16Array(e)}catch(e){}return t&&256===t[0]}(),e.getUint32=function(e,t,n){return void 0===t&&(t=0),n?e[t+0]|e[t+1]>>>8|e[t+2]>>>16|e[t+3]>>>24:e[t+0]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}}(),function(){var i=playease.utils,s={filename:"sample.fragmented.mp4",type:"video/mpeg"};function e(e){var t,n,r,a,o=this;o.append=function(e){t.push(e)},o.save=function(e){e=e||o.config.filename,a=new Blob(t,{type:o.config.type}),n=URL.createObjectURL(a),(r=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),(a=document.createElementNS("http://www.w3.org/1999/xhtml","a")).href=n,a.download=e,a.dispatchEvent(r),t=[],URL.revokeObjectURL(n)},o.config=i.extendz({},s,e),t=[]}e.prototype.CONF=s,i.FileKeeper=e}(),function(){var e=playease.utils,t=e.BitStream;function n(e){t.call(this,e);var n=this;n.ReadUE=function(){for(var e=-1,t=0;0===t&&0<n.Left();e++)t=n.ReadBits(1);return(1<<e>>>0)-1+n.ReadBitsLong(e)},n.ReadSE=function(){var e=n.ReadUE();return 0==(1&e)?-(e>>>1):e+1>>>1}}(n.prototype=Object.create(t.prototype)).constructor=n,e.ebsp2rbsp=function(e){var t=2,n=e.byteLength,r=new Uint8Array(n);r[0]=e[0],r[1]=e[1];for(var a=2;a<n;a++)3===e[a]&&0===e[a-1]&&0===e[a-2]||(r[t]=e[a],t++);return r.subarray(0,t)},e.Golomb=n}(),function(){var e=playease.utils,r=/^(([a-z]+\:)\/\/(([-a-z\d\.]+)(?:\:(\d+))?))((?:\/[-_a-z\d\s\.]*)*)([?#][-_=%&a-z\d\s\.]+)?$/i;e.URL=function(e){var n=this;n.parse=function(e){n.href=e,!1===/^([a-z]+)\:\/\//i.test(e)&&(n.href=window.location.origin+("/"===e.substr(0,1)?"":"/")+e);var t=n.href.match(r);if(null===t)throw{name:"SyntaxError",message:"The URL did not match the expected pattern, url="+e+"."};n.origin=t[1],n.protocol=t[2],n.host=t[3],n.hostname=t[4],n.port=t[5]||"",n.pathname=t[6]||"";e=n.pathname.match(/\/(.+?)(?:\.([a-z\d]+))?$/i);e&&(n.filename=e[1],n.filetype=e[2]),t[7]&&("?"===t[7].substr(0,1)?n.search=t[7]:n.hash=t[7])},n.href="",n.origin="",n.protocol="",n.host="",n.hostname="",n.port="",n.pathname="",n.filename="",n.filetype="",n.search="",n.hash="",e&&n.parse(e)}}(),function(){var m=playease.utils,g=1,E=3,h=4,v=8,y=9,t={ignoreRoot:!0,trimWhitespaces:!1,attributePrefix:"@",matchers:[]};function e(e){var p=this;function f(e){return e.localName||e.baseName||e.nodeName}p.parse=function(e){var t;if(window.DOMParser){var n=new DOMParser;try{t=n.parseFromString(e,"text/xml")}catch(e){return m.error("Failed to parse XML structure."),null}}else 0===e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return function e(t,n){var r={};if(t.nodeType===y){for(var a=0;a<t.childNodes.length;a++){var o=t.childNodes[a],i=f(o);o.nodeType===g&&((s=e(o)).parent=r,p.config.ignoreRoot?(delete s.parent,r=s):r[i]=s)}return r}if(t.nodeType===g){for(var a=0;a<t.childNodes.length;a++){var s,o=t.childNodes[a],i=f(o);o.nodeType!==v&&(((s=e(o,n+"."+i)).parent=r).hasOwnProperty(i)?("array"!=m.typeOf(r[i])&&(r[i]=[r[i]]),r[i].push(s)):"#text"==i&&!/[^\s]/.test(s)||(r[i]=s))}var i=f(t);null!=t.prefix&&""!=t.prefix&&(i=t.prefix+":"+i);for(var a=0;a<t.attributes.length;a++)for(var d=t.attributes[a],c=d.value,u=0;u<p.config.matchers.length;u++){var l=p.config.matchers[u];l.test(d,i)&&(c=l.exec(d.value)),r[p.config.attributePrefix+d.name]=c}return null!=r["#text"]&&p.config.trimWhitespaces&&(r["#text"]=r["#text"].trim()),r["#cdata-section"],r.toString=function(){return(null==r["#text"]?"":r["#text"])+(null==r["#cdata-section"]?"":r["#cdata-section"])},r}if(t.nodeType===E||t.nodeType===h)return t.nodeValue}(t)},p.config=m.extendz({},t,e)}e.prototype.CONF=t,m.XML2JSON=e}(),function(){var m=playease.utils;m.MPD=function(e){var t,p,n,f;this.update=function(e){n=t,e.Location&&e.Location["#text"]&&(n=e.Location["#text"]),f=e.BaseURL||n.substring(0,n.lastIndexOf("/")+1),"dynamic"===e["@type"]&&function(e,t){var n=0,r=NaN;"array"!=m.typeOf(e.Period)&&(e.Period=[e.Period]);for(var a=0;a<e.Period.length;a++){var o=e.Period[a];o.hasOwnProperty("@start")?n=o["@start"]:isNaN(r)?0===a&&("dynamic"===e["@type"]||(n=0)):n+=r,o.hasOwnProperty("@duration")&&(r=o["@duration"]),o["@start"]=n,o["@duration"]=r;var i=function(e,t){if(!e)return;for(var n=0;n<e.Period.length;n++){var r=e.Period[n];if(r.hasOwnProperty("@id")){if(r["@id"]===t["@id"])return r}else{if(!r.hasOwnProperty("@start"))return r;if(r["@start"]===t["@start"])return r}}return}(t,o);!function(e,t){"array"!=m.typeOf(e.AdaptationSet)&&(e.AdaptationSet=[e.AdaptationSet]);for(var n=0;n<e.AdaptationSet.length;n++){var r=e.AdaptationSet[n],a=function(e,t){if(!e)return;for(var n=0;n<e.AdaptationSet.length;n++){var r=e.AdaptationSet[n];if(r.hasOwnProperty("@id")){if(r["@id"]===t["@id"])return r}else if(r.hasOwnProperty("@contentType")){if(r["@contentType"]===t["@contentType"])return r}else if(r.hasOwnProperty("@mimeType")){if(r["@mimeType"]===t["@mimeType"])return r}else{if(!r.hasOwnProperty("@codecs"))break;if(r["@codecs"]===t["@codecs"])return r}}return}(t,r);!function(e,t){var n=0,r=0,a=[];if(!1===e.SegmentTemplate.hasOwnProperty("SegmentTimeline"))return;if(t){var o=t.SegmentTemplate.SegmentTimeline;"array"!=m.typeOf(o.S)&&(o.S=[o.S]);for(var i=0;i<o.S.length;i++){var s=o.S[i];0===i&&s.hasOwnProperty("@t")&&(n=s["@t"]),n+=s["@d"],s["@r"]&&(n+=s["@d"]*s["@r"]),a.push(m.extendz({},s))}}var d=e.SegmentTemplate.SegmentTimeline;"array"!=m.typeOf(d.S)&&(d.S=d.S?[d.S]:[]);for(i=0;i<d.S.length;i++){s=d.S[i];0===i&&s.hasOwnProperty("@t")&&(r=s["@t"]),n<=r&&a.push(s),r+=s["@d"],s["@r"]&&(r+=s["@d"]*s["@r"])}}(r,a)}}(o,i)}}(e,p),p=e},this.getSegmentInfo=function(e,t,n,r,a,o){var i=function(e){for(var t=p.Period[0],n=0;n<p.Period.length;n++){var r=p.Period[n];if(!r.hasOwnProperty("@start"))break;r["@start"]>t["@start"]&&r["@start"]<=e&&(t=r)}return t}(e),s=function(e,t){for(var n=0;n<e.AdaptationSet.length;n++){var r=e.AdaptationSet[n];if(r.hasOwnProperty("@contentType")){if(r["@contentType"]===t)return r}else if(r.hasOwnProperty("@mimeType")){var a=r["@mimeType"].match(/^([a-z]+)\/[a-z0-9]+/i);if(a&&1<a.length&&a[1]===t)return r}}return}(i,t);if(s){var d=function(e,t){"array"!=m.typeOf(e.Representation)&&(e.Representation=[e.Representation]);for(var n=e.Representation[0],r=0;r<e.Representation.length;r++){var a=e.Representation[r];a["@bandwidth"]>n["@bandwidth"]&&(!t||a["@bandwidth"]<=t)&&(n=a)}return n}(s,o);if(d){var c=s.SegmentTemplate,u=c[n?"@initialization":"@media"],e=c["@timescale"]||1,t=c["@duration"]||0,u=u.replace(/\$RepresentationID\$/,d["@id"]);if(c["@media"].search(/\$Time\$/)){var l,o=c.SegmentTimeline;if(n)0<r||0===r&&!1===p.hasOwnProperty("@suggestedPresentationDelay")?o.S.length&&(r=o.S[0]["@t"]):(l=function(e,t){for(var n=e.S.length-1;0<=n;n--){var r=e.S[n];if((t-=r["@d"]*(r["@r"]||1))<=0){for(var a=e.S[0]["@t"],o=0;o<n;o++)a+=e.S[o]["@d"],r["@r"]&&(a+=r["@d"]*r["@r"]);return r["@t"]=a,r}}return e.S[0]}(o,(Math.abs(void 0)||p["@suggestedPresentationDelay"])*e))&&(r=l["@t"],t=l["@d"]);else{if(void 0===(l=function(e,t){for(var n=NaN;e.S.length;){var r=e.S.shift();if(isNaN(n)&&(n=r["@t"]||0),n+r["@d"]*(r["@r"]||0)>=t)return r["@t"]=n,e.S.length&&(e.S[0]["@t"]=r["@t"]+r["@d"]),r;n+=r["@d"],r["@r"]&&(n+=r["@d"]*r["@r"])}return}(o,r)))return;r=l["@t"],t=l["@d"],u=u.replace(/\$Time\$/,r)}}c["@media"].search(/\$Number\$/)&&(n?a=c["@startNumber"]:u=u.replace(/\$Number\$/,a));i=d.baseURL||s.baseURL||i.baseURL;return u=(i?i["#text"]:f)+u,{mimeType:d["@mimeType"]||s["@mimeType"],codecs:d["@codecs"]||s["@codecs"],index:a,start:r,duration:t,timescale:e,url:u}}}},this.getLocation=function(){return n},t=e||""}}(),playease.utils.MPD.matchers={},function(){var e=playease.utils.MPD.matchers,r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;e.datetime=function(){this.test=function(e){return r.test(e.value)},this.exec=function(e){var t=r.exec(e),n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&1e3*parseFloat(t[7])||0);return t[9]&&t[10]&&(e=60*parseInt(t[9],10)+parseInt(t[10],10),n+=("+"===t[8]?-1:1)*e*60*1e3),new Date(n)}}}(),function(){var e=playease.utils.MPD.matchers,r=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,a=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"];e.duration=function(){this.test=function(e){for(var t,n=0;n<a.length;n++)if(((t=e).localName||t.baseName||t.nodeName)===a[n])return r.test(e.value);return!1},this.exec=function(e){var t=r.exec(e),e=31536e3*parseFloat(t[2]||0)+2592e3*parseFloat(t[4]||0)+86400*parseFloat(t[6]||0)+3600*parseFloat(t[8]||0)+60*parseFloat(t[10]||0)+parseFloat(t[12]||0);return void 0!==t[1]&&(e*=-1),e}}}(),function(){var e=playease.utils.MPD.matchers,t=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/;e.numeric=function(){this.test=function(e){return t.test(e.value)},this.exec=function(e){return parseFloat(e)}}}(),function(){var e=playease.utils.MPD.matchers,n={MPD:["id","profiles"],Period:["id"],BaseURL:["serviceLocation","byteRange"],SegmentBase:["indexRange"],Initialization:["range"],RepresentationIndex:["range"],SegmentList:["indexRange"],BitstreamSwitching:["range"],SegmentURL:["mediaRange","indexRange"],SegmentTemplate:["indexRange","media","index","initialization","bitstreamSwitching"],AssetIdentifier:["value","id"],EventStream:["value"],AdaptationSet:["profiles","mimeType","segmentProfiles","codecs","contentType"],FramePacking:["value","id"],AudioChannelConfiguration:["value","id"],ContentProtection:["value","id"],EssentialProperty:["value","id"],SupplementalProperty:["value","id"],InbandEventStream:["value","id"],Accessibility:["value","id"],Role:["value","id"],Rating:["value","id"],Viewpoint:["value","id"],ContentComponent:["contentType"],Representation:["id","dependencyId","mediaStreamStructureId"],Subset:["id"],Metrics:["metrics"],Reporting:["value","id"]};e.string=function(){this.test=function(e,t){if(n.hasOwnProperty(t)){t=n[t];return void 0!==t&&0<=t.indexOf(e.name)}return!1},this.exec=function(e){return String(e)}}}(),function(e){var t={};t.Event={BIND:"bind",READY:"ready",PLAY:"play",WAITING:"waiting",DURATIONCHANGE:"durationchange",LOADEDMETADATA:"loadedmetadata",LOADEDDATA:"loadeddata",CANPLAY:"canplay",PLAYING:"playing",CANPLAYTHROUGH:"canplaythrough",PAUSE:"pause",SEEKING:"seeking",SEEKED:"seeked",SWITCHING:"switching",SWITCHED:"switched",RATECHANGE:"ratechange",TIMEUPDATE:"timeupdate",VOLUMECHANGE:"volumechange",ENDED:"ended",ERROR:"error"},t.IOEvent={LOADSTART:"loadstart",PROGRESS:"progress",SUSPEND:"suspend",STALLED:"stalled",ABORT:"abort",TIMEOUT:"timeout",LOAD:"load",LOADEND:"loadend"},t.UIEvent={SHOOTING:"shooting",FULLPAGE:"fullpage",FULLSCREEN:"fullscreen",RESIZE:"resize"},t.GlobalEvent={CHANGE:"change",VISIBILITYCHANGE:"visibilitychange"},t.MouseEvent={CLICK:"click",DOUBLE_CLICK:"doubleclick",MOUSE_MOVE:"mousemove"},t.KeyboardEvent={KEY_DOWN:"key-down",KEY_UP:"key-up"},t.TimerEvent={TIMER:"timer",COMPLETE:"complete"},t.MediaEvent={PACKET:"packet",INFOCHANGE:"infochange",STATSUPDATE:"statsupdate",AAC_SPECIFIC_CONFIG:"aac-specific-config",AAC_SAMPLE:"aac-sample",AVC_CONFIG_RECORD:"avc-config-record",AVC_SAMPLE:"avc-sample",END_OF_STREAM:"end-of-stream"},t.MediaStreamTrackEvent={ADDTRACK:"addtrack",REMOVETRACK:"removetrack"},e.events=t}(playease),function(c){var u=c.utils;c.events.EventDispatcher=function(e,t){var r,n,a=this,o=e,i=t,s=Array.prototype.slice.call(arguments,2);function d(e,t){if(e)for(var n=e.slice(0),r=0;r<n.length;r++){var a=n[r];if(a){isNaN(a.count)||0!=--a.count||e.splice(r,1);try{if(a.listener(t),t.stopPropagation)break}catch(e){u.error(o+" failed to dispatch event:",t,e.toString())}}}}a.bind=function(){var e=Array.prototype.slice.call(arguments,0);u.forEach(e,function(e,t){u.forEach(t,function(e,t){t="on"+t.replace(/-/g,"");a[t]=void 0})})},a.addEventListener=function(t,e,n){try{r[t]||(r[t]=[]),"string"===u.typeOf(e)&&(e=new Function("return "+e)()),r[t].push({listener:e,count:n||NaN})}catch(e){u.error(o+" failed to addEventListener("+t+"):",e)}},a.removeEventListener=function(t,e){if(r[t])try{if(void 0===e)return void delete r[t];for(var n=0;n<r[t].length;n++)if(r[t][n].listener.toString()===e.toString()){r[t].splice(n,1);break}}catch(e){u.error(o+" failed to removeEventListener("+t+"):",e)}},a.hasEventListener=function(e){return r.hasOwnProperty(e)&&0<r[e].length},a.addGlobalListener=function(e,t){try{"string"===u.typeOf(e)&&(e=new Function("return "+e)()),n.push({listener:e,count:t||NaN})}catch(e){u.error(o+" failed to addGlobalListener():",e)}},a.removeGlobalListener=function(e){if(e)try{for(var t=0;t<n.length;t++)if(n[t].listener.toString()===e.toString()){n.splice(t,1);break}}catch(e){u.error(o+" failed to removeGlobalListener():",e)}},a.dispatchEvent=function(e,t){a.forward({type:e,data:t||{},srcElement:a,version:c.VERSION})},a.forward=function(e){e.target=a,e.stopPropagation=!1,e.api=!i||"string"!=typeof i.id&&"number"!=typeof i.id?void 0:i.id,c.DEBUG&&u.log(o,e);var t="on"+e.type.replace(/-/g,"");"function"===u.typeOf(a[t])?a[t](e):(d(r[e.type],e),d(n,e))},r={},n=[],a.bind.apply(a,s)}}(playease),function(e){var t=e.utils,e=e.events,s=e.EventDispatcher,d=e.TimerEvent;function n(e,t){s.call(this,"Timer",null,[d.TIMER,d.COMPLETE]);var n,r=this,a=0,o=!1;function i(){a++,r.dispatchEvent(d.TIMER),0<r.repeatCount&&a>=r.repeatCount&&(r.stop(),r.dispatchEvent(d.COMPLETE))}r.start=function(){!1===o&&(n=setInterval(i,r.delay),o=!0)},r.stop=function(){o&&(clearInterval(n),n=0,o=!1)},r.reset=function(){r.stop(),a=0},r.currentCount=function(){return a},r.running=function(){return o},r.delay=e||50,r.repeatCount=t||0}(n.prototype=Object.create(s.prototype)).constructor=n,t.Timer=n}(playease),function(e){var n=e.utils,r={},a=[];r.register=function(t,e){try{a.splice(e||a.length,0,t),r[t.prototype.kind]=t}catch(e){n.error("Failed to register loader "+t.prototype.kind+", Error="+e.message)}},r.get=function(e,t){for(var n=0;n<a.length;n++){var r=a[n];if(r.prototype.isSupported(e,t))return r}return null},r.Mode={CORS:"cors",NO_CORS:"no-cors",SAME_ORIGIN:"same-origin"},r.Credentials={OMIT:"omit",INCLUDE:"include",SAME_ORIGIN:"same-origin"},r.Cache={DEFAULT:"default",NO_STAORE:"no-store",RELOAD:"reload",NO_CACHE:"no-cache",FORCE_CACHE:"force-cache",ONLY_IF_CACHED:"only-if-cached"},r.Redirect={FOLLOW:"follow",MANUAL:"manual",ERROR:"error"},r.ResponseType={ARRAYBUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},r.ReadyState={UNINITIALIZED:0,OPEN:1,SENT:2,LOADING:3,DONE:4},e.io=r.get,e.IO=r}(playease),function(e){var d=e.utils,t=e.events,n=t.EventDispatcher,c=t.Event,u=t.IOEvent,r=e.IO,a=r.Mode,o=r.Credentials,t=r.Cache,e=r.Redirect,l=r.ReadyState,p={method:"GET",headers:{},mode:a.CORS,credentials:o.OMIT,cache:t.DEFAULT,redirect:e.FOLLOW};function i(e){n.call(this,"Fetch",null,[c.ERROR],u);var r,a,o,i=this;function s(e){switch(r=l.DONE,d.error("Loader "+e.name+": "+e.message),e.name){case"AbortError":i.dispatchEvent(u.ABORT,{name:e.name,message:e.message});break;case"TimeoutError":i.dispatchEvent(u.TIMEOUT,{name:e.name,message:e.message});break;default:i.dispatchEvent(c.ERROR,{name:e.name,message:e.message})}i.dispatchEvent(u.LOADEND)}i.load=function(e,t,n){if(r=l.UNINITIALIZED,!i.isSupported(e))return d.error("Loader NotSupportedError: Not supportped."),r=l.DONE,i.dispatchEvent(c.ERROR,{name:"NotSupportedError",message:"Not supportped."}),void i.dispatchEvent(u.LOADEND);d.debug("Loader loadstart"),i.dispatchEvent(u.LOADSTART),r=l.OPEN,void 0!==t&&d.extendz(i.config.headers,{Range:"bytes="+t+"-"+(n||"")});n=d.extendz({},i.config,{headers:new Headers(i.config.headers),signal:o.signal});fetch(e.href,n).then(function(e){if(r===l.OPEN?r=l.SENT:d.warn("Loader state error, probably aborted already."),!e.ok||e.status<200||299<e.status)return Promise.reject(new Error(e.status+" "+e.statusText));var t,n=(n=e.headers.get("Content-Length"))&&parseInt(n);return 206===e.status&&(!(t=e.headers.get("Content-Range"))||(t=t.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(n=parseInt(t[3]))),a!==n&&(a=n||1/0,d.log("File size changed: "+a)),function t(n){return n.read().then(function(e){if(e.done)return d.debug("Loader load"),r=l.DONE,i.dispatchEvent(u.LOAD),i.dispatchEvent(u.LOADEND),Promise.resolve("load");switch(r){case l.SENT:r=l.LOADING;break;case l.DONE:return d.warn("Loader state error, probably aborted already."),n.cancel()}return d.debug("Loader progress: "+e.value.buffer.byteLength+"/"+a),i.dispatchEvent(u.PROGRESS,{buffer:e.value.buffer,loaded:e.value.buffer.byteLength,total:a}),t(n)}).catch(s)}(e.body.getReader())}).catch(s)},i.abort=function(){o.abort()},i.state=function(){return r},i.config=d.extendz({},p,e),a=NaN,o=new AbortController}((i.prototype=Object.create(n.prototype)).constructor=i).prototype.kind="Fetch",i.prototype.CONF=p,i.prototype.isSupported=function(e,t){return(!t||"live"===t)&&(!!fetch&&("http:"===e.protocol||"https:"===e.protocol))},r.register(i)}(playease),function(e){var l=e.utils,n=e.Browser,t=e.events,p=t.EventDispatcher,f=t.Event,m=t.IOEvent,r=e.IO,a=r.Mode,g=r.Credentials,t=r.Cache,e=r.Redirect,E=r.ReadyState,h={method:"GET",headers:{},mode:a.CORS,credentials:g.OMIT,cache:t.DEFAULT,redirect:e.FOLLOW};function o(e){p.call(this,"MozStream",null,[f.ERROR],m);var r,a,o,i=this;function t(e){switch(r=o.readyState){case E.OPEN:break;case E.SENT:if(o.status<200||299<o.status){l.error("Loader NetworkError: "+o.status+" "+o.statusText),i.dispatchEvent(f.ERROR,{name:"NetworkError",message:o.status+" "+o.statusText});break}var t,n=(n=o.getResponseHeader("Content-Length"))&&parseInt(n);206===o.status&&(!(t=o.getResponseHeader("Content-Range"))||(t=t.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(n=parseInt(t[3]))),a!==n&&(a=n||1/0,l.log("File size changed: "+a));break;case E.LOADING:case E.DONE:}}function n(e){l.warn("Loader AbortError: The operation was aborted."),i.dispatchEvent(m.ABORT,{name:"AbortError",message:"The operation was aborted."})}function s(e){l.debug("Loader progress: "+o.response.byteLength+"/"+a),i.dispatchEvent(m.PROGRESS,{buffer:o.response,loaded:o.response.byteLength,total:a})}function d(e){l.debug("Loader load."),i.dispatchEvent(m.LOAD)}function c(e){l.error("Loader "+e.name+": "+e.message),"TimeoutError"===e.name?i.dispatchEvent(m.TIMEOUT,{name:e.name,message:e.message}):i.dispatchEvent(f.ERROR,{name:e.name,message:e.message})}function u(e){i.dispatchEvent(m.LOADEND)}i.load=function(e,t,n){if(r=E.UNINITIALIZED,!i.isSupported(e))return l.error("Loader NotSupportedError: Not supportped."),r=E.DONE,i.dispatchEvent(f.ERROR,{name:"NotSupportedError",message:"Not supportped."}),void i.dispatchEvent(m.LOADEND);switch(l.debug("Loader loadstart"),i.dispatchEvent(m.LOADSTART),o.open(i.config.method,e.href,!0),void 0!==t&&l.extendz(i.config.headers,{Range:"bytes="+t+"-"+(n||"")}),l.forEach(i.config.headers,function(e,t){o.setRequestHeader(e,t)}),i.config.credentials){case g.INCLUDE:o.withCredentials=!0;break;case g.SAME_ORIGIN:o.withCredentials=window.location.host===e.host;break;default:o.withCredentials=!1}o.send()},i.abort=function(){o.abort()},i.state=function(){return r},i.config=l.extendz({},h,e),a=NaN,(o=new XMLHttpRequest).onreadystatechange=t,o.onabort=n,o.onprogress=s,o.onload=d,o.onerror=c,o.onloadend=u,o.responseType="moz-chunked-arraybuffer"}((o.prototype=Object.create(p.prototype)).constructor=o).prototype.kind="MozStream",o.prototype.CONF=h,o.prototype.isSupported=function(e,t){return(!t||"live"===t)&&((!n.isFirefox||!(n.major<14||67<n.major))&&("http:"===e.protocol||"https:"===e.protocol))},r.register(o)}(playease),function(e){var p=e.utils,n=e.Browser,t=e.events,f=t.EventDispatcher,m=t.Event,g=t.IOEvent,r=e.IO,a=r.Mode,E=r.Credentials,t=r.Cache,e=r.Redirect,h=r.ReadyState,v={method:"GET",headers:{},mode:a.CORS,credentials:E.OMIT,cache:t.DEFAULT,redirect:e.FOLLOW};function o(e){f.call(this,"MSStream",null,[m.ERROR],g);var r,a,o,i,s=this;function t(e){switch(r=o.readyState){case h.OPEN:break;case h.SENT:if(o.status<200||299<o.status){p.error("Loader NetworkError: "+o.status+" "+o.statusText),s.dispatchEvent(m.ERROR,{name:"NetworkError",message:o.status+" "+o.statusText});break}var t,n=(n=o.getResponseHeader("Content-Length"))&&parseInt(n);206===o.status&&(!(t=o.getResponseHeader("Content-Range"))||(t=t.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(n=parseInt(t[3]))),a!==n&&(a=n||1/0,p.log("File size changed: "+a));break;case h.LOADING:i.readAsArrayBuffer(o.response);break;case h.DONE:}}function n(e){p.warn("Loader AbortError: The operation was aborted."),s.dispatchEvent(g.ABORT,{name:"AbortError",message:"The operation was aborted."})}function d(e){var t=i.result.slice(i.position);null!=t?(p.debug("Loader progress: "+t.byteLength+"/"+a),s.dispatchEvent(g.PROGRESS,{buffer:t,loaded:t.byteLength,total:a}),i.position=i.result.byteLength):p.warn("What happend???")}function c(e){p.debug("Loader load."),s.dispatchEvent(g.LOAD)}function u(e){p.error("Loader "+e.name+": "+e.message),"TimeoutError"===e.name?s.dispatchEvent(g.TIMEOUT,{name:e.name,message:e.message}):s.dispatchEvent(m.ERROR,{name:e.name,message:e.message})}function l(e){s.dispatchEvent(g.LOADEND)}s.load=function(e,t,n){if(r=h.UNINITIALIZED,i.position=0,!s.isSupported(e))return p.error("Loader NotSupportedError: Not supportped."),r=h.DONE,s.dispatchEvent(m.ERROR,{name:"NotSupportedError",message:"Not supportped."}),void s.dispatchEvent(g.LOADEND);switch(p.debug("Loader loadstart"),s.dispatchEvent(g.LOADSTART),o.open(s.config.method,e.href,!0),void 0!==t&&p.extendz(s.config.headers,{Range:"bytes="+t+"-"+(n||"")}),p.forEach(s.config.headers,function(e,t){o.setRequestHeader(e,t)}),s.config.credentials){case E.INCLUDE:o.withCredentials=!0;break;case E.SAME_ORIGIN:o.withCredentials=window.location.host===e.host;break;default:o.withCredentials=!1}o.send()},s.abort=function(){o.abort()},s.state=function(){return r},s.config=p.extendz({},v,e),a=NaN,(o=new XMLHttpRequest).onreadystatechange=t,o.onabort=n,o.onerror=u,o.onloadend=l,o.responseType="ms-stream",(i=new MSStreamReader).onprogress=d,i.onload=c,i.onerror=u}((o.prototype=Object.create(f.prototype)).constructor=o).prototype.kind="MSStream",o.prototype.CONF=v,o.prototype.isSupported=function(e,t){return(!t||"live"===t)&&(!!(n.isIE10||n.isIE11||n.isEdge)&&("http:"===e.protocol||"https:"===e.protocol))},r.register(o)}(playease),function(e){var l=e.utils,t=e.events,n=t.EventDispatcher,p=t.Event,f=t.IOEvent,r=e.IO,a=r.Mode,o=r.Credentials,t=r.Cache,e=r.Redirect,m=r.ReadyState,g={method:"GET",headers:{},mode:a.CORS,credentials:o.OMIT,cache:t.DEFAULT,redirect:e.FOLLOW};function i(e){n.call(this,"Websocket",null,[p.ERROR],f);var a,o,i=this;function s(e){a=m.SENT,l.log("File size changed: "+1/0)}function d(e){l.debug("Loader progress: "+e.data.byteLength+"/"+1/0),a===m.SENT&&(a=m.LOADING),i.dispatchEvent(f.PROGRESS,{buffer:e.data,loaded:e.data.byteLength,total:1/0})}function c(e){l.error("Loader NetworkError: A network error occurred."),i.dispatchEvent(p.ERROR,{name:"NetworkError",message:"A network error occurred."})}function u(e){l.debug("Loader load."),a=m.DONE,i.dispatchEvent(f.LOAD),i.dispatchEvent(f.LOADEND)}i.load=function(e,t,n){if(a=m.UNINITIALIZED,!i.isSupported(e))return l.error("Loader NotSupportedError: Not supportped."),a=m.DONE,i.dispatchEvent(p.ERROR,{name:"NotSupportedError",message:"Not supportped."}),void i.dispatchEvent(f.LOADEND);l.debug("Loader loadstart"),i.dispatchEvent(f.LOADSTART),a=m.OPEN;var r=window.WebSocket||window.MozWebSocket;(o=new r(e.href)).onopen=s,o.onmessage=d,o.onerror=c,o.onclose=u,o.binaryType="arraybuffer"},i.abort=function(){!o||o.readyState!=WebSocket.CONNECTING&&o.readyState!=WebSocket.OPEN||(o.close(),l.warn("Loader AbortError: The operation was aborted."),i.dispatchEvent(f.ABORT,{name:"AbortError",message:"The operation was aborted."}))},i.state=function(){return a},i.config=l.extendz({},g,e)}((i.prototype=Object.create(n.prototype)).constructor=i).prototype.kind="Websocket",i.prototype.CONF=g,i.prototype.isSupported=function(e,t){return(!t||"live"===t)&&!(!window.WebSocket&&!window.MozWebSocket||"ws:"!==e.protocol&&"wss:"!==e.protocol)},r.register(i)}(playease),function(e){var l=e.utils,t=e.events,p=t.EventDispatcher,f=t.Event,m=t.IOEvent,n=e.IO,r=n.Mode,g=n.Credentials,a=n.Cache,t=n.Redirect,e=n.ResponseType,E=n.ReadyState,h={method:"GET",headers:{},mode:r.CORS,credentials:g.OMIT,cache:a.DEFAULT,redirect:t.FOLLOW,responseType:e.ARRAYBUFFER};function o(e){p.call(this,"XHR",null,[f.ERROR],m);var r,a,o,i=this;function t(e){switch(r=o.readyState){case E.OPEN:break;case E.SENT:if(416!==o.status&&(o.status<200||299<o.status)){l.error("Loader NetworkError: "+o.status+" "+o.statusText),i.dispatchEvent(f.ERROR,{name:"NetworkError",message:o.status+" "+o.statusText});break}var t,n=(n=o.getResponseHeader("Content-Length"))&&parseInt(n);206===o.status&&(!(t=o.getResponseHeader("Content-Range"))||(t=t.match(/bytes (\d*)\-(\d*)\/(\d+)/i))&&(n=parseInt(t[3]))),a!==n&&(a=n||1/0,l.log("File size changed: "+a));break;case E.LOADING:case E.DONE:}}function n(e){l.warn("Loader AbortError: The operation was aborted."),i.dispatchEvent(m.ABORT,{name:"AbortError",message:"The operation was aborted."})}function s(e){l.debug("Loader progress: "+o.loaded+"/"+a)}function d(e){l.debug("Loader load."),i.dispatchEvent(m.PROGRESS,{buffer:o.response,loaded:o.response.byteLength,total:a}),i.dispatchEvent(m.LOAD)}function c(e){l.error("Loader "+e.name+": "+e.message),"TimeoutError"===e.name?i.dispatchEvent(m.TIMEOUT,{name:e.name,message:e.message}):i.dispatchEvent(f.ERROR,{name:e.name,message:e.message})}function u(e){i.dispatchEvent(m.LOADEND)}i.load=function(e,t,n){if(r=E.UNINITIALIZED,!i.isSupported(e))return l.error("Loader NotSupportedError: Not supportped."),r=E.DONE,i.dispatchEvent(f.ERROR,{name:"NotSupportedError",message:"Not supportped."}),void i.dispatchEvent(m.LOADEND);switch(l.debug("Loader loadstart"),i.dispatchEvent(m.LOADSTART),o.open(i.config.method,e.href,!0),void 0!==t&&l.extendz(i.config.headers,{Range:"bytes="+t+"-"+(n||"")}),l.forEach(i.config.headers,function(e,t){o.setRequestHeader(e,t)}),i.config.credentials){case g.INCLUDE:o.withCredentials=!0;break;case g.SAME_ORIGIN:o.withCredentials=window.location.host===e.host;break;default:o.withCredentials=!1}o.send()},i.abort=function(){o.abort()},i.state=function(){return r},i.config=l.extendz({},h,e),a=NaN,(o=new XMLHttpRequest).onreadystatechange=t,o.onabort=n,o.onprogress=s,o.onload=d,o.onerror=c,o.onloadend=u,o.responseType=i.config.responseType}((o.prototype=Object.create(p.prototype)).constructor=o).prototype.kind="XHR",o.prototype.CONF=h,o.prototype.isSupported=function(e,t){if(t&&"live"===t)for(var n=["flv","",void 0,"mp4","m4s","f4v","m4v","mov"],r=0;r<n.length;r++)if(e.filetype===n[r])return!1;return"http:"===e.protocol||"https:"===e.protocol},n.register(o)}(playease),function(e){var t={};function n(e,t){var n=this;n.Num=e||30,n.Den=t||1}function r(){var n,e=this;e.left=function(){return null==e.payload?0:e.payload.byteLength-e.position},e.set=function(e,t){n[e]=t},e.get=function(e){return n[e]},n={},e.kind="",e.codec="",e.length=0,e.timestamp=0,e.streamid=0,e.payload=null,e.position=0}r.KindAudio="audio",r.KindVideo="video",r.KindScript="script",t.Rational=n,t.Information=function(){var e=this;e.MimeType="",e.Codecs=[],e.Timescale=1e3,e.TimeBase=0,e.Timestamp=0,e.AudioTimestamp=0,e.VideoTimestamp=0,e.Duration=0,e.FileSize=0,e.Width=0,e.Height=0,e.CodecWidth=0,e.CodecHeight=0,e.AudioDataRate=0,e.VideoDataRate=0,e.BitRate=0,e.FrameRate=new n,e.SampleRate=0,e.SampleSize=0,e.Channels=0,e.Stereo=!1,e.Encoder=""},t.Packet=r,e.AV=t}(playease),function(e){var n=e.utils,e=e.AV,r={},a=[];r.COL_PRI_RESERVED0=0,r.COL_PRI_BT709=1,r.COL_PRI_UNSPECIFIED=2,r.COL_PRI_RESERVED=3,r.COL_PRI_BT470M=4,r.COL_PRI_BT470BG=5,r.COL_PRI_SMPTE170M=6,r.COL_PRI_SMPTE240M=7,r.COL_PRI_FILM=8,r.COL_PRI_BT2020=9,r.COL_PRI_SMPTEST428_1=10,r.COL_PRI_NB=11,r.COL_TRC_RESERVED0=0,r.COL_TRC_BT709=1,r.COL_TRC_UNSPECIFIED=2,r.COL_TRC_RESERVED=3,r.COL_TRC_GAMMA22=4,r.COL_TRC_GAMMA28=5,r.COL_TRC_SMPTE170M=6,r.COL_TRC_SMPTE240M=7,r.COL_TRC_LINEAR=8,r.COL_TRC_LOG=9,r.COL_TRC_LOG_SQRT=10,r.COL_TRC_IEC61966_2_4=11,r.COL_TRC_BT1361_ECG=12,r.COL_TRC_IEC61966_2_1=13,r.COL_TRC_BT2020_10=14,r.COL_TRC_BT2020_12=15,r.COL_TRC_SMPTEST2084=16,r.COL_TRC_SMPTEST428_1=17,r.COL_TRC_ARIB_STD_B67=18,r.COL_TRC_NB=19,r.COL_SPC_RGB=0,r.COL_SPC_BT709=1,r.COL_SPC_UNSPECIFIED=2,r.COL_SPC_RESERVED=3,r.COL_SPC_FCC=4,r.COL_SPC_BT470BG=5,r.COL_SPC_SMPTE170M=6,r.COL_SPC_SMPTE240M=7,r.COL_SPC_YCOCG=8,r.COL_SPC_YCGCO=8,r.COL_SPC_BT2020_NCL=9,r.COL_SPC_BT2020_CL=10,r.COL_SPC_NB=11,r.COL_RANGE_UNSPECIFIED=0,r.COL_RANGE_MPEG=1,r.COL_RANGE_JPEG=2,r.COL_RANGE_NB=2,r.CHROMA_LOC_UNSPECIFIED=0,r.CHROMA_LOC_LEFT=1,r.CHROMA_LOC_CENTER=2,r.CHROMA_LOC_TOPLEFT=3,r.CHROMA_LOC_TOP=4,r.CHROMA_LOC_BOTTOMLEFT=5,r.CHROMA_LOC_BOTTOM=6,r.CHROMA_LOC_NB=7,r.register=function(t,e){try{a.splice(e||a.length,0,t),r[t.prototype.kind]=t}catch(e){n.error("Failed to register codec "+t.prototype.kind+", Error="+e.message)}},r.get=function(e){for(var t=0;t<a.length;t++){var n=a[t];if(n.prototype.kind===e)return n}return null},e.codec=r.get,e.Codec=r}(playease),function(e){var s=e.utils,r=s.Golomb,t=e.events,a=t.EventDispatcher,d=t.Event,c=t.MediaEvent,u=e.AV,l=u.Packet,e=u.Codec,p={SPECIFIC_CONFIG:0,RAW_FRAME_DATA:1},f={NULL:0,AAC_MAIN:1,AAC_LC:2,AAC_SSR:3,AAC_LTP:4,SBR:5,AAC_SCALABLE:6,TWINVQ:7,CELP:8,HVXC:9,TTSI:12,MAINSYNTH:13,WAVESYNTH:14,MIDI:15,SAFX:16,ER_AAC_LC:17,ER_AAC_LTP:19,ER_AAC_SCALABLE:20,ER_TWINVQ:21,ER_BSAC:22,ER_AAC_LD:23,ER_CELP:24,ER_HVXC:25,ER_HILN:26,ER_PARAM:27,SSC:28,PS:29,SURROUND:30,ESCAPE:31,L1:32,L2:33,L3:34,DST:35,ALS:36,SLS:37,SLS_NON_CORE:38,ER_AAC_ELD:39,SMR_SIMPLE:40,SMR_MAIN:41,USAC_NOSBR:42,SAOC:43,LD_SURROUND:44,USAC:45},m=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],g=[0,1,2,3,4,5,6,8],E=[new Uint8Array([0,200,0,128,35,128]),new Uint8Array([33,0,73,144,2,25,0,35,128]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]),new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])],h=[new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]),new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]),new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])];function n(e){a.call(this,"AAC",null,c,[d.ERROR]);var o,n,i=this;i.parse=function(e){if(e.left()<1)i.dispatchEvent(d.ERROR,{name:"DataError",message:"Data not enough while parsing AAC packet."});else{o.Timestamp=Math.max(e.timestamp,o.VideoTimestamp);var t=new DataView(e.payload.buffer);switch(e.set("DataType",t.getUint8(e.position++)),e.set("CTS",0),e.get("DataType")){case p.SPECIFIC_CONFIG:o.MimeType||(o.MimeType=i.MimeType),function(e){if(e.left()<2)return i.dispatchEvent(d.ERROR,{name:"DataError",message:"Data not enough while parsing AAC specific config."});n=new r(e.payload.subarray(e.position)),i.AudioObjectType=n.ReadBits(5),i.AudioObjectType===f.ESCAPE&&(i.AudioObjectType=32+n.ReadBits(6));i.SamplingFrequencyIndex=n.ReadBits(4),15===i.SamplingFrequencyIndex?i.SamplingFrequency=n.ReadBits(24):i.SamplingFrequency=m[i.SamplingFrequencyIndex];i.ChannelConfiguration=n.ReadBits(4),i.ChannelConfiguration<16&&(i.Channels=g[i.ChannelConfiguration]);if(i.AudioObjectType===f.SBR||i.AudioObjectType===f.PS&&0==(3&n.ShowBits(3))&&0==(63&n.ShowBits(9)))switch(i.ExtensionSamplingFrequencyIndex=n.ReadBits(4),15===i.ExtensionSamplingFrequencyIndex?i.ExtensionSamplingFrequency=n.ReadBits(24):i.ExtensionSamplingFrequency=m[i.ExtensionSamplingFrequencyIndex],i.ExtensionAudioObjectType=n.ReadBits(5),i.ExtensionAudioObjectType){case f.ESCAPE:i.ExtensionAudioObjectType=32+n.ReadBits(6);break;case f.ER_BSAC:i.ExtensionChannelConfiguration=n.ReadBits(4)}else i.ExtensionAudioObjectType=f.NULL,i.ExtensionSamplingFrequency=0;if(i.AudioObjectType===f.ALS){n.ShowBits(5),4279379!==n.ShowBitsLong(24)&&n.SkipBits(24);try{!function(){if(n.Left()<112)throw{name:"DataError",message:"Data not enough while parsing ALS config."};if(1095521024!==n.ReadBitsLong(32))throw{name:"TypeError",message:"Not ALS\\0"};i.SamplingFrequency=n.ReadBitsLong(32),n.SkipBits(32),i.ChannelConfiguration=0,i.Channels=n.ReadBits(16)+1}()}catch(e){return s.error("Failed to parse AAC config ALS."),i.dispatchEvent(d.ERROR,{name:e.name,message:e.message})}}i.RefSampleDuration=Math.floor(1024*o.Timescale/i.SamplingFrequency),i.AudioObjectType=f.SBR,i.ExtensionSamplingFrequencyIndex=i.SamplingFrequencyIndex,6<=i.SamplingFrequencyIndex?i.ExtensionSamplingFrequencyIndex-=3:1===i.ChannelConfiguration&&(i.AudioObjectType=f.AAC_LC);i.AudioObjectType===f.SBR?i.Config=new Uint8Array([i.AudioObjectType<<3|i.SamplingFrequencyIndex>>1,i.SamplingFrequencyIndex<<7|i.ChannelConfiguration<<3|i.ExtensionSamplingFrequencyIndex>>1,i.ExtensionSamplingFrequencyIndex<<7|8,0]):i.Config=new Uint8Array([i.AudioObjectType<<3|i.SamplingFrequencyIndex>>1,i.SamplingFrequencyIndex<<7|i.ChannelConfiguration<<3]);i.Codec="mp4a.40."+i.AudioObjectType,o.Codecs.push(i.Codec),i.dispatchEvent(c.AAC_SPECIFIC_CONFIG)}(e);break;case p.RAW_FRAME_DATA:!function(e){o.AudioTimestamp=e.timestamp;for(var t=e.timestamp-o.AudioTimestamp,n=Math.ceil(t/i.RefSampleDuration),r=0;r<n-1;r++){var a=new u.Packet;if(a.kind=l.KindAudio,a.codec=e.codec,a.timestamp=o.AudioTimestamp+i.RefSampleDuration,a.streamid=e.streamid,a.payload=(i.AudioObjectType!==AAC_LC?h:E)[i.Channels],void 0===a.payload){s.warn("Failed to get silent frame: AudioObjectType="+i.AudioObjectType+", Channels="+i.Channels);break}a.length=a.payload.byteLength,a.set("DTS",o.TimeBase+a.timestamp),a.set("PTS",a.get("DTS")),a.set("Data",a.payload),s.warn("Generates silent frame: "+a.timestamp),o.AudioTimestamp=a.timestamp,i.dispatchEvent(c.AAC_SAMPLE,{packet:a})}e.set("DTS",o.TimeBase+e.timestamp),e.set("PTS",e.get("DTS")),e.set("Data",e.payload.subarray(e.position)),i.dispatchEvent(c.AAC_SAMPLE,{packet:e})}(e);break;default:i.dispatchEvent(d.ERROR,{name:"TypeError",message:"Unrecognized AAC packet type: "+i.DataType})}}},o=e,i.MimeType="audio/mp4",i.Codec="",i.RefSampleDuration=Math.floor(1024*o.Timescale/44100),i.AudioObjectType=0,i.SamplingFrequencyIndex=0,i.SamplingFrequency=0,i.ChannelConfiguration=0,i.Channels=0,i.ExtensionAudioObjectType=0,i.ExtensionSamplingFrequencyIndex=0,i.ExtensionSamplingFrequency=0,i.ExtensionChannelConfiguration=0,i.Config=null,i.Flags={IsLeading:0,SampleDependsOn:1,SampleIsDependedOn:0,SampleHasRedundancy:0,IsNonSync:0}}((n.prototype=Object.create(a.prototype)).constructor=n).prototype.kind="AAC",n.DataTypes=p,n.AOT=f,n.SamplingFrequencys=m,n.Channels=g,n.SilentFramesOfLC=E,n.SilentFramesOfSBR=h,e.register(n)}(playease),function(e){var s=e.utils,d=e.events,t=d.EventDispatcher,p=d.Event,f=d.MediaEvent,e=e.AV.Codec,n={SEQUENCE_HEADER:0,NALU:1,END_OF_SEQUENCE:2},m={SLICE:1,DPA:2,DPB:3,DPC:4,IDR_SLICE:5,SEI:6,SPS:7,PPS:8,AUD:9,END_SEQUENCE:10,END_STREAM:11,FILLER_DATA:12,SPS_EXT:13,AUXILIARY_SLICE:19,FF_IGNORE:267448321};function r(c){t.call(this,"AVC",null,f,[p.ERROR]);var u,l=this;l.parse=function(e){if(e.left()<4)l.dispatchEvent(p.ERROR,{name:"DataError",message:"Data not enough while parsing AVC packet."});else{u.Timestamp=Math.max(e.timestamp,u.AudioTimestamp);var t=new DataView(e.payload.buffer);switch(e.set("DataType",t.getUint8(e.position++)),e.set("CTS",t.getUint8(e.position++)<<16|t.getUint8(e.position++)<<8|t.getUint8(e.position++)),e.get("DataType")){case n.SEQUENCE_HEADER:u.MimeType=l.MimeType,function(e){if(e.left()<7)return l.dispatchEvent(p.ERROR,{name:"DataError",message:"Data not enough while parsing AVC decoder configuration record."});l.AVCC=e.payload.subarray(e.position);var t=0,n=new DataView(e.payload.buffer,e.position);if(l.ConfigurationVersion=n.getUint8(t++),l.ProfileIndication=n.getUint8(t++),l.ProfileCompatibility=n.getUint8(t++),l.LevelIndication=n.getUint8(t++),1!==l.ConfigurationVersion||0===l.ProfileIndication)return l.dispatchEvent(p.ERROR,{name:"DataError",message:"Invalid AVC configuration version or profile."});if(l.NalLengthSize=1+(3&n.getUint8(t++)),l.NalLengthSize<3)return l.dispatchEvent(p.ERROR,{name:"DataError",message:"Invalid NalLengthSize "+l.NalLengthSize});for(var r=31&n.getUint8(t++),a=0;a<r;a++){var o=n.getUint16(t);if(t+=2,0!==o){var i=l.AVCC.subarray(t,t+o);try{l.SPS.parse(i),l.RefSampleDuration=Math.floor(u.Timescale*c.FrameRate.Den/c.FrameRate.Num)}catch(e){return l.dispatchEvent(p.ERROR,{name:e.name,message:e.message})}t+=o}}for(var s=n.getUint8(t++),a=0;a<s;a++){var d=n.getUint16(t);t+=2,0!==d&&(t+=d)}l.Codec=l.SPS.Codec,u.Codecs.push(l.Codec),l.dispatchEvent(f.AVC_CONFIG_RECORD,{packet:e})}(e);break;case n.NALU:!function(e){u.VideoTimestamp=e.timestamp;var t=0,n=new DataView(e.payload.buffer,e.position),r=e.payload.subarray(e.position),a=[];e.set("DTS",u.TimeBase+e.timestamp),e.set("PTS",e.get("CTS")+e.get("DTS")),e.set("Data",r),e.set("NALUs",a);for(;t<n.byteLength;){if(t+4>=n.byteLength)return l.dispatchEvent(d.ERROR,{name:"DataError",message:"Data not enough for next NALU."});var o=n.getUint32(t);if(3===l.NalLengthSize&&(o>>=8),o>n.byteLength-l.NalLengthSize)return l.dispatchEvent(d.ERROR,{name:"DataError",message:"Malformed Nalus near timestamp "+e.get("DTS")+"."});var i=n.getUint8(t+l.NalLengthSize);if(e.set("ForbiddenZeroBit",i>>7&1),e.set("NalRefIdc",i>>5&3),e.set("NalUnitType",31&i),e.get("NalUnitType")===m.IDR_SLICE&&e.set("Keyframe",!0),0!==e.get("ForbiddenZeroBit"))return s.warn("Invalid NAL unit "+e.get("NalUnitType")+", skipping.");i=r.subarray(t,t+l.NalLengthSize+o);a.push(i),t+=l.NalLengthSize+o}l.dispatchEvent(f.AVC_SAMPLE,{packet:e})}(e);break;case n.END_OF_SEQUENCE:s.debug("AVC sequence end."),l.dispatchEvent(f.END_OF_STREAM);break;default:l.dispatchEvent(p.ERROR,{name:"TypeError",message:"Unrecognized AVC packet type: "+e.get("DataType")})}}},u=c,l.MimeType="video/mp4",l.Codec="",l.RefSampleDuration=Math.floor(u.Timescale*c.FrameRate.Den/c.FrameRate.Num),l.AVCC=null,l.ConfigurationVersion=0,l.ProfileIndication=0,l.ProfileCompatibility=0,l.LevelIndication=0,l.NalLengthSize=0,l.SPS=new r.SPS(u),l.PPS=new r.PPS(l.SPS),l.Flags={IsLeading:0,SampleDependsOn:0,SampleIsDependedOn:0,SampleHasRedundancy:0,IsNonSync:0}}r.prototype=Object.create(t.prototype),(r.prototype.constructor=r).prototype.kind="AVC",r.DataTypes=n,r.NAL=m,e.register(r)}(playease),function(e){var g=e.utils,E=g.Golomb,e=e.AV,r=e.Rational,h=e.Codec,e=h.AVC,a=255,o=[new r(0,1),new r(1,1),new r(12,11),new r(10,11),new r(16,11),new r(40,33),new r(24,11),new r(20,11),new r(32,11),new r(80,33),new r(18,11),new r(15,11),new r(64,33),new r(160,99),new r(4,3),new r(3,2),new r(2,1)];function i(){var n,r=this;r.parse=function(e){if(n=e,r.CpbCnt=n.ReadUE()+1,32<r.CpbCnt)throw{name:"DataError",message:"Invalid HRD.CpbCnt "+r.CpbCnt+"."};r.BitRateScale=n.ReadBits(4),r.CpbSizeScale=n.ReadBits(4);for(var t=0;t<r.CpbCnt;t++)r.BitRateValue[t]=n.ReadUE(),r.CpbSizeValue[t]=n.ReadUE(),r.CbrFlag|=n.ReadBits(1)<<t;r.InitialCpbRemovalDelayLength=_b.ReadBits(5)+1,r.CpbRemovalDelayLength=n.ReadBits(5)+1,r.DpbOutputDelayLength=n.ReadBits(5)+1,r.TimeOffsetLength=n.ReadBits(5)},r.CpbCnt=0,r.BitRateScale=0,r.CpbSizeScale=0,r.BitRateValue=new Array(32),r.CpbSizeValue=new Array(32),r.CbrFlag=0,r.InitialCpbRemovalDelayLength=0,r.CpbRemovalDelayLength=0,r.DpbOutputDelayLength=0,r.TimeOffsetLength=0}function t(){var t,n=this;n.parse=function(e){if(t=e,n.AspectRatioInfoPresentFlag=t.ReadBits(1),0!==n.AspectRatioInfoPresentFlag)if(n.AspectRatioIdc=t.ReadBits(8),n.AspectRatioIdc===a)n.Sar.Num=t.ReadBits(16),n.Sar.Den=t.ReadBits(16);else{if(!(n.AspectRatioIdc<o.length))throw{name:"DataError",message:"Illegal aspect ratio."};n.Sar=o[n.AspectRatioIdc]}else n.Sar.Num=0,n.Sar.Den=0;if(n.OverscanInfoPresentFlag=t.ReadBits(1),0!==n.OverscanInfoPresentFlag&&(n.OverscanAppropriateFlag=t.ReadBits(1)),n.VideoSignalTypePresentFlag=t.ReadBits(1),0!==n.VideoSignalTypePresentFlag&&(n.VideoFormat=t.ReadBits(3),n.VideoFullRangeFlag=t.ReadBits(1),n.ColourDescriptionPresentFlag=t.ReadBits(1),0!==n.ColourDescriptionPresentFlag&&(n.ColourPrimaries=t.ReadBits(8),n.TransferCharacteristics=t.ReadBits(8),n.MatrixCoefficients=t.ReadBits(8),n.ColourPrimaries>=h.COL_PRI_NB&&(n.ColourPrimaries=h.COL_PRI_UNSPECIFIED),n.TransferCharacteristics>=h.COL_TRC_NB&&(n.TransferCharacteristics=h.COL_TRC_UNSPECIFIED),n.MatrixCoefficients>=h.COL_SPC_NB&&(n.MatrixCoefficients=h.COL_SPC_UNSPECIFIED))),n.ChromaLocInfoPresentFlag=t.ReadBits(1),0!==n.ChromaLocInfoPresentFlag&&(n.ChromaSampleLocTypeTopField=t.ReadUE(),n.ChromaSampleLocTypeBottomField=t.ReadUE()),0!==t.ReadBits(1)&&t.Left()<10)throw{name:"DataError",message:"Truncated VUI."};if(n.TimingInfoPresentFlag=t.ReadBits(1),0!==n.TimingInfoPresentFlag&&(n.NumUnitsInTick=t.ReadBitsLong(32),n.TimeScale=t.ReadBitsLong(32),0!==n.NumUnitsInTick&&0!==n.TimeScale||(g.debug("time_scale/num_units_in_tick invalid or unsupported "+n.TimeScale+"/"+n.NumUnitsInTick),n.TimingInfoPresentFlag=0),n.FixedFrameRateFlag=t.ReadBits(1)),n.NalHrdParametersPresentFlag=t.ReadBits(1),0!==n.NalHrdParametersPresentFlag&&n.NalHrd.parse(t),n.VclHrdParametersPresentFlag=t.ReadBits(1),0!==n.VclHrdParametersPresentFlag&&n.VclHrd.parse(t),0===n.NalHrdParametersPresentFlag&&0===n.VclHrdParametersPresentFlag||(n.LowDelayHrdFlag=t.ReadBits(1)),n.PicStructPresentFlag=t.ReadBits(1),0!==t.Left()&&(n.BitstreamRestrictionFlag=t.ReadBits(1),0!==n.BitstreamRestrictionFlag&&(n.MotionVectorsOverPicBoundariesFlag=t.ReadBits(1),n.MaxBytesPerPicDenom=t.ReadUE(),n.MaxBitsPerMbDenom=t.ReadUE(),n.Log2MaxMvLengthHorizontal=t.ReadUE(),n.Log2MaxMvLengthVertical=t.ReadUE(),n.MaxNumReorderFrames=t.ReadUE(),n.MaxDecFrameBuffering=t.ReadUE(),t.Left()<0&&(n.MaxNumReorderFrames=0,n.BitstreamRestrictionFlag=0),16<n.MaxNumReorderFrames)))throw n.MaxNumReorderFrames=16,{name:"DataError",message:"Clipping illegal MaxNumReorderFrames "+n.MaxNumReorderFrames+"."}},n.AspectRatioInfoPresentFlag=0,n.AspectRatioIdc=0,n.Sar=new r,n.OverscanInfoPresentFlag=0,n.OverscanAppropriateFlag=0,n.VideoSignalTypePresentFlag=0,n.VideoFormat=0,n.VideoFullRangeFlag=0,n.ColourDescriptionPresentFlag=0,n.ColourPrimaries=0,n.TransferCharacteristics=0,n.MatrixCoefficients=0,n.ChromaLocInfoPresentFlag=0,n.ChromaSampleLocTypeTopField=0,n.ChromaSampleLocTypeBottomField=0,n.TimingInfoPresentFlag=0,n.NumUnitsInTick=0,n.TimeScale=0,n.FixedFrameRateFlag=0,n.NalHrdParametersPresentFlag=0,n.NalHrd=new i,n.VclHrdParametersPresentFlag=0,n.VclHrd=new i,n.LowDelayHrdFlag=0,n.PicStructPresentFlag=0,n.BitstreamRestrictionFlag,n.MotionVectorsOverPicBoundariesFlag=0,n.MaxBytesPerPicDenom=0,n.MaxBitsPerMbDenom=0,n.Log2MaxMvLengthHorizontal=0,n.Log2MaxMvLengthVertical=0,n.MaxNumReorderFrames=0,n.MaxDecFrameBuffering=0}e.SPS=function(p){var f,m=this;m.parse=function(e){if(e.byteLength<4)throw{name:"DataError",message:"Data not enough while parsing SPS."};m.Codec="avc1.",g.forEach(e.subarray(1,4),function(e,t){t=g.padStart(t.toString(16),2,"0");m.Codec+=t});var t=g.ebsp2rbsp(e);if(f=new E(t),m.Data=t,f.ReadBits(8),m.ProfileIdc=f.ReadBits(8),m.ConstraintSetFlags=f.ReadBits(1)<<0,m.ConstraintSetFlags|=f.ReadBits(1)<<1,m.ConstraintSetFlags|=f.ReadBits(1)<<2,m.ConstraintSetFlags|=f.ReadBits(1)<<3,m.ConstraintSetFlags|=f.ReadBits(1)<<4,m.ConstraintSetFlags|=f.ReadBits(1)<<5,m.ReservedZero2Bits=f.ReadBits(2),m.LevelIdc=f.ReadBits(8),m.ID=f.ReadUE(),32<=m.ID)throw{name:"DataError",message:"SPS ID(0x"+m.ID.toString(16)+") out of range."};if(m.SeqScalingMatrixPresentFlag=0,m.Vui.VideoFullRangeFlag=1,m.Vui.MatrixCoefficients=h.COL_SPC_UNSPECIFIED,100===m.ProfileIdc||110===m.ProfileIdc||122===m.ProfileIdc||244===m.ProfileIdc||44===m.ProfileIdc||83===m.ProfileIdc||86===m.ProfileIdc||118===m.ProfileIdc||128===m.ProfileIdc||138===m.ProfileIdc||144===m.ProfileIdc){if(m.ChromaFormatIdc=f.ReadUE(),3<m.ChromaFormatIdc)throw{name:"DataError",message:"Bad ChromaFormatIdc "+m.ChromaFormatIdc+"."};if(3===m.ChromaFormatIdc&&(m.SeparateColourPlaneFlag=f.ReadBits(1),0!==m.SeparateColourPlaneFlag))throw{name:"DataError",message:"Separate color planes are not supported."};if(m.BitDepthLuma=f.ReadUE()+8,m.BitDepthChroma=f.ReadUE()+8,m.BitDepthChroma!==m.BitDepthLuma)throw{name:"DataError",message:"Different chroma and luma bit depth."};if(m.BitDepthLuma<8||14<m.BitDepthLuma||m.BitDepthChroma<8||14<m.BitDepthChroma)throw{name:"DataError",message:"Illegal bit depth value "+m.BitDepthLuma+", "+m.BitDepthChroma+"."};if(m.TransformBypass=f.ReadBits(1),m.SeqScalingMatrixPresentFlag=f.ReadBits(1),0!==m.SeqScalingMatrixPresentFlag){var n=8;3===m.ChromaFormatIdc&&(n+=4);for(var r=0;r<n;r++)if(0!=f.ReadBits(1)){var a=16;6<=r&&(a=64);for(var o=8,i=8,s=0;s<a;s++)0!=(i=(o+f.ReadSE()+256)%256)&&(o=i)}}}else m.ChromaFormatIdc=1,m.BitDepthLuma=8,m.BitDepthChroma=8;if(m.Log2MaxFrameNum=f.ReadUE()+4,m.Log2MaxFrameNum<4||16<m.Log2MaxFrameNum)throw{name:"DataError",message:"log2_max_frame_num_minus4("+(m.Log2MaxFrameNum-4)+") out of range, expect 0-12."};if(m.PocType=f.ReadUE(),0===m.PocType){if(m.Log2MaxPocLsb=f.ReadUE()+4,16<m.Log2MaxPocLsb)throw{name:"DataError",message:"log2_max_poc_lsb("+m.Log2MaxPocLsb+") is out of range."}}else if(1===m.PocType){m.DeltaPicOrderAlwaysZeroFlag=f.ReadBits(1),m.OffsetForNonRefPic=f.ReadUE(),m.OffsetForTopToBottomField=f.ReadUE(),m.NumRefFramesInPocCycle=f.ReadUE();n=m.OffsetForRefFrame.length;if(m.NumRefFramesInPocCycle>=n)throw{name:"DataError",message:"poc_cycle_length("+m.NumRefFramesInPocCycle+") overflow."};for(r=0;r<m.NumRefFramesInPocCycle;r++)m.OffsetForRefFrame[r]=f.ReadUE()}else if(2!==m.PocType)throw{name:"DataError",message:"Illegal POC type "+m.PocType+"."};if(m.MaxNumRefFrames=f.ReadUE(),34<m.MaxNumRefFrames||16<m.MaxNumRefFrames)throw{name:"DataError",message:"Too many reference frames, "+m.MaxNumRefFrames+"."};if(m.GapsInFrameNumValueAllowedFlag=f.ReadBits(1),m.PicWidth=f.ReadUE()+1,m.PicHeight=f.ReadUE()+1,m.PicWidth>=g.MAX_INT32/16||m.PicHeight>=g.MAX_INT32/16||!1==(d=16*m.PicWidth,c=16*m.PicHeight,0!==d&&0!==c&&(d+128)*(c+128)<g.MAX_INT32/8))throw{name:"DataError",message:"pic_width or pic_height overflow."};if(m.FrameMbsOnlyFlag=f.ReadBits(1),0===m.FrameMbsOnlyFlag?m.MbAdaptiveFrameFieldFlag=f.ReadBits(1):m.MbAdaptiveFrameFieldFlag=0,p.CodecWidth=16*m.PicWidth,p.CodecHeight=16*m.PicHeight*(2-m.FrameMbsOnlyFlag),m.Direct8x8InferenceFlag=f.ReadBits(1),m.FrameCroppingFlag=f.ReadBits(1),0!==m.FrameCroppingFlag){var e=f.ReadUE(),t=f.ReadUE(),d=f.ReadUE(),c=f.ReadUE();1===m.ChromaFormatIdc&&(l=1),1!==m.ChromaFormatIdc&&2!==m.ChromaFormatIdc||(u=1);var u=1<<u,l=2-m.FrameMbsOnlyFlag<<l;if(e>g.MAX_INT32/4/u||t>g.MAX_INT32/4/u||d>g.MAX_INT32/4/l||c>g.MAX_INT32/4/l||(e+t)*u>=p.CodecWidth||(d+c)*l>=p.CodecHeight)throw{name:"DataError",message:"Invalid crop values, l="+e+", r="+t+", t="+d+", b="+c+", w="+p.CodecWidth+", h="+p.CodecHeight+"."};m.FrameCropLeftOffset=e*u,m.FrameCropRightOffset=t*u,m.FrameCropTopOffset=d*l,m.FrameCropBottomOffset=c*l}else m.FrameCropLeftOffset=0,m.FrameCropRightOffset=0,m.FrameCropTopOffset=0,m.FrameCropBottomOffset=0;m.VuiParametersPresentFlag=f.ReadBits(1),0!==m.VuiParametersPresentFlag&&(m.Vui.parse(f),0!==m.Vui.TimingInfoPresentFlag&&(p.FrameRate.Num=m.Vui.TimeScale,p.FrameRate.Den=2*m.Vui.NumUnitsInTick)),p.CodecWidth-=m.FrameCropLeftOffset+m.FrameCropRightOffset,p.CodecHeight-=m.FrameCropTopOffset+m.FrameCropBottomOffset,p.Width=p.CodecWidth,p.Height=p.CodecHeight,1<m.Vui.Sar.Den&&(p.Width*=m.Vui.Sar.Num/m.Vui.Sar.Den)},m.ProfileIdc=0,m.ConstraintSetFlags=0,m.ReservedZero2Bits=0,m.LevelIdc=0,m.ID=0,m.ChromaFormatIdc=0,m.SeparateColourPlaneFlag=0,m.BitDepthLuma=0,m.BitDepthChroma=0,m.TransformBypass=0,m.SeqScalingMatrixPresentFlag=0,m.Log2MaxFrameNum=0,m.PocType=0,m.Log2MaxPocLsb=0,m.DeltaPicOrderAlwaysZeroFlag=0,m.OffsetForNonRefPic=0,m.OffsetForTopToBottomField=0,m.NumRefFramesInPocCycle=0,m.OffsetForRefFrame=new Array(256),m.MaxNumRefFrames=0,m.GapsInFrameNumValueAllowedFlag=0,m.PicWidth=0,m.PicHeight=0,m.FrameMbsOnlyFlag=0,m.MbAdaptiveFrameFieldFlag=0,m.Direct8x8InferenceFlag=0,m.FrameCroppingFlag=0,m.FrameCropLeftOffset=0,m.FrameCropRightOffset=0,m.FrameCropTopOffset=0,m.FrameCropBottomOffset=0,m.VuiParametersPresentFlag=0,m.Vui=new t}}(playease),function(e){var a=e.utils,o=a.Golomb,e=e.AV.Codec.AVC;e.PPS=function(e){var t,n,r=this;r.parse=function(e){e=a.ebsp2rbsp(e);if(n=new o(e),r.Data=e,r.ID=n.ReadUE(),256<=r.ID)throw{name:"DataError",message:"PPS ID(0x"+r.ID.toString(16)+") out of range."};if(r.SpsID=n.ReadUE(),32<=r.SpsID)throw{name:"DataError",message:"SPS ID(0x"+r.SpsID.toString(16)+") out of range."};if(14<t.BitDepthLuma)throw{name:"DataError",message:"Invalid BitDepthLuma "+t.BitDepthLuma+"."};if(11===t.BitDepthLuma||13===t.BitDepthLuma)throw{name:"DataError",message:"Unimplemented BitDepthLuma "+t.BitDepthLuma+"."};if(r.EntropyCodingModeFlag=n.ReadBits(1),r.PicOrderPresentFlag=n.ReadBits(1),r.NumSliceGroups=n.ReadUE()+1,1<r.NumSliceGroups&&(r.SliceGroupMapType=n.ReadUE(),a.debug("FMO not supported!"),r.SliceGroupMapType),r.NumRefIdx[0]=n.ReadUE()+1,r.NumRefIdx[1]=n.ReadUE()+1,31<r.NumRefIdx[0]-1||31<r.NumRefIdx[1]-1)throw{name:"DataError",message:"PPS reference overflow."};e=6*(t.BitDepthLuma-8);r.WeightedPredFlag=n.ReadBits(1),r.WeightedBipredIdc=n.ReadBits(2),r.PicInitQp=n.ReadSE()+26+e,r.PicInitQs=n.ReadSE()+26+e,r.ChromaQpIndexOffset[0]=n.ReadSE(),r.DeblockingFilterControlPresentFlag=n.ReadBits(1),r.ConstrainedIntraPredFlag=n.ReadBits(1),r.RedundantPicCntPresentFlag=n.ReadBits(1),(r.Transform8x8ModeFlag=0)<n.Left()&&(66!==t.ProfileIdc&&77!==t.ProfileIdc&&88!==t.ProfileIdc||0==(7&t.ConstraintSetFlags)||(a.debug("Current profile doesn't provide more RBSP data in PPS, skipping..."),0))?(r.Transform8x8ModeFlag=n.ReadBits(1),r.PicScalingMatrixPresentFlag=n.ReadBits(1),0!==r.PicScalingMatrixPresentFlag&&(e=2,3===t.ChromaFormatIdc&&(e=6),n.ReadBits(6+e*r.Transform8x8ModeFlag)),r.ChromaQpIndexOffset[1]=n.ReadSE()):r.ChromaQpIndexOffset[1]=r.ChromaQpIndexOffset[0],r.ChromaQpIndexOffset[0]!==r.ChromaQpIndexOffset[1]&&(r.ChromaQpDiff=1)},t=e,r.ID=0,r.SpsID=0,r.EntropyCodingModeFlag=0,r.PicOrderPresentFlag=0,r.NumSliceGroups=0,r.SliceGroupMapType=0,r.NumRefIdx=new Array(2),r.WeightedPredFlag=0,r.WeightedBipredIdc=0,r.PicInitQp=0,r.PicInitQs=0,r.ChromaQpIndexOffset=new Array(2),r.DeblockingFilterControlPresentFlag=0,r.ConstrainedIntraPredFlag=0,r.RedundantPicCntPresentFlag=0,r.Transform8x8ModeFlag=0,r.PicScalingMatrixPresentFlag=0,r.ChromaQpDiff=0}}(playease),function(e){var s=e.utils,t=e.events,d=t.EventDispatcher,c=t.Event,u=t.MediaStreamTrackEvent,e=e.AV,l=e.Information,n={},r=[];function p(e,t){d.call(this,"MediaStreamTrack");var n=this;n.stop=function(){n.source=null,n.sn=0,n.timestamp=0},n.clone=function(){return new p(n.kind,n.source)},n.id=0,n.kind=e,n.source=t,n.sn=0,n.timestamp=0}function a(e,t){var n=Array.prototype.slice.call(arguments,2);d.apply(this,[e,t].concat(n).concat([u,[c.ERROR]]));var r,a,o=this;function i(){r=1,a=[],o.info=new l}o.addTrack=function(e){for(var t=0;t<a.length;t++)if(a[t]===e)return void s.warn("MediaStreamTrack already added.");e.id=r++,a.push(e),s.log("Added "+e.kind+" track("+e.id+") to "+o.kind+"."),o.dispatchEvent(u.ADDTRACK,{track:e})},o.removeTrack=function(e){for(var t=0;t<a.length;t++)if(a[t]===e){a.splice(t,1),s.log("Removed "+e.kind+" track("+e.id+") to "+o.kind+"."),o.dispatchEvent(u.REMOVETRACK,{track:e});break}},o.getTrackById=function(e){for(var t=0;t<a.length;t++)if(a[t].id===e)return a[t];return null},o.getTracks=function(){var n=[];return s.forEach(a,function(e,t){n.push(t)}),n},o.getAudioTracks=function(){var n=[];return s.forEach(a,function(e,t){t.kind===p.KindAudio&&n.push(t)}),n},o.getVideoTracks=function(){var n=[];return s.forEach(a,function(e,t){t.kind===p.KindVideo&&n.push(t)}),n},o.attached=function(e){for(var t=0;t<a.length;t++)if(a[t].source===e)return a[t];return null},o.close=function(){s.forEach(a,function(e,t){t.stop(),o.dispatchEvent(u.REMOVETRACK,{track:t})}),i()},i()}((p.prototype=Object.create(d.prototype)).constructor=p).prototype.kind="MediaStreamTrack",((a.prototype=Object.create(d.prototype)).constructor=a).prototype.kind="MediaStream",n.register=function(t,e){try{r.splice(e||r.length,0,t),n[t.prototype.kind]=t}catch(e){s.error("Failed to register format "+t.prototype.kind+", Error="+e.message)}},n.get=function(e){for(var t=0;t<r.length;t++){var n=r[t];if(n.prototype.kind===e)return n}return null},p.KindAudio="audio",p.KindVideo="video",n.MediaStreamTrack=p,n.MediaStream=a,e.format=n.get,e.Format=n}(playease),function(e){var s=e.utils,t=e.events,d=t.Event,c=t.MediaEvent,u=e.AV,l=u.Packet,e=u.Format,n=e.MediaStream,p={AUDIO:8,VIDEO:9,SCRIPT:18},f={KEYFRAME:1,INTER_FRAME:2,DISPOSABLE_INTER_FRAME:3,GENERATED_KEYFRAME:4,INFO_OR_COMMAND_FRAME:5},m=0,g=1,E=2,h=3,v=4,y=5,S=6,R=7,C=8,A=9,L=10,b=11,O=12,w=13,T=14,I=15,D=16,N=17,F=18,P=19,M=20,k=21,B=22,x=23,U=24;function r(){n.call(this,"FLV",null,[c.PACKET],[d.ERROR]);var a,o,i=this;function e(){a=m,i.hasAudio=!1,i.hasVideo=!1}i.append=function(e){for(var t=new Uint8Array(e),n=0;n<t.byteLength;n++)switch(a){case m:if(70!==t[n])return void i.dispatchEvent(d.ERROR,{name:"DataError",message:'Not "F"'});a=g;break;case g:if(76!==t[n])return void i.dispatchEvent(d.ERROR,{name:"DataError",message:'Not "L"'});a=E;break;case E:if(86!==t[n])return void i.dispatchEvent(d.ERROR,{name:"DataError",message:'Not "V"'});a=h;break;case h:t[n],a=v;break;case v:i.hasAudio=!!(4&t[n]),i.hasVideo=!!(1&t[n]),s.log("Flags: hasAudio="+i.hasAudio+", hasVideo="+i.hasVideo),i.hasAudio||i.hasVideo,a=y;break;case y:a=S;break;case S:a=R;break;case R:a=C;break;case C:a=A;break;case A:t[n],a=L;break;case L:t[n],a=b;break;case b:t[n],a=O;break;case O:t[n],a=w;break;case w:switch(o=new u.Packet,t[n]){case p.AUDIO:o.kind=l.KindAudio;break;case p.VIDEO:o.kind=l.KindVideo;break;case p.SCRIPT:o.kind=l.KindScript;break;default:return void i.dispatchEvent(d.ERROR,{name:"TypeError",message:"Unrecognized flv tag "+s.hex(t[n])+"."})}a=T;break;case T:o.length=t[n]<<16,a=I;break;case I:o.length|=t[n]<<8,a=D;break;case D:o.length|=t[n],o.payload=new Uint8Array(o.length),o.position=0,a=N;break;case N:o.timestamp=t[n]<<16,a=F;break;case F:o.timestamp|=t[n]<<8,a=P;break;case P:o.timestamp|=t[n],a=M;break;case M:o.timestamp|=t[n]<<24,a=k;break;case k:o.streamid=t[n]<<16,a=B;break;case B:o.streamid|=t[n]<<8,a=x;break;case x:o.streamid|=t[n],a=U;break;case U:var r=Math.min(o.length-o.position,t.byteLength-n);if(o.payload.set(t.subarray(n,n+r),o.position),o.position+=r,n+=r-1,o.position===o.length){switch(o.kind){case l.KindAudio:o.set("Format",o.payload[0]>>4&15),o.set("SampleRate",o.payload[0]>>2&3),o.set("SampleSize",o.payload[0]>>1&1),o.set("SampleType",1&o.payload[0]),o.set("DataType",o.payload[1]),o.position=1;break;case l.KindVideo:o.set("FrameType",o.payload[0]>>4&15),o.set("Codec",15&o.payload[0]),o.set("DataType",o.payload[1]),o.set("Keyframe",o.get("FrameType")===f.KEYFRAME),o.position=1;break;case l.KindScript:o.position=0}i.dispatchEvent(c.PACKET,{packet:o}),a=A}break;default:return void i.dispatchEvent(d.ERROR,{name:"InvalidStateError",message:"Invalid state while parsing flv tag."})}},i.reset=function(){e(),i.close()},e()}((r.prototype=Object.create(n.prototype)).constructor=r).prototype.kind="FLV",r.Tags=p,r.Frames=f,r.Formats={LINEAR_PCM_PLATFORM_ENDIAN:0,ADPCM:1,MP3:2,LINEAR_PCM_LITTLE_ENDIAN:3,NELLYMOSER_16_kHz_MONO:4,NELLYMOSER_8_kHz_MONO:5,NELLYMOSER:6,G_711_A_LAW_LOGARITHMIC_PCM:7,G_711_MU_LAW_LOGARITHMIC_PCM:8,RESERVED:9,AAC:10,SPEEX:11,MP3_8_kHz:14,DEVICE_SPECIFIC_SOUND:15},r.Rates=[5500,11025,22050,44100],r.Codecs={JPEG:1,H263:2,SCREEN_VIDEO:3,VP6:4,VP6_ALPHA:5,SCREEN_VIDEO_2:6,AVC:7},e.FLV=r}(playease),function(e){var t=e.utils,n=e.events,r=n.Event,a=n.MediaEvent,e=e.AV.Format,o=e.MediaStreamTrack,i=e.MediaStream,c={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),u=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),l=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),p=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),f=new Uint8Array([0,0,0,0,0,0,0,1]),m=new Uint8Array([0,0,0,0,0,0,0,0]),g=STCO=m,E=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),h=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),v=new Uint8Array([0,0,0,0,0,0,0,0]);function y(){i.call(this,"FMP4",null,[a.PACKET],[r.ERROR]);var d=this;d.append=function(e){d.dispatchEvent(r.ERROR,{name:"NotSupportedError",message:"The operation is not supported."})},d.getInitSegment=function(){var e=d.ftyp(),t=d.moov.apply(d,arguments);return y.merge(e,t)},d.getSegment=function(e,t){var n=e.source;e.kind===o.KindVideo&&(t.get("Keyframe")?(n.Flags.SampleDependsOn=2,n.Flags.SampleIsDependedOn=1):(n.Flags.SampleDependsOn=1,n.Flags.SampleIsDependedOn=0)),e.sn++;var r=d.moof(e,t),a=d.mdat(t.get("Data")),t=t.get("DTS")-d.info.TimeBase-e.timestamp;return e.timestamp+=n.RefSampleDuration+t,y.merge(r,a)},d.box=function(e){for(var t=Array.prototype.slice.call(arguments,1),n=8,r=0;r<t.length;r++)n+=t[r].byteLength;var a=0,o=new Uint8Array(n);o[a++]=n>>>24&255,o[a++]=n>>>16&255,o[a++]=n>>>8&255,o[a++]=255&n,o.set(e,a),a+=4;for(r=0;r<t.length;r++)o.set(t[r],a),a+=t[r].byteLength;return o},d.ftyp=function(){return d.box(c.ftyp,u)},d.moov=function(){for(var e=[],t=[],n=d.mvhd(),r=Array.prototype.slice.call(arguments,0),a=0;a<r.length;a++){var o=r[a],i=d.trak(o),o=d.trex(o);e.push(i),t.push(o)}var s=d.box.apply(d,[c.mvex].concat(t));return d.box.apply(d,[c.moov].concat([n],e,[s]))},d.mvhd=function(){var e=d.info.Timescale,t=1e3*d.info.Duration;return d.box(c.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},d.trak=function(e){var t=d.tkhd(e),e=d.mdia(e);return d.box(c.trak,t,e)},d.tkhd=function(e){var t=e.id,n=1e3*d.info.Duration,r=d.info.Width,e=d.info.Height;return d.box(c.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,e>>8&255,255&e,0,0]))},d.mdia=function(e){var t=d.mdhd(),n=d.hdlr(e),e=d.minf(e);return d.box(c.mdia,t,n,e)},d.mdhd=function(){var e=d.info.Timescale,t=1e3*d.info.Duration;return d.box(c.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,85,196,0,0]))},d.hdlr=function(e){return d.box(c.hdlr,e.kind===o.KindAudio?p:l)},d.minf=function(e){var t=e.kind===o.KindAudio?d.box(c.smhd,v):d.box(c.vmhd,h),n=d.dinf(),e=d.stbl(e);return d.box(c.minf,t,n,e)},d.dinf=function(){var e=d.box(c.dref,s);return d.box(c.dinf,e)},d.stbl=function(e){var t=d.stsd(e),n=d.box(c.stts,m),r=d.box(c.stsc,g),a=d.box(c.stsz,E),e=d.box(c.stco,STCO);return d.box(c.stbl,t,n,r,a,e)},d.stsd=function(e){return e.kind===o.KindAudio?d.box(c.stsd,f,d.mp4a(e)):d.box(c.stsd,f,d.avc1(e))},d.mp4a=function(e){var t=e.source.ChannelConfiguration,n=e.source.SamplingFrequency,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,n>>>8&255,255&n,0,0]),e=d.esds(e);return d.box(c.mp4a,n,e)},d.esds=function(e){var t=e.source.Config,e=t.byteLength,e=new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5,e]);return d.box(c.esds,e,t,new Uint8Array([6,1,2]))},d.avc1=function(e){var t=d.info.CodecWidth,n=d.info.CodecHeight,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t>>8&255,255&t,n>>8&255,255&n,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,112,108,97,121,101,97,115,101,46,106,115,32,45,32,118,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),e=d.box(c.avcC,e.source.AVCC);return d.box(c.avc1,n,e)},d.trex=function(e){e=e.id;return d.box(c.trex,new Uint8Array([0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},d.moof=function(e,t){var n=d.mfhd(e),t=d.traf(e,t);return d.box(c.moof,n,t)},d.mfhd=function(e){e=e.sn,e=new Uint8Array([0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]);return d.box(c.mfhd,e)},d.traf=function(e,t){var n=e.id,r=t.timestamp,n=d.box(c.tfhd,new Uint8Array([0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n])),r=d.box(c.tfdt,new Uint8Array([0,0,0,0,r>>24&255,r>>16&255,r>>8&255,255&r])),t=d.trun(e,t),e=d.sdtp(e);return d.box(c.traf,n,r,t,e)},d.trun=function(e,t){var n=e.source,r=t.get("DTS")-d.info.TimeBase-e.timestamp,e=n.RefSampleDuration+r,r=t.get("Data").byteLength,n=n.Flags,t=t.get("CTS")-d.info.TimeBase;return d.box(c.trun,new Uint8Array([0,0,15,1,0,0,0,1,0,0,0,121,e>>24,e>>16,e>>8,e,r>>24,r>>16,r>>8,r,n.IsLeading<<2|n.SampleDependsOn,n.SampleIsDependedOn<<6|n.SampleHasRedundancy<<4|n.IsNonSync,0,0,t>>24,t>>16,t>>8,t]))},d.sdtp=function(e){e=e.source.Flags;return d.box(c.sdtp,new Uint8Array([0,0,0,0,e.IsLeading<<6|e.SampleDependsOn<<4|e.SampleIsDependedOn<<2|e.SampleHasRedundancy]))},d.mdat=function(e){return d.box(c.mdat,e)},d.reset=function(){d.close()}}t.forEach(c,function(e,t){t.push(e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3))}),y.prototype=Object.create(i.prototype),(y.prototype.constructor=y).prototype.kind="FMP4",y.merge=function(){for(var e=Array.prototype.slice.call(arguments,0),t=0,n=0;n<e.length;n++)t+=e[n].byteLength;for(var r=0,a=new Uint8Array(t),n=0;n<e.length;n++)a.set(e[n],r),r+=e[n].byteLength;return a},y.parseDescriptor=function(e){for(var t,n=new Uint8Array(e),r=0,a={},o=0;o<n.byteLength;o++)switch(r){case 0:a[(t={type:n[o],size:0,data:void 0}).type]=t,r=1;break;case 1:case 2:case 3:case 4:var i=n[o];t&&(t.size=t.size<<7|127&i),128&i?r++:r=5;break;case 5:t&&(t.data=n.subarray(o,o+t.size),o+=t.size-1),r=0;break;default:throw{name:"InvalidStateError",message:"Invalid state while parsing fmp4 descriptor."}}return a},e.FMP4=y}(playease),function(e){var n=e.utils,r={},a=[];r.register=function(t,e){try{a.splice(e||a.length,0,t),r[t.prototype.kind]=t}catch(e){n.error("Failed to register module "+t.prototype.kind+", Error="+e.message)}},r.get=function(e,t){for(var n=0;n<a.length;n++){var r=a[n];if(r.prototype.isSupported(e,t))return r}return null},e.module=r.get,e.Module=r}(playease),function(e){var c=e.utils,u=c.css,l=e.OS,o=e.Browser,t=e.events,p=t.EventDispatcher,f=t.Event,m=t.IOEvent,e=e.Module;function n(e){p.call(this,"SRC",null,f,m);var t,r,a,o=this;function n(e){o.dispatchEvent(f.DURATIONCHANGE,{duration:r.duration})}function i(e){var t=r.buffered;o.dispatchEvent(f.TIMEUPDATE,{start:t.length?t.start(0):0,time:r.currentTime,buffered:t.length?t.end(t.length-1):0,duration:r.duration})}function s(e){o.dispatchEvent(f.VOLUMECHANGE,{muted:r.muted,volume:r.volume})}function d(e){var t={1:{name:"AbortError",message:"The operation was aborted."},2:{name:"NetworkError",message:"A network error occurred."},3:{name:"EncodingError",message:"The encoding or decoding operation failed."},4:{name:"NotSupportedError",message:"Failed to load because no supported source was found."}}[r.error.code];o.dispatchEvent(f.ERROR,{name:t.name,message:t.message})}o.setup=function(){!1===t&&(t=!0,o.dispatchEvent(f.READY,{kind:o.kind}))},o.play=function(e,t){"string"===c.typeOf(e)&&e!==a&&e!==r.src&&(a=e,o.dispatchEvent(f.DURATIONCHANGE,{duration:NaN}),r.src=e);var n=r.play();n&&n.catch(function(e){switch(e.name){case"AbortError":c.debug(e.name+": "+e.message);break;case"NotAllowedError":if(c.warn("Failed to play due to the autoplay policy, trying to play in mute."),l.isMobile)return;r.muted=!0,(n=r.play())&&n.catch(function(e){r.muted=o.config.muted});break;default:c.error("Unexpected error occured, "+e.name+": "+e.message),o.dispatchEvent(f.ERROR,{name:e.name,message:e.message})}}),r.controls=!1},o.pause=function(){r.pause(),r.controls=!1},o.seek=function(e){r.currentTime=e},o.stop=function(){a=void 0,r.removeAttribute("src"),r.load(),r.controls=!1,o.dispatchEvent(f.ENDED)},o.muted=function(e){return"boolean"===c.typeOf(e)&&(r.muted=e),r.muted},o.volume=function(e){return"number"===c.typeOf(e)&&(r.volume=e),r.volume},o.cleanup=function(){o.stop(),t=!1},o.element=function(){return r},o.config=e,t=!1,(r=c.createElement("video")).addEventListener("play",o.forward),r.addEventListener("waiting",o.forward),r.addEventListener("loadstart",o.forward),r.addEventListener("progress",o.forward),r.addEventListener("suspend",o.forward),r.addEventListener("stalled",o.forward),r.addEventListener("abort",o.forward),r.addEventListener("timeout",o.forward),r.addEventListener("durationchange",n),r.addEventListener("loadedmetadata",o.forward),r.addEventListener("loadeddata",o.forward),r.addEventListener("canplay",o.forward),r.addEventListener("playing",o.forward),r.addEventListener("canplaythrough",o.forward),r.addEventListener("pause",o.forward),r.addEventListener("seeking",o.forward),r.addEventListener("seeked",o.forward),r.addEventListener("ratechange",o.forward),r.addEventListener("timeupdate",i),r.addEventListener("volumechange",s),r.addEventListener("load",o.forward),r.addEventListener("ended",o.forward),r.addEventListener("error",d),o.config.objectfit&&u.style(r,{"object-fit":o.config.objectfit}),o.config.airplay&&r.setAttribute("x-webkit-airplay","allow"),o.config.autoplay&&r.setAttribute("autoplay",""),o.config.playsinline&&(r.setAttribute("playsinline","isiPhoneShowPlaysinline"),r.setAttribute("webkit-playsinline","isiPhoneShowPlaysinline"),r.setAttribute("x5-playsinline",""),r.setAttribute("x5-video-player-type","h5-page"),r.setAttribute("x5-video-player-fullscreen",!0),r.setAttribute("t7-video-player-type","inline")),o.config.preload&&(r.preload=o.config.preload),r.muted=o.config.muted,r.volume=o.config.volume}((n.prototype=Object.create(p.prototype)).constructor=n).prototype.kind="SRC",n.prototype.isSupported=function(e,t){if(o.isMSIE&&o.major<9)return!1;var n=new c.URL(e);if("http:"!==n.protocol&&"https:"!==n.protocol)return!1;for(var r=l.isMobile||l.isMac&&o.isSafari?["m3u8","m3u","hls","mp4","f4v","m4v","mov","m4a","f4a","aac","ogv","ogg","mp3","oga","webm"]:["mp4","f4v","m4v","mov","m4a","f4a","aac","ogv","ogg","mp3","oga","webm"],a=0;a<r.length;a++)if(n.filetype===r[a])return!0;return!1},e.register(n)}(playease),function(Y){var q=Y.utils,Q=q.css,X=Y.OS,Z=Y.Browser,e=Y.events,$=e.EventDispatcher,J=e.Event,ee=e.IOEvent,te=e.TimerEvent,ne=e.MediaEvent,re=e.MediaStreamTrackEvent,ae=Y.IO,oe=q.AMF,e=Y.AV,ie=e.Packet,se=e.Codec,de=e.Format,ce=de.MediaStreamTrack,ue=de.FLV.Formats,le=de.FLV.Codecs,e=Y.Module,pe=[String.fromCharCode(115,116,117,100,101,97,115,101,46,99,110),String.fromCharCode(51,57,46,57,56,46,52,48,46,49,57,51),String.fromCharCode(49,50,55,46,48,46,48,46,49),String.fromCharCode(49,50,56,46,48,46,48,46,49,48),String.fromCharCode(119,119,119,46,99,97,114,45,101,121,101,46,99,110),String.fromCharCode(119,119,119,46,115,116,114,101,97,109,105,110,103,45,118,105,112,46,99,111,109),String.fromCharCode(49,50,48,46,55,54,46,50,51,53,46,49,48,57),String.fromCharCode(49,50,48,46,55,57,46,54,55,46,49,48,50)],fe=String.fromCharCode(83,101,99,117,114,105,116,121,69,114,114,111,114),me=String.fromCharCode(84,104,101,32,111,112,101,114,97,116,105,111,110,32,105,115,32,105,110,115,101,99,117,114,101,46);function t(e){$.call(this,"FLV",null,J,ee);var t,i,s,d,r,c,a,o,u,l,p,f,n,m,g,E,h,v,y,S,R=this;function C(e){q.log("MediaSource.onsourceopen"),m=new Date,E=g=NaN,v=h=0,y.start(),o.load(r)}function A(e){q.log("MediaSource.onsourceended")}function L(e){q.log("MediaSource.onsourceclose")}function b(e){q.log("MediaSource.onsourceerror"),R.dispatchEvent(J.ERROR,{name:err.name,message:err.message})}function O(){o&&(o.removeEventListener(ee.LOADSTART,R.forward),o.removeEventListener(ee.STALLED,R.forward),o.removeEventListener(ee.ABORT,I),o.removeEventListener(ee.TIMEOUT,R.forward),o.removeEventListener(ee.PROGRESS,w),o.removeEventListener(ee.SUSPEND,R.forward),o.removeEventListener(ee.LOAD,R.forward),o.removeEventListener(ee.LOADEND,x),o.removeEventListener(J.ERROR,R.forward),o.abort())}function w(e){q.debug("progress: "+e.data.loaded+"/"+e.data.total),h+=e.data.loaded,v+=e.data.loaded,R.dispatchEvent(ne.STATSUPDATE,{stats:{LoadedBytes:q.formatBytes(h)}}),u.append(e.data.buffer)}function T(e){R.dispatchEvent(ne.STATSUPDATE,{stats:{LoadingSpeed:q.formatBytes(v)+"/sec."}}),v=0}function I(e){e.type=J.ENDED,R.forward(e)}function D(e){var r,a,o,e=e.data.packet;switch(e.kind){case ie.KindVideo:if(e.get("Codec")!==le.AVC)return void R.dispatchEvent(J.ERROR,{name:"NotSupportedError",message:"Video codec "+q.hex(e.get("Codec"))+" not supported."});var t=u.getVideoTracks()[0];if(e.get("DataType")===se.AVC.DataTypes.SEQUENCE_HEADER){if(t)return void q.warn("Video track already exists, ignored.");var n=new se.AVC(u.info);t=new ce(ce.KindVideo,n),u.addTrack(t)}else if(0<e.timestamp&&e.timestamp<u.info.VideoTimestamp)return void q.warn("Drops unordered video packet: "+e.timestamp);isNaN(E)&&(E=(new Date).getTime()-m.getTime(),R.dispatchEvent(ne.STATSUPDATE,{stats:{FirstVideoFrame:(E/1e3).toLocaleString()+" sec."}})),t.source.parse(e);break;case ie.KindAudio:if(e.get("Format")!==ue.AAC)return void R.dispatchEvent(J.ERROR,{name:"NotSupportedError",message:"Audio format "+q.hex(e.get("Format"))+" not supported."});t=u.getAudioTracks()[0];if(e.get("DataType")===se.AAC.DataTypes.SPECIFIC_CONFIG){if(t)return void q.warn("Audio track already exists, ignored.");n=new se.AAC(u.info);t=new ce(ce.KindAudio,n),u.addTrack(t)}else if(0<e.timestamp&&e.timestamp<=u.info.AudioTimestamp)return void q.warn("Drops unordered audio packet: "+e.timestamp);isNaN(g)&&(g=(new Date).getTime()-m.getTime(),R.dispatchEvent(ne.STATSUPDATE,{stats:{FirstAudioFrame:(g/1e3).toLocaleString()+" sec."}})),t.source.parse(e);break;case ie.KindScript:n=new oe.Value,t=oe.decode(n,e.payload.buffer,e.position);n.key=n.get(),t+=oe.decode(n,e.payload.buffer,e.position+t);var i={};q.forEach(n.get(),function(e,t){i[t.key]=t.get()}),q.log(n.key+":",i),"onMetaData"===n.key&&(r=n,a={MimeType:u.info.MimeType,Codecs:u.info.Codecs.join(", "),Timescale:u.info.Timescale},o={duration:"Duration",fileSize:"FileSize",width:"Width",height:"Height",framerate:"FrameRate",audiodatarate:"AudioDataRate",videodatarate:"VideoDataRate",audiosamplerate:"SampleRate",audiosamplesize:"SampleSize",audiochannels:"Channels",stereo:"Stereo",encoder:"Encoder"},q.forEach(r.table,function(e,t){var n=o[e];n&&("FrameRate"===n?r.table[e].get()&&(u.info.FrameRate.Num=r.table[e].get(),u.info.FrameRate.Den=1):u.info[n]=r.table[e].get(),a[n]=r.table[e].get())}),R.dispatchEvent(ne.INFOCHANGE,{info:a}));break;default:q.error("Unrecognized flv tag "+q.hex(e.kind)+".")}}function N(e){e=e.data.track.clone();e.source.addEventListener(ne.AVC_CONFIG_RECORD,P),e.source.addEventListener(ne.AAC_SPECIFIC_CONFIG,M),e.source.addEventListener(ne.AVC_SAMPLE,k),e.source.addEventListener(ne.AAC_SAMPLE,B),e.source.addEventListener(ne.END_OF_STREAM,x),e.source.addEventListener(J.ERROR,R.forward),l.addTrack(e)}function F(e){e=l.getTrackById(e.data.track.id);e.source.removeEventListener(ne.AVC_CONFIG_RECORD,P),e.source.removeEventListener(ne.AAC_SPECIFIC_CONFIG,M),e.source.removeEventListener(ne.AVC_SAMPLE,k),e.source.removeEventListener(ne.AAC_SAMPLE,B),e.source.removeEventListener(ne.END_OF_STREAM,x),e.source.removeEventListener(J.ERROR,R.forward),e.stop(),l.removeTrack(e)}function P(e){var t=l.getVideoTracks()[0];U(t);var n=l.getInitSegment(t);p[t.kind].push(n),_(t.kind)}function M(e){var t=l.getAudioTracks()[0];U(t);var n=l.getInitSegment(t);p[t.kind].push(n),_(t.kind)}function k(e){var t=l.getVideoTracks()[0],e=l.getSegment(t,e.data.packet);p[t.kind].push(e),_(t.kind)}function B(e){var t=l.getAudioTracks()[0],e=l.getSegment(t,e.data.packet);p[t.kind].push(e),_(t.kind)}function x(e){s=!0}function U(e){if(!u.hasAudio&&!u.hasVideo||(u.hasAudio||e.kind!==ce.KindAudio)&&(u.hasVideo||e.kind!==ce.KindVideo)){var t=e.source,n=t.MimeType+'; codecs="'+t.Codec+'"';if(!1!==MediaSource.isTypeSupported(n))if("closed"!==c.readyState){q.log("Adding SourceBuffer: "+n);try{var r=c.addSourceBuffer(n);r.addEventListener("updateend",V),r.addEventListener("error",G),r.kind=e.kind,a[e.kind]=r}catch(e){q.error(e.name+": "+e.message)}R.dispatchEvent(ne.INFOCHANGE,{info:{MimeType:u.info.MimeType,Codecs:u.info.Codecs.join(", "),Timescale:u.info.Timescale}})}else R.dispatchEvent(J.ERROR,{name:"InvalidStateError",message:"MediaSource is already closed while adding SourceBuffer."});else q.warn(n+" not supported!")}}function _(t){if(!u.hasAudio&&!u.hasVideo||!(u.hasAudio&&!a[ce.KindAudio]||u.hasVideo&&!a[ce.KindVideo])){var e=a[t];if(e&&!e.updating){var t=p[t],n=t.shift();if(n)try{e.appendBuffer(n)}catch(e){t.splice(0,0,n),q.debug(e.name+": "+e.message)}}}}function V(t){q.debug("SourceBuffer.onupdateend");var n=t.target;if(i||(a=d.buffered).length&&(r=a.start(0),o=X.isMac&&Z.isSafari?.5:.001,d.currentTime<r&&(d.currentTime=r+o,i=!0,q.warn("Seems stalled, seeking to the available time "+d.currentTime+"."))),s){if("open"!==c.readyState)return;if(!p[ce.KindAudio].length&&!p[ce.KindVideo].length)return void c.endOfStream()}if(1.1*f[n.kind]>=R.config.maxPlaybackLength)try{n.remove(0,f[n.kind]-R.config.maxPlaybackLength/2),f[n.kind]=0}catch(e){var t=d.buffered,r=t.length?t.start(0):0,a=d.currentTime,o=t.length?t.end(t.length-1):0,t=d.duration;q.debug("Failed to remove "+n.kind+" buffer: start="+r+", time="+a+", buffered="+o+", duration="+t)}else _(n.kind)}function G(e){q.error("SourceBuffer.onerror"),R.dispatchEvent(J.ERROR,{name:"DataError",message:"SourceBuffer error occurs."})}function H(e){var n=d.currentTime;q.forEach(f,function(e,t){f[e]=n})}function z(e){"live"!==R.config.mode||isNaN(R.config.maxPlaybackLength)||n.start(),R.dispatchEvent(J.DURATIONCHANGE,{duration:d.duration}),R.dispatchEvent(ne.INFOCHANGE,{info:{Duration:d.duration}})}function W(e){var t=d.buffered,n=d.currentTime,r=t.length?t.end(t.length-1):0;"live"===R.config.mode&&R.config.lowlatency&&.5<r-n&&(d.currentTime=r-.3),R.dispatchEvent(J.TIMEUPDATE,{start:t.length?t.start(0):0,time:d.currentTime,buffered:r,duration:d.duration}),"function"===q.typeOf(d.getVideoPlaybackQuality)&&(r=d.getVideoPlaybackQuality(),R.dispatchEvent(ne.STATSUPDATE,{stats:{DroppedVideoFrames:r.droppedVideoFrames.toLocaleString(),TotalVideoFrames:r.totalVideoFrames.toLocaleString()}}))}function j(e){R.dispatchEvent(J.VOLUMECHANGE,{muted:d.muted,volume:d.volume})}function K(e){var t={1:{name:"AbortError",message:"The operation was aborted."},2:{name:"NetworkError",message:"A network error occurred."},3:{name:"EncodingError",message:"The encoding or decoding operation failed."},4:{name:"NotSupportedError",message:"Failed to load because no supported source was found."}}[d.error.code];R.dispatchEvent(J.ERROR,{name:t.name,message:t.message})}R.setup=function(){!1===t&&(t=!0,R.dispatchEvent(J.READY,{kind:R.kind}))},R.play=function(t,e){if("string"===q.typeOf(t)&&new q.URL(t).href!==r.href){try{r.parse(t)}catch(e){return q.error('Failed to parse url "'+t+'".'),void R.dispatchEvent(J.ERROR,{name:e.name,message:e.message})}if(!function(e){for(var t=0;t<pe.length;t++)if(pe[t]===e)return!0;return!1}(r.hostname))return r=new q.URL,void R.dispatchEvent(J.ERROR,{name:fe,message:me});s=!1,u.reset(),l.reset(),l.info=u.info,function(e){var t;O(),e.loader&&"auto"!==e.loader.name&&(t=ae[e.loader.name]);null!=t&&t.prototype.isSupported(r,R.config.mode)||(t=Y.io(r,R.config.mode));if(null==t)throw{name:"NotSupportedError",message:"No supported io found."};(o=new t(e.loader)).addEventListener(ee.LOADSTART,R.forward),o.addEventListener(ee.STALLED,R.forward),o.addEventListener(ee.ABORT,I),o.addEventListener(ee.TIMEOUT,R.forward),o.addEventListener(ee.PROGRESS,w),o.addEventListener(ee.SUSPEND,R.forward),o.addEventListener(ee.LOAD,R.forward),o.addEventListener(ee.LOADEND,x),o.addEventListener(J.ERROR,R.forward),q.log(o.kind+" loader initialized.")}(e||{}),R.dispatchEvent(J.DURATIONCHANGE,{duration:NaN}),d.src=URL.createObjectURL(c),d.load()}var n=d.play();n&&n.catch(function(e){switch(e.name){case"AbortError":q.debug(e.name+": "+e.message);break;case"NotAllowedError":if(q.warn("Failed to play due to the autoplay policy, trying to play in mute."),X.isMobile)return;d.muted=!0,(n=d.play())&&n.catch(function(e){d.muted=R.config.muted});break;default:q.error("Unexpected error occured, "+e.name+": "+e.message),R.dispatchEvent(J.ERROR,{name:e.name,message:e.message})}}),d.controls=!1},R.pause=function(){d.pause(),d.controls=!1},R.seek=function(e){d.currentTime=e},R.stop=function(){n.reset(),y.reset(),o&&o.abort(),q.forEach(a,function(e,t){if(t){t.removeEventListener("updateend",V),t.removeEventListener("error",G);try{c.removeSourceBuffer(t)}catch(e){q.warn(e.name+": "+e.message)}}a[e]=null}),q.forEach(p,function(e,t){p[e]=[]}),q.forEach(f,function(e,t){f[e]=0}),s=i=!1,r=new q.URL,d.removeAttribute("src"),d.load(),d.controls=!1,R.dispatchEvent(J.ENDED)},R.muted=function(e){return"boolean"===q.typeOf(e)&&(d.muted=e),d.muted},R.volume=function(e){return"number"===q.typeOf(e)&&(d.volume=e),d.volume},R.cleanup=function(){R.stop(),n.removeEventListener(te.TIMER,H),c.removeEventListener("sourceopen",C),c.removeEventListener("sourceended",A),c.removeEventListener("sourceclose",L),c.removeEventListener("error",b),c.removeEventListener("webkitsourceopen",C),c.removeEventListener("webkitsourceended",A),c.removeEventListener("webkitsourceclose",L),c.removeEventListener("webkiterror",b),u.close(),u.removeEventListener(ne.PACKET,D),u.removeEventListener(re.ADDTRACK,N),u.removeEventListener(re.REMOVETRACK,F),u.removeEventListener(J.ERROR,R.forward),l.close(),l.removeEventListener(J.ERROR,R.forward),O()},R.element=function(){return d},R.config=e,s=i=t=!1,r=new q.URL,new q.FileKeeper,(a={})[ce.KindAudio]=null,a[ce.KindVideo]=null,(p={})[ce.KindAudio]=[],p[ce.KindVideo]=[],(f={})[ce.KindAudio]=0,f[ce.KindVideo]=0,(n=new q.Timer(500*R.config.maxPlaybackLength)).addEventListener(te.TIMER,H),(y=new q.Timer(1e3)).addEventListener(te.TIMER,T),S=window.MediaSource||window.WebKitMediaSource,(c=new S).addEventListener("sourceopen",C),c.addEventListener("sourceended",A),c.addEventListener("sourceclose",L),c.addEventListener("error",b),c.addEventListener("webkitsourceopen",C),c.addEventListener("webkitsourceended",A),c.addEventListener("webkitsourceclose",L),c.addEventListener("webkiterror",b),(u=new de.FLV).addEventListener(ne.PACKET,D),u.addEventListener(re.ADDTRACK,N),u.addEventListener(re.REMOVETRACK,F),u.addEventListener(J.ERROR,R.forward),(l=new de.FMP4).addEventListener(J.ERROR,R.forward),(d=q.createElement("video")).addEventListener("play",R.forward),d.addEventListener("waiting",R.forward),d.addEventListener("loadstart",R.forward),d.addEventListener("progress",R.forward),d.addEventListener("suspend",R.forward),d.addEventListener("stalled",R.forward),d.addEventListener("abort",R.forward),d.addEventListener("timeout",R.forward),d.addEventListener("durationchange",z),d.addEventListener("loadedmetadata",R.forward),d.addEventListener("loadeddata",R.forward),d.addEventListener("canplay",R.forward),d.addEventListener("playing",R.forward),d.addEventListener("canplaythrough",R.forward),d.addEventListener("pause",R.forward),d.addEventListener("seeking",R.forward),d.addEventListener("seeked",R.forward),d.addEventListener("ratechange",R.forward),d.addEventListener("timeupdate",W),d.addEventListener("volumechange",j),d.addEventListener("load",R.forward),d.addEventListener("ended",R.forward),d.addEventListener("error",K),R.config.objectfit&&Q.style(d,{"object-fit":R.config.objectfit}),R.config.airplay&&d.setAttribute("x-webkit-airplay","allow"),R.config.autoplay&&d.setAttribute("autoplay",""),R.config.playsinline&&(d.setAttribute("playsinline","isiPhoneShowPlaysinline"),d.setAttribute("webkit-playsinline","isiPhoneShowPlaysinline"),d.setAttribute("x5-playsinline",""),d.setAttribute("x5-video-player-type","h5-page"),d.setAttribute("x5-video-player-fullscreen",!0),d.setAttribute("t7-video-player-type","inline")),d.muted=R.config.muted,d.volume=R.config.volume}((t.prototype=Object.create($.prototype)).constructor=t).prototype.kind="FLV",t.prototype.isSupported=function(e,t){if(Z.isMSIE&&Z.major<9||!window.MediaSource&&!window.WebKitMediaSource)return!1;var n=new q.URL(e);if("http:"!==n.protocol&&"https:"!==n.protocol&&"ws:"!==n.protocol&&"wss:"!==n.protocol)return!1;for(var r=["flv","",void 0],a=0;a<r.length;a++)if(n.filetype===r[a])return!0;return!1},e.register(t)}(playease),playease.core={},function(d){var c=d.utils;d.core.Model=function(n){var r,a,o,i,s=this;s.definition=function(e){return"number"===c.typeOf(e)&&e!==o&&e<s.config.sources.length&&(c.log("Model definition changed: "+e),o=e),isNaN(o)?null:s.config.sources[o]},s.duration=function(e){return"number"===c.typeOf(e)&&(e===i||isNaN(i)&&isNaN(e)||(c.log("Model duration changed: "+e),isNaN(i)&&e!==1/0?s.config.mode="vod":i!==1/0&&isNaN(e)?s.config.mode=r:s.config.mode="live",i=e)),i},s.state=function(e){return"string"===c.typeOf(e)&&e!==a&&(c.log("playease("+s.config.id+") state changed: "+e),a=e),a},function(){s.config=n,r=s.config.mode,a="",i=NaN,"array"!==c.typeOf(s.config.sources)&&(s.config.sources=[]),s.config.file&&(s.config.sources=[{file:s.config.file,module:s.config.module,loader:s.config.loader}]),o=s.config.sources.length?0:NaN;for(var e=0;e<s.config.sources.length;e++){var t=s.config.sources[e];null!=d.module(t.file,s.config.mode)?t.default&&(o=e):(c.warn("Ignored unsupported source url: "+t.file+"."),s.config.sources.splice(e--,1))}0===s.config.sources.length&&c.warn("No supported source url provided.")}()}}(playease),function(a){var o=a.utils,m=a.OS,e=a.events,i=e.EventDispatcher,g=e.Event,s=e.IOEvent,d=a.Module,e=a.core;function t(e,t){i.call(this,"View",null,g,s);var n,r,c,u,l,p,f=this;f.setup=function(t){void 0!==c&&(c.cleanup(),c.removeGlobalListener(f.forward),n.innerHTML="");try{c=new d[t](r.config),n.appendChild(c.element()),c.addGlobalListener(f.forward),c.muted(r.config.muted),c.volume(r.config.volume),c.setup()}catch(e){o.error("Failed to init module "+t+". "+e.name+": "+e.message)}},f.play=function(e,t){if(void 0===e){if(void 0===c)return void f.dispatchEvent(g.ERROR,{name:"NotFoundError",message:"Module not found while the source url doesn't provided."})}else if(void 0===c||!c.isSupported(e,r.config.mode)){var n=a.module(e,r.config.mode);return null==n?void f.dispatchEvent(g.ERROR,{name:"NotSupportedError",message:"No supported module found."}):void f.setup(n.prototype.kind)}c.play(e,t)},f.pause=function(){c&&c.pause()},f.seek=function(e){c&&(c.seek(e),"pause"!==r.state()&&c.play())},f.stop=function(){c&&c.stop()},f.capture=function(e,t,n){if(void 0!==c){var r,a=c.element();u.width=e||a.videoWidth,u.height=t||a.videoHeight,l.drawImage(a,0,0,u.width,u.height);try{r=u.toDataURL(n||"image/png")}catch(e){return void f.dispatchEvent(g.ERROR,{name:e.name,message:e.message})}for(var o=atob(r.split(",")[1]),i=new Uint8Array(o.length),s=0;s<o.length;s++)i[s]=o.charCodeAt(s);var t=new Blob([i],{type:n||"image/png"}),d=URL.createObjectURL(t),a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);t=document.createElementNS("http://www.w3.org/1999/xhtml","a");t.href=d,t.download="capture-"+p+++".png",t.dispatchEvent(a),setTimeout(function(){URL.revokeObjectURL(d)},m.isIOS?1e3:0)}else f.dispatchEvent(g.ERROR,{name:"InvalidStateError",message:"No module initialized yet."})},f.muted=function(e){return"boolean"===o.typeOf(e)&&(c?r.config.muted=c.muted(e):r.config.muted!==e&&(r.config.muted=e,f.dispatchEvent(g.VOLUMECHANGE,{muted:r.config.muted,volume:r.config.volume}))),r.config.muted},f.volume=function(e){return"number"===o.typeOf(e)&&(c?r.config.volume=c.volume(e):r.config.volume!==e&&(r.config.volume=e,f.dispatchEvent(g.VOLUMECHANGE,{muted:r.config.muted,volume:r.config.volume}))),r.config.volume},f.definition=function(e){return"number"===o.typeOf(e)&&e!==r.definition()&&(e<r.config.sources.length?(r.definition(e),f.dispatchEvent(g.SWITCHING,{index:e})):f.dispatchEvent(g.ERROR,{name:"IndexSizeError",message:"The index is not in the allowed range."})),r.definition()},f.onSWFState=function(e){switch(e.state){case"buffering":f.dispatchEvent(g.WAITING);break;case"playing":f.dispatchEvent(g.PLAYING);break;case"paused":f.dispatchEvent(g.PAUSE);break;case"stopped":f.dispatchEvent(g.ENDED);break;case"error":f.dispatchEvent(g.ERROR,{name:err.name,message:"Flash plugin error occured."});break;default:return void f.dispatchEvent(g.ERROR,{name:"InvalidStateError",message:"Invalid state "+e.state+"."})}},f.element=function(){return c?c.element():null},f.resize=function(e,t){},n=e,r=t,u=o.createElement("canvas"),l=u.getContext("2d"),p=0}(t.prototype=Object.create(i.prototype)).constructor=t,e.View=t}(playease),function(e){var p=e.utils,t=e.events,f=t.EventDispatcher,m=t.Event,g=t.IOEvent,E=t.MediaEvent,e=e.core;function n(t,e){f.call(this,"Controller",null,m,g);var a,o,r,i,s=this;function n(e){p.log("playease("+t.config.id+') module "'+e.data.kind+'" is ready.'),l(e),s.play(r,i)}function d(e){a.duration(e.data.duration),s.forward(e)}function c(e){var t=a.definition();p.log("Switching definition "+e.data.index+": "+t.file);var n=0,r=o.element();r&&(n=r.currentTime),l(e),s.play(t.file,t),o.seek(n)}function u(e){p.error(e.data.name+": "+e.data.message),function(){if("SecurityError"===e.data.name)if(-1!==e.data.message.indexOf("toDataURL"))return;return 1}()?(o.stop(),l(e)):s.forward(e)}function l(e){var t=a.state();t===e.type||t===m.ERROR&&e.type===m.ENDED||(a.state(e.type),e.type===m.ENDED&&o.stop(),s.forward(e))}s.play=function(e,t){if(void 0===e){if("pause"===a.state())return void o.play();var n=a.definition();if(null==n||!n.file)return void s.dispatchEvent(m.ERROR,{name:"NotFoundError",message:"No supported source url found."});e=n.file,t=n}r=e,i=t,o.play(r,i)},s.reload=function(){o.stop(),s.play(r,i)},a=t,(o=e).addEventListener(m.READY,n),o.addEventListener(m.PLAY,l),o.addEventListener(m.WAITING,l),o.addEventListener(g.LOADSTART,s.forward),o.addEventListener(g.PROGRESS,s.forward),o.addEventListener(g.SUSPEND,s.forward),o.addEventListener(g.STALLED,s.forward),o.addEventListener(g.ABORT,s.forward),o.addEventListener(g.TIMEOUT,s.forward),o.addEventListener(m.DURATIONCHANGE,d),o.addEventListener(m.LOADEDMETADATA,s.forward),o.addEventListener(m.LOADEDDATA,s.forward),o.addEventListener(m.CANPLAY,s.forward),o.addEventListener(m.PLAYING,l),o.addEventListener(m.CANPLAYTHROUGH,s.forward),o.addEventListener(m.PAUSE,l),o.addEventListener(m.SEEKING,l),o.addEventListener(m.SEEKED,s.forward),o.addEventListener(m.SWITCHING,c),o.addEventListener(m.SWITCHED,s.forward),o.addEventListener(m.RATECHANGE,s.forward),o.addEventListener(m.TIMEUPDATE,s.forward),o.addEventListener(m.VOLUMECHANGE,s.forward),o.addEventListener(g.LOAD,s.forward),o.addEventListener(E.INFOCHANGE,s.forward),o.addEventListener(E.STATSUPDATE,s.forward),o.addEventListener(m.ENDED,l),o.addEventListener(m.ERROR,u)}(n.prototype=Object.create(f.prototype)).constructor=n,e.Controller=n}(playease),function(e){var i=e.utils,t=e.OS,n=e.Kernel,r=e.Browser,a=e.events,s=a.EventDispatcher,d=a.Event,c=a.IOEvent,u=e.core,o={},l={airplay:"allow",autoplay:!1,dynamic:!1,bufferLength:.1,file:"",lowlatency:!0,loop:!1,maxBufferLength:30,maxPlaybackLength:10,mode:"live",module:"",muted:!1,objectfit:"contain",playsinline:!0,preload:"none",smooth:!1,volume:.8,loader:{name:"auto",mode:"cors",credentials:"omit"},sources:[]};function p(e){s.call(this,"API",{id:e},d,c);var n,r,a,o=this;o.setup=function(e,t){o.config=i.extendz({id:o.id},l,t),n=new u.Model(o.config),r=new u.View(e,n),(a=new u.Controller(n,r)).addGlobalListener(o.forward),o.play=a.play,o.pause=r.pause,o.seek=r.seek,o.stop=r.stop,o.reload=a.reload,o.capture=r.capture,o.muted=r.muted,o.volume=r.volume,o.definition=r.definition,o.element=r.element,o.duration=function(){return n.duration()},o.state=function(){return n.state()},o.dispatchEvent(d.BIND),o.config.autoplay&&a.play()},o.id=e}i.log("Version: playease/"+e.VERSION),i.log("OS: "+t.name+"/"+t.version+(t.model?"; "+t.model:"")),i.log("Kernel: "+n.name+"/"+n.version),i.log("Browser: "+r.name+"/"+r.version),((p.prototype=Object.create(s.prototype)).constructor=p).prototype.CONF=l,p.get=function(e){null==e&&(e=0);var t=o[e];return null==t&&(t=new p(e),o[e]=t),t},e.API=p}(playease),function(e){var b=e.utils,O=e.OS,w=b.css,t=e.events,T=t.EventDispatcher,I=t.Event,D=t.IOEvent,N=t.UIEvent,F=t.GlobalEvent,P=t.MouseEvent,M=t.TimerEvent,k=t.MediaEvent,B=e.API,x="pe-wrapper",U="pe-content",n={},_={aspectratio:"",skin:"classic",plugins:[]};function V(e){T.call(this,"UI",{id:e},b.extendz({},I,D,N));var o,n,i,a,s,d,c=this;function r(e){c.config=s.config,c.play=s.play,c.pause=s.pause,c.seek=s.seek,c.stop=s.stop,c.reload=s.reload,c.capture=s.capture,c.muted=s.muted,c.volume=s.volume,c.definition=s.definition,c.element=s.element,c.duration=s.duration,c.state=s.state,c.forward(e)}function u(e){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||c.fullscreen(!1)}function l(e){switch(e.type){case F.CHANGE:(a={timebar:function(){var e=s.duration();e&&s.seek(e*r.data.value/100)},volumebar:function(){s.volume(r.data.value/100)},definition:function(){s.definition(parseInt(r.data.value))}}[(r=e).data.name])?a():c.forward(r);break;case P.CLICK:t=e,(n={play:c.play,pause:c.pause,stop:c.stop,reload:c.reload,capture:c.capture,mute:function(){c.muted(!0)},unmute:function(){c.muted(!1)},danmuoff:function(){c.danmu(!1)},danmuon:function(){c.danmu(!0)},fullpage:function(){c.fullpage(!0)},exitfullpage:function(){c.fullpage(!1)},fullscreen:function(){c.fullscreen(!0)},exitfullscreen:function(){c.fullscreen(!1)},info:function(){C(t.data.name)},stats:function(){C(t.data.name)}}[t.data.name])?n():c.forward(t);break;case P.DOUBLE_CLICK:(n={fullpage:function(){c.fullpage("true"!==i.getAttribute("fullpage"))},fullscreen:function(){c.fullscreen("true"!==i.getAttribute("fullscreen"))}}[(a=e).data.name])?n():c.forward(a);break;default:c.forward(e)}var t,n,r,a}function p(e){var t=o.Controlbar;t&&w.style(t.element(),{visibility:"visible"}),d.stop(),d.start()}function t(e){var t=o.Controlbar;t&&w.style(t.element(),{visibility:"hidden"})}function f(e){var t=o.ContextMenu;if(void 0===e.currentTarget)for(var n=e.srcElement;n;n=n.offsetParent)if(n===i){e.currentTarget=i;break}if(2===e.button&&e.currentTarget===i){for(var r=0,a=0,n=e.srcElement||e.target;n&&n!==i;n=n.offsetParent)r+=n.offsetLeft,a+=n.offsetTop;return w.style(t.element(),{left:e.offsetX+r+"px",top:e.offsetY+a+"px",display:"block"}),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1}}function m(e){var t=o.ContextMenu;w.style(t.element(),{display:"none"})}function g(e){L(e)}function E(e){i.setAttribute("mode",c.config.mode),c.forward(e)}function h(e){var t=o.Controlbar;!t||(t=t.components.definition)&&t.value(e.data.index),L(e)}function v(e){var t,n=o.Controlbar;n&&((t=n.components.timebar)&&(t.duration=e.data.duration,t.progress(isNaN(e.data.duration)?0:e.data.buffered/e.data.duration*100),t.position(isNaN(e.data.duration)?0:e.data.time/e.data.duration*100)),(t=n.components.time)&&(n=b.time2string(e.data.time),r=b.time2string(e.data.duration),t.text(n+"/"+r)));var r=o.Display;r&&r.update("stats",{SeekableRange:e.data.start+"/"+e.data.buffered+" sec.",Buffer:(e.data.buffered-e.data.time).toFixed(3).toLocaleString()+" sec."}),c.forward(e)}function y(e){var t=100*e.data.volume|0;i.setAttribute("muted",e.data.muted||!t);var n=o.Controlbar;n&&(n.resize(a.clientWidth,a.clientHeight),(n=n.components.volumebar)&&(n.position(t),n.thumb(t))),c.forward(e)}function S(e){var t=o.Display;t&&t.update("info",e.data.info),c.forward(e)}function R(e){var t=o.Display;t&&t.update("stats",e.data.stats),c.forward(e)}function C(e){var t=o.Display;t&&t.show(e)}function A(e){var t;!function(){if("SecurityError"===e.data.name)if(-1!==e.data.message.indexOf("toDataURL"))return;return 1}()?c.forward(e):((t=o.Display)&&t.error(e.data),e.type=I.ERROR,L(e),c.stop())}function L(e){i.setAttribute("state",e.type);var t=o.Display;t&&t.state(e.type),c.resize(),c.forward(e)}c.setup=function(e,t){n=e,function(r){"array"!==b.typeOf(r.plugins)&&(r.plugins=[]);for(var e=[],t=0;t<_.plugins.length;t++){var n=_.plugins[t],a=n.prototype.CONF,n=function(e){for(var t=0;t<r.plugins.length;t++){var n=r.plugins[t];if(n.kind===e)return n}return null}(n.prototype.kind);e.push(b.extendz({},a,n))}c.config=b.extendz({id:c.id},B.prototype.CONF,_,r),c.config.plugins=e}(t),i=b.createElement("div",x+" pe-ui-"+c.config.skin),a=b.createElement("div",U),i.appendChild(a),n.appendChild(i),(s=B.get(c.id)).addEventListener(I.BIND,r),s.addEventListener(I.READY,g),s.addEventListener(I.PLAY,L),s.addEventListener(I.WAITING,L),s.addEventListener(D.LOADSTART,c.forward),s.addEventListener(D.PROGRESS,c.forward),s.addEventListener(D.SUSPEND,c.forward),s.addEventListener(D.STALLED,c.forward),s.addEventListener(D.ABORT,c.forward),s.addEventListener(D.TIMEOUT,c.forward),s.addEventListener(I.DURATIONCHANGE,E),s.addEventListener(I.LOADEDMETADATA,c.forward),s.addEventListener(I.LOADEDDATA,c.forward),s.addEventListener(I.CANPLAY,c.forward),s.addEventListener(I.PLAYING,L),s.addEventListener(I.CANPLAYTHROUGH,c.forward),s.addEventListener(I.PAUSE,L),s.addEventListener(I.SEEKING,L),s.addEventListener(I.SEEKED,c.forward),s.addEventListener(I.SWITCHING,h),s.addEventListener(I.SWITCHED,c.forward),s.addEventListener(I.RATECHANGE,c.forward),s.addEventListener(I.TIMEUPDATE,v),s.addEventListener(I.VOLUMECHANGE,y),s.addEventListener(D.LOAD,c.forward),s.addEventListener(k.INFOCHANGE,S),s.addEventListener(k.STATSUPDATE,R),s.addEventListener(I.ENDED,L),s.addEventListener(I.ERROR,A),s.setup(a,c.config),b.forEach(c.config.plugins,function(t,n){if("function"===b.typeOf(V[n.kind]))if(!1!==n.visibility){"Controlbar"!==n.kind||c.config.file||(n.sources=c.config.sources);try{var e=new V[n.kind](n);"function"===b.typeOf(e.addGlobalListener)&&e.addGlobalListener(l),i.appendChild(e.element()),o[n.kind]=e}catch(e){b.error("Failed to initialize plugin: index="+t+", kind="+n.kind+". Error="+e.message)}}else b.log("Component "+n.kind+" is disabled.");else b.error("Unrecognized plugin: index="+t+", kind="+n.kind+".")}),function(){i.setAttribute("mode",c.config.mode),i.setAttribute("state","");var e=o.Controlbar;e?(i.setAttribute("controls",e.config.autohide?"motion":"always"),e.config.autohide&&i.addEventListener("mousemove",p)):i.setAttribute("controls","never");e=o.Danmu;e&&i.setAttribute("danmu",e.config.enable?"on":"off");i.setAttribute("muted",c.config.muted),i.setAttribute("fullpage",!1),i.setAttribute("fullscreen",!1),o.ContextMenu&&(i.oncontextmenu=function(e){return(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1,!1},document.addEventListener("mouseup",f),i.addEventListener("mouseup",f),document.addEventListener("mousedown",m),i.addEventListener("mousedown",m));document.addEventListener("fullscreenchange",u),document.addEventListener("webkitfullscreenchange",u),document.addEventListener("mozfullscreenchange",u),document.addEventListener("MSFullscreenChange",u)}(),c.resize()},c.danmu=function(e){i.setAttribute("danmu",e?"on":"off");var t=o.Controlbar;t&&t.resize(a.clientWidth,a.clientHeight);t=o.Danmu;return!!t&&t.enable(e)},c.shoot=function(e,t){var n=o.Danmu;n&&(n.shoot(e,t),c.dispatchEvent(N.SHOOTING,{text:e,data:t}))},c.displayAD=function(e){var t=o.AD;t&&t.display(e)},c.removeAD=function(){var e=o.AD;e&&e.remove()},c.fullpage=function(e){if(void 0===e)return"true"===i.getAttribute("fullpage");(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)&&c.fullscreen(!1),i.setAttribute("fullpage",!!e),c.resize(),c.dispatchEvent(N.FULLPAGE,{status:e})},c.fullscreen=function(e){if(void 0===e)return"true"===i.getAttribute("fullscreen");var t=s.element();if(e){var n=i.requestFullscreen||i.webkitRequestFullScreen||i.mozRequestFullScreen||i.msRequestFullscreen;if(O.isMobile){if(t&&t.webkitEnterFullscreen&&(t.setAttribute("x5-video-orientation","landscape"),t.webkitEnterFullscreen()),O.isIOS)return}else{if(!n)return void c.fullpage(e);(r=n.call(i))&&r.catch(function(e){b.debug(e.name+": "+e.message)})}}else{n=document.exitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen;if(!n)return void c.fullpage(e);t&&t.setAttribute("x5-video-orientation","portraint"),(r=n.call(document))&&r.catch(function(e){b.debug(e.name+": "+e.message)})}var r=o.Controlbar;r&&(w.style(r.element(),{display:"block"}),e?r.config.autohide||(i.setAttribute("controls","motion"),i.addEventListener("mousemove",p)):r.config.autohide||(i.setAttribute("controls","always"),i.removeEventListener("mousemove",p),d.stop())),i.setAttribute("fullscreen",!!e),c.resize(),c.dispatchEvent(N.FULLSCREEN,{status:e})},c.resize=function(){var e,t,n=a.clientWidth,r=a.clientHeight;""!==c.config.aspectratio&&(t=c.config.aspectratio.match(/(\d+)\:(\d+)/),"array"===b.typeOf(t)&&2<t.length&&(e=parseInt(t[1]),t=parseInt(t[2]),r=n*t/e,"always"===i.getAttribute("controls")&&(r-=40))),b.forEach(o,function(e,t){t.resize(n,r)}),c.dispatchEvent(N.RESIZE,{width:n,height:r})},c.id=e,o={},(d=new b.Timer(3e3,1)).addEventListener(M.TIMER,t)}V.prototype=Object.create(T.prototype),(V.prototype.constructor=V).prototype.CONF=_,V.register=function(t,e){try{_.plugins.splice(e||_.plugins.length,0,t),V[t.prototype.kind]=t}catch(e){b.error("Failed to register plugin "+t.prototype.kind+", Error="+e.message)}},V.get=function(e){null==e&&(e=0);var t=n[e];return void 0===t&&(t=new V(e),n[e]=t),t},e.ui=V.get,e.UI=V}(playease),playease.UI.components={},function(e){var i=e.utils,t=e.events,s=t.EventDispatcher,d=t.MouseEvent,e=e.UI.components;function n(e,t){s.call(this,"Button",null,[d.CLICK]);var n,r,a=this;function o(e){a.dispatchEvent(d.CLICK,{name:n})}a.element=function(){return r},a.resize=function(e,t){},n=e,(r=i.createElement("span","pe-button "+e)).addEventListener("click",o)}((n.prototype=Object.create(s.prototype)).constructor=n).prototype.kind="Button",e.Button=n}(playease),function(e){var a=e.utils,o=e.events.EventDispatcher,e=e.UI.components;function t(e,t){o.call(this,"Label");var n,r;this.text=function(e){return void 0!==e&&(r.innerHTML=e),n},this.element=function(){return r},this.resize=function(e,t){},n=t||"",(r=a.createElement("span","pe-label "+e)).innerHTML=n}((t.prototype=Object.create(o.prototype)).constructor=t).prototype.kind="Label",e.Label=t}(playease),function(e){var o=e.utils,t=e.events,n=t.EventDispatcher,r=t.MouseEvent,e=e.UI.components;function a(){n.call(this,"Preview",null,[r.CLICK]);var e,a;this.append=function(e,t,n){var r=o.createElement("img");r.setAttribute("min",t),r.setAttribute("max",n||NaN),r.src=e,a.appendChild(r)},this.element=function(){return e},this.resize=function(e,t){},e=o.createElement("div","pe-tooltip preview"),a=o.createElement("div"),e.appendChild(a)}((a.prototype=Object.create(n.prototype)).constructor=a).prototype.kind="Preview",e.Preview=a}(playease),function(e){var u=e.utils,l=u.css,t=e.events,p=t.EventDispatcher,f=t.GlobalEvent,e=e.UI.components;function n(e,t){p.call(this,"Select",null,[f.CHANGE]);var n,r,a,o,i,s,d=this;function c(e){e=e.target.getAttribute("value");e!==r&&d.dispatchEvent(f.CHANGE,{name:n,value:e}),s.style.visibility="hidden"}d.append=function(e,t){var n=u.createElement("span","pe-select-menu-option");n.addEventListener("click",c),n.setAttribute("value",t||a.length),n.innerHTML=e,a.push(n),s.appendChild(n),1===a.length&&d.value(n.getAttribute("value"))},d.remove=function(e){for(var t=0;t<a.length;t++){var n=a[t];if(n.getAttribute("value")===e){n.removeEventListener("click",c),s.removeChild(n),a.splice(t,1),r===e&&(r=a.length||NaN,i.innerHTML=a.length?a[0].innerHTML:_placeholder);break}}},d.value=function(e){switch(typeof e){case"number":case"string":for(var t=0;t<a.length;t++){var n=a[t];if(n.getAttribute("value")==e){r=e,i.innerHTML=n.innerHTML,o.setAttribute("value",e),d.resize();break}}}return r},d.element=function(){return o},d.resize=function(e,t){l.style(s,{left:(o.clientWidth-s.clientWidth)/2+"px"})},n=e,r=NaN,a=[],o=u.createElement("div","pe-select "+n),i=u.createElement("span","pe-select-text"),(s=u.createElement("div","pe-select-menu")).style.visibility="hidden",o.appendChild(i),o.appendChild(s),i.addEventListener("click",function(e){s.style.visibility="hidden"===s.style.visibility?"visible":"hidden"})}((n.prototype=Object.create(p.prototype)).constructor=n).prototype.kind="Select",e.Select=n}(playease),function(e){var h=e.utils,v=e.Browser,y=h.css,t=e.events,S=t.EventDispatcher,R=t.GlobalEvent,C=t.MouseEvent,e=e.UI.components,A="pe-slider-rail",L="horizontal";function n(e,t){S.call(this,"Slider",null,[R.CHANGE,C.MOUSE_MOVE]);var n,o,r,a,i,s,d,c,u,l,p=this;function f(e){e.button===(v.isIE8?1:0)&&(e.target||(e.target=e.srcElement),i!==e.target&&i!==e.target.parentNode&&i!==e.target.parentNode.parentNode||((e=E(e.clientX,e.clientY))!==a.getAttribute("value")&&p.dispatchEvent(R.CHANGE,{name:n,value:e}),r=!0))}function m(e){var t=E(e.clientX,e.clientY);i!==e.target&&i!==e.target.parentNode&&i!==e.target.parentNode.parentNode||p.dispatchEvent(C.MOUSE_MOVE,{name:n,value:t}),r&&t!==a.getAttribute("value")&&p.dispatchEvent(R.CHANGE,{name:n,value:t})}function g(e){r&&((e=E(e.clientX,e.clientY))!==a.getAttribute("value")&&p.dispatchEvent(R.CHANGE,{name:n,value:e}),r=!1)}function E(e,t){for(var n=e,r=t,a=i;a;a=a.offsetParent)n-=a.offsetLeft,r-=a.offsetTop;return t=(o===L?n/i.clientWidth*100:r/i.clientHeight*100).toFixed(3),t=Math.max(0,Math.min(t,100))}p.value=function(e){return void 0!==e&&(s.innerHTML=e),s.innerHTML},p.progress=function(e){y.style(c,{width:e+"%"})},p.position=function(e){a.setAttribute("value",e),y.style(u,{width:e+"%"})},p.thumb=function(e){y.style(l,{left:e+"%"})},p.element=function(){return a},p.nonius=function(){return s},p.resize=function(e,t){},function(){switch(n=e,r=!(o=L),a=h.createElement("div","pe-slider "+n),i=h.createElement("div","pe-slider-content"),s=h.createElement("span","pe-tooltip value"),d=h.createElement("span",A+" background"),c=h.createElement("span",A+" progress"),u=h.createElement("span",A+" position"),(l=h.createElement("span","pe-slider-thumb")).innerHTML="<span></span>",i.appendChild(s),i.appendChild(d),i.appendChild(c),i.appendChild(u),i.appendChild(l),a.appendChild(i),e){case"timebar":p.value("--:--");break;case"volumebar":p.value(t),p.position(t),p.thumb(t)}try{document.addEventListener("mousedown",f),document.addEventListener("mousemove",m),document.addEventListener("mouseup",g)}catch(e){document.attachEvent("onmousedown",f),document.attachEvent("onmousemove",m),document.attachEvent("onmouseup",g)}}()}((n.prototype=Object.create(S.prototype)).constructor=n).prototype.kind="Slider",n.HORIZONTAL=L,n.VERTICAL="vertical",e.Slider=n}(playease),function(e){var s=e.utils,d=s.css,t=e.events,c=t.EventDispatcher,u=t.GlobalEvent,e=e.UI.components;function n(e,t){c.call(this,"Panel",null,[u.VISIBILITYCHANGE]);var n,r,a,o,i=this;i.update=function(e){o=s.extendz(o,e);var n="";s.forEach(o,function(e,t){n+=(n?"\n":"")+e+": "+t}),a.innerHTML=n},i.clear=function(){o={},a.innerHTML=""},i.show=function(){"block"!==r.style.display?(d.style(r,{display:"block"}),i.dispatchEvent(u.VISIBILITYCHANGE,{name:n,state:"visible"})):i.hide()},i.hide=function(){d.style(r,{display:"none"}),i.dispatchEvent(u.VISIBILITYCHANGE,{name:n,state:"hidden"})},i.element=function(){return r},i.resize=function(e,t){},n=e,o={},r=s.createElement("div","pe-panel "+n),a=s.createElement("div"),r.appendChild(a)}((n.prototype=Object.create(c.prototype)).constructor=n).prototype.kind="Panel",e.Panel=n}(playease),function(e){var i=e.utils,s=i.css,d=e.events.EventDispatcher,e=e.UI;function t(e){d.call(this,"Poster");var t,n,r=this;function a(e){t.appendChild(n)}function o(e){i.log('Failed to load poster "'+n.src+'".')}r.element=function(){return t},r.resize=function(e,t){},r.config=e,t=i.createElement("div","pe-poster"),(n=new Image).onload=a,n.onabort=o,n.onerror=o,r.config.objectfit&&s.style(n,{"object-fit":r.config.objectfit}),n.src=r.config.file}((t.prototype=Object.create(d.prototype)).constructor=t).prototype.kind="Poster",t.prototype.CONF={kind:"Poster",file:"image/poster.png",objectfit:"fill",visibility:!0},e.register(t)}(playease),function(e){var s=e.utils,d=s.css,t=e.events,n=t.EventDispatcher,c=t.UIEvent,e=e.UI;function r(e){n.call(this,"Danmu",null,[c.SHOOTING]);var r,a,o=this;function i(e){a.removeChild(e.target)}o.enable=function(e){return"boolean"===s.typeOf(e)&&(o.config.enable=e),o.config.enable},o.shoot=function(e,t){var n;o.config.enable&&((n=s.createElement("div","pe-danmu-item")).addEventListener("transitionend",i),n.innerHTML=e,a.appendChild(n),e=r.clientWidth+n.clientWidth,d.style(n,s.extendz({},t,{top:(n.clientWidth,n=Math.floor(r.clientHeight/o.config.lineHeight),Math.floor(Math.random()*n)*o.config.lineHeight+"px"),left:r.clientWidth+"px",transform:"translateX(-"+e+"px)",transition:"transform "+e/o.config.speed+"s linear 0s"})))},o.element=function(){return r},o.resize=function(e,t){},o.config=e,r=s.createElement("div","pe-danmu"),a=s.createElement("div"),r.appendChild(a)}((r.prototype=Object.create(n.prototype)).constructor=r).prototype.kind="Danmu",r.prototype.CONF={kind:"Danmu",speed:100,lineHeight:32,enable:!0,visibility:!0},e.register(r)}(playease),function(e){var d=e.utils,c=d.css,t=e.events,u=t.EventDispatcher,l=t.Event,p=t.MouseEvent,f=t.TimerEvent,e=e.UI,m=e.components,g=/\[([a-z]+)\:([a-z]+)=([^\]]+)?\]/gi;function n(e){u.call(this,"Display",null,[p.CLICK]);var t,n,r,a,i=this;function o(e){var t=30*r.currentCount()%360,n=i.components.waiting;n&&c.style(n.element(),{filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation="+t*Math.PI/180+")",transform:"rotate("+t+"deg)","-o-transform":"rotate("+t+"deg)","-ms-transform":"rotate("+t+"deg)","-moz-transform":"rotate("+t+"deg)","-webkit-transform":"rotate("+t+"deg)"})}function s(e){var t=(new Date).getTime();if(t<=a+700)return a=0,void i.dispatchEvent(p.DOUBLE_CLICK,{name:i.config.ondoubleclick});a=t}i.state=function(e){e===l.WAITING?r.start():r.stop(),e!==l.ERROR&&i.error()},i.error=function(e){var t=i.components.error;t&&(e?(e.name=e.name||"UnknownError",e.message=e.message||"An unknown error occurred.",t.text(e.name+": "+e.message)):t.text(""))},i.update=function(e,t){e=i.components[e];e&&e.update(t)},i.clear=function(e){e=i.components[e];e&&e.clear()},i.show=function(n){d.forEach(i.components,function(e,t){"Panel"===t.kind&&e!==n&&t.hide()});var e=i.components[n];e&&e.show()},i.hide=function(e){e=i.components[e];e&&e.hide()},i.element=function(){return t},i.resize=function(e,t){},i.config=e,i.components={},t=d.createElement("div","pe-display"),(n=d.createElement("div")).addEventListener("click",s),t.appendChild(n),function(){var e;for(;null!==(e=g.exec(i.config.layout));)!function(e,t,n,r){var a,o;try{a=new m[t](n,r),"function"===d.typeOf(a.addGlobalListener)&&a.addGlobalListener(i.forward),o=a.element(),e.appendChild(o),i.components[n]=a}catch(e){return d.error("Failed to initialize component: type="+t+", name="+n+", Error="+e.message)}}(n,e[1],e[2],e[3])}(),(r=new d.Timer(80)).addEventListener(f.TIMER,o),a=0}((n.prototype=Object.create(u.prototype)).constructor=n).prototype.kind="Display",n.prototype.CONF={kind:"Display",layout:"[Button:play=][Button:waiting=][Label:error=][Panel:info=][Panel:stats=]",ondoubleclick:"fullscreen",visibility:!0},e.register(n)}(playease),function(e){var r=e.utils,a=e.events.EventDispatcher,e=e.UI;function t(e){a.call(this,"AD");var t,n=this;n.display=function(e){t.innerHTML="",t.appendChild(e)},n.remove=function(){t.innerHTML=""},n.element=function(){return t},n.resize=function(e,t){},n.config=e,t=r.createElement("div","pe-ad")}((t.prototype=Object.create(a.prototype)).constructor=t).prototype.kind="AD",t.prototype.CONF={kind:"AD",visibility:!0},e.register(t)}(playease),function(e){var r=e.utils,a=e.events.EventDispatcher,e=e.UI;function t(e){a.call(this,"Share");var t,n=this;n.display=function(e){t.innerHTML="",t.appendChild(e)},n.element=function(){return t},n.resize=function(e,t){},n.config=e,t=r.createElement("div","pe-share")}((t.prototype=Object.create(a.prototype)).constructor=t).prototype.kind="Share",t.prototype.CONF={kind:"Share",visibility:!0},e.register(t)}(playease),function(e){var s=e.utils,d=s.css,c=e.events.EventDispatcher,e=e.UI;function t(e){c.call(this,"Logo");var t,n,r,a=this;function o(e){d.style(t,{width:r.width+"px",height:r.height+"px"}),d.style(n,{background:"url("+a.config.file+")"}),n.href=a.config.link,n.target=a.config.target,t.appendChild(n)}function i(e){s.log('Failed to load logo "'+r.src+'".')}a.element=function(){return t},a.resize=function(e,t){},a.config=e,(t=s.createElement("div","pe-logo")).style=a.config.style,n=s.createElement("a"),(r=new Image).onload=o,r.onabort=i,r.onerror=i,r.src=a.config.file}((t.prototype=Object.create(c.prototype)).constructor=t).prototype.kind="Logo",t.prototype.CONF={kind:"Logo",file:"http://studease.cn/images/content/playease-logo.png",link:"https://github.com/studease/playease",target:"_blank",style:"margin: 3% 5%; width: 36px; height: 36px; top: 0px; right: 0px;",visibility:!0},e.register(t)}(playease),function(e){var c=e.utils,u=c.css,l=e.OS,p=e.Browser,t=e.events,r=t.EventDispatcher,a=t.GlobalEvent,f=t.MouseEvent,e=e.UI,m=e.components,o=/\[([a-z]+)\:([a-z]+)=([^\]]+)?\]/gi;function n(e){r.call(this,"Controlbar",null,[a.CHANGE,f.CLICK,f.MOUSE_MOVE]);var t,i,n,s=this;function d(e){var t,n=e.target.element(),r=e.target.nonius(),a=n.clientWidth*e.data.value/100-r.clientWidth/2;switch(e.data.name){case"timebar":e.target.thumb(e.data.value),e.target.duration?(t=e.target.duration*e.data.value/100,e.target.value(c.time2string(t))):e.target.value("--:--");break;case"volumebar":e.target.value(0|e.data.value)}e=a+n.offsetLeft;e<1&&n.offsetParent===i?u.style(r,{left:1-n.offsetLeft+"px",right:"auto"}):n.offsetParent.offsetLeft+e+r.clientWidth>i.clientWidth-1?u.style(r,{left:"auto",right:n.offsetParent.offsetLeft+n.offsetLeft+n.clientWidth+1-i.clientWidth+"px"}):u.style(r,{left:a+"px",right:"auto"})}s.element=function(){return t},s.resize=function(a,o){c.forEach(s.components,function(e,t){switch(t.resize(a,o),e){case"timebar":break;default:if(void 0===t.tooltip)break;var n=t.element(),r=t.tooltip,e=(n.clientWidth-r.clientWidth)/2,t=e+n.offsetLeft;if(t<1&&n.offsetParent===i){u.style(r,{left:1-n.offsetLeft+"px",right:"auto"});break}if(null===n.offsetParent)break;n.offsetParent.offsetLeft+t+r.clientWidth>i.clientWidth-1?u.style(r,{left:"auto",right:n.offsetParent.offsetLeft+n.offsetLeft+n.clientWidth+1-i.clientWidth+"px"}):u.style(r,{left:e+"px",right:"auto"})}})},s.config=e,s.components={},t=c.createElement("div","pe-controlbar"),i=c.createElement("div"),t.appendChild(i),function(){var r=s.config.layout.split("|");if(4!==r.length)throw{name:"DataError",message:"Controlbar should have exactly 4 sections."};var e=c.createElement("div","pe-left"),t=c.createElement("div","pe-center"),n=c.createElement("div","pe-right");c.forEach([i,e,t,n],function(e,t){for(var n;null!==(n=o.exec(r[e]));)!function(e,t,n,r){var a,o,i;switch(n){case"capture":if(l.isIOS&&!p.isSafari)return;break;case"mute":case"unmute":case"volumebar":if(l.isMobile)return;break;case"definition":if(!s.config.sources||s.config.sources.length<2)return}try{a=new m[t](n,r),"function"===c.typeOf(a.addGlobalListener)&&(a.addGlobalListener(s.forward),"Slider"===t&&a.addEventListener(f.MOUSE_MOVE,d)),o=a.element(),e.appendChild(o),s.components[n]=a}catch(e){return c.error("Failed to initialize component: type="+t+", name="+n+", Error="+e.message)}switch(n){case"quote":case"time":case"volumebar":break;default:void 0!==r&&("function"===c.typeOf(m[r])?(i=new m[r],o.insertAdjacentElement("afterbegin",i.element())):((i=c.createElement("span","pe-tooltip")).innerHTML=r,o.insertAdjacentElement("afterbegin",i)),a.tooltip=i)}}(t,n[1],n[2],n[3])}),i.appendChild(e),i.appendChild(t),i.appendChild(n)}(),(n=s.components.definition)&&c.forEach(s.config.sources,function(e,t){n.append(t.label),t.default&&n.value(e)})}((n.prototype=Object.create(r.prototype)).constructor=n).prototype.kind="Controlbar",n.prototype.CONF={kind:"Controlbar",layout:"[Slider:timebar=Preview]|[Button:play=Play][Button:pause=Pause][Button:reload=Reload][Button:stop=Stop][Label:quote=Live broadcast][Label:time=00:00/00:00]||[Button:report=Report][Button:capture=Capture][Button:mute=Mute][Button:unmute=Unmute][Slider:volumebar=80][Select:definition=Definition][Button:danmuoff=Danmu Off][Button:danmuon=Danmu On][Button:fullpage=Fullpage][Button:exitfullpage=Exit Fullpage][Button:fullscreen=Fullscreen][Button:exitfullscreen=Exit Fullscreen]",autohide:!1,visibility:!0},e.register(n)}(playease),function(l){var p=l.utils,f=l.Browser,e=l.events,t=e.EventDispatcher,m=e.MouseEvent,e=l.UI;function n(s){t.call(this,"ContextMenu",null,[m.CLICK]);var d,c,u=this;u.element=function(){return d},u.resize=function(e,t){},function(){u.config=s,u.config.items=[{id:0,mode:"featured",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA2UExURebm5ubm5ubm5ubm5ubm5ubm5ubm5kxpcebm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5rnvS8UAAAASdFJOU/9GGpAEVa0AOw0vovB5tnDaudiwhIIAAACiSURBVBjTXZHbAsQQDERDkQS97P//7GaibLfzgJxgIoiHVHIWvQPysRZylbpg2mhpSwOmgx46kkPf10KMoflewGqLLsNBugXVIDxuZhRuTGrJZmHIXhBuUEIuMC7pJ3I4R9nGyHzCY2eONmWHesMyoQyI3BXncRgZ1M+16zJCSbMRqyT4LriKt2calP9nWkMM7q+GcEo/OFvnGrDIo/Ov7/gCDPoHpWEsixcAAAAASUVORK5CYII=",text:"playease/"+l.VERSION,shortcut:"",handler:function(){window.open("https://github.com/studease/playease")}}].concat("array"===p.typeOf(s.items)?s.items:[]),f.flash&&u.config.items.push({mode:"",icon:"",text:"Flash Version "+f.flash,shortcut:"",handler:function(){window.open("http://get.adobe.com/cn/flashplayer/about/")}}),u.config.items.push({mode:"",icon:"",text:"Show Media Info",shortcut:"",handler:function(){u.dispatchEvent(m.CLICK,{name:"info"})}}),u.config.items.push({mode:"",icon:"",text:"Show Media Stats",shortcut:"",handler:function(){u.dispatchEvent(m.CLICK,{name:"stats"})}}),d=p.createElement("div","pe-contextmenu"),c=p.createElement("table"),d.appendChild(c);for(var e=0;e<u.config.items.length;e++){var t=u.config.items[e],n=p.createElement("tr","pe-contextmenu-item"+(t.mode?" "+t.mode:""));n.onmousedown=t.handler;var r=p.createElement("td");t.icon&&((o=p.createElement("span","pe-contextmenu-item-icon")).innerHTML='<a style="background-image: url('+t.icon+');"></a>',r.appendChild(o));var a=p.createElement("td");t.text&&((o=p.createElement("span","pe-contextmenu-item-text")).innerHTML=t.text,a.appendChild(o));var o,i=p.createElement("td");t.shortcut&&((o=p.createElement("span","pe-contextmenu-item-shortcut")).innerHTML=t.shortcut,i.appendChild(o)),n.appendChild(r),n.appendChild(a),n.appendChild(i),c.appendChild(n)}}()}((n.prototype=Object.create(t.prototype)).constructor=n).prototype.kind="ContextMenu",n.prototype.CONF={kind:"ContextMenu",items:[],visibility:!0},e.register(n)}(playease);