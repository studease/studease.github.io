<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd">
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<title>2048ol - game - studease.cn</title>
	<meta name="robots" content="index, follow" />
    <meta name="keywords" content="2048,html5,game,web game,browser game,online,online web game,网页游戏,在线网页游戏,2048在线版,2048双人对战,在线聊天,聊天交友" />
    <meta name="description" content="This is a online web game 2048. Play with anyone you like." />
	<meta name="author" content="Tony Lau" />
	
	<link rel="shortcut icon" href="../images/favicon.ico">
	<link rel="stylesheet" type="text/css" href="../css/style.css" />
	<link rel="stylesheet" type="text/css" href="../css/2048.css" />
</head>
<body>
<div style='display:none;'>
<svg version="1.1" id="icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1024px" height="1024px" viewBox="0 0 1024 1024" enable-background="new 0 0 1024 1024" xml:space="preserve">
	<path id="icon_card" fill="#8a8989" d="M510.880768 773.1968c-44.54912 0-149.274624-111.919104-149.274624-111.919104s-161.569792 24.809472-217.636864 62.179328c-56.064 37.371904-80.837632 235.392-80.837632 235.392l897.024 0c0 0-16.408576-191.410176-82.397184-235.392-56.068096-37.369856-217.639936-62.179328-217.639936-62.179328S555.322368 773.1968 510.880768 773.1968zM514.353152 86.192128c125.812736 0 227.774464 116.438016 227.774464 260.06016 0 143.619072-101.960704 260.057088-227.774464 260.057088-125.776896 0-227.774464-116.438016-227.774464-260.057088C286.579712 202.631168 388.57728 86.192128 514.353152 86.192128z"></path>
	<path id="icon_location" fill="#8a8989" d="M512.46592 747.408128c-197.216256 0-357.791744-159.056896-357.791744-354.630656 0-33.906688 5.056512-67.731456 14.695424-100.734976 44.480512-177.87392 270.907392-378.620928 344.713216-440.144896 74.708992 62.246912 304.21504 265.554944 345.238528 441.901056l-0.64 0.147456 5.704704 36.21376c3.933184 21.05856 5.59104 42.190848 5.59104 62.616576C869.977088 588.351232 709.632 747.408128 512.46592 747.408128zM517.735424 304.775936c-89.765888 0-162.939904 72.27904-162.939904 161.010688 0 89.05216 73.174016 161.49504 162.939904 161.49504 89.708544 0 162.78528-72.443904 162.78528-161.49504C680.520704 377.054976 607.444992 304.775936 517.735424 304.775936z" transform="translate(0, 812) scale(1, -1)"/>
	<path id="icon_phone" fill="#8a8989" d="M902.4 21.088c8.384 12.928 5.632 30.016-6.272 39.68L732.736 193.76c-5.888 4.672-11.904 7.04-17.984 7.04-11.264 0-20.48-7.68-24.512-12.352l-34.112-35.136c-13.632-13.632-30.528-20.928-48.512-20.928s-36.16 7.168-53.824 21.312c-27.648 22.4-60.416 52.928-91.968 85.632C428.864 271.2 398.08 304.096 375.36 332.064c-27.904 34.816-28.16 73.856-0.576 102.08l36.928 35.776c0.192 0.192 21.184 19.328 3.776 40.96L282.304 674.528c-5.76 7.04-14.208 11.072-23.104 11.072C253.44 685.6 247.68 684 244.16 681.696L239.424 678.112 185.728 627.68l-3.84-4.032c-15.616-20.352-56.96-90.496-42.88-144.384 12.544-47.936 98.752-201.856 218.88-325.056l17.856-17.856c123.392-120.448 277.376-206.656 325.248-219.072 7.36-1.92 15.488-2.944 24.128-2.944 44.224 0 95.744 27.072 118.848 44.736l4.224 3.648 50.24 53.376L902.4 21.088z" transform="translate(0, 812) scale(1, -1)"/>
	<path id="icon_email" fill="#8a8989" d="M153.341 506.874C174.169 495.79 462.6 314.457 473.333 308.75c10.742-5.712 24.651-8.467 38.667-8.467 14.017 0 27.926 2.755 38.667 8.467 10.735 5.707 299.16 187.04 319.994 198.124C891.5 517.948 911.226 556 872.933 556L151.062 556C112.799 556 132.5 517.948 153.341 506.874zM879.482 438.605c-23.666-12.223-314.324-187.649-328.817-195.126-14.499-7.493-24.649-8.467-38.667-8.467-14.016 0-24.165 0.974-38.667 8.467-14.491 7.477-305.133 182.903-328.817 195.126-16.657 8.593-16.516-1.485-16.516-9.27 0-7.787 0-344.84 0-344.84C128 66.797 151.825 44 170.316 44l683.367 0C872.175 44 896 66.797 896 84.496c0 0 0 337.053 0 344.84C896 437.12 896.157 447.199 879.482 438.605z" transform="translate(0, 812) scale(1, -1)"/>
	<path id="icon_top" fill="#ffffff" d="M256 620l512 0 0-64-512 0 0 64ZM256 300 384 300 384 44 640 44 640 300 768 300 512 556Z" transform="translate(0, 812) scale(1, -1)"/>
	<path id="icon_prev" fill="#ffffff" d="M658.29178-191.504117l223.006914 0L398.119373 291.657405 881.298746 812 658.291782 812 175.112507 291.657405 658.29178-191.504117z" transform="translate(0, 812) scale(1, -1)"/>
	<path id="icon_next" fill="#ffffff" d="M881.298746 291.657405 398.119373 812 175.112486 812 658.29178 291.657405 175.112507-191.504117l223.006914 0L881.298746 291.657405z" transform="translate(0, 812) scale(1, -1)"/>
</svg>
</div>

<div class='wrap'>
	<!-- HEADER -->
    <header id='header'>
		<div id='outertopbar'>
			<section id='topbarcontainer'>
				<ul class="left">
					<li><svg viewBox='0 0 1024 1024'><use xlink:href='#icon_card'></use></svg><a>Name: Tony Lau</a></li>
					<li><svg viewBox='0 0 1024 1024'><use xlink:href='#icon_phone'></use></svg><a>Phone: +86 182 2408 8983</a></li>
					<li><svg viewBox='0 0 1024 1024'><use xlink:href='#icon_email'></use></svg><a>Email: 670292548@qq.com</a></li>
				</ul>
				<div class="right">
					<div class="bdsharebuttonbox">
						<a href="#" class="bds_more" data-cmd="more"></a>
						<a href="#" class="bds_qzone" data-cmd="qzone"></a>
						<a href="#" class="bds_tsina" data-cmd="tsina"></a>
						<a href="#" class="bds_tqq" data-cmd="tqq"></a>
						<a href="#" class="bds_sqq" data-cmd="sqq"></a>
						<a href="#" class="bds_renren" data-cmd="renren"></a>
						<a href="#" class="bds_weixin" data-cmd="weixin"></a>
					</div>
				</div>
				<div class="clear"></div>
			</section>
		</div>
		<div class="clear"></div>
		
		<div id='outernavbar'>
			<div id='navbar'>
				<section id='navbarcontainer'>
					<div id="logo" class="frontpage"><a href='/' title="studease.cn">StudEase.cn</a></div>
						<nav>
							<ul id="topnav" class="sf-menu">
								<li><a href="/">HOME</a></li>
								<li><a href="#">STUDY</a>
									<ul>
										<li><a href='https://github.com/studease'>IT</a></li>
									</ul>
								</li>
								<li><a href="#">OPEN</a>
									<ul>
										<li><a href='/open/slicease.html'>slicease.js 2.0</a></li>
										<li><a href='/open/chatease.html'>chatease.js</a></li>
										<li><a href='/open/chatease-server.html'>chatease-server</a></li>
									</ul>
								</li>
								<li><a href="#" class="current">GAME</a>
									<ul>
										<li><a href='/game/2048.html'>2048</a></li>
										<li><a href='/game/2048-online.html'>2048 online</a></li>
									</ul>
								</li>
								<li><a href="#">SUB</a>
									<ul>
										<li><a href='http://py.studease.cn/' target='_blank'>python</a></li>
									</ul>
								</li>
								<li><a href="#">BLOG</a>
									<ul>
										<li><a href='http://blog.csdn.net/icysky1989' target='_blank'>CSDN Blog</a></li>
										<li><a href='http://t.qq.com/lanewalker' target='_blank'>Tencent Weibo</a></li>
										<li><a href='http://weibo.com/u/5308017583' target='_blank'>Sina Weibo</a></li>
										<li><a href='http://lanewalker.blog.163.com' target='_blank'>163 Blog</a></li>
									</ul>
								</li>
								<li><a href="#">CONTACT</a></li>
							</ul>
						</nav>
					<div class="clear"></div>
				</section>
			</div>
		</div>
		<!--<div class="nav-shadow"></div>-->
	</header>
    <!-- END HEADER -->
	
	<!-- MAIN CONTENT -->
    <div id="outermain">
    	<section id="maincontainer">
    		<div class="maincontent">
    			<h1 class="pagetitle">Game: 2048 online</h1>
    			<div id="breadcrumb"><a href="/">HOME</a> >> <a href="#">GAME</a> >> 2048 online</div>
    			
				<div class="gamecontainer online">
					<div class="gamecontent self">
						<div class="scores-container">
							<div class="score-addition"></div>
							Score: 
							<div class="score-container">0</div>
						</div>
						<div class="gameboard">
							<div class="grid-container">
								<div class="grid-row">
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
								</div>
									<div class="grid-row">
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
								</div>
								<div class="grid-row">
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
								</div>
								<div class="grid-row">
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
								</div>
							</div>
							<div class="tile-container"></div>
						</div>
					</div>
					
					<div class="chatcontainer">
						<textarea id="msg-display" readonly="readonly"></textarea>
						<textarea id="msg-input" onkeypress="return onKeyPress(event)"></textarea>
						<a class="button sendbtn " onclick="sendMessage()">Enter</a>
					</div>
					
					<div class="gamecontent puppet">
						<div class="scores-container">
							<div class="score-addition" id="puppet-score-addition"></div>
							Score: 
							<div class="score-container" id="puppet-score-container">0</div>
						</div>
						<div class="gameboard">
							<div class="grid-container">
								<div class="grid-row">
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
								</div>
									<div class="grid-row">
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
								</div>
								<div class="grid-row">
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
								</div>
								<div class="grid-row">
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
									<div class="grid-cell"></div>
								</div>
							</div>
							<div class="tile-container" id="puppet-tile-container"></div>
						</div>
						
						<div class="row">
							<a href="2048.html" class="button aligncenter">Standalone</a>
						</div>
					</div>
					<div class="clear"></div>
				</div>
				<div class="clear"></div>
			</div>
        </section>
    </div>
    <!-- END MAIN CONTENT -->
	
	<!-- FOOTER -->
	<footer id='footer'>
		<div id="outerfooter">
			<section id="footercontainer">
				<ul>
					<li><h5>LINKS</h5>
						<ol class="footerlinks">
							<li><a href="https://github.com/studease/Slicease" target="_blank">Slicease.js</a></li>
							<li><a href="https://github.com/studease/chatease" target="_blank">Chatease.js</a></li>
							<li><a href="https://github.com/studease/chatease-server" target="_blank">Chatease-server</a></li>
							<li><a href="http://share.baidu.com/" target="_blank">Baidu Share</a></li>
							<li><a href="https://code.google.com/p/google-code-prettify" target="_blank">Prettify.js</a></li>
							<li><a href="http://iconfont.cn/" target="_blank">Iconfont</a></li>
							<li><a href="http://blog.csdn.net/icysky1989" target="_blank">CSDN Blog</a></li>
							<li><a href="http://t.qq.com/lanewalker" target="_blank">Tencent Weibo</a></li>
							<li><a href="http://weibo.com/u/5308017583" target="_blank">Sina Weibo</a></li>
							<li><a href="http://lanewalker.blog.163.com/" target="_blank">163 Blog</a></li>
						</ol>
						<div class="clear"></div>
					</li>
					<li><h5>ABOUT ME</h5>
						
						<div class="clear"></div>
					</li>
					<li><h5>CONTACT</h5>
						<ul class="footercontact">
							<li><svg viewBox='0 0 1024 1024'><use xlink:href='#icon_card'></use></svg>
								<a>Name: </a><i>Tony Lau</i>
							</li>
							<li><svg viewBox='0 0 1024 1024'><use xlink:href='#icon_location'></use></svg>
								<a>Address: </a><i>Chengdu, China</i>
							</li>
							<li><svg viewBox='0 0 1024 1024'><use xlink:href='#icon_phone'></use></svg>
								<a>Phone: </a><i>+86 182 2408 8983</i>
							</li>
							<li><svg viewBox='0 0 1024 1024'><use xlink:href='#icon_email'></use></svg>
								<a>Email: </a><i>670292548@qq.com</i>
							</li>
						</ul>
						<div class="clear"></div>
					</li>
				</ul>
				<div class="clear"></div>
			</section>
		</div>
		
		<div id="outercopyright">
			<section id='copyright'>
				<a>Copyright &copy 2014-2016 studease.cn | All Rights Reserved | </a>
				<script type="text/javascript">
					var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
					document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F5750633c14e5050fee9c8f4a1679ab2d' type='text/javascript'%3E%3C/script%3E"));
				</script>
			</section>
		</div>
		
		<div id='scroll-up' title="Back to Top">
			<svg viewBox='0 0 1024 1024'><use xlink:href='#icon_top'></use></svg>
		</div>
	</footer>
	<!-- END FOOTER -->
</div>

<script type="text/javaScript" src="../js/cn/studease/global.js"></script>
<script type="text/javaScript" src="../js/cn/studease/utils/Func.js"></script>
<script type="text/javaScript" src="../js/cn/studease/utils/P.js"></script>
<script type="text/javaScript" src="../js/cn/studease/event/Event.js"></script>
<script type="text/javaScript" src="../js/cn/studease/chat/index.js"></script>
<script type="text/javaScript" src="../js/cn/studease/chat/Client.js"></script>
<script type="text/javaScript" src="../js/cn/studease/chat/Channel.js"></script>
<script type="text/javaScript" src="../js/cn/studease/chat/Request.js"></script>
<script type="text/javaScript" src="../js/cn/studease/chat/socket.io.js"></script>
<script type="text/javaScript" src="../js/cn/studease/2048/Tile.js"></script>
<script type="text/javaScript" src="../js/cn/studease/2048/Grid.js"></script>
<script type="text/javaScript" src="../js/cn/studease/2048/OlGameManager.js"></script>
<script type="text/javascript">
	var URL_SERVER = 'http://14.17.122.168:6688/';
	var IId = String(Math.floor(Math.random()*999));
	var IPwd = '000000';
	var IName = 'user'+IId;
	var IChannels = ['2048'];
	
	var client = new CxChat.Client();
	client.onRaw('IDENT', onIdent);
	client.onRaw('CHANNEL', onChannelInfo);
	client.onRaw('JOIN', onJoin);
	client.onRaw('LEFT', onLeft);
	client.onRaw('SENT', onSent);
	client.onRaw('DATA', onData);
	client.onRaw('USERLIST', onUsers);
	client.onRaw('ERR', onError);
	client.onRaw('2048', onGameMsg);
	client.onRaw('DISCONNECT', onDisconnect);
	
	var gm;
	window.onload = function(){
		client.connect(URL_SERVER, {id:IId, pwd:IPwd});
		
		
		var scroll_btn = document.getElementById('scroll-up');
		if(scroll_btn){
			scroll_btn.onclick = function(){
				var left = document.body.scrollLeft || document.documentElement.scrollLeft;
				window.scrollTo(left, 0);
			};
		}
	};
	
	function onIdent(raws){
		log('onIdent: ' + raws[0].data.user.properties.id
			+ ' - ' + raws[0].data.ssid);
		client.join(IChannels);
	}
	function onChannelInfo(raws){
		log('onChannelInfo: ' + raws[0].data.pipe.properties.name);
		
		if(raws[0].data.pipe.properties.name == '2048'){
			if(gm == null){
				gm = new GameManager(client.req);
				gm.init();
			}
			gm.getReady();
		}
	}
	function onJoin(raws){
		log('User(' + raws[0].data.user.properties.id
			+ ' - ' + raws[0].data.user.pubid
			+ ') joined channel(' + raws[0].data.pipe.properties.name + ').');
	}
	function onLeft(raws){
		log('User(' + raws[0].data.user.properties.id
			+ ' - ' + raws[0].data.user.pubid
			+ ') left channel(' + raws[0].data.pipe.properties.name + ').');
	}
	function onSent(raws){
		log(raws[0].data.user.properties.id
			+ ' @' + (raws[0].data.pipe.properties.name || raws[0].data.pipe.properties.id)
			+ ': ' + raws[0].data.msg);
	}
	function onData(raws){
		log(raws[0].data.user.properties.id
			+ ' @' + (raws[0].data.pipe.properties.name || raws[0].data.pipe.properties.id)
			+ ': ' + raws[0].data.msg);
	}
	function onUsers(raws){
		try{log('onUsers: ' + raws[0].data.toSource());}catch(e){};
	}
	function onError(raws){
		log('Error: ' + raws[0].data.code + ' - ' + raws[0].data.value);
	}
	function onGameMsg(raws){
		//try{log('onGameMsg(' + raws[0].raw + '): ' + raws[0].data.toSource());}catch(e){};
		
		switch(raws[0].raw){
			case 'INIT':
				log('User(' + raws[0].data.puppet.properties.id
				+ ' - ' + raws[0].data.puppet.pubid + ') joins with you.');
			break;
			case 'RANDOM':
				
			break;
			case 'PUPPET':
				
			break;
			case 'RES':
				log('You ' + (raws[0].data.winner.properties.id==IId ? 'win' : 'lose') + '!!'
					+ ' (' + raws[0].data.code + ' - ' + raws[0].data.value + ')');
			break;
			case 'ERR':
				log('Exception: ' + raws[0].data.code + ' - ' + raws[0].data.value);
			break;
		}
		
		gm.onRaw(raws);
	}
	function onDisconnect(){
		log('disconnected');
	}
	
	function sendMessage(message){
		var area = document.getElementById('msg-input');
		var msg = message || area.value;
		
		if(msg.length <= 0){
			log('Please type in message!');
			return;
		}
		else if(msg.length > 40){
			msg = msg.substr(0, 40) + '...';
		}
		
		var channel = client.channels[IChannels[0]];
		channel.send(msg);
		
		clearInput();
	}
	
	function onKeyPress(e){
		var event = window.event || e;
		
		if(event.keyCode != 13){
			return;
		}
		
		if(event.ctrlKey){
			document.getElementById('msg-input').value += '\n';
		}
		else{
			sendMessage();
			
			if(window.event){
				window.event.returnValue = false;
			}
			else{
				event.preventDefault();
			}
		}
	}
	
	function log(msg){
		var area = document.getElementById('msg-display');
		area.value += msg + '\n';
		area.scrollTop = area.scrollHeight;
	}
	function clearInput(){
		var area = document.getElementById('msg-input');
		area.value = '';
	}
	
	window.onscroll = function(){
		var top = document.body.scrollTop || document.documentElement.scrollTop;
		var left = document.body.scrollLeft || document.documentElement.scrollLeft;
		var nav = document.getElementById('navbar');
		if(top > 36){
			nav.style.position = 'fixed';
			nav.style.top = '0px';
			nav.style.left = -left+'px';
		}
		else{
			nav.style.position = 'static';
		}
		
		var scroll_btn = document.getElementById('scroll-up');
		if(top > 50){
			scroll_btn.style.display = 'inline';
		}
		else{
			scroll_btn.style.display = 'none';
		}
	};
</script>
<script>
	window._bd_share_config = {
		"common":{
			"bdSnsKey":{},
			"bdDesc":"一起来玩2048吧，休闲娱乐就要单机畅玩，聊天交友就选双人在线！",
			"bdText":"studsase.cn",
			"bdComment":"（注：需较新版浏览器支持，推荐chrome, opera, safari, firefox，及相应内核的封装版）",
			"bdPic":"http://studease.cn/images/contents/effect-2048.jpg",
			"bdMini":"2","bdStyle":"0","bdSize":"16"
		},
		"share":{},
		"image":{"viewList":["qzone","tsina","tqq","sqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"},
		"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["qzone","tsina","tqq","sqq","renren","weixin"]}
	};
	with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
</body>
</html>
